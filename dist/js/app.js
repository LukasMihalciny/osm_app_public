var osm_app_webpack;(function(){var __webpack_modules__={7401:function(e,t,a){"use strict";var s=a(4634),i=a(6956);class n{init_manager(){if(!this.exit_manager())if(-1!==(0,s.Z)().product_group_id()){if(""===(0,s.Z)().get_session_token()){let e=i.Z.get_cookie(this.c_name("session"));e&&(0,s.Z)().set_session_token(e,!1)}if(-1===(0,s.Z)().current_step()){let e=i.Z.get_cookie(this.c_name("step"));e?(0,s.Z)().change_step(parseInt(e,10)):(0,s.Z)().change_step(1)}}else(0,s.Z)().change_step(111)}update_session(){this.exit_manager()||(i.Z.set_cookie(this.c_name("session"),(0,s.Z)().get_session_token(),14),i.Z.set_cookie(this.c_name("expire"),null,14))}update_step(){this.exit_manager()||i.Z.set_cookie(this.c_name("step"),(0,s.Z)().current_step(),14)}exit_manager(){return!(0,s.Z)().is_cookie_manager_on()||"form_app"!==(0,s.Z)().get_run_mode()}c_name(e){if("session"===e||"step"===e||"expire"===e)return"osm_cookie_"+(0,s.Z)().get_endpoint_type()+"_"+(0,s.Z)().product_group_id()+"_"+e;console.log("Error: wrong cookie type.")}}t["Z"]=new n},6956:function(e,t){"use strict";class a{set_cookie(e,t,a){let s=new Date,i="";if(0===a){let e=new Date,t=new Date;t.setHours(26,0,33),i=t.valueOf()-e.valueOf()}else i=a<0?5e3:24*a*60*60*1e3;s.setTime(s.getTime()+i),null===t&&(t=s.toUTCString()),document.cookie=e+"="+(t||"")+"; expires="+s.toUTCString()+"; path=/;"+this.same_site_secure()}get_cookie(e){let t,a=document.cookie.split("; "),s=a.length;for(t=0;t<s;t++)if(0===a[t].indexOf(e))return a[t].substring(e.length+1)}delete_cookie(e){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/;"+this.same_site_secure()}same_site_secure(){return"https:"===window.location.protocol?" SameSite=None; Secure;":""}}t["Z"]=new a},1825:function(e,t,a){"use strict";a.d(t,{Z:function(){return c}});a(7658),a(2801),a(3767),a(8585),a(8696);var s=a(1958),i=a(4634),n=a(6493),o=a(8250),r=a(8686);class l{zp_person_boolean(e){let t=(0,i.Z)().product_group_id();if(3!==(0,i.Z)().current_step()||3!==t&&4!==t&&7!==t&&73!==t)return!0;let a={3:["hypo_ziadatel_pocet","_osoba"],4:["zp_poistenie_pocetosob","_osoba"],7:["osoby_pocet","_poisteny"],73:["cudzinci_osoby_pocet","_poisteny"]},s=(0,o.Z)().get_call_param(a[t][0]);if(""===s)return!0;s=parseInt(s,10);let n=Object.keys(e)[0],r=n.indexOf(a[t][1])+a[t][1].length,l=n.substring(r,r+2).replace("_","");return l=parseInt(l,10),!!(isNaN(l)||l<=s)}zp_checkboxes_boolean(e){if(4!==(0,i.Z)().product_group_id()||3!==(0,i.Z)().current_step())return!0;if(this.id=Object.keys(e)[0],-1===this.id.indexOf("_dotaznik_odpoved"))return!0;this.type=e[this.id].type;let t=this.id.indexOf("_osoba");this.product_prefix=this.id.substring(0,t);let a=this.id.indexOf("_osoba")+6;this.person_index=this.id.substring(a,a+1),a=this.id.indexOf("_dotaznik_odpoved")+17,this.block_number=this.id.substring(a,a+2),this.block_number=this.block_number.replace("_",""),this.block_number=parseInt(this.block_number,10);let s=(0,o.Z)().get_selected_product().next_contract;return"view_zp_allianz"===s||"view_zp_nn"===s?this.display_blocks_under_this_checkbox():"view_zp_axa"!==s||this.display_blocks_by_checkbox_count()}display_blocks_under_this_checkbox(){let e=this.product_prefix+"_osoba"+this.person_index+"_dotaznik_otazka"+this.block_number,t=(0,o.Z)().get_form_value(e);return"1"===t||(n.Z.purge_helper(this.type,this.id),!1)}display_blocks_by_checkbox_count(){let e="_osoba"+this.person_index+"_dotaznik_otazka",t=(0,o.Z)().all_form_values(),a=0;for(let s in t)t.hasOwnProperty(s)&&-1!==s.indexOf(e)&&"1"===t[s]&&a++;return this.block_number<=a||(n.Z.purge_helper(this.type,this.id),!1)}}var _=new l;class d{serialize_user_input(){let e=(0,o.Z)().all_form_values();return this.serialize_object(e)}serialize_specific_inputs(e){let t,a={},s=e.length;for(t=0;t<s;t++)a[e[t]]=(0,o.Z)().get_user_input(e[t]);return this.serialize_object(a)}serialize_object(e){let t=[];for(let a in e){if(!e.hasOwnProperty(a))continue;let s=encodeURIComponent(a)+"="+encodeURIComponent(e[a]);t.push(s)}return t.join("&")}custom_serialize_form_elements(e){var t,a=[],s=e.target.elements.length;for(t=0;t<s;t++){var i=e.target.elements[t];if(i.name&&"file"!==i.type&&"reset"!==i.type&&"submit"!==i.type&&"button"!==i.type&&"fieldset"!==i.type)if("select-multiple"===i.type)for(var n=0;n<i.options.length;n++)i.options[n].selected&&a.push(encodeURIComponent(i.name)+"="+encodeURIComponent(i.options[n].value));else!0===i.checked&&"radio"===i.type||"radio"!==i.type&&"checkbox"!==i.type?a.push(encodeURIComponent(i.name)+"="+encodeURIComponent(i.value)):"checkbox"===i.type&&!1===i.checked?a.push(encodeURIComponent(i.name)+"=0"):"checkbox"===i.type&&!0===i.checked?a.push(encodeURIComponent(i.name)+"=1"):"radio"!==i.type&&console.log("field value not collected "+i.name)}return a.join("&")}add_token_as_parameter(){var e=(0,i.Z)().get_session_token();return""===e?"":"&token="+e}clear_session(){console.log("clear_session");let e=(0,o.Z)().get_agent_code();(0,o.Z)().$reset(),(0,o.Z)().save_agent_code(e),(0,r.Z)().$reset(),(0,s.Z)().$reset(),(0,i.Z)().set_session_token("",!0),(0,i.Z)().change_step(-77),setTimeout((()=>{(0,i.Z)().change_step(1)}),100)}downloadBase64(e,t,a=null,s="application/pdf"){null==a&&(a=this.base64ToArrayBuffer(t));var i=new Blob([a],{type:s});if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(i,e);else{var n=window.URL.createObjectURL(i),o=document.createElement("a");document.body.appendChild(o),o.href=n,o.download=e,o.click(),window.URL.revokeObjectURL(n),o.remove()}}base64ToArrayBuffer(e){for(var t=window.atob(e),a=t.length,s=new Uint8Array(a),i=0;i<a;i++){var n=t.charCodeAt(i);s[i]=n}return s}active_tab(e){let t=(0,s.Z)().get_form()[e],a={};for(let s in t)t.hasOwnProperty(s)&&n.Z.visibility_boolean(t[s])&&_.zp_person_boolean(t[s])&&_.zp_checkboxes_boolean(t[s])&&(a[s]=t[s]);return a}group_offer(){let e={1:"offer_pzp",2:"offer_kasko",3:"offer_hypoteka",4:"offer_zivot",5:"offer_gap",6:"offer_sporenie",7:"offer_cestovne",8:"offer_zodpovednost",9:"offer_majetok",10:"offer_podnikatelia",72:"offer_sedadla",82:"offer_test",73:"offer_cudzinci",85:"offer_dss",86:"offer_dds",88:"offerzdravotka"},t=(0,i.Z)().product_group_id();return e.hasOwnProperty(t)?e[t]:(console.log("ERROR: undefined product group offer"),"")}slugify(e){const t="àáäâãåăæçčèéëêǵḧìíïîľḿńǹñňòóöôœṕŕßśșšțťùúüûǘẃẍÿýźž·/_,:;",a="aaaaaaaacceeeeghiiiilmnnnnoooooprssssttuuuuuwxyyzz------",s=new RegExp(t.split("").join("|"),"g");return e.toString().toLowerCase().replace(/\s+/g,"-").replace(s,(function(e){return a.charAt(t.indexOf(e))})).replace(/&/g,"-and-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}slugify_keep_extension_add_tag(e,t){let a=e.lastIndexOf("."),s=e.substring(0,a),i=e.substring(a);t&&(s+="-"+t);let n=this.slugify(s);return n+i}ends_with(e,t){return-1!==e.indexOf(t,e.length-t.length)}starts_with(e,t){return 0===e.indexOf(t)}contains_only_digits(e){return/^\d+$/.test(e)}contains_only_letters(e){return"string"===typeof e&&/^[a-zA-Z]+$/.test(e)}first_two_are_letters(e){return/^[a-zA-Z]+$/.test(e.slice(0,2))}keep_only_letters_and_numbers(e){return e.replace(/[^a-zA-Z0-9]/g,"")}first_key(e){if("object"===typeof e)return Object.keys(e)[0]}first_value(e){if("object"===typeof e)return e[Object.keys(e)[0]]}find_key_by_value(e,t){for(var a in e)if(e.hasOwnProperty(a)&&e[a]===t)return a;return""}format_docs_date(e){if(void 0===e||null===e)return"";let t=new Date(e),a=t.getDate()+"."+(t.getMonth()+1)+"."+t.getFullYear();return a}format_car_request_date(e){if(""===e)return;let t=e.split("."),a=t[2]+"-"+t[1]+"-"+t[0];return a}}var c=new d},6493:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var _home_lukas_www_osm_app_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(7327),core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7658),core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0__),_store_STATE_params_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(8250),_logic_Functions_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1825);class Show_hide{constructor(){(0,_home_lukas_www_osm_app_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_3__.Z)(this,"id",""),(0,_home_lukas_www_osm_app_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_3__.Z)(this,"type",""),(0,_home_lukas_www_osm_app_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_3__.Z)(this,"hide_received",""),(0,_home_lukas_www_osm_app_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_3__.Z)(this,"hide_parsed",""),(0,_home_lukas_www_osm_app_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_3__.Z)(this,"field_names",[]),(0,_home_lukas_www_osm_app_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_3__.Z)(this,"hide_replaced",""),(0,_home_lukas_www_osm_app_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_3__.Z)(this,"hide_evaluated","")}visibility_boolean(e){return this.prepare_input(e),""===this.hide_received||(this.parse_condition(),this.get_field_names(),this.replace_conditions_with_input_values(),this.evaluate_condition(),this.purge_value(),!this.hide_evaluated)}prepare_input(e){if(this.id=Object.keys(e)[0],"_block"===this.id){this.hide_received=e[this.id]["block_hide_condition"],this.type={};for(let t in e._block.elements)if(e._block.elements.hasOwnProperty(t))if(_logic_Functions_js__WEBPACK_IMPORTED_MODULE_2__.Z.contains_only_digits(t)){let a=_logic_Functions_js__WEBPACK_IMPORTED_MODULE_2__.Z.first_key(e._block.elements[t]);this.type[a]=e._block.elements[t][a].type}else{let a=t;this.type[a]=e._block.elements[t].type}}else this.hide_received=e[this.id]["data-hide-condition"],this.type=e[this.id]["type"]}parse_condition(){let e=this.hide_received,t=new RegExp("[ ]","g"),a=new RegExp("[=][=]","g"),s=new RegExp("[&][l][t][;]","g"),i=new RegExp("[&][g][t][;]","g"),n=new RegExp("[<]","g"),o=new RegExp("[>]","g"),r=new RegExp("[!]","g"),l=new RegExp("\\+","g"),_=new RegExp("\\-","g"),d=new RegExp("< =","g"),c=new RegExp("> =","g"),u=new RegExp("!=","g"),p=new RegExp("&quot;&quot;","g"),h=new RegExp("&#039;&#039;","g"),m=new RegExp("&quot;","g"),g=new RegExp("[&][a][m][p][;]","g"),f=new RegExp("[&]","g"),b=new RegExp("[|]","g");e=e.replace(t,""),e=e.replace(a," == "),e=e.replace(s,"<"),e=e.replace(i,">"),e=e.replace(n," < "),e=e.replace(o," > "),e=e.replace(r," !"),e=e.replace(l," + "),e=e.replace(_," - "),e=e.replace(d,"<= "),e=e.replace(c,">= "),e=e.replace(u,"!= "),e=e.replace(p,"-1"),e=e.replace(h,"-1"),e=e.replace(m,"'"),e=e.replace(g,"&"),e=e.replace(f," && "),e=e.replace(b," || "),this.hide_parsed=e}get_field_names(){let e=this.hide_parsed,t=[];e=e.split(")").join("&"),e=e.split("(").join("&");let a=e.split(/[\s&|()=<>!]+/);var s=a.length;for(i=s-1;i>=0;i--)""===a[i]&&a.splice(i,1);if(e.indexOf("$")>-1){s=a.length;for(i=0;i<s;i++)0===a[i].indexOf("$")&&t.push(a[i])}else{var i;s=a.length;for(i=0;i<s;i++)i%2===0&&t.push(a[i])}this.field_names=t}replace_conditions_with_input_values(){let e,t=this.hide_parsed,a=this.field_names.length;for(e=0;e<a;e++){let a=this.field_names[e],s=(0,_store_STATE_params_js__WEBPACK_IMPORTED_MODULE_1__.Z)().get_user_input(a.replace("$",""));void 0===s||""===s?s=0:_logic_Functions_js__WEBPACK_IMPORTED_MODULE_2__.Z.contains_only_letters(s)&&(s='"'+s+'"'),t=t.replace(a,s)}this.hide_replaced=t}evaluate_condition(){let condotion_string=this.hide_replaced;try{this.hide_evaluated=eval(condotion_string)}catch(error){error instanceof SyntaxError?(console.log("syntax error",error.message),console.log(this.hide_received," >>>>>> ",condotion_string),this.hide_evaluated=!1):(console.log("probably parsing error, check for missing $",error),console.log(this.hide_received," >>>>>> ",condotion_string),this.hide_evaluated=!1)}}purge_value(){if(!1!==this.hide_evaluated)if("_block"!==this.id)this.purge_helper(this.type,this.id);else for(let e in this.type)this.type.hasOwnProperty(e)&&this.purge_helper(this.type[e],e)}purge_helper(e,t){"radio"!==e&&"checkbox"!==e&&"checkbox_icon"!==e&&"select"!==e&&(0,_store_STATE_params_js__WEBPACK_IMPORTED_MODULE_1__.Z)().delete_form_value(t)}}__webpack_exports__["Z"]=new Show_hide},6806:function(e,t,a){"use strict";a.r(t);var s=a(7327),i=(a(2801),a(1295),a(9963)),n=a(6252),o=a(3577);const r={class:"osm_app_scope","data-cy":"osm_app_dom_root"},l={class:"page_wrap"},_={key:3};function d(e,t,a,s,i,d){const c=(0,n.up)("Flow_sandbox"),u=(0,n.up)("View_switcher"),p=(0,n.up)("Docs_template"),h=(0,n.up)("Modal_switcher");return(0,n.wg)(),(0,n.iD)("div",r,[(0,n._)("div",{class:(0,o.C_)(["container px-0",[d.loading_class,d.skin,d.step_class]])},[(0,n._)("div",l,["node_red"===d.mode?((0,n.wg)(),(0,n.j4)(c,{key:0})):"form_app"===d.mode?((0,n.wg)(),(0,n.j4)(u,{key:1})):"docs_landing"===d.mode?((0,n.wg)(),(0,n.j4)(p,{key:2})):((0,n.wg)(),(0,n.iD)("p",_,"dont have systems for mode "+(0,o.zw)(d.mode),1))]),(0,n.Wm)(h)],2)])}var c=a(4634);const u={key:11};function p(e,t,a,s,i,r){const l=(0,n.up)("Info"),_=(0,n.up)("Progress_bar"),d=(0,n.up)("Step0_offer"),c=(0,n.up)("Step1_groupform"),p=(0,n.up)("Step2_results"),h=(0,n.up)("Step4_proposal"),m=(0,n.up)("Step5_confirm"),g=(0,n.up)("Step6_payment"),f=(0,n.up)("Step99_lukas"),b=(0,n.up)("Step_manager_111"),v=(0,n.up)("Step_error_404"),y=(0,n.up)("Step_maintenance_503");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(l),(0,n.Wm)(_),0===r.step?((0,n.wg)(),(0,n.j4)(d,{key:0})):1===r.step?((0,n.wg)(),(0,n.j4)(c,{key:1})):2===r.step?((0,n.wg)(),(0,n.j4)(p,{key:2})):3===r.step?((0,n.wg)(),(0,n.j4)(c,{key:3})):4===r.step?((0,n.wg)(),(0,n.j4)(h,{key:4})):5===r.step?((0,n.wg)(),(0,n.j4)(m,{key:5})):6===r.step?((0,n.wg)(),(0,n.j4)(g,{key:6})):99===r.step?((0,n.wg)(),(0,n.j4)(f,{key:7})):111===r.step?((0,n.wg)(),(0,n.j4)(b,{key:8})):404===r.step?((0,n.wg)(),(0,n.j4)(v,{key:9})):503===r.step?((0,n.wg)(),(0,n.j4)(y,{key:10})):((0,n.wg)(),(0,n.iD)("p",u,"dont have template for step "+(0,o.zw)(r.step),1))],64)}const h={class:"info_for_session","data-cy":"info"};function m(e,t,a,s,i,r){return(0,n.wg)(),(0,n.iD)("section",h,[(0,n._)("h2",null,(0,o.zw)(r.heading),1),(0,n._)("p",null,(0,o.zw)(r.print_session_token),1),(0,n._)("p",null,(0,o.zw)(r.print_agent_code),1),(0,n._)("p",null,(0,o.zw)(r.print_filtered_products),1)])}var g=a(8250);class f{email_address(){return(0,c.Z)().is_partners_skin()?"poistenie@partnersgroup.sk":"najpoistenie@najpoistenie.sk"}phone_number(e){return e?"+421 905 497 554":"+421 917 535 773"}group_names(){return{1:"Povinné zmluvné poistenie",2:"Havarijné poistenie",3:"Hypotekárny úver",4:"Životné poistenie",5:"GAP poistenie finančnej straty",6:"Investície",7:"Cestovné poistenie",8:"Poistenie zodpovednosti zamestnanca",9:"Poistenie majetku - byt, dom, domácnosť",10:"Poistenie podnikateľov",72:"Sedadlá",73:"Zdravotné poistenie cudzincov",82:"Test",85:"Starobné dôchodkové sporenie",86:"Doplnkové dôchodkové sporenie"}}}var b=new f,v={props:{},components:{},emits:[],data(){return{}},created(){},methods:{},computed:{heading(){if(111===(0,c.Z)().current_step())return"cookie session manager | "+(0,c.Z)().get_endpoint_type();var e=(0,c.Z)().product_group_id();return b.group_names()[e]},print_session_token(){return(0,c.Z)().get_session_token()},print_agent_code(){let e=(0,g.Z)().get_agent_code();return""===e?"-":e},print_filtered_products(){let e=(0,g.Z)().get_filtered_products();return""===e?"-":e}},watch:{}},y=a(3744);const w=(0,y.Z)(v,[["render",m]]);var k=w;const x={key:0,class:"step_progress","data-cy":"progress_bar"},Z=(0,n._)("div",{class:"step_title"}," Základné údaje ",-1),j={key:0,class:"step_tabs"},z=(0,n._)("div",{class:"step_title"}," Porovnanie a výber ",-1),D=(0,n._)("div",{class:"step_title"}," Údaje do zmluvy ",-1),O={key:0,class:"step_tabs"},S=(0,n._)("div",{class:"step_title"}," Zhrnutie ",-1),q=(0,n._)("div",{class:"step_title"}," Hotovo! ",-1);function P(e,t,a,s,i,r){return r.step<10?((0,n.wg)(),(0,n.iD)("div",x,[(0,n._)("div",{class:(0,o.C_)([r.step_info_class(1),"step_info"])},[Z,(0,n._)("div",{onClick:t[0]||(t[0]=e=>r.return_to_the_step(1)),class:"step_number"}," 1 "),1===r.step?((0,n.wg)(),(0,n.iD)("div",j,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.tab_count,(e=>((0,n.wg)(),(0,n.iD)("span",{class:(0,o.C_)(r.step_tab_class(e))},null,2)))),256))])):(0,n.kq)("",!0)],2),(0,n._)("div",{class:(0,o.C_)([r.step_line_class(1),"step_line"])},null,2),(0,n._)("div",{class:(0,o.C_)([r.step_info_class(2),"step_info"])},[z,(0,n._)("div",{onClick:t[1]||(t[1]=e=>r.return_to_the_step(2)),class:"step_number"}," 2 ")],2),(0,n._)("div",{class:(0,o.C_)([r.step_line_class(2),"step_line"])},null,2),(0,n._)("div",{class:(0,o.C_)([r.step_info_class(3),"step_info"])},[D,(0,n._)("div",{onClick:t[2]||(t[2]=e=>r.return_to_the_step(3)),class:"step_number"}," 3 "),3===r.step?((0,n.wg)(),(0,n.iD)("div",O,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.tab_count,(e=>((0,n.wg)(),(0,n.iD)("span",{class:(0,o.C_)(r.step_tab_class(e))},null,2)))),256))])):(0,n.kq)("",!0)],2),(0,n._)("div",{class:(0,o.C_)([r.step_line_class(3),"step_line"])},null,2),(0,n._)("div",{class:(0,o.C_)([r.step_info_class(4),"step_info"])},[S,(0,n._)("div",{onClick:t[3]||(t[3]=e=>r.return_to_the_step(4)),class:"step_number"}," 4 ")],2),(0,n._)("div",{class:(0,o.C_)([r.step_line_class(4),"step_line"])},null,2),(0,n._)("div",{class:(0,o.C_)([r.step_info_class(5),"step_info"])},[q,(0,n._)("div",{onClick:t[4]||(t[4]=e=>r.return_to_the_step(5)),class:"step_number"}," 5 ")],2)])):(0,n.kq)("",!0)}var C=a(1958),T=a(9876),E=(0,T.Q_)("STATE_modals",{state:()=>({opened:{loading:!1,clearance:!1,email:!1,product_detail:!1,where_to_session:!1,calculate_error_in_validate:!1,calculate_error_in_form:!1,calculate_generic_error:!1,confirm_simple_error:!1,session_document_error:!1,global_form_invalid:!1,marketing:!1,marketing_ek:!1,signature_agent:!1,signature_client:!1,cleaning_session:!1,credentials_scan:!1},temporary_data:{}}),getters:{which_is_open(){return()=>{for(let e in this.opened)if(this.opened.hasOwnProperty(e)&&!0===this.opened[e])return e;return null}},retrieve_modal_data(){return()=>this.temporary_data}},actions:{close_them_all(){for(let e in this.opened)this.opened.hasOwnProperty(e)&&(this.opened[e]=!1)},open_it(e){this.opened.hasOwnProperty(e)?(this.close_them_all(),this.opened[e]=!0):console.log("this modal does not exist")},store_modal_data(e){this.temporary_data=e}}}),U={props:{},components:{},emits:[],data(){return{}},created(){},methods:{step_info_class(e){return e<this.step?"completed":e===this.step?"current":""},step_line_class(e){return e<this.step?"completed":e===this.step?"pusher":""},step_tab_class(e){return e<(0,C.Z)().get_tab_page().current?"completed":e===(0,C.Z)().get_tab_page().current?"current":""},return_to_the_step(e){e>=this.step||(this.step>=5?E().open_it("cleaning_session"):(0,c.Z)().change_step(e))}},computed:{step(){return(0,c.Z)().current_step()},tab_count(){return(0,C.Z)().get_tab_page().last}},watch:{}};const M=(0,y.Z)(U,[["render",P]]);var I=M;const R={class:"text-center mt-5"},L=(0,n._)("p",null,"Kontrolujem stav ponuky.",-1);function H(e,t,a,s,i,o){const r=(0,n.up)("Bouncer_loading");return(0,n.wg)(),(0,n.iD)("section",R,[L,(0,n.Wm)(r,{size:"small"})])}var N=a(1825),K=a(8686);class ${constructor(){(0,s.Z)(this,"params",{}),(0,s.Z)(this,"headers",{}),(0,s.Z)(this,"auth_fails",0),(0,s.Z)(this,"auth_max",6)}prepare_params(e){return this.params=e,void 0===this.params.timeout&&(this.params.timeout=25),this.headers={method:this.params.method,mode:"cors",cache:"no-cache",credentials:"omit",headers:{"x-user-scope":(0,c.Z)().give_api_scope(),Authorization:(0,c.Z)().give_bearer(),Accept:"application/json"}},"POST"===this.params.method&&this.params.body&&(this.headers.body=this.params.body),void 0===this.params.content_type?this.headers.headers["Content-Type"]="application/x-www-form-urlencoded":null!==this.params.content_type&&(this.headers.headers["Content-Type"]=this.params.content_type),this}async unauthorized(){let e=(0,c.Z)().get_backend_type();if("php"===e||"np_wp"===e){let e=await window.osm_php_backend.auth_service();return(0,c.Z)().save_bearer(e),!0}if("lukas_local"===e){let e="http://wrapper.local/authorize_frontend/?endpoint_type="+(0,c.Z)().get_endpoint_type();return fetch(e).then((e=>e.json())).then((e=>((0,c.Z)().save_bearer(e),console.log("NEW BEARER:"),console.log(e),!0)))}return"vue"===e?(console.log("VUE does not have 401 auth service, fill access_token into env.js"),!1):"myport"===e?(0,c.Z)().myport_access_token_promise().then((e=>!1!==e&&((0,c.Z)().save_bearer(e),!0))):(console.log("backend_type "+e+" has no access to new authorization"),!1)}async handle_response(){let e=await this.call_the_api_request();if(200===e.status)return this.auth_fails=0,e;if(401===e.status){if(this.auth_fails++,this.auth_fails>this.auth_max)return console.log("Authorization reched maximum attempts. Try to refresh the app or report to admin."),{};let e=await this.unauthorized();return e?await this.prepare_params(this.params).handle_response():null}if(423===e.status)return E().open_it("clearance"),e;if(503===e.status)return(0,c.Z)().change_step(503),e;if(408===e.status)return console.log("408 in request "+this.params.action_name),e;if(500===e.status&&"calculate_step2"===this.params.action_name||422===e.status&&"confirm"===this.params.action_name||422===e.status&&"getsessioninfo"===this.params.action_name||"ico-info"===this.params.action_name||"car-data-search"===this.params.action_name||422===e.status&&"session-remap"===this.params.action_name||422===e.status&&"id-scan/get-scan-groups"===this.params.action_name||(422===e.status||409===e.status)&&"signature-code-check"===this.params.action_name||(422===e.status||409===e.status)&&"signature-code-send"===this.params.action_name||500===e.status&&"id-scan/get-scan-groups"===this.params.action_name||425===e.status&&"id-scan/get-scan-groups"===this.params.action_name||422===e.status&&"getgroupform"===this.params.action_name||422===e.status&&"payment-create"===this.params.action_name)return e;{let t=(new Date).toLocaleString(),a=(0,c.Z)().get_session_token(),s=(0,c.Z)().current_step();return(0,K.Z)().set_last_request(this.headers,this.params,t,a,s,e),(0,c.Z)().change_step(404),e}}call_the_api_request(){return new Promise(((e,t)=>{setTimeout((function(){return e({status:408,statusText:"Request Timeout"})}),1e3*this.params.timeout);let a={};fetch(this.params.url,this.headers).then((e=>(a=e,e.json()))).then((t=>{a.result=t,e(a)}))}))}}var F=$;class V{getform(){let e=(0,c.Z)().current_step();return 1===e?this.get_group_form():3===e?this.get_user_form():void 0}validateform(){let e=(0,c.Z)().current_step();return 1===e?this.validate_group_form():3===e?this.validate_user_form():void 0}get_group_form(){let e={action_name:"getgroupform",method:"GET",url:(0,c.Z)().endpoint_url()+"online/getgroupform/"+(0,c.Z)().product_group_id()+"/?global=2&json=1"};e.url+=N.Z.add_token_as_parameter(),e.url+=(0,g.Z)().agent_code_param();let t=new F;return t.prepare_params(e).handle_response().catch((e=>{throw e}))}validate_group_form(){let e={action_name:"validategroupform",method:"POST",body:N.Z.serialize_user_input(),url:(0,c.Z)().endpoint_url()+"online/validategroupform/"+(0,c.Z)().product_group_id()+"/?global=2&without_form=1"};e.url+=N.Z.add_token_as_parameter(),e.url+=(0,g.Z)().add_filtered_param();let t=new F;return t.prepare_params(e).handle_response().catch((e=>{throw e}))}get_user_form(){let e={action_name:"getform",method:"POST",body:null,url:(0,c.Z)().endpoint_url()+"online/getform/"+(0,g.Z)().get_selected_product().form_id+"/?json=1"};e.url+=N.Z.add_token_as_parameter();let t=new F;return t.prepare_params(e).handle_response().catch((e=>{throw e}))}validate_user_form(){let e={action_name:"validateform",method:"POST",body:N.Z.serialize_user_input(),url:(0,c.Z)().endpoint_url()+"online/validateform/"+(0,g.Z)().get_selected_product().form_id+"/?without_form=1"};e.url+=N.Z.add_token_as_parameter();let t=new F;return t.prepare_params(e).handle_response().catch((e=>{throw e}))}get_global_form(){let e={action_name:"getgroupform",method:"GET",url:(0,c.Z)().endpoint_url()+"online/getgroupform/"+(0,c.Z)().product_group_id()+"/?global=1&json=1"};e.url+=N.Z.add_token_as_parameter();let t=new F;return t.prepare_params(e).handle_response().catch((e=>{throw e}))}validate_global_form(e){let t={action_name:"validategroupform",method:"POST",body:e,url:(0,c.Z)().endpoint_url()+"online/validategroupform/"+(0,c.Z)().product_group_id()+"/?global=1"};t.url+=N.Z.add_token_as_parameter();let a=new F;return a.prepare_params(t).handle_response().catch((e=>{throw e}))}}var A=new V;class W{session_info(){let e={action_name:"getsessioninfo",method:"GET",url:(0,c.Z)().endpoint_url()+"online/getsessioninfo/?"+N.Z.add_token_as_parameter()},t=new F;return t.prepare_params(e).handle_response().catch((e=>{throw e}))}get_data(){let e={action_name:"getdata",method:"GET",url:(0,c.Z)().endpoint_url()+"online/getdata/?"+N.Z.add_token_as_parameter()},t=new F;return t.prepare_params(e).handle_response().catch((e=>{throw e}))}}var B=new W;const Y={class:"spinner"};function G(e,t,a,s,i,r){return(0,n.wg)(),(0,n.iD)("div",Y,[(0,n._)("div",{class:(0,o.C_)(["bounce1",a.size])},null,2),(0,n._)("div",{class:(0,o.C_)(["bounce2",a.size])},null,2),(0,n._)("div",{class:(0,o.C_)(["bounce3",a.size])},null,2)])}var J={props:{size:String},components:{},data(){return{}},created(){},methods:{},computed:{}};const Q=(0,y.Z)(J,[["render",G]]);var X=Q,ee={props:{},components:{Bouncer_loading:X},emits:[],data(){return{}},created(){B.session_info().then((e=>200===e.status&&(!(e.result.state>=100)||((0,c.Z)().change_step(5),!1)))).then((e=>{e&&A.validate_group_form().then((e=>{200===e.status&&(!0===e.result.validform?(0,c.Z)().change_step(2):(0,c.Z)().change_step(1))}))}))},methods:{},computed:{},watch:{}};const te=(0,y.Z)(ee,[["render",H]]);var ae=te;const se={"data-cy":"calc_forms"};function ie(e,t,a,s,i,o){const r=(0,n.up)("Tabs"),l=(0,n.up)("Navigation");return(0,n.wg)(),(0,n.iD)("section",se,[(0,n.Wm)(r,{tab_current:i.tab_current},null,8,["tab_current"]),(0,n.Wm)(l,{onPrev:o.prev_button,onNext:o.next_button,show_back:o.show_back,disable_next:!1},null,8,["onPrev","onNext","show_back"])])}const ne={class:"row mt-4 form-pagination","data-cy":"navigation"},oe={class:"col-12 col-sm-4 text-center text-sm-start order-2 order-sm-1"},re={class:"col-12 col-sm-4 text-center order-3 order-sm-2"},le={class:"col-12 col-sm-4 text-center text-sm-end order-1 order-sm-3"},_e=["disabled","title"];function de(e,t,a,s,o,r){const l=(0,n.up)("Bouncer_loading");return(0,n.wg)(),(0,n.iD)("div",ne,[(0,n._)("div",oe,[a.show_back?((0,n.wg)(),(0,n.iD)("button",{key:0,onClick:t[0]||(t[0]=(...e)=>r.prev&&r.prev(...e)),type:"button",class:"btn btn-light btn-left btn-lg"}," Naspäť ")):(0,n.kq)("",!0)]),(0,n._)("div",re,[(0,n._)("button",{onClick:t[1]||(t[1]=(...e)=>r.clear&&r.clear(...e)),type:"button",class:"btn btn-white btn-lg"}," Vymazať údaje ")]),(0,n._)("div",le,[(0,n.wy)((0,n.Wm)(l,{style:{"margin-top":"18px","margin-right":"50px"}},null,512),[[i.F8,r.is_loading]]),(0,n.wy)((0,n._)("button",{onClick:t[2]||(t[2]=(...e)=>r.next&&r.next(...e)),disabled:a.disable_next,title:a.disable_next?"Pokúšame sa zopakovať požiadavku.":"",type:"button",class:"btn btn-primary btn-right btn-lg"}," Pokračovať ",8,_e),[[i.F8,!r.is_loading]])])])}var ce={props:{show_back:Boolean,disable_next:Boolean},components:{Bouncer_loading:X},emits:["next","prev"],data(){return{}},created(){},methods:{next(){this.$emit("next")},prev(){this.$emit("prev")},clear(){E().open_it("cleaning_session")}},computed:{is_loading(){return"loading"===E().which_is_open()}}};const ue=(0,y.Z)(ce,[["render",de]]);var pe=ue;const he={class:"row","data-cy":"input_tab"};function me(e,t,a,s,i,o){const r=(0,n.up)("Wrap");return(0,n.wg)(),(0,n.iD)("div",he,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.compute_active_tab,((e,t)=>((0,n.wg)(),(0,n.j4)(r,{field_data:o.field_data(e),field_id:o.field_id(e)},null,8,["field_data","field_id"])))),256))])}const ge=["data-hide","data-cy"],fe={class:"validation-placeholder validation-message"},be=(0,n._)("span",{class:"mark-circle mark-orange"},"!",-1),ve={key:0,class:"input-label"},ye=["data-cy"],we={key:1,class:"ttip"},ke=["innerHTML"];function xe(e,t,a,s,i,r){const l=(0,n.up)("Input_switcher");return(0,n.wg)(),(0,n.iD)("div",{class:(0,o.C_)(r.columns),"data-hide":r.hide,"data-cy":"input_wrap-"+a.field_id},[(0,n._)("div",fe,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.has_error,(e=>((0,n.wg)(),(0,n.iD)("span",null,[be,(0,n.Uk)(" "+(0,o.zw)(e),1)])))),256))]),(0,n._)("div",{class:(0,o.C_)([[r.required,r.blank,r.label_size,r.error_class],"input-block d-flex align-items-start align-items-sm-center flex-column"])},[r.label?((0,n.wg)(),(0,n.iD)("div",ve,(0,o.zw)(r.label),1)):(0,n.kq)("",!0),(0,n._)("div",{class:(0,o.C_)([r.input_block_class,"input-area"]),"data-cy":"input-"+a.field_id},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.inputs,((e,t)=>((0,n.wg)(),(0,n.j4)(l,{key:t,field_data:e,field_id:t},null,8,["field_data","field_id"])))),128))],10,ye),r.tooltip?((0,n.wg)(),(0,n.iD)("div",we,[(0,n.Uk)(" ? "),(0,n._)("span",{innerHTML:r.tooltip,class:"ttip_text"},null,8,ke)])):(0,n.kq)("",!0)],2)],10,ge)}a(7658);function Ze(e,t,a,s,i,o){const r=(0,n.up)("Checkbox"),l=(0,n.up)("Plaintext"),_=(0,n.up)("Radio"),d=(0,n.up)("Select"),c=(0,n.up)("Text"),u=(0,n.up)("Textarea"),p=(0,n.up)("Checkbox_icon"),h=(0,n.up)("Datepicker"),m=(0,n.up)("Plus_minus"),g=(0,n.up)("Psc"),f=(0,n.up)("Scan_modal"),b=(0,n.up)("Search"),v=(0,n.up)("Select_searchable"),y=(0,n.up)("Slider");return(0,n.wg)(),(0,n.iD)(n.HY,null,["checkbox"===i.type?((0,n.wg)(),(0,n.j4)(r,{key:0,field_id:a.field_id,field_data:a.field_data},null,8,["field_id","field_data"])):(0,n.kq)("",!0),"plaintext"===i.type?((0,n.wg)(),(0,n.j4)(l,{key:1,field_id:a.field_id,field_data:a.field_data},null,8,["field_id","field_data"])):(0,n.kq)("",!0),"radio"===i.type?((0,n.wg)(),(0,n.j4)(_,{key:2,field_id:a.field_id,field_data:a.field_data},null,8,["field_id","field_data"])):(0,n.kq)("",!0),"select"===i.type?((0,n.wg)(),(0,n.j4)(d,{key:3,field_id:a.field_id,field_data:a.field_data},null,8,["field_id","field_data"])):(0,n.kq)("",!0),"text"===i.type?((0,n.wg)(),(0,n.j4)(c,{key:4,field_id:a.field_id,field_data:a.field_data},null,8,["field_id","field_data"])):(0,n.kq)("",!0),"textarea"===i.type?((0,n.wg)(),(0,n.j4)(u,{key:5,field_id:a.field_id,field_data:a.field_data},null,8,["field_id","field_data"])):(0,n.kq)("",!0),"checkbox_icon"===i.type?((0,n.wg)(),(0,n.j4)(p,{key:6,field_id:a.field_id,field_data:a.field_data},null,8,["field_id","field_data"])):(0,n.kq)("",!0),"date"===i.type?((0,n.wg)(),(0,n.j4)(h,{key:7,field_id:a.field_id,field_data:a.field_data},null,8,["field_id","field_data"])):(0,n.kq)("",!0),"plus_minus"===i.type?((0,n.wg)(),(0,n.j4)(m,{key:8,field_id:a.field_id,field_data:a.field_data},null,8,["field_id","field_data"])):(0,n.kq)("",!0),"psc_input"===i.type?((0,n.wg)(),(0,n.j4)(g,{key:9,field_id:a.field_id,field_data:a.field_data},null,8,["field_id","field_data"])):(0,n.kq)("",!0),"scan_modal"===i.type?((0,n.wg)(),(0,n.j4)(f,{key:10,field_id:a.field_id,field_data:a.field_data},null,8,["field_id","field_data"])):(0,n.kq)("",!0),"search"===i.type?((0,n.wg)(),(0,n.j4)(b,{key:11,field_id:a.field_id,field_data:a.field_data},null,8,["field_id","field_data"])):(0,n.kq)("",!0),"select_searchable"===i.type?((0,n.wg)(),(0,n.j4)(v,{key:12,field_id:a.field_id,field_data:a.field_data},null,8,["field_id","field_data"])):(0,n.kq)("",!0),"slider"===i.type?((0,n.wg)(),(0,n.j4)(y,{key:13,field_id:a.field_id,field_data:a.field_data},null,8,["field_id","field_data"])):(0,n.kq)("",!0)],64)}const je={class:"form-check"},ze=["id","name","disabled"],De=["for"];function Oe(e,t,a,s,r,l){return(0,n.wg)(),(0,n.iD)("div",je,[(0,n.wy)((0,n._)("input",{id:a.field_id,name:a.field_id,"onUpdate:modelValue":t[0]||(t[0]=e=>l.value=e),"true-value":"1","false-value":"0",disabled:a.field_data.disabled,type:"checkbox",class:"form-check-input"},null,8,ze),[[i.e8,l.value]]),(0,n._)("label",{for:a.field_id,class:"form-check-label"},(0,o.zw)(a.field_data.label),9,De)])}var Se={props:{field_id:String,field_data:Object,emit_name:String},components:{},emits:["validate_global_changed","recalculate_product"],data(){return{}},created(){},methods:{},computed:{value:{get(){return void 0!==this.emit_name?(0,g.Z)().get_user_input(this.field_id):(0,g.Z)().get_form_value(this.field_id)},set(e){(0,g.Z)().set_form_value(this.field_id,e),void 0!==this.emit_name&&this.$emit(this.emit_name)}}},watch:{}};const qe=(0,y.Z)(Se,[["render",Oe]]);var Pe=qe;const Ce=["id","name"];function Te(e,t,a,s,i,r){return(0,n.wg)(),(0,n.iD)("p",{id:a.field_id,name:a.field_id},(0,o.zw)(a.field_data.value),9,Ce)}var Ee={props:{field_id:String,field_data:Object},components:{},emits:[],data(){return{}},created(){},methods:{},computed:{},watch:{}};const Ue=(0,y.Z)(Ee,[["render",Te]]);var Me=Ue;const Ie=["name","id","value","disabled"],Re=["for"];function Le(e,t,a,s,r,l){return(0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(this.field_data.enum,((e,s)=>((0,n.wg)(),(0,n.iD)("div",{class:(0,o.C_)(["form-check",l.radio_layout])},[(0,n.wy)((0,n._)("input",{name:a.field_id,id:l.radio_id(e),"onUpdate:modelValue":t[0]||(t[0]=e=>l.value=e),value:l.radio_value(e),disabled:a.field_data.disabled,type:"radio",class:"form-check-input"},null,8,Ie),[[i.G2,l.value]]),(0,n._)("label",{for:l.radio_id(e),class:"form-check-label"},(0,o.zw)(l.radio_label(e)),9,Re)],2)))),256)}let He={props:{},components:{},emits:[],data(){return{combined:{auto_typ_2:"auto_typ",havarijne_auto_typ2:"havarijne_auto_typ",cestovne_uzemna_platnost:"cestovne_krajina"}}},created(){this.change_combined_input()},methods:{change_combined_input(){let e={1:{1:"1",20:"2",33:"3"},2:{1:"1",2:"2",20:"3"},7:{51:"1",210:"2"}},t=(0,c.Z)().product_group_id();e[t]?.[this.cached_dynamic_combo]!==this.value&&""!==this.cached_dynamic_combo&&(this.value=e[t]?.[this.cached_dynamic_combo]||"")}},computed:{cached_dynamic_combo(){return this.combined.hasOwnProperty(this.field_id)?(0,g.Z)().get_form_value(this.combined[this.field_id]):""}},watch:{cached_dynamic_combo(){this.change_combined_input()}}};var Ne=He,Ke={props:{field_id:String,field_data:Object},components:{},emits:[],mixins:[Ne],data(){return{}},created(){},methods:{radio_id(e){return this.field_id+"-"+this.radio_value(e)},radio_label(e){return N.Z.first_value(e)},radio_value(e){return N.Z.first_key(e)}},computed:{radio_layout(){return null===this.field_data.type_settings||void 0===this.field_data.type_settings||"horizontal"===this.field_data.type_settings.radio_layout?"form-check-inline":"icons"===this.field_data.type_settings.radio_layout?"input-button-icon":"vertical"===this.field_data.type_settings.radio_layout?"":"blank"===this.field_data.type_settings.radio_layout?"input-button-blank":"form-check-inline"},value:{get(){return(0,g.Z)().get_form_value(this.field_id)},set(e){(0,g.Z)().set_form_value(this.field_id,e)}}},watch:{}};const $e=(0,y.Z)(Ke,[["render",Le]]);var Fe=$e;const Ve=["id","name","disabled"],Ae=["value"];function We(e,t,a,s,r,l){return(0,n.wy)(((0,n.wg)(),(0,n.iD)("select",{id:a.field_id,name:a.field_id,"onUpdate:modelValue":t[0]||(t[0]=e=>l.value=e),disabled:l.is_disabled,class:"form-control"},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.field_data.enum,((e,t)=>((0,n.wg)(),(0,n.iD)("option",{value:l.option_value(e)},(0,o.zw)(l.option_label(e)),9,Ae)))),256))],8,Ve)),[[i.bM,l.value]])}let Be={props:{},components:{},emits:[],data(){return{combined:{auto_typ:"auto_typ_2",havarijne_auto_typ:"havarijne_auto_typ2",cestovne_krajina:"cestovne_uzemna_platnost"}}},created(){this.change_combined_input()},methods:{change_combined_input(){let e={1:{1:"1",2:"20",3:"33"},2:{1:"1",2:"2",3:"20"},7:{1:"51",2:"210"}},t=(0,c.Z)().product_group_id();e[t]?.[this.cached_dynamic_combo]!==this.value&&""!==this.cached_dynamic_combo&&(this.value=e[t]?.[this.cached_dynamic_combo]||"")}},computed:{cached_dynamic_combo(){return this.combined.hasOwnProperty(this.field_id)?(0,g.Z)().get_form_value(this.combined[this.field_id]):""}},watch:{cached_dynamic_combo(){this.change_combined_input()}}};var Ye=Be,Ge={props:{field_id:String,field_data:Object,emit_name:String},components:{},emits:["validate_global_changed","recalculate_product"],mixins:[Ye],data(){return{loading:!1}},created(){},methods:{option_value(e){let t=Object.keys(e)[0],a=e[t];return"string"===typeof a?t:"object"===typeof a?a.value:void 0},option_label(e){let t=Object.keys(e)[0],a=e[t];return"string"===typeof a?a:"object"===typeof a?a.label:void 0}},computed:{is_disabled(){return!0===this.loading||this.field_data.disabled},value:{get(){return void 0!==this.emit_name?(0,g.Z)().get_user_input(this.field_id):(0,g.Z)().get_form_value(this.field_id)},set(e){(0,g.Z)().set_form_value(this.field_id,e),void 0!==this.emit_name&&this.$emit(this.emit_name)}}},watch:{}};const Je=(0,y.Z)(Ge,[["render",We]]);var Qe=Je;const Xe=["id","name","placeholder","disabled","maxlength","minlength"];function et(e,t,a,s,r,l){return(0,n.wy)(((0,n.wg)(),(0,n.iD)("input",{id:a.field_id,name:a.field_id,"onUpdate:modelValue":t[0]||(t[0]=e=>l.value=e),placeholder:a.field_data.placeholder,disabled:a.field_data.type_settings?.disabled||r.cena_disable,onBlur:t[1]||(t[1]=(...e)=>l.transform_value&&l.transform_value(...e)),maxlength:l.html_attributes(!0),minlength:l.html_attributes(!1),type:"text",class:(0,o.C_)(["form-control",l.transform_class])},null,42,Xe)),[[i.nr,l.value]])}let tt={props:{},components:{},emits:[],data(){return{dynamic:{majetok_podlazie:"majetok_poschodie"}}},created(){},methods:{},computed:{dynamic_parent(){return this.dynamic.hasOwnProperty(this.field_id)?(0,g.Z)().get_form_value(this.dynamic[this.field_id]):null}},watch:{dynamic_parent(){isNaN(this.dynamic_parent)||""===this.dynamic_parent?this.value="":this.value=parseInt(this.dynamic_parent,10)+1}}};var at=tt;class st{car_data_search(e,t){let a={action_name:"car-data-search",method:"GET",url:(0,c.Z)().endpoint_url()+"api/car-data-search/?"+e+"="+t},s=new F;return s.prepare_params(a).handle_response().catch((e=>{throw e}))}ico_info(e){let t={action_name:"ico-info",method:"GET",url:(0,c.Z)().endpoint_url()+"online/ico-info/"+e+"/?type="+(0,c.Z)().product_group_id()},a=new F;return a.prepare_params(t).handle_response().catch((e=>{throw e}))}car_valuation_options(e){let t={action_name:"car-valuation-options",method:"GET",url:(0,c.Z)().endpoint_url()+"api/car-valuation-options/?"+e},a=new F;return a.prepare_params(t).handle_response().catch((e=>{throw e}))}car_valuation_price(e){let t={action_name:"car-valuation-price",method:"GET",url:(0,c.Z)().endpoint_url()+"api/car-valuation-price/?"+e},a=new F;return a.prepare_params(t).handle_response().catch((e=>{throw e}))}}var it=new st;let nt={props:{},components:{},emits:[],data(){return{watched_id:"havarijne_auto_vybava",cena_id:"havarijne_auto_cena",vyroba_id:"havarijne_rokvyroby",cena_date:"havarijne_auto_registracia",cena_required:["havarijne_auto_znacka","havarijne_auto_model","havarijne_objem","havarijne_vykon","havarijne_palivo"],cena_optional:["havarijne_hmotnost","havarijne_rokvyroby","havarijne_auto_prevodovka","havarijne_auto_registracia","havarijne_auto_pocet_sedadiel","havarijne_auto_karoseria"],stanovenie_id:"havarijne_auto_cena_stanovenie"}},created(){this.cena_request()},methods:{cena_request(){if(null===this.cached_listener)return;let e=structuredClone(this.cached_listener),t=(0,g.Z)().get_form_value(this.vyroba_id);if(""===e||""===t)return void(this.cena_disable=!1);this.cena_disable=!0;let a,s={},i=this.cena_required.length;for(a=0;a<i;a++)if(s[this.cena_required[a]]=(0,g.Z)().get_form_value(this.cena_required[a]),""===s[this.cena_required[a]])return;for(i=this.cena_optional.length,a=0;a<i;a++){let e=(0,g.Z)().get_form_value(this.cena_optional[a]);""!==e&&void 0!==e&&(this.cena_optional[a]===this.cena_date&&(e=N.Z.format_car_request_date(e)),s[this.cena_optional[a]]=e)}s[this.watched_id]=e,s=N.Z.serialize_object(s),it.car_valuation_price(s).then((e=>{200===e.status&&(this.value=e.result.data?.[0]?.[this.cena_id])}))}},computed:{cached_listener(){return this.field_id!==this.cena_id?null:(0,g.Z)().get_form_value(this.watched_id)},cached_stanovenie(){return this.field_id!==this.cena_id?null:(0,g.Z)().get_form_value(this.stanovenie_id)}},watch:{cached_listener(){this.cena_request()},cached_stanovenie(){"2"===this.cached_stanovenie&&(this.cena_disable=!1,(0,g.Z)().delete_form_value(this.watched_id))}}};var ot=nt,rt={props:{field_id:String,field_data:Object,emit_name:String},components:{},emits:["validate_global_changed"],mixins:[at,ot],data(){return{cena_disable:!1}},created(){},methods:{transform_value(){"string"===typeof this.value&&this.value!==this.value.trim()&&(this.value=this.value.trim()),"uppercase"===this.field_data.type_settings.transform?this.value=this.value.toUpperCase():"capitalize"===this.field_data.type_settings.transform&&(this.value=this.value.charAt(0).toUpperCase()+this.value.slice(1)),void 0!==this.emit_name&&this.$emit(this.emit_name)},html_attributes(e){return e?this.field_data.attributes?.maxlength||50:this.field_data.attributes?.minlength||0}},computed:{transform_class(){return"uppercase"===this.field_data.type_settings.transform?"text_uppercase":"capitalize"===this.field_data.type_settings.transform?"text_capitalize":""},value:{get(){return void 0!==this.emit_name?(0,g.Z)().get_user_input(this.field_id):(0,g.Z)().get_form_value(this.field_id)},set(e){(0,g.Z)().set_form_value(this.field_id,e)}}},watch:{}};const lt=(0,y.Z)(rt,[["render",et]]);var _t=lt;const dt=["id","name","placeholder","disabled","rows"];function ct(e,t,a,s,o,r){return(0,n.wy)(((0,n.wg)(),(0,n.iD)("textarea",{id:a.field_id,name:a.field_id,"onUpdate:modelValue":t[0]||(t[0]=e=>r.value=e),placeholder:a.field_data.placeholder,disabled:a.field_data.type_settings?.disabled,rows:r.area_rows,class:"form-control"},null,8,dt)),[[i.nr,r.value]])}var ut={props:{field_id:String,field_data:Object},components:{},emits:[],data(){return{}},created(){},methods:{},computed:{area_rows(){let e=this.field_data.wrapper_attrs.match(/rows="(.*?)"/)?.[0].replace('rows="',"").replace('"',"");return void 0===e?3:e},value:{get(){return(0,g.Z)().get_form_value(this.field_id).replace(/\t/g,"").replace(/&#10;/g,"\n")},set(e){(0,g.Z)().set_form_value(this.field_id,e)}}},watch:{}};const pt=(0,y.Z)(ut,[["render",ct]]);var ht=pt;const mt={class:"form-check input-button-icon"},gt=["id","name"],ft=["for"];function bt(e,t,a,s,r,l){return(0,n.wg)(),(0,n.iD)("div",mt,[(0,n.wy)((0,n._)("input",{class:(0,o.C_)(l.icon_class),type:"checkbox",id:a.field_id,name:a.field_id,"onUpdate:modelValue":t[0]||(t[0]=e=>l.value=e),"true-value":"1","false-value":"0"},null,10,gt),[[i.e8,l.value]]),(0,n._)("label",{for:a.field_id},(0,o.zw)(l.checkbox_label),9,ft)])}var vt={props:{field_id:String,field_data:Object},components:{},emits:[],data(){return{}},created(){},methods:{},computed:{checkbox_label(){return this.field_data.label},icon_class(){return this.field_data.wrapper_attrs},value:{get(){return(0,g.Z)().get_form_value(this.field_id)},set(e){(0,g.Z)().set_form_value(this.field_id,e)}}},watch:{}};const yt=(0,y.Z)(vt,[["render",bt]]);var wt=yt;const kt=["id","name"],xt={key:0},Zt={class:"cell week_days"},jt=["onClick"],zt={key:1},Dt=["onClick"],Ot={key:2},St=["onClick"];function qt(e,t,a,s,r,l){return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.wy)((0,n._)("input",{id:a.field_id,name:a.field_id,"onUpdate:modelValue":t[0]||(t[0]=e=>l.value=e),onFocus:t[1]||(t[1]=(...e)=>l.open_calendar&&l.open_calendar(...e)),onBlur:t[2]||(t[2]=(...e)=>l.close_calendar&&l.close_calendar(...e)),onKeyup:t[3]||(t[3]=(0,i.D2)((0,i.iM)(((...e)=>l.close_calendar&&l.close_calendar(...e)),["prevent"]),["enter"])),ref:"input_reference",class:"form-control input-datepicker",type:"text"},null,40,kt),[[i.nr,l.value]]),(0,n.wy)((0,n._)("div",{class:(0,o.C_)(["datepicker",r.aligned_to_top?"aligned_to_top":""])},[(0,n._)("div",{class:"calendar",onMouseenter:t[7]||(t[7]=e=>r.mouse_inside_calendar=!0),onMouseleave:t[8]||(t[8]=e=>r.mouse_inside_calendar=!1),onClick:t[9]||(t[9]=(...t)=>e.keep_focus&&e.keep_focus(...t))},[(0,n._)("header",null,[(0,n._)("span",{class:"prev",onClick:t[4]||(t[4]=(...e)=>l.prev&&l.prev(...e))}," ‹ "),(0,n._)("span",{class:"go_up",onClick:t[5]||(t[5]=(...e)=>l.go_up&&l.go_up(...e))},(0,o.zw)(l.up_the_text),1),(0,n._)("span",{class:"next",onClick:t[6]||(t[6]=(...e)=>l.next&&l.next(...e))}," › ")]),0===r.calendar_type?((0,n.wg)(),(0,n.iD)("div",xt,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.construct_week,(e=>((0,n.wg)(),(0,n.iD)("span",Zt,(0,o.zw)(e),1)))),256)),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.construct_days,(t=>((0,n.wg)(),(0,n.iD)("span",{onClick:e=>l.day_picked(t),class:(0,o.C_)(["cell day",[l.this_day(t)?"today":"",0===t?"blank":"",l.picked_day(t)?"picked":"",e.is_before_disabled_day(t)?"date_disabled":"",t<0||t>100?"other_month":""]])},(0,o.zw)(0===t?"":t>100?t-100:t<0?Math.abs(t):t),11,jt)))),256))])):(0,n.kq)("",!0),1===r.calendar_type?((0,n.wg)(),(0,n.iD)("div",zt,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.construct_months,((t,a)=>((0,n.wg)(),(0,n.iD)("span",{onClick:e=>l.month_picked(t),class:(0,o.C_)(["cell month",[t===l.this_month?"today":"",e.is_before_disabled_month(t)?"date_disabled":""]])},(0,o.zw)(a),11,Dt)))),256))])):(0,n.kq)("",!0),2===r.calendar_type?((0,n.wg)(),(0,n.iD)("div",Ot,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.construct_years,(t=>((0,n.wg)(),(0,n.iD)("span",{onClick:e=>l.year_picked(t),class:(0,o.C_)(["cell year",[t===l.this_year?"today":"",e.is_before_disabled_year(t)?"date_disabled":""]])},(0,o.zw)(t),11,St)))),256))])):(0,n.kq)("",!0)],32)],2),[[i.F8,r.is_opened||r.debug_keep_open]])],64)}a(541);class Pt{default_shown(e){let t=/^\d{1,2}\.\d{1,2}\.\d{4}$/;""===e||t.test(e)||(e="");let a={};return""===e?a=new Date:(e=e.split("."),a=new Date(e[2],e[1]-1,e[0])),{day:a.getDate(),month:a.getMonth()+1,year:a.getFullYear(),decade:10*Math.floor(a.getFullYear()/10)-10}}construct_days(e,t){let a=new Date(e,t,0).getDate(),s=[];var i;for(i=1;i<a+1;i++)s.push(i);let n=new Date(e,t-1,1).getDay(),o=null;o=0===n?n+6:n-1;let r=new Date(e,t-1,0).getDate();for(i=0;i<o;i++)s.unshift(-r+i);let l=new Date(e,t,0).getDay(),_=null;_=0===l?0:7-l;let d=Math.ceil(s.length/7);for(d<6&&(_+=7),i=0;i<_;i++)s.push(100+i+1);return s}construct_week(){return["Pon","Ut","Str","Štv","Pia","Sob","Ned"]}construct_months(){return{"Január":1,"Február":2,Marec:3,"Apríl":4,"Máj":5,"Jún":6,"Júl":7,August:8,September:9,"Október":10,November:11,December:12}}show_month_name(e){let t=this.construct_months();for(let a in t)if(t.hasOwnProperty(a)&&t[a]===e)return a;return"no month found"}construct_years(e){let t,a=[];for(t=e;t<e+30;t++)a.push(t);return a}}var Ct=new Pt;let Tt={props:{},components:{},emits:[],data(){return{ranges:[{from:"cestovne_datum_odchodu",till:"cestovne_datum_prichodu"},{from:"cudzinci_zaciatokpoistenia",till:"cudzinci_koniecpoistenia"}],disable_before:{day:0,month:0,year:0}}},created(){let e,t=this.ranges.length;for(e=0;e<t;e++)this.field_id===this.ranges[e].from&&(this.disable_before=Ct.default_shown("")),this.field_id===this.ranges[e].till&&(this.disable_before=Ct.default_shown(this.parent_value))},methods:{is_before_disabled_day(e){return 0!==e&&0!==this.disable_before.year&&(this.shown.year<this.disable_before.year||this.shown.year===this.disable_before.year&&this.shown.month<this.disable_before.month||this.shown.year===this.disable_before.year&&this.shown.month===this.disable_before.month&&e<this.disable_before.day)},is_before_disabled_month(e){return 0!==this.disable_before.year&&(this.shown.year<this.disable_before.year||this.shown.year===this.disable_before.year&&e<this.disable_before.month)},is_before_disabled_year(e){return 0!==this.disable_before.year&&e<this.disable_before.year},range_child_cant_start_before_parents_value(){return null===this.parent_value?this.value:this.picked.year<this.disable_before.year||this.picked.year===this.disable_before.year&&this.picked.month<this.disable_before.month?this.parent_value:this.value}},computed:{parent_value(){let e,t=this.ranges.length;for(e=0;e<t;e++)return this.field_id===this.ranges[e].till?(0,g.Z)().get_form_value(this.ranges[e].from):null}},watch:{parent_value(){null!==this.parent_value&&(this.disable_before=Ct.default_shown(this.parent_value))}}};var Et=Tt,Ut={props:{field_id:String,field_data:Object,emit_name:String},components:{},emits:["validate_global_changed","recalculate_product"],mixins:[Et],data(){return{is_opened:!1,calendar_type:void 0,mouse_inside_calendar:!1,aligned_to_top:!1,oldies:!1,shown:{day:0,month:0,year:0,decade:0},picked:{day:0,month:0,year:0,decade:0},debug_keep_open:!1}},created(){"years_first"===this.field_data?.type_settings?.calendar_type||"no_value_show_oldies"===this.field_data?.type_settings?.calendar_type?this.calendar_type=2:this.calendar_type=0,"no_value_show_oldies"===this.field_data?.type_settings?.calendar_type&&""===this.value&&(this.oldies=!0),this.picked=Ct.default_shown(this.value)},mounted(){},methods:{prev(){2===this.calendar_type?this.shown.decade-=30:1===this.calendar_type?this.shown.year--:0===this.calendar_type&&(1===this.shown.month?(this.shown.month=12,this.shown.year--):this.shown.month--)},next(){2===this.calendar_type?this.shown.decade+=30:1===this.calendar_type?this.shown.year++:0===this.calendar_type&&(12===this.shown.month?(this.shown.month=1,this.shown.year++):this.shown.month++)},go_up(){2!==this.calendar_type&&this.calendar_type++},day_picked(e){0!==e&&(this.is_before_disabled_day(e)||(e<0&&(this.prev(),e=Math.abs(e)),e>100&&(this.next(),e-=100),this.shown.day=e,this.picked=this.shown,this.update_input(),this.is_opened=!1))},month_picked(e){this.is_before_disabled_month(e)||(this.shown.month=e,this.calendar_type--)},year_picked(e){this.is_before_disabled_year(e)||(this.shown.year=e,this.calendar_type--)},update_input(){let e=this.picked.day.toString().padStart(2,"0"),t=this.picked.month.toString().padStart(2,"0"),a=this.picked.year.toString();this.value=e+"."+t+"."+a},open_calendar(){let e=this.range_child_cant_start_before_parents_value();this.shown=Ct.default_shown(e),this.oldies&&this.prev(),this.is_opened=!0,this.check_the_space_bellow()},close_calendar(e){null===e.relatedTarget&&this.mouse_inside_calendar||(this.picked=Ct.default_shown(this.value),this.update_input(),this.calendar_type=0,this.is_opened=!1)},check_the_space_bellow(){let e=window.innerHeight,t=this.$refs.input_reference.getBoundingClientRect().bottom,a=340;this.aligned_to_top=e-t<a},this_day(e){let t,a,s=new Date;return e<0?(1===this.shown.month?(t=12,a=this.shown.year-1):(t=this.shown.month-1,a=this.shown.year),e=Math.abs(e)):e>100?(12===this.shown.month?(t=1,a=this.shown.year+1):(t=this.shown.month+1,a=this.shown.year),e-=100):(t=this.shown.month,a=this.shown.year),s.getMonth()+1===t&&s.getFullYear()===a&&s.getDate()===e},picked_day(e){if(""===this.value)return!1;let t,a;return e<0?(1===this.shown.month?(t=12,a=this.shown.year-1):(t=this.shown.month-1,a=this.shown.year),e=Math.abs(e)):e>100?(12===this.shown.month?(t=1,a=this.shown.year+1):(t=this.shown.month+1,a=this.shown.year),e-=100):(t=this.shown.month,a=this.shown.year),this.picked.month===t&&this.picked.year===a&&this.picked.day===e}},computed:{construct_days(){return Ct.construct_days(this.shown.year,this.shown.month)},construct_week(){return Ct.construct_week()},construct_months(){return Ct.construct_months()},construct_years(){return Ct.construct_years(this.shown.decade)},this_month(){let e=new Date;return e.getFullYear()===this.shown.year?e.getMonth()+1:null},this_year(){return(new Date).getFullYear()},up_the_text(){return 0===this.calendar_type?Ct.show_month_name(this.shown.month)+" "+this.shown.year:1===this.calendar_type?this.shown.year:2===this.calendar_type?this.shown.decade+" - "+(this.shown.decade+29):"should not occur"},value:{get(){return void 0!==this.emit_name?(0,g.Z)().get_user_input(this.field_id):(0,g.Z)().get_form_value(this.field_id)},set(e){(0,g.Z)().set_form_value(this.field_id,e),void 0!==this.emit_name&&this.$emit(this.emit_name)}}},watch:{}};const Mt=(0,y.Z)(Ut,[["render",qt]]);var It=Mt;const Rt={class:"input-group input-counter"},Lt={class:"input-group-prepend"},Ht=["id","name"],Nt={class:"input-group-append"};function Kt(e,t,a,s,o,r){return(0,n.wg)(),(0,n.iD)("div",Rt,[(0,n._)("div",Lt,[(0,n._)("a",{onClick:t[0]||(t[0]=e=>r.substract()),class:"input-group-btn btn-minus"})]),(0,n.wy)((0,n._)("input",{id:a.field_id,name:a.field_id,"onUpdate:modelValue":t[1]||(t[1]=e=>r.value=e),maxlength:"3",type:"text",class:"form-control"},null,8,Ht),[[i.nr,r.value]]),(0,n._)("div",Nt,[(0,n._)("a",{onClick:t[2]||(t[2]=e=>r.add()),class:"input-group-btn btn-plus"})])])}var $t={props:{field_id:String,field_data:Object},components:{},data(){return{min:0,max:9}},created(){this.min=this.field_data.type_settings?.plus_minus_min||0,this.max=this.field_data.type_settings?.plus_minus_max||1e3},methods:{add(){this.value>=this.max||(this.value++,(0,g.Z)().set_form_value(this.field_id,this.value))},substract(){this.value<=this.min||(this.value--,(0,g.Z)().set_form_value(this.field_id,this.value))}},computed:{value:{get(){return(0,g.Z)().get_form_value(this.field_id)},set(e){(0,g.Z)().set_form_value(this.field_id,e)}}},watch:{}};const Ft=(0,y.Z)($t,[["render",Kt]]);var Vt=Ft;const At={class:"input-autocomplete"},Wt=["id","name","placeholder"],Bt={key:0},Yt=["onClick"];function Gt(e,t,a,s,r,l){return(0,n.wg)(),(0,n.iD)("div",At,[(0,n.wy)((0,n._)("input",{id:a.field_id,name:a.field_id,placeholder:a.field_data.placeholder,"onUpdate:modelValue":t[0]||(t[0]=e=>r.value=e),onKeyup:t[1]||(t[1]=(...e)=>l.psc_user_worker&&l.psc_user_worker(...e)),onKeydown:[t[2]||(t[2]=(0,i.D2)(((...e)=>l.move_down&&l.move_down(...e)),["down"])),t[3]||(t[3]=(0,i.D2)(((...e)=>l.move_up&&l.move_up(...e)),["up"])),t[4]||(t[4]=(0,i.D2)(((...e)=>l.enter_selection&&l.enter_selection(...e)),["enter"]))],onChange:t[5]||(t[5]=(...e)=>l.store_changed_psc&&l.store_changed_psc(...e)),ref:"psc_input",type:"text",class:"form-control",maxlength:"50"},null,40,Wt),[[i.nr,r.value]]),(0,n.wy)((0,n._)("ul",null,[r.loading?((0,n.wg)(),(0,n.iD)("li",Bt," Načítavam... ")):((0,n.wg)(!0),(0,n.iD)(n.HY,{key:1},(0,n.Ko)(l.filtered_options,((e,t)=>((0,n.wg)(),(0,n.iD)("li",{class:(0,o.C_)(t===r.selected?"active_autocomplete":""),onClick:t=>l.click_selection(e)},(0,o.zw)(e),11,Yt)))),256))],512),[[i.F8,r.shown]])])}class Jt{auto_model_table(e,t){let a=(0,C.Z)().get_form(),s={};for(let o in a)if(a.hasOwnProperty(o))for(let t in a[o]){if(!a[o].hasOwnProperty(t))continue;let i=Object.keys(a[o][t])[0];if(i!==e)continue;let n=a[o][t][i].enum;for(let e in n){if(!n.hasOwnProperty(e))continue;let t=Object.keys(n[e])[0],a=n[e][t];"object"===typeof a&&(a=a.label),s[t]=a}}let i={action_name:"reference_table_get",method:"GET",url:(0,c.Z)().endpoint_url()+"online/reference_table_get/?table_token=c_test_auto_model&ematch="+s[t]},n=new F;return n.prepare_params(i).handle_response().catch((e=>{throw e}))}psc_table(e){let t={action_name:"reference_table_get",method:"GET",url:(0,c.Z)().endpoint_url()+"online/reference_table_get/?table_token=c_test_psc&filter="+e},a=new F;return a.prepare_params(t).handle_response().catch((e=>{throw e}))}}var Qt=new Jt,Xt={props:{field_id:String,field_data:Object},components:{},emits:[],data(){return{value:"",options_stored:!1,loading:!1,options:[],selected:-1,shown:!1}},created(){this.value=this.get_session_value},methods:{psc_user_worker(e){let t=e?.keyCode;if((t<48||t>106)&&229!==t&&8!==t&&void 0!==t)return;let a=this.value.length;a<3?this.options_stored=!1:(!1===this.options_stored&&(this.options_stored=!0,this.get_psc_options()),this.shown=!0,8!==t&&setTimeout((()=>{1===this.filtered_options.length&&(this.value=this.filtered_options[0],this.shown=!1,(0,g.Z)().set_form_value(this.field_id,this.value))}),1e3))},get_psc_options(){this.loading=!0,Qt.psc_table(this.value).then((e=>{if(this.loading=!1,200!==e.status)return;let t=e.result.data;this.options=[];for(let a in t)t.hasOwnProperty(a)&&this.options.push(t[a]);this.$nextTick((()=>{this.$refs.psc_input.focus()}))}))},move_down(){this.selected++,this.selected>this.filtered_options.length-1&&(this.selected=0)},move_up(){this.selected--,this.selected<0&&(this.selected=this.filtered_options.length-1)},enter_selection(){-1!==this.selected&&(this.value=this.filtered_options[this.selected],this.shown=!1,(0,g.Z)().set_form_value(this.field_id,this.value))},click_selection(e){this.value=e,this.shown=!1,(0,g.Z)().set_form_value(this.field_id,this.value)},store_changed_psc(){(0,g.Z)().set_form_value(this.field_id,this.value)}},computed:{filtered_options(){let e,t=[],a=this.options.length;for(e=0;e<a;e++){let a=N.Z.slugify(this.options[e]),s=N.Z.slugify(this.value);-1!==a.indexOf(s)&&t.push(this.options[e])}return t},get_session_value(){return(0,g.Z)().get_form_value(this.field_id)}},watch:{get_session_value(){this.value!==this.get_session_value&&(this.value=this.get_session_value,this.options_stored=!1,this.psc_user_worker())}}};const ea=(0,y.Z)(Xt,[["render",Gt]]);var ta=ea;const aa={class:"input-group input-modal-trigger"},sa=["id","name"],ia={class:"input-group-append"};function na(e,t,a,s,i,r){return(0,n.wg)(),(0,n.iD)("div",aa,[(0,n._)("p",{id:a.field_id,name:a.field_id,class:"form-control"},(0,o.zw)(a.field_data.placeholder),9,sa),(0,n._)("div",ia,[(0,n._)("span",{onClick:t[0]||(t[0]=(...e)=>r.open_modal_credentials_scan&&r.open_modal_credentials_scan(...e)),class:"input-upload-icon"})])])}var oa={props:{field_id:String,field_data:Object},components:{},emits:[],data(){return{}},created(){},methods:{open_modal_credentials_scan(){E().open_it("credentials_scan")}},computed:{},watch:{}};const ra=(0,y.Z)(oa,[["render",na]]);var la=ra;const _a={class:"input-group"},da=["id","name","placeholder"],ca={class:"input-group-append"};function ua(e,t,a,s,r,l){return(0,n.wg)(),(0,n.iD)("div",_a,[(0,n.wy)((0,n._)("input",{id:a.field_id,name:a.field_id,"onUpdate:modelValue":t[0]||(t[0]=e=>l.value=e),onKeyup:t[1]||(t[1]=(...e)=>l.run_search&&l.run_search(...e)),placeholder:a.field_data.placeholder,type:"text",maxlength:"17",class:"form-control input-search"},null,40,da),[[i.nr,l.value]]),(0,n._)("div",ca,[(0,n._)("span",{onClick:t[2]||(t[2]=(...e)=>l.run_search&&l.run_search(...e)),class:"input-search-icon"})]),(0,n.wy)((0,n._)("span",{class:"search_input_error ms-2"},(0,o.zw)(r.error_message),513),[[i.F8,r.error_message]])])}var pa={props:{field_id:String,field_data:Object},components:{},emits:[],data(){return{error_message:""}},created(){},methods:{run_search(e){if("keyup"===e.type&&13!==e.keyCode)return;this.value=N.Z.keep_only_letters_and_numbers(this.value),this.value=this.value.toUpperCase();let t="";if(N.Z.ends_with(this.field_id,"company_search")){if(t="ico",8!==this.value.length||!N.Z.contains_only_digits(this.value))return void this.create_search_error("Zadajte 8 miestne číslo.")}else{if(!N.Z.ends_with(this.field_id,"auto_search"))return void console.log("running on wrong ID");if(7===this.value.length&&N.Z.first_two_are_letters(this.value))t="spz";else{if(!(this.value.length>=5&&this.value.length<=17))return void this.create_search_error("Zadaných málo znakov. Zadajte v správnom tvare alebo vyplňte údaje o vozidle nižšie.");t="vin"}}Promise.resolve().then((()=>"spz"===t||"vin"===t?it.car_data_search(t,this.value):"ico"===t?it.ico_info(this.value):void 0)).then((e=>{200===e.status&&0!==e.result.data.length?(0,g.Z)().set_multiple_form_values(e.result.data):"spz"===t||"vin"===t?this.create_search_error("Vozidlo sa nenašlo v databáze vozidiel. Zadajte údaje o vozidle nižšie."):"ico"===t&&this.create_search_error("Vyhľadávanie nebolo úspešné.")}))},create_search_error(e){this.error_message=e,setTimeout((()=>{this.error_message=""}),6e3)}},computed:{value:{get(){return(0,g.Z)().get_form_value(this.field_id)},set(e){(0,g.Z)().set_form_value(this.field_id,e)}}},watch:{}};const ha=(0,y.Z)(pa,[["render",ua]]);var ma=ha;const ga={class:"input-autocomplete"},fa=["id","name"],ba=["onClick"];function va(e,t,a,s,r,l){return(0,n.wg)(),(0,n.iD)("div",ga,[(0,n.wy)((0,n._)("input",{id:a.field_id,name:a.field_id,placeholder:"-- vyberte --","onUpdate:modelValue":t[0]||(t[0]=e=>r.displayed=e),onFocus:t[1]||(t[1]=e=>r.shown=!0),onBlur:t[2]||(t[2]=(...e)=>l.hide_with_delay&&l.hide_with_delay(...e)),onKeyup:t[3]||(t[3]=(...e)=>l.remove_previous_value&&l.remove_previous_value(...e)),onKeydown:[t[4]||(t[4]=(0,i.D2)(((...e)=>l.move_down&&l.move_down(...e)),["down"])),t[5]||(t[5]=(0,i.D2)(((...e)=>l.move_up&&l.move_up(...e)),["up"])),t[6]||(t[6]=(0,i.D2)(((...e)=>l.enter_selection&&l.enter_selection(...e)),["enter"]))],type:"text",class:"form-control"},null,40,fa),[[i.nr,r.displayed]]),(0,n.wy)((0,n._)("ul",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.filtered_options,((e,t)=>((0,n.wg)(),(0,n.iD)("li",{class:(0,o.C_)(t===r.selected?"active_autocomplete":""),onClick:e=>l.click_selection(t)},(0,o.zw)(e.label),11,ba)))),256))],512),[[i.F8,r.shown]])])}let ya={props:{},components:{},emits:[],data(){return{dynamic:{auto_model:"auto_znacka",havarijne_auto_model:"havarijne_auto_znacka",gap_auto_model:"gap_auto_znacka",sedadla_auto_model:"sedadla_auto_znacka"},additional_label:"auto_model",label_name:"__input_value_label_auto_model"}},created(){this.request_dynamic_value()},methods:{request_dynamic_value(){null!==this.cached_dynamic_parent&&Qt.auto_model_table(this.dynamic[this.field_id],this.cached_dynamic_parent).then((e=>{if(200!==e.status)return;this.options={};let t=e.result.data;for(let s in t)t.hasOwnProperty(s)&&(this.options[s]={value:t[s].id,label:t[s].model},parseInt(this.options[s].value,10)===parseInt((0,g.Z)().get_form_value(this.field_id),10)&&(this.displayed=this.options[s].label));let a=!0;for(let s in this.options){if(!this.options.hasOwnProperty(s))continue;let e=this.options[s].label;e===this.displayed+""&&(a=!1)}a&&(this.displayed="")}))}},computed:{cached_dynamic_parent(){return this.dynamic.hasOwnProperty(this.field_id)?(0,g.Z)().get_form_value(this.dynamic[this.field_id]):null},cached_additional_label(){return this.field_id!==this.additional_label?null:this.displayed}},watch:{cached_dynamic_parent(){this.request_dynamic_value()},cached_additional_label(){if(null!==this.cached_additional_label)for(let e in this.options){if(!this.options.hasOwnProperty(e))continue;let t=this.options[e].label;if(t===this.displayed){(0,g.Z)().set_form_value(this.label_name,this.options[e].label);break}}}}};var wa=ya;let ka={props:{},components:{},emits:[],data(){return{vybava_id:"havarijne_auto_vybava",vybava_watch:["havarijne_auto_znacka","havarijne_auto_model","havarijne_objem","havarijne_vykon","havarijne_palivo","havarijne_hmotnost","havarijne_rokvyroby","havarijne_auto_prevodovka","havarijne_auto_registracia","havarijne_auto_pocet_sedadiel","havarijne_auto_karoseria"],vybava_date:"havarijne_auto_registracia",vybava_required:["havarijne_auto_znacka","havarijne_auto_model","havarijne_objem","havarijne_vykon","havarijne_palivo"],vybava_optional:["havarijne_hmotnost","havarijne_rokvyroby","havarijne_auto_prevodovka","havarijne_auto_registracia","havarijne_auto_pocet_sedadiel","havarijne_auto_karoseria"],vybava_additional_label:"havarijne_auto_vybava_label",delay:1e3,holding:!1,time:""}},created(){this.request_vybava()},methods:{request_vybava(){if(null===this.cached_vybava)return;let e,t=this.vybava_required.length;for(e=0;e<t;e++)if(""===this.cached_vybava[this.vybava_required[e]])return;let a=structuredClone(this.cached_vybava);for(let s in a)a.hasOwnProperty(s)&&this.vybava_optional.indexOf(s)>-1&&(""===a[s]||void 0===a[s])&&delete a[s];a.hasOwnProperty(this.vybava_date)&&(a[this.vybava_date]=N.Z.format_car_request_date(a[this.vybava_date])),a=N.Z.serialize_object(a),it.car_valuation_options(a).then((e=>{this.options={};let t=e.result.data;for(let s in t)t.hasOwnProperty(s)&&(this.options[s]={value:t[s].havarijne_auto_vybava,label:t[s].label_havarijne_auto_vybava},parseInt(this.options[s].value,10)===parseInt((0,g.Z)().get_form_value(this.field_id),10)&&(this.displayed=this.options[s].label));let a=!0;for(let s in this.options){if(!this.options.hasOwnProperty(s))continue;let e=this.options[s].label;e===this.displayed+""&&(a=!1)}a&&(this.displayed="")}))}},computed:{cached_vybava(){if(this.field_id!==this.vybava_id)return null;let e,t={},a=this.vybava_watch.length;for(e=0;e<a;e++){let a=this.vybava_watch[e];t[a]=(0,g.Z)().get_form_value(a)}return t}},watch:{cached_vybava(){!0===this.holding&&clearTimeout(this.time),this.holding=!0,this.time=setTimeout((()=>{this.holding=!1,this.request_vybava()}),this.delay)}}};var xa=ka,Za={props:{field_id:String,field_data:Object},components:{},emits:[],mixins:[wa,xa],data(){return{displayed:"",options:{},selected:-1,shown:!1}},created(){if(!this.dynamic.hasOwnProperty(this.field_id))for(let e in this.field_data.enum){if(!this.field_data.enum.hasOwnProperty(e))continue;let t=N.Z.first_key(this.field_data.enum[e]),a=N.Z.first_value(this.field_data.enum[e]).label;""!==t&&(this.options[e]={value:t,label:a},parseInt(t,10)===parseInt((0,g.Z)().get_form_value(this.field_id),10)&&(this.displayed=a))}},methods:{move_down(){this.selected++,this.selected>this.filtered_options.length-1&&(this.selected=0)},move_up(){this.selected--,this.selected<0&&(this.selected=this.filtered_options.length-1)},enter_selection(){if(-1!==this.selected&&void 0!==this.filtered_options[this.selected]&&((0,g.Z)().set_form_value(this.field_id,this.filtered_options[this.selected].value),this.displayed=this.filtered_options[this.selected].label,this.shown=!1,this.field_id===this.vybava_id)){let e="";for(let t in this.field_data.enum){if(!this.field_data.enum.hasOwnProperty(t))continue;let a=Object.keys(this.field_data.enum[t])[0];a===event_value&&(e=this.field_data.enum[t][a])}(0,g.Z)().set_form_value(this.vybava_additional_label,e)}},click_selection(e){this.selected=e,this.enter_selection()},remove_previous_value(){let e=!1;for(let t in this.options)this.options.hasOwnProperty(t)&&this.displayed===this.options[t].label&&(e=!0);!1===e&&((0,g.Z)().delete_form_value(this.field_id),this.shown=!0),setTimeout((()=>{1===Object.keys(this.filtered_options).length&&(this.selected=0,this.enter_selection())}),1e3)},hide_with_delay(){setTimeout((()=>{this.shown=!1}),200)}},computed:{filtered_options(){let e=[];for(let t in this.options){if(!this.options.hasOwnProperty(t))continue;let a=N.Z.slugify(this.options[t].label),s=N.Z.slugify(this.displayed);-1!==a.indexOf(s)&&e.push(this.options[t])}return e},searchable_in_state_changed(){return(0,g.Z)().get_form_value(this.field_id)}},watch:{searchable_in_state_changed(){let e=this.searchable_in_state_changed;if(""!==e)for(let t in this.options)if(this.options.hasOwnProperty(t)&&this.options[t].value===e)return void(this.displayed=this.options[t].label)}}};const ja=(0,y.Z)(Za,[["render",va]]);var za=ja;const Da={class:"slider_scope"},Oa=["id"];function Sa(e,t,a,s,i,o){return(0,n.wg)(),(0,n.iD)("div",Da,[(0,n._)("div",{id:a.field_id,ref:"slider"},null,8,Oa)])}var qa=a(4211),Pa={props:{field_id:String,field_data:Object,emit_name:String},components:{},emits:["validate_global_changed"],data(){return{}},created(){},methods:{changed(){let e=this.$refs.slider.noUiSlider.get();(0,g.Z)().set_form_value(this.field_id,e),void 0!==this.emit_name&&this.$emit(this.emit_name)}},computed:{},mounted(){let e=this.field_data.value||"",t=this.field_data.wrapper_attrs.split("value").join(""),a=t.match(/min="(.*?)"/)?.[0].replace('min="',"").replace('"',"")||0,s=t.match(/max="(.*?)"/)?.[0].replace('max="',"").replace('"',"")||100,i=t.match(/step="(.*?)"/)?.[0].replace('step="',"").replace('"',"")||1;qa.create(this.$refs.slider,{start:e,connect:!0,tooltips:[!0],step:parseInt(i,10),range:{min:parseInt(a,10),max:parseInt(s,10)},format:{to:function(e){return e},from:function(e){return e}}}),this.$refs.slider.noUiSlider.on("change",(()=>{this.changed()}))},watch:{}};const Ca=(0,y.Z)(Pa,[["render",Sa],["__scopeId","data-v-c9d87230"]]);var Ta=Ca,Ea={props:{field_id:String,field_data:Object},components:{Checkbox:Pe,Option:Option,Plaintext:Me,Radio:Fe,Select:Qe,Text:_t,Textarea:ht,Checkbox_icon:wt,Datepicker:It,Plus_minus:Vt,Psc:ta,Scan_modal:la,Search:ma,Select_searchable:za,Slider:Ta},data(){return{type:""}},created(){"text"===this.field_data.type&&"true"===this.field_data.type_settings?.plus_minus?this.type="plus_minus":"checkbox"===this.field_data.type&&void 0!==this.field_data.type_settings?.checkbox_icon&&""!==this.field_data.type_settings?.checkbox_icon?this.type="checkbox_icon":"text"===this.field_data.type&&"scan_modal"===this.field_data.type_settings?.upload?this.type="scan_modal":N.Z.ends_with(this.field_id,"psc_mesto")?this.type="psc_input":"select"===this.field_data.type&&(N.Z.ends_with(this.field_id,"auto_znacka")||N.Z.ends_with(this.field_id,"auto_model")||N.Z.ends_with(this.field_id,"auto_vybava"))?this.type="select_searchable":this.type=this.field_data.type}};const Ua=(0,y.Z)(Ea,[["render",Ze]]);var Ma=Ua,Ia=a(6493),Ra={props:{field_id:String,field_data:Object},components:{Input_switcher:Ma},emits:[],data(){return{}},created(){},methods:{},computed:{inputs(){let e={};if(void 0===this.field_data.elements)e[this.field_id]=this.field_data;else for(let t in this.field_data.elements){if(!this.field_data.elements.hasOwnProperty(t))continue;let a,s;N.Z.contains_only_digits(t)?(s=N.Z.first_key(this.field_data.elements[t]),a=this.field_data.elements[t][s]):(s=t,a=this.field_data.elements[s]);let i={[s]:a};Ia.Z.visibility_boolean(i)&&(e[s]=a)}return e},has_error(){let e=(0,C.Z)().get_errors(),t=[];for(let a in this.inputs)if(this.inputs.hasOwnProperty(a)&&e.hasOwnProperty(a))for(let s in e[a])e[a].hasOwnProperty(s)&&t.push(e[a][s]);return t},error_class(){return 0===this.has_error.length?"":"validation-error"},columns(){let e="";if(void 0!==this.field_data.block_settings&&null!==this.field_data.block_settings)e=this.field_data.block_settings.size;else{if(void 0===this.field_data.type_settings||null===this.field_data.type_settings)return"col-12";e=this.field_data.type_settings.size}return"full"===e?"col-12":"half"===e?"col-lg-6":"third"===e?"col-lg-4":"col-12"},required(){return""},blank(){return"blank"===this.field_data.type_settings?.design?"input-block-blank":""},hide(){return void 0===this.field_data.elements?this.field_data["data-hide-condition"]:this.field_data["block_hide_condition"]},label_size(){return"fullwidth"===this.field_data.type_settings?.label_size?"input-label-full":"flex-sm-row"},label(){return"checkbox"!==this.field_data.type&&("checkbox_collapse"!==this.field_data.block_settings?.block_layout&&(void 0===this.field_data.elements?this.field_data.label:this.field_data.block_label))},input_block_class(){return void 0===this.field_data.elements?"":"select_text"===this.field_data.block_settings.block_layout?"input-mixed input-select-text":"checkbox_collapse"===this.field_data.block_settings.block_layout?"input-mixed input-onoff":"input-mixed"},tooltip(){return this.field_data?.description?this.field_data.description.replace(/\r\n/g,"<br>").replace(/&quot;/g,'"'):!!this.field_data?.block_input_hint&&this.field_data.block_input_hint.replace(/\r\n/g,"<br>").replace(/&quot;/g,'"')}},watch:{}};const La=(0,y.Z)(Ra,[["render",xe]]);var Ha=La,Na={props:{tab_current:Number},components:{Wrap:Ha},data(){return{}},methods:{field_id(e){return N.Z.first_key(e)},field_data(e){return N.Z.first_value(e)}},computed:{compute_active_tab(){return N.Z.active_tab(this.tab_current)}}};const Ka=(0,y.Z)(Na,[["render",me]]);var $a=Ka;class Fa{store_form_cache(e){!e||"np_wp"!==(0,c.Z)().get_backend_type()||"production"!==(0,c.Z)().get_endpoint_type()&&"stage"!==(0,c.Z)().get_endpoint_type()||"1"!==localized.refresh_seo_cache||setTimeout((()=>{let e=document.getElementById("osm_app").innerHTML;e=encodeURIComponent(e),this.send_html_cache(e)}),2e3)}send_html_cache(e){let t="action=form_seo_cache&html="+e+"&group="+(0,c.Z)().product_group_id(),a=localized.get_home_url+"/wp-admin/admin-ajax.php",s={method:"POST",mode:"cors",cache:"no-cache",credentials:"omit",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8mb4",Accept:"application/json"},body:t};fetch(a,s).then((e=>e.json())).then((e=>{"success"!==e&&console.log("Cache_form_placeholder failed to send request.")})).catch((e=>{console.log(e)}))}clear_form_cache(){document.getElementById("osm_app").innerHTML=""}}var Va=new Fa,Aa={props:{},components:{Navigation:pe,Tabs:$a},data(){return{is_step:1,tab_first:0,tab_current:0,tab_last:0,is_fresh_session:!1}},created(){E().open_it("loading"),this.is_step=(0,c.Z)().current_step(),(0,c.Z)().get_session_token()||(this.is_fresh_session=!0),Promise.resolve().then((()=>3===this.is_step&&void 0===(0,g.Z)().get_selected_product().form_id?B.get_data():Promise.resolve())).then((e=>{void 0!==e&&(0,g.Z)().extract_selected_product(e)})).then((()=>A.getform())).then((e=>{if(423!==e.status&&E().close_them_all(),200!==e.status)return;(0,c.Z)().set_session_token(e.result.token,!1),(0,g.Z)().store_call_params(e.result.call_params);let t=e.result.form;(0,C.Z)().set_form(t),(0,g.Z)().insert_form_values(t),this.set_tabs(t),Va.store_form_cache(this.is_fresh_session)}))},methods:{prev_button(){this.tab_current===this.tab_first?((0,C.Z)().clear_form(),(0,g.Z)().reset_form_values(),(0,c.Z)().change_step(2)):(this.tab_current--,(0,C.Z)().set_tab_page(this.tab_current),this.tab_is_empty()&&this.prev_button(),this.adjust_view())},next_button(){E().open_it("loading"),A.validateform().then((e=>{423!==e.status&&E().close_them_all(),200===e.status&&((0,C.Z)().clear_errors(),this.check_errors_go_next(e))}))},check_errors_go_next(e){if(this.tab_current===this.tab_last)if(!0===e.result.validform)(0,C.Z)().clear_form(),(0,g.Z)().reset_form_values(),(0,c.Z)().change_step(this.is_step+1);else{(0,C.Z)().set_errors(e.result.form_validation_error_elements),console.log("form received errors:",e.result.form_validation_error_elements);let t=Object.keys(e.result.form_validation_error_tab_elements)[0];this.tab_current=parseInt(t,10),(0,C.Z)().set_tab_page(this.tab_current),this.adjust_view()}else void 0===e.result.form_validation_error_tab_elements?.[this.tab_current]?(this.tab_current++,(0,C.Z)().set_tab_page(this.tab_current),this.tab_is_empty()&&this.check_errors_go_next(e),this.adjust_view()):((0,C.Z)().set_errors(e.result.form_validation_error_tab_elements[this.tab_current]),console.log("form received errors:",e.result.form_validation_error_tab_elements[this.tab_current]))},set_tabs(e){let t=Object.keys(e).length;this.tab_last=Object.keys(e)[t-1],this.tab_last=parseInt(this.tab_last,10),this.tab_first=Object.keys(e)[0],this.tab_first=parseInt(this.tab_first,10),this.tab_current=this.tab_first,(0,C.Z)().set_tab_page(this.tab_current,this.tab_last)},tab_is_empty(){let e=N.Z.active_tab(this.tab_current);return void 0===e||0===Object.keys(e).length},adjust_view(){this.$nextTick((()=>{document.getElementById("osm_app").scrollIntoView()}))}},computed:{show_back(){return 3===this.is_step||this.tab_current>this.tab_first}}};const Wa=(0,y.Z)(Aa,[["render",ie]]);var Ba=Wa;const Ya={"data-cy":"calc_results"},Ga={class:"results_action_area"},Ja={key:0,"data-cy":"product_list"};function Qa(e,t,a,s,o,r){const l=(0,n.up)("Step_title"),_=(0,n.up)("Summary"),d=(0,n.up)("Global_form"),c=(0,n.up)("Filters"),u=(0,n.up)("Product_template");return(0,n.wg)(),(0,n.iD)("section",Ya,[(0,n.Wm)(l,{loaded:o.loaded,total:o.total},null,8,["loaded","total"]),(0,n._)("div",Ga,[(0,n.Wm)(_,{user_data:r.user_data},null,8,["user_data"]),(0,n.Wm)(d,{global_disabled:o.global_disabled,onCalculate_all_products:r.calculate_all_products,onGlobal_form_didnt_validate:r.global_form_didnt_validate},null,8,["global_disabled","onCalculate_all_products","onGlobal_form_didnt_validate"]),r.display_filters?((0,n.wg)(),(0,n.j4)(c,{key:0,got_products:o.got_products,filtered_array:r.filtered_array,global_disabled:o.global_disabled,onCalculate_all_products:r.calculate_all_products},null,8,["got_products","filtered_array","global_disabled","onCalculate_all_products"])):(0,n.kq)("",!0)]),o.valid_global_form?((0,n.wg)(),(0,n.iD)("div",Ja,[(0,n.Wm)(i.W3,{name:"product_shuffle"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.only_displayed_products,(e=>((0,n.wg)(),(0,n.j4)(u,{key:e,product_id:e,product_name:o.got_products[e],response:o.raw_responses[e],being_calculated:o.being_calculated,onRecalculate_product:r.recalculate_product},null,8,["product_id","product_name","response","being_calculated","onRecalculate_product"])))),128))])),_:1})])):(0,n.kq)("",!0)])}const Xa=["id"],es={class:"col-lg-10 pr_area_info pb-2 pb-lg-1 position-relative"},ts={class:"pr_ribbon"},as=(0,n._)("span",null,"NÁŠ TIP",-1),ss=[as],is={class:"pr_top"},ns={class:"row g-0"},os={class:"col-lg-2"},rs={class:"pr_box_logo text-center mb-2 mb-lg-0"},ls=["src"],_s={class:"col-lg-4"},ds={class:"pr_box_name text-center text-lg-start"},cs=["id"],us={class:"pr_rating"},ps={class:"pr_select"},hs={class:"detail-compare text-nowrap"},ms={class:"pr_detail"},gs=(0,n._)("span",{class:"i_detail"},null,-1),fs=(0,n._)("hr",{class:"pr_divider d-block d-lg-none"},null,-1),bs={class:"col-lg-6"},vs={class:"pr_box_overview"},ys=["innerHTML"],ws={key:0,class:"ttip ttip-top euro_move_to_side"},ks=["innerHTML"],xs=(0,n._)("hr",{class:"pr_divider"},null,-1),Zs={class:"pr_bottom"},js={class:"row g-0"},zs={class:"col-lg-6"},Ds={class:"pr_box_included"},Os=(0,n._)("hr",{class:"pr_divider d-block d-lg-none"},null,-1),Ss={class:"col-lg-6"},qs={class:"pr_box_options"},Ps={key:0,class:"pr_bundle"},Cs=(0,n._)("span",{class:"bundle_img"},null,-1),Ts={class:"col-lg-2"},Es={class:"pr_area_price d-flex flex-column flex-sm-row flex-lg-column text-center h-100"},Us={class:"pr_discount"},Ms={key:0,title:"Základná cena pred zľavami",class:"before_discount"},Is={key:1,title:"Celková zľava",class:"discount_tag"},Rs={class:"pr_price"},Ls={class:"amount"},Hs={class:"text-default"},Ns={class:"period"},Ks={class:"pr_price"},$s={class:"pr_cta"},Fs={key:0,class:"btn btn-inactive w-100"},Vs={class:"ttip"},As=["innerHTML"],Ws={key:1,class:"btn btn-inactive w-100"},Bs={class:"ttip"},Ys=["innerHTML"],Gs={key:3,class:"ttip pr_warning"},Js={class:"ttip_text"};function Qs(e,t,a,s,r,l){const _=(0,n.up)("Select"),d=(0,n.up)("Checkbox"),c=(0,n.up)("Datepicker"),u=(0,n.up)("Bouncer_loading");return(0,n.wg)(),(0,n.iD)("div",{id:a.product_id,class:(0,o.C_)([l.show_loading_animation?"the_form_is_disabled":"","row product g-0"]),"data-cy":"product"},[(0,n._)("div",es,[(0,n.wy)((0,n._)("div",ts,ss,512),[[i.F8,"1"===r.p_data.product.promo&&"2"===r.p_data.product.promo]]),(0,n._)("div",is,[(0,n._)("div",ns,[(0,n._)("div",os,[(0,n._)("div",rs,[(0,n._)("img",{src:r.p_data.logo},null,8,ls)])]),(0,n._)("div",_s,[(0,n._)("div",ds,[(0,n._)("h4",{id:"#"+a.product_id},(0,o.zw)(a.product_name),9,cs),(0,n.wy)((0,n._)("div",us,[((0,n.wg)(),(0,n.iD)(n.HY,null,(0,n.Ko)(5,(e=>(0,n._)("span",{class:(0,o.C_)([e>r.p_data.product.stars?"i_star_empty":"i_star"])},null,2))),64))],512),[[i.F8,r.p_data.product.stars>0]]),(0,n.wy)((0,n._)("div",ps,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.p_data.spoluucast_krytie,((e,t)=>((0,n.wg)(),(0,n.j4)(_,{field_id:t,field_data:e,emit_name:"recalculate_product",onRecalculate_product:l.recalculate_product},null,8,["field_id","field_data","onRecalculate_product"])))),256)),(0,n.wy)((0,n._)("p",null,(0,o.zw)(r.p_data.product.spoluucast_text),513),[[i.F8,!r.p_data.spoluucast_krytie]])],512),[[i.F8,r.p_data.spoluucast_krytie||r.p_data.product.spoluucast_text]]),(0,n._)("div",hs,[(0,n._)("span",ms,[(0,n.wy)((0,n._)("button",{onClick:t[0]||(t[0]=(...e)=>l.open_product_detail&&l.open_product_detail(...e)),class:"btn-text i_anchor"},[gs,(0,n.Uk)(" info o produkte ")],512),[[i.F8,"2"===r.p_data.product.detail]])])])])]),fs,(0,n._)("div",bs,[(0,n._)("div",vs,[(0,n._)("ul",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.p_data.icons,(e=>((0,n.wg)(),(0,n.iD)("li",{class:(0,o.C_)(e.class)},[(0,n._)("span",{innerHTML:e.title,class:"bold_move_to_side"},null,8,ys),e.tooltip?((0,n.wg)(),(0,n.iD)("div",ws,[(0,n.Uk)(" (€) "),(0,n._)("span",{innerHTML:e.tooltip,class:"ttip_text"},null,8,ks)])):(0,n.kq)("",!0)],2)))),256))])])])])]),xs,(0,n._)("div",Zs,[(0,n._)("div",js,[(0,n._)("div",zs,[(0,n._)("div",Ds,[(0,n._)("ul",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.p_data.benefits,(e=>((0,n.wg)(),(0,n.iD)("li",{class:(0,o.C_)(e.class)},(0,o.zw)(e.title),3)))),256))])])]),Os,(0,n._)("div",Ss,[(0,n._)("div",qs,[(0,n._)("ul",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.p_data.inputs,((e,t)=>((0,n.wg)(),(0,n.iD)("li",null,["checkbox"===e.type?((0,n.wg)(),(0,n.j4)(d,{key:0,field_id:t,field_data:e,emit_name:"recalculate_product",onRecalculate_product:l.recalculate_product},null,8,["field_id","field_data","onRecalculate_product"])):(0,n.kq)("",!0),"select"===e.type?((0,n.wg)(),(0,n.j4)(_,{key:1,field_id:t,field_data:e,emit_name:"recalculate_product",onRecalculate_product:l.recalculate_product},null,8,["field_id","field_data","onRecalculate_product"])):(0,n.kq)("",!0),"date"===e.type?((0,n.wg)(),(0,n.j4)(c,{key:2,field_id:t,field_data:e,emit_name:"recalculate_product",onRecalculate_product:l.recalculate_product},null,8,["field_id","field_data","onRecalculate_product"])):(0,n.kq)("",!0)])))),256))])])])]),r.p_data.product.crossell?((0,n.wg)(),(0,n.iD)("div",Ps,[Cs,(0,n._)("p",null,(0,o.zw)(r.p_data.product.crossell),1)])):(0,n.kq)("",!0)])]),(0,n._)("div",Ts,[(0,n._)("div",Es,[(0,n._)("div",Us,[r.p_data.price.base>0?((0,n.wg)(),(0,n.iD)("span",Ms,(0,o.zw)(r.p_data.price.base)+"€ ",1)):(0,n.kq)("",!0),r.p_data.price.discount>0?((0,n.wg)(),(0,n.iD)("span",Is,(0,o.zw)(r.p_data.price.discount)+"% ",1)):(0,n.kq)("",!0)]),(0,n.wy)((0,n._)("div",Rs,[(0,n._)("span",Ls,(0,o.zw)(r.p_data.price.for_period),1),(0,n._)("span",Hs,(0,o.zw)(r.p_data.price.currency),1),(0,n._)("span",Ns,(0,o.zw)(r.p_data.price.period_label),1)],512),[[i.F8,!l.show_loading_animation&&r.p_data.price.for_period]]),(0,n.wy)((0,n._)("div",Ks,[(0,n.Wm)(u)],512),[[i.F8,l.show_loading_animation]]),(0,n.wy)((0,n._)("div",$s,[r.p_data.error.errors?((0,n.wg)(),(0,n.iD)("span",Fs,[(0,n._)("span",{class:(0,o.C_)(r.p_data.error.alt_text?"viacinfo":"")},(0,o.zw)(r.p_data.error.alt_text?"VIAC INFO":"Nedá sa poistiť"),3),(0,n.wy)((0,n._)("div",Vs,[(0,n.Uk)(" ? "),(0,n._)("span",{innerHTML:r.p_data.error.errors,class:"ttip_text"},null,8,As)],512),[[i.F8,r.p_data.error.errors]])])):"2"===r.p_data.button.show?((0,n.wg)(),(0,n.iD)("span",Ws,[(0,n._)("span",{class:(0,o.C_)(r.p_data.error.alt_text?"viacinfo":"")},(0,o.zw)(r.p_data.error.alt_text?"VIAC INFO":"Nedá sa poistiť"),3),(0,n.wy)((0,n._)("div",Bs,[(0,n.Uk)(" ? "),(0,n._)("span",{innerHTML:r.p_data.error.info,class:"ttip_text"},null,8,Ys)],512),[[i.F8,r.p_data.error.info]])])):"1"===r.p_data.button.show?((0,n.wg)(),(0,n.iD)("button",{key:2,onClick:t[1]||(t[1]=e=>l.select_this_product()),class:"btn btn-xlg btn-right btn-accent w-100"}," Vybrať ")):(0,n.kq)("",!0),"1"===r.p_data.button.show&&r.p_data.product.warning?((0,n.wg)(),(0,n.iD)("div",Gs,[(0,n.Uk)(" ! "),(0,n._)("span",Js,(0,o.zw)(r.p_data.product.warning),1)])):(0,n.kq)("",!0)],512),[[i.F8,!l.show_loading_animation]])])])],10,Xa)}class Xs{async get_product_list(){let e={action_name:"getproducts",method:"GET",url:(0,c.Z)().endpoint_url()+"online/getproducts/"+(0,c.Z)().product_group_id()+"/?"+N.Z.add_token_as_parameter()},t=new F;return t.prepare_params(e).handle_response().catch((e=>{throw e}))}select_product(){let e={action_name:"productselect",method:"GET",url:(0,c.Z)().endpoint_url()+"online/productselect/"+(0,g.Z)().get_selected_product().product_id+"/?"+N.Z.add_token_as_parameter()};e.url+="&"+N.Z.serialize_object((0,g.Z)().get_selected_product());let t=new F;return t.prepare_params(e).handle_response().catch((e=>{throw e}))}}var ei=new Xs;class ti{sort_icons(e){let t=[],a=[];for(let i in e){if(!e.hasOwnProperty(i))continue;if("_isGroup"===i||-1!==i.indexOf("_detail")||-1!==i.indexOf("_text")||"1"===e[i].hide_in_result||"0"===e[i].result)continue;let a=i.replace("_full",""),s={title:e[i].formula_name+(e[a+"_text"]?.result?"<b>"+e[a+"_text"]?.result+"</b>":""),tooltip:e[i+"_detail"]?.result,order:parseInt(e[i].order,10),class:a+("1"===e[i].result?"-ano":"-nie")+(i.indexOf("_full")>-1?" full":"")};t.push(s)}while(t.length>0){var s=this.find_key_with_lowest_order(t);a.push(t[s]),t.splice(s,1)}return a}find_key_with_lowest_order(e){var t=0,a=0,s=e.length;while(a<s)e[t].order>e[a].order?(t=a,a=0):a++;return t}sort_benefits(e){let t=[];for(let a in e){if(!e.hasOwnProperty(a))continue;if("_isGroup"===a)continue;let s="";switch(e[a].result){case"0":s="incl_no";break;case"1":s="incl_yes";break;case"2":s="incl_special";break;default:s="incl_hide"}t.push({title:e[a].formula_name,class:s})}return t}price_for_period(e,t){return 1===t?e?.result?.rocne?.result:2===t?e?.result?.polrocne?.result:4===t?e?.result?.stvrtrocne?.result:12===t?e?.result?.mesacne?.result:""}label_for_period(e,t){return void 0!==e?.result?.price_label?.result?e.result.price_label.result:1===t?7===(0,c.Z)().product_group_id()?"":"ročne":2===t?"polročne":4===t?"štvrťročne":12===t?"mesačne":""}error_tooltip(e){return void 0!==e?.errors?e?.errors?.join("<br><br>"):""}info_tooltip(e){return e?.next?.next_comment?.result||""}check_alt_text(){let e=(0,c.Z)().product_group_id();return 3===e||6===e||85===e||86===e}find_period(e){let t=e.result.call_params;for(let s in t)if(t.hasOwnProperty(s)&&N.Z.ends_with(s,"frekvenciaNP")&&!N.Z.starts_with(s,"__"))return parseInt(t[s],10);let a=(0,c.Z)().product_group_id();return 4===a||3===a||6===a||85===a||86===a?12:1}search_for_udaje(e){let t=e.result?.call_params;for(var a in t)if(t.hasOwnProperty(a)&&-1!==a.indexOf("udaje"))return t[a];return""}find_order(e,t,a){let s=this.find_period(e),i=[],n=7===(0,c.Z)().product_group_id();return 1===s?i=n?e.result.order["rocne_prefer"]:e.result.order["rocne"]:2===s?i=n?e.result.order["polrocne_prefer"]:e.result.order["polrocne"]:4===s?i=n?e.result.order["stvrtrocne_prefer"]:e.result.order["stvrtrocne"]:12===s&&(i=n?e.result.order["mesacne_prefer"]:e.result.order["mesacne"]),"desc"===e.result[a]?.result?.result?.order_sort?.result&&i.reverse(),null!==t&&(i=i.concat(t)),i=[...new Set(i)],i}product_form_formatter(e,t,a){if(t){if(void 0===e)return{};e=JSON.parse(e)}let s={},i={};for(let n in e)if(e.hasOwnProperty(n))for(let t in e[n])if(e[n].hasOwnProperty(t))for(let a in e[n][t])e[n][t].hasOwnProperty(a)&&(N.Z.ends_with(a,"udaje")||(N.Z.ends_with(a,"_spoluucast")||N.Z.ends_with(a,"_krytie")?i[a]=e[n][t][a]:Ia.Z.visibility_boolean(e[n][t])&&(s[a]=e[n][t][a])));return a?Object.keys(i).length>0&&i:s}}var ai=new ti,si={props:{product_id:String,product_name:String,response:Object,being_calculated:Array},components:{Checkbox:Pe,Select:Qe,Datepicker:It,Bouncer_loading:X},emits:["recalculate_product"],data(){return{loading:!0,p_data:{logo:"",error:{errors:"",alt_text:!1,info:""},button:{show:"0",next_form:"",next_contract:""},price:{for_period:"",currency:"",period_label:"",base:"",discount:""},product:{promo:"",stars:0,spoluucast_text:"",detail:"",detail_template:"",crossell:"",warning:""},icons:[],benefits:[{title:"",class:""}],inputs:{},spoluucast_krytie:{}}}},created(){this.asign_values()},watch:{response(){this.asign_values()}},methods:{asign_values(){if("object"!==typeof this.response)return void Object.assign(this.$data,this.$options.data());let e=this.response.result[this.product_id].result,t=ai.find_period(this.response);this.p_data={logo:e?.head?.logo?.comment,period:t,error:{errors:ai.error_tooltip(e),alt_text:ai.check_alt_text(),info:ai.info_tooltip(e)},price:{for_period:ai.price_for_period(e,t),currency:e?.result?.currency?.result||"€",period_label:ai.label_for_period(e,t),base:e?.result?.base?.result,discount:e?.result?.discount?.result},button:{show:e?.next?.next?.result,next_form:e?.next?.next_form?.result,next_contract:e?.next?.next_contract_html?.result},product:{promo:e?.product?.promo?.result,stars:parseInt(e?.product?.stars?.result,10),spoluucast_text:e?.product?.spoluucast?.formula_name,detail:e?.product?.detail?.result,detail_template:e?.product?.detail?.comment,crossell:"1"===e?.product?.crossell.result?e?.product?.crossell?.comment:"",warning:e?.result?.warning?.result},icons:ai.sort_icons(e?.icon),benefits:ai.sort_benefits(e?.benefit),inputs:ai.product_form_formatter(e?.results_form?.comment,!0,!1),spoluucast_krytie:ai.product_form_formatter(e?.results_form?.comment,!0,!0)},this.loading=!1},select_this_product(){this.loading=!0,(0,g.Z)().set_selected_product(this.product_id,this.p_data.button.next_form,this.p_data.button.next_contract,this.p_data.period),ei.select_product().then((e=>{"success"===e.result.response&&(0,c.Z)().change_step(3)}))},open_product_detail(){(0,g.Z)().set_selected_product(this.product_id,null,null,null),E().store_modal_data({product_name:this.product_name,detail_template:this.p_data.product.detail_template}),E().open_it("product_detail")},recalculate_product(){let e=Object.keys(this.p_data.inputs).concat(Object.keys(this.p_data.spoluucast_krytie)),t=N.Z.serialize_specific_inputs(e);this.$emit("recalculate_product",this.product_id,t)}},computed:{show_loading_animation(){let e=this.being_calculated.indexOf(this.product_id);return this.being_calculated[e]||this.loading}}};const ii=(0,y.Z)(si,[["render",Qs]]);var ni=ii;const oi={class:"calc_title_area","data-cy":"title"},ri={key:0},li={key:1},_i=["title"],di={class:"results_deliver"},ci=(0,n._)("span",{class:"i_email"},null,-1),ui={key:1,class:"i_download"};function pi(e,t,a,s,i,r){const l=(0,n.up)("Bouncer_loading");return(0,n.wg)(),(0,n.iD)("div",oi,[0===a.loaded?((0,n.wg)(),(0,n.iD)("h2",ri," Hľadáme produkty... ")):((0,n.wg)(),(0,n.iD)("h2",li,[(0,n.Uk)(" Našli sme "),(0,n._)("span",{title:"z "+a.total+" prepočítavaných",class:"text-accent"},(0,o.zw)(r.products_found),9,_i)])),(0,n._)("div",di,[(0,n._)("button",{onClick:t[0]||(t[0]=(...e)=>r.open_email_modal&&r.open_email_modal(...e)),class:"btn-text i_anchor"},[ci,(0,n.Uk)(" poslať e-mailom ")]),(0,n._)("button",{onClick:t[1]||(t[1]=(...e)=>r.download_pdf&&r.download_pdf(...e)),class:"btn-text i_anchor"},[i.downloading_pdf?((0,n.wg)(),(0,n.j4)(l,{key:0,size:"small"})):((0,n.wg)(),(0,n.iD)("span",ui)),(0,n.Uk)(" stiahnuť pdf ")])])])}class hi{download_global_pdf(){let e={action_name:"getpdf",method:"POST",url:(0,c.Z)().endpoint_url()+"online/getpdf/?"+N.Z.add_token_as_parameter()+"&id="+N.Z.group_offer()},t=new F;return t.prepare_params(e).handle_response().catch((e=>{throw e}))}}var mi=new hi,gi={props:{loaded:Number,total:Number},components:{Bouncer_loading:X},data(){return{downloading_pdf:!1}},created(){},methods:{open_email_modal(){E().open_it("email")},download_pdf(){this.downloading_pdf=!0,mi.download_global_pdf().then((e=>{this.downloading_pdf=!1,N.Z.downloadBase64("Ponuka.pdf",e.result.pdf)}))}},computed:{products_found(){return 1===this.loaded?this.loaded+" produkt":this.loaded>1&&this.loaded<5?this.loaded+" produkty":this.loaded+" produktov"}}};const fi=(0,y.Z)(gi,[["render",pi]]);var bi=fi;const vi={class:"d-flex align-items-stretch form_summary","data-cy":"summary"},yi={class:"w-100 data_summary"},wi=(0,n._)("strong",null,"Vaše údaje:",-1),ki={class:"d-flex flex-shrink-1 data_edit"},xi=(0,n._)("span",{class:"i_edit"},null,-1),Zi=(0,n._)("span",{class:"d-none d-sm-inline"},"upraviť",-1),ji=[xi,Zi];function zi(e,t,a,s,i,r){return(0,n.wg)(),(0,n.iD)("div",vi,[(0,n._)("div",yi,[wi,(0,n.Uk)(" "+(0,o.zw)(a.user_data),1)]),(0,n._)("div",ki,[(0,n._)("button",{onClick:t[0]||(t[0]=(...e)=>r.go_back&&r.go_back(...e)),class:"btn-text i_anchor my-auto"},ji)])])}var Di={props:{user_data:String},components:{},data(){return{}},created(){},methods:{go_back(){(0,c.Z)().change_step(1)}},computed:{}};const Oi=(0,y.Z)(Di,[["render",zi]]);var Si=Oi;const qi=e=>((0,n.dD)("data-v-789d57aa"),e=e(),(0,n.Cn)(),e),Pi=qi((()=>(0,n._)("p",{class:"filter_toggle"},[(0,n._)("span",{class:"i_adjust"}),(0,n.Uk)(" filter ")],-1))),Ci=[Pi],Ti={class:"product_selection"},Ei={class:"row"},Ui={class:"col-sm-6 col-md-4"},Mi={class:"form-check"},Ii=["id","name","onUpdate:modelValue"],Ri=["for"],Li={class:"text-center"},Hi={class:"text-center"},Ni=qi((()=>(0,n._)("p",{class:"mt-2 mb-0 text-warning"},"Minimálne jeden z produktov musí byť vybraný.",-1))),Ki=[Ni];function $i(e,t,a,s,r,l){return(0,n.wg)(),(0,n.iD)("div",{class:(0,o.C_)(l.is_disabled?"the_form_is_disabled":""),id:"filters_form","data-cy":"filters"},[(0,n._)("div",{onClick:t[0]||(t[0]=(...e)=>l.toggle&&l.toggle(...e)),class:"filter_head text-center"},Ci),(0,n.wy)((0,n._)("div",Ti,[(0,n._)("div",Ei,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.got_products,((e,t)=>((0,n.wg)(),(0,n.iD)("div",Ui,[(0,n._)("div",Mi,[(0,n.wy)((0,n._)("input",{id:t,name:t,"onUpdate:modelValue":e=>r.values[t]=e,"true-value":"1","false-value":"0",type:"checkbox",class:"form-check-input"},null,8,Ii),[[i.e8,r.values[t]]]),(0,n._)("label",{for:t,class:"form-check-label"},(0,o.zw)(e),9,Ri)])])))),256))]),(0,n._)("div",Li,[(0,n._)("button",{onClick:t[1]||(t[1]=(...e)=>l.filter_submit&&l.filter_submit(...e)),class:"btn btn-primary btn-m mt-3"}," Vyber produkty ")]),(0,n.wy)((0,n._)("div",Hi,Ki,512),[[i.F8,r.error]])],512),[[i.F8,r.opened]])],2)}var Fi={props:{got_products:Object,filtered_array:Array,global_disabled:Boolean},components:{},emits:["calculate_all_products"],data(){return{opened:!1,values:{},error:!1,validate_running:!1}},created(){for(let e in this.got_products)this.got_products.hasOwnProperty(e)&&(0===this.filtered_array.length||this.filtered_array.indexOf(parseInt(e,10))>-1?this.values[e]="1":this.values[e]="0")},methods:{toggle(){this.opened=!this.opened},filter_submit(){let e=[];for(let a in this.values)this.values.hasOwnProperty(a)&&"1"===this.values[a]&&e.push(a);if(0===e.length)return void(this.error=!0);this.error=!1,e.length===Object.keys(this.got_products).length&&(e=[]),this.validate_running=!0;let t="filtered_products="+e.join(",");A.validate_global_form(t).then((t=>{this.validate_running=!1,200===t.status&&((0,g.Z)().set_filtered_products(e.join(",")),this.$emit("calculate_all_products"))}))}},computed:{is_disabled(){return this.global_disabled||this.validate_running}},watch:{}};const Vi=(0,y.Z)(Fi,[["render",$i],["__scopeId","data-v-789d57aa"]]);var Ai=Vi;const Wi=e=>((0,n.dD)("data-v-52293cf0"),e=e(),(0,n.Cn)(),e),Bi={class:"col-sm-4"},Yi=["for"],Gi={class:"validation-placeholder validation-message"},Ji=Wi((()=>(0,n._)("span",{class:"mark-circle mark-orange"},"!",-1)));function Qi(e,t,a,s,i,r){const l=(0,n.up)("Checkbox"),_=(0,n.up)("Select"),d=(0,n.up)("Text"),c=(0,n.up)("Datepicker"),u=(0,n.up)("Slider");return(0,n.wg)(),(0,n.iD)("div",{class:(0,o.C_)([r.is_disabled?"the_form_is_disabled":"","row g-0 global_form"]),"data-cy":"global_form"},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.inputs,((e,t)=>((0,n.wg)(),(0,n.iD)("div",Bi,["checkbox"!==e.type?((0,n.wg)(),(0,n.iD)("label",{key:0,for:t},(0,o.zw)(e.label),9,Yi)):(0,n.kq)("",!0),"checkbox"===e.type?((0,n.wg)(),(0,n.j4)(l,{key:1,field_id:t,field_data:e,emit_name:"validate_global_changed",onValidate_global_changed:r.validate_global_changed},null,8,["field_id","field_data","onValidate_global_changed"])):(0,n.kq)("",!0),"select"===e.type?((0,n.wg)(),(0,n.j4)(_,{key:2,field_id:t,field_data:e,emit_name:"validate_global_changed",onValidate_global_changed:r.validate_global_changed},null,8,["field_id","field_data","onValidate_global_changed"])):(0,n.kq)("",!0),"text"===e.type?((0,n.wg)(),(0,n.j4)(d,{key:3,field_id:t,field_data:e,emit_name:"validate_global_changed",onValidate_global_changed:r.validate_global_changed},null,8,["field_id","field_data","onValidate_global_changed"])):(0,n.kq)("",!0),"date"===e.type?((0,n.wg)(),(0,n.j4)(c,{key:4,field_id:t,field_data:e,emit_name:"validate_global_changed",onValidate_global_changed:r.validate_global_changed},null,8,["field_id","field_data","onValidate_global_changed"])):(0,n.kq)("",!0),"slider"===e.type?((0,n.wg)(),(0,n.j4)(u,{key:5,field_id:t,field_data:e,emit_name:"validate_global_changed",onValidate_global_changed:r.validate_global_changed},null,8,["field_id","field_data","onValidate_global_changed"])):(0,n.kq)("",!0),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.errors[t],((e,t)=>((0,n.wg)(),(0,n.iD)("div",Gi,[Ji,(0,n.Uk)(" "+(0,o.zw)(e),1)])))),256))])))),256))],2)}var Xi={props:{global_disabled:Boolean},components:{Checkbox:Pe,Select:Qe,Text:_t,Datepicker:It,Slider:Ta},emits:["calculate_all_products","global_form_didnt_validate"],data(){return{inputs:{},errors:{},validate_running:!1}},created(){A.get_global_form().then((e=>{200===e.status&&(this.inputs=ai.product_form_formatter(e.result.form,!1,!1),(0,g.Z)().store_call_params(e.result.call_params))}))},methods:{validate_global_changed(){this.validate_running=!0,this.errors={};let e=N.Z.serialize_specific_inputs(Object.keys(this.inputs));A.validate_global_form(e).then((e=>{this.validate_running=!1,!0!==e.result.validform?(this.errors=e.result.form_validation_error_elements,this.$emit("global_form_didnt_validate")):this.$emit("calculate_all_products")}))}},computed:{is_disabled(){return this.global_disabled||this.validate_running}}};const en=(0,y.Z)(Xi,[["render",Qi],["__scopeId","data-v-52293cf0"]]);var tn=en;class an{get_calculate(e,t,a){let s={action_name:"calculate_step2",method:"POST",url:(0,c.Z)().endpoint_url()+"online/calculate/?id="+e+"&json=1&period="+a+N.Z.add_token_as_parameter(),body:t},i=new F;return i.prepare_params(s).handle_response().then((t=>408===t.status?(console.log("#"+e+" has 408, going for results request"),this.repeat_results()):t)).catch((e=>{throw e}))}repeat_results(){let e={action_name:"results",method:"GET",url:(0,c.Z)().endpoint_url()+"online/results/?"+N.Z.add_token_as_parameter()},t=new F;return t.prepare_params(e).handle_response().then().catch((e=>{throw e}))}check_calculate(){let e={action_name:"calculate_step4",method:"POST",url:(0,c.Z)().endpoint_url()+"online/calculate/?"+N.Z.add_token_as_parameter(),body:null};e.url+="&id="+(0,g.Z)().get_selected_product().product_id+"&period="+(0,g.Z)().get_selected_product().period;let t=new F;return t.prepare_params(e).handle_response().then().catch((e=>{throw e}))}}var sn=new an,nn={props:{},components:{Product_template:ni,Step_title:bi,Summary:Si,Filters:Ai,Bouncer_loading:X,Global_form:tn},data(){return{loaded:0,total:0,got_products:{},product_order:[],update_order:[],found_with_error:[],raw_responses:{},being_calculated:[],udaje:"",period:0,global_disabled:!0,valid_global_form:!0,ready_filters:!1}},created(){ei.get_product_list().then((e=>{this.got_products=e.result.products,(0,g.Z)().set_filtered_products(e.result.filtered_products),this.calculate_all_products()}))},methods:{calculate_all_products(){this.global_disabled=!0,this.valid_global_form=!0,this.loaded=0;let e=this.reduce_products_by_filtered();if(this.total=Object.keys(e).length,this.found_with_error=[],0===this.product_order.length)for(let t in this.got_products)this.got_products.hasOwnProperty(t)&&this.product_order.push(parseInt(t,10));this.being_calculated=structuredClone(this.product_order),B.get_data().then((t=>{this.period=ai.find_period(t);for(let a in e)e.hasOwnProperty(a)&&this.calculate_product(parseInt(a,10),null)}))},calculate_product(e,t){sn.get_calculate(e,t,this.period).then((a=>{if(this.raw_responses[e]=a,void 0===a.result||void 0!==a.result.error||void 0===a.result[e])return console.log("#"+e+" had error",a),this.found_with_error.push(e),this.total--,void this.count_loaded();this.udaje=ai.search_for_udaje(a),(0,g.Z)().store_call_params(a.result.call_params),null===t&&(this.update_order=ai.find_order(a,null,e)),this.loaded++,this.count_loaded();let s=this.being_calculated.indexOf(e);s>-1&&delete this.being_calculated[s]}))},recalculate_product(e,t){this.loaded--,this.count_loaded(),this.being_calculated.push(e),this.calculate_product(e,t)},count_loaded(){this.loaded===this.total?(this.global_disabled=!1,this.ready_filters=!0,this.product_order=this.update_order):this.global_disabled=!0,0===this.loaded&&0===this.total&&A.validate_group_form().then((e=>{!1===e.result?.validform&&(E().store_modal_data(e.result?.form_validation_error_elements),E().open_it("global_form_invalid"))}))},reduce_products_by_filtered(){if(0===this.filtered_array.length)return this.got_products;let e=[];for(let t in this.got_products)this.got_products.hasOwnProperty(t)&&-1!==this.filtered_array.indexOf(parseInt(t,10))&&(e[t]=this.got_products[t]);return e},global_form_didnt_validate(){this.valid_global_form=!1}},computed:{user_data(){return this.udaje},only_displayed_products(){let e,t=[],a=this.product_order.length;for(e=0;e<a;e++){let a=parseInt(this.product_order[e],10);-1!==this.found_with_error.indexOf(a)||0!==this.filtered_array.length&&-1===this.filtered_array.indexOf(a)||t.push(a)}return t},filtered_array(){let e,t=(0,g.Z)().get_filtered_products()?.split(","),a=[],s=t.length;for(e=0;e<s;e++)""!==t[e]&&a.push(parseInt(t[e],10));return a},display_filters(){if(!this.ready_filters)return!1;let e=(0,g.Z)().get_user_input("receiver");return!(""===e||"2"===e&&(0,g.Z)().direct_user_no_agent())}}};const on=(0,y.Z)(nn,[["render",Qa],["__scopeId","data-v-5321c5fe"]]);var rn=on;const ln={"data-cy":"calc_proposal"},_n={class:"calc_title_area"},dn=(0,n._)("h2",{class:"text-primary"},"Takmer hotovo!",-1),cn=["innerHTML"],un=["innerHTML"],pn={class:"text-center pt-2 pb-5"},hn=(0,n._)("h3",null,"Načítavame dokumenty",-1),mn={key:0,class:"prop_confirm mb-4"},gn=(0,n._)("h5",{class:"text-warning"},"Upozornenie",-1),fn={class:"prop_confirm","data-cy":"acceptance_form"},bn=(0,n._)("h3",{class:"text-primary"}," Záverečné potvrdenie ",-1),vn={class:"confirm_check"},yn={class:"form-check"},wn={for:"suhlas_elekt_kom",class:"form-check-label"},kn={class:"form-check"},xn={for:"suhlas_marketing",class:"form-check-label"},Zn={class:"confirm_check"},jn={key:0},zn={class:"form-check"},Dn={for:"suhlas_navrh",class:"form-check-label"},On={class:"row form-pagination"},Sn={class:"col-12"},qn={class:"text-accent"},Pn={class:"col-12 col-sm-6 text-center text-sm-start order-2 order-sm-1"},Cn={class:"col-12 col-sm-6 text-center text-sm-end order-1 order-sm-2"};function Tn(e,t,a,s,r,l){const _=(0,n.up)("Documents_prepare"),d=(0,n.up)("Bouncer_loading");return(0,n.wg)(),(0,n.iD)("section",ln,[(0,n._)("div",_n,[dn,(0,n._)("div",{innerHTML:r.html.view_header_text},null,8,cn)]),(0,n._)("div",{innerHTML:r.html.contract_html,class:"prop_wording","data-cy":"proposal_template"},null,8,un),(0,n.Wm)(_,{start_doc_requests:r.start_doc_requests,onAll_docs_finished:l.all_docs_finished,step_html:"4"},null,8,["start_doc_requests","onAll_docs_finished"]),(0,n.wy)((0,n._)("div",pn,[hn,(0,n.Wm)(d)],512),[[i.F8,!r.doc_requests_are_done]]),r.warning?(0,n.wy)(((0,n.wg)(),(0,n.iD)("div",mn,[gn,(0,n._)("p",null,(0,o.zw)(r.warning),1)],512)),[[i.F8,r.doc_requests_are_done]]):(0,n.kq)("",!0),(0,n.wy)((0,n._)("div",fn,[bn,(0,n._)("div",vn,[(0,n._)("div",yn,[(0,n.wy)((0,n._)("input",{name:"suhlas_elekt_kom",id:"suhlas_elekt_kom","onUpdate:modelValue":t[0]||(t[0]=e=>r.checkboxes.suhlas_elekt_kom=e),"true-value":"1","false-value":"0",type:"checkbox",class:(0,o.C_)(["form-check-input",this.invalid_checkboxes?"required_checkbox":""])},null,2),[[i.e8,r.checkboxes.suhlas_elekt_kom]]),(0,n._)("label",wn,[(0,n._)("button",{onClick:t[1]||(t[1]=(...e)=>l.marketing_ek_modal&&l.marketing_ek_modal(...e)),class:"btn-text text-start"}," Súhlas s elektronickou komunikáciou ")])]),(0,n._)("div",kn,[(0,n.wy)((0,n._)("input",{name:"suhlas_marketing",id:"suhlas_marketing","onUpdate:modelValue":t[2]||(t[2]=e=>r.checkboxes.suhlas_marketing=e),"true-value":"1","false-value":"0",type:"checkbox",class:"form-check-input"},null,512),[[i.e8,r.checkboxes.suhlas_marketing]]),(0,n._)("label",xn,[(0,n._)("button",{onClick:t[3]||(t[3]=(...e)=>l.marketing_modal&&l.marketing_modal(...e)),class:"btn-text text-start"}," Súhlas so spracovaním osobných údajov pre účely marketingu ")])])]),(0,n._)("div",Zn,[l.wording.paragraph?((0,n.wg)(),(0,n.iD)("p",jn,(0,o.zw)(l.wording.paragraph),1)):(0,n.kq)("",!0),(0,n._)("div",zn,[(0,n.wy)((0,n._)("input",{name:"suhlas_navrh",id:"suhlas_navrh","onUpdate:modelValue":t[4]||(t[4]=e=>r.checkboxes.suhlas_navrh=e),"true-value":"1","false-value":"0",type:"checkbox",class:(0,o.C_)(["form-check-input",this.invalid_checkboxes?"required_checkbox":""])},null,2),[[i.e8,r.checkboxes.suhlas_navrh]]),(0,n._)("label",Dn,(0,o.zw)(l.wording.label),1)])]),(0,n._)("div",On,[(0,n._)("div",Sn,[(0,n.wy)((0,n._)("p",qn," Pred pokračovaním musíte potvrdiť zvýraznené zaškrtávacie políčka ",512),[[i.F8,r.invalid_checkboxes]])]),(0,n._)("div",Pn,[(0,n._)("button",{onClick:t[5]||(t[5]=(...e)=>l.edit_user_data&&l.edit_user_data(...e)),class:"btn btn-white btn-left btn-lg"}," Upraviť ")]),(0,n._)("div",Cn,[(0,n.wy)((0,n._)("button",{onClick:t[6]||(t[6]=(...e)=>l.confirm_button_press&&l.confirm_button_press(...e)),type:"button",class:"btn btn-accent btn-right btn-lg"},[(0,n._)("span",null,(0,o.zw)(l.wording.span),1)],512),[[i.F8,!r.confirm_running]]),(0,n.wy)((0,n.Wm)(d,{style:{"margin-top":"18px","margin-right":"50px"}},null,512),[[i.F8,r.confirm_running]])])])],512),[[i.F8,r.doc_requests_are_done]])])}class En{get_it(e){!1===e&&(e=(0,g.Z)().get_selected_product().next_contract);let t={action_name:"gethtml",method:"POST",url:(0,c.Z)().endpoint_url()+"online/gethtml/?id="+e+N.Z.add_token_as_parameter()},a=new F;return a.prepare_params(t).handle_response().catch((e=>{throw e}))}}var Un=new En;class Mn{confirm_session(e){let t={action_name:"confirm",method:"GET",url:(0,c.Z)().endpoint_url()+"online/confirm/?"+N.Z.serialize_object(e)+N.Z.add_token_as_parameter()},a=new F;return a.prepare_params(t).handle_response().then((e=>408===e.status?this.repeat_getsessioninfo():e)).catch((e=>{throw e}))}repeat_confirm(){let e={action_name:"confirm",method:"GET",url:(0,c.Z)().endpoint_url()+"online/confirm/?"+N.Z.add_token_as_parameter()},t=new F;return t.prepare_params(e).handle_response().catch((e=>{throw e}))}async repeat_getsessioninfo(){console.log("wait 25 seconds then try getsessioninfo");await new Promise(((e,t)=>{setTimeout((()=>{e()}),25e3)}));let e={action_name:"getsessioninfo",method:"GET",url:(0,c.Z)().endpoint_url()+"online/getsessioninfo/?"+N.Z.add_token_as_parameter()},t=new F;return t.prepare_params(e).handle_response().then().catch((e=>{throw e}))}}var In=new Mn;const Rn={key:0,class:"docs_download","data-cy":"documents"},Ln=(0,n._)("h3",null," Predzmluvná dokumentácia ",-1),Hn=(0,n._)("p",null," Dokumenty s ktorými je klient povinný sa oboznámiť ",-1),Nn={class:"docs_static"},Kn=(0,n._)("p",null," Produktové dokumenty ",-1),$n={class:"docs_session"},Fn=(0,n._)("p",null," Dynamické dokumenty ",-1),Vn={key:1,class:"row docs_download","data-cy":"documents"},An={class:"col-12 col-md-6"},Wn={class:"s-box-body"},Bn=(0,n._)("p",null," Produktové dokumenty ",-1),Yn={class:"col-12 col-md-6"},Gn={class:"s-box-body"},Jn=(0,n._)("p",null," Dynamické dokumenty ",-1);function Qn(e,t,a,s,i,o){const r=(0,n.up)("Document_download");return(0,n.wg)(),(0,n.iD)(n.HY,null,["4"===a.step_html?((0,n.wg)(),(0,n.iD)("div",Rn,[Ln,Hn,(0,n._)("div",Nn,[Kn,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.static_docs,((e,t)=>((0,n.wg)(),(0,n.j4)(r,{doc:e},null,8,["doc"])))),256))]),(0,n._)("div",$n,[Fn,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.session_docs,((e,t)=>((0,n.wg)(),(0,n.j4)(r,{doc:e},null,8,["doc"])))),256))])])):(0,n.kq)("",!0),"5"===a.step_html?((0,n.wg)(),(0,n.iD)("div",Vn,[(0,n._)("div",An,[(0,n._)("div",Wn,[Bn,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.static_docs,((e,t)=>((0,n.wg)(),(0,n.j4)(r,{doc:e},null,8,["doc"])))),256))])]),(0,n._)("div",Yn,[(0,n._)("div",Gn,[Jn,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.session_docs,((e,t)=>((0,n.wg)(),(0,n.j4)(r,{doc:e},null,8,["doc"])))),256))])])])):(0,n.kq)("",!0)],64)}class Xn{static_documents(){let e={action_name:"getdocuments",method:"GET",url:(0,c.Z)().endpoint_url()+"online/getdocuments/"+(0,g.Z)().get_selected_product().product_id+"/?"+N.Z.add_token_as_parameter()},t=new F;return t.prepare_params(e).handle_response().catch((e=>{throw e}))}get_static_document(e){let t={action_name:"getdocument",method:"GET",url:(0,c.Z)().endpoint_url()+"online/getdocument/"+(0,g.Z)().get_selected_product().product_id+"/"+e+"/?"+N.Z.add_token_as_parameter()},a=new F;return a.prepare_params(t).handle_response().catch((e=>{throw e}))}}var eo=new Xn;class to{session_documents(e){let t={action_name:"getsessiondocuments",method:"GET",url:(0,c.Z)().endpoint_url()+"online/getsessiondocuments/?"+N.Z.add_token_as_parameter()};e&&(t.url+="&user_uploaded=true");let a=new F;return a.prepare_params(t).handle_response().catch((e=>{throw e}))}get_session_document(e){let t={action_name:"getsessiondocument",method:"GET",url:(0,c.Z)().endpoint_url()+"online/getsessiondocument/"+e+"/?"+N.Z.add_token_as_parameter()},a=new F;return a.prepare_params(t).handle_response().catch((e=>{throw e}))}get_session_document_preview(e,t){let a={action_name:"getsessiondocument",method:"GET",url:(0,c.Z)().endpoint_url()+"online/getsessiondocument/"+e+"/?"+N.Z.add_token_as_parameter()};a.url+="&filters=thumbnail&thumbnail_mode=outbound&thumbnail_width="+t+"&thumbnail_height="+t;let s=new F;return s.prepare_params(a).handle_response().catch((e=>{throw e}))}upload_session_document(e){let t={action_name:"createsessiondocument",method:"POST",body:e,content_type:null,url:(0,c.Z)().endpoint_url()+"online/createsessiondocument/?"+N.Z.add_token_as_parameter()},a=new F;return a.prepare_params(t).handle_response().catch((e=>{throw e}))}delete_session_document(e){let t={action_name:"delete-uploaded-session-documents",method:"DELETE",url:(0,c.Z)().endpoint_url()+"online/delete-uploaded-session-documents/?id="+e+N.Z.add_token_as_parameter()},a=new F;return a.prepare_params(t).handle_response().catch((e=>{throw e}))}}var ao=new to;const so=e=>((0,n.dD)("data-v-debb4d42"),e=e(),(0,n.Cn)(),e),io={class:"w-100 btn-text text-start"},no=so((()=>(0,n._)("div",{class:"flex-shrink my-auto"},[(0,n._)("span",{class:"i_download_item"})],-1)));function oo(e,t,a,s,r,l){const _=(0,n.up)("Bouncer_loading");return l.display_document?((0,n.wg)(),(0,n.iD)("button",{key:0,"data-cy":"document_download",onClick:t[0]||(t[0]=(...e)=>l.download_pdf&&l.download_pdf(...e)),class:(0,o.C_)(["d-flex btn-text i_anchor",l.still_waiting?"document_waiting":""])},[(0,n._)("div",io,[(0,n.Uk)((0,o.zw)(l.name)+" ",1),(0,n.wy)((0,n.Wm)(_,{size:"small"},null,512),[[i.F8,l.still_waiting]])]),no],2)):(0,n.kq)("",!0)}var ro={props:{doc:Object},components:{Bouncer_loading:X},data(){return{is_downloading:!1}},created(){},methods:{download_pdf(){this.still_waiting||(this.is_downloading=!0,this.is_static?eo.get_static_document(this.doc.id).then((e=>{N.Z.downloadBase64(this.name,e.result.content),this.is_downloading=!1})):ao.get_session_document(this.doc.id).then((e=>{N.Z.downloadBase64(this.name,e.result.content),this.is_downloading=!1})))}},computed:{is_static(){return void 0!==this.doc.filename},name(){return this.is_static?this.doc.filename:this.doc.name},display_document(){return"ws-preview.tmp"!==this.name&&"error"!==this.doc.documentState},still_waiting(){return!!this.is_downloading||!this.is_static&&("waiting"===this.doc.documentState||"available"!==this.doc.documentState)}}};const lo=(0,y.Z)(ro,[["render",oo],["__scopeId","data-v-debb4d42"]]);var _o=lo,co={props:{start_doc_requests:Boolean,step_html:String},components:{Document_download:_o},emits:["all_docs_finished"],data(){return{static_docs:{},session_docs:{},turbo:{repeat_count:0,repeat_delay_fast:2e3,repeat_delay_slow:1e4,repeat_diminish:10,repeat_max:26}}},created(){!0===this.start_doc_requests&&(this.group_docs(),this.session_docs_turbo())},methods:{group_docs(){eo.static_documents().then((e=>{this.static_docs=e.result.documents}))},session_docs_turbo(){ao.session_documents(!1).then((e=>{void 0!==e.result?.data?.documents&&(this.session_docs=e.result.data.documents);for(let a in this.session_docs)if(this.session_docs.hasOwnProperty(a)&&"ws-preview.tmp"===this.session_docs[a].name&&"error"===this.session_docs[a].documentState)return E().store_modal_data(this.session_docs[a].errors),void E().open_it("session_document_error");if(!0===e.result?.data?.processingFinished)return void this.$emit("all_docs_finished");if(this.turbo.repeat_count>this.turbo.repeat_max)return void console.log("getsessiondocuments reached maximum repeat_count");this.turbo.repeat_count++;let t=this.turbo.repeat_count<this.turbo.repeat_diminish?this.turbo.repeat_delay_fast:this.turbo.repeat_delay_slow;setTimeout((()=>{this.session_docs_turbo()}),t)}))}},computed:{},watch:{start_doc_requests(){!0===this.start_doc_requests&&(this.group_docs(),this.session_docs_turbo())}}};const uo=(0,y.Z)(co,[["render",Qn]]);var po=uo,ho={props:{},components:{Documents_prepare:po,Bouncer_loading:X},data(){return{debug:!1,start_doc_requests:!1,doc_requests_are_done:!1,confirm_running:!1,mode:"",invalid_checkboxes:!1,special_data:{confirmed_by_provider:!1,require_provider_confirm:!1},signature_required:0,signature_state:"agent",html:{contract_html:"",view_header_text:""},warning:void 0,checkboxes:{suhlas_elekt_kom:"0",suhlas_marketing:"0",suhlas_navrh:"0"}}},created(){Promise.resolve().then((()=>B.session_info())).then((e=>{this.special_data=e.result?.specialData,this.signature_required=e.result?.signature_required})).then((()=>B.get_data())).then((e=>200===e.status&&((0,g.Z)().extract_selected_product(e),this.signature_state=e.result.call_params?.signature_state||"agent",this.confirm_mode_definition(),this.debug?(this.doc_requests_are_done=!0,this.checkboxes.suhlas_elekt_kom="1",this.checkboxes.suhlas_navrh="1",this.mode="sms_client",!1):"provider_autoconfirm"===this.mode?("agent_autoconfirm"===this.signature_state?this.run_confirm(!1):alert("Neočakávaný stav session. "+this.signature_state),!1):"agent_autoconfirm"!==this.signature_state||(alert("Neočakávaný stav session. "+this.signature_state),!1)))).then((e=>!!e&&sn.check_calculate())).then((e=>{if(!1===e)return!1;let t=(0,g.Z)().get_selected_product().product_id;return this.warning=e.result[t]?.result?.result?.warning?.result,!1===e.result.validform?(console.log("calculate validform false"),E().store_modal_data(e.result.form_validation_error_elements),E().open_it("calculate_error_in_validate"),!1):void 0!==e.result[t]?.result?.errors?(console.log("calculate form error"),E().store_modal_data(e.result[t].result.errors),E().open_it("calculate_error_in_form"),!1):200===e.status||(console.log("error in calculate:",e.result.message),E().open_it("calculate_generic_error"),!1)})).then((e=>{e&&(Un.get_it(!1).then((e=>{this.html.contract_html=e.result?.html})),Un.get_it("view_header_text").then((e=>{this.html.view_header_text=e.result?.html})),this.start_doc_requests=!0)}))},methods:{edit_user_data(){(0,c.Z)().change_step(3)},all_docs_finished(){this.doc_requests_are_done=!0},confirm_mode_definition(){!1===this.special_data.require_provider_confirm?0===this.signature_required?this.mode="classic_confirm":1===this.signature_required&&("agent"===this.signature_state?this.mode="sms_agent":"client"===this.signature_state&&(this.mode="sms_client")):!0===this.special_data.require_provider_confirm&&(!0===this.special_data.confirmed_by_provider?this.mode="provider_autoconfirm":!1===this.special_data.confirmed_by_provider&&("agent"===this.signature_state?this.mode="provider_agent":"client"===this.signature_state&&(this.mode="provider_client"))),console.log("confirm mode: "+this.mode)},confirm_button_press(){"0"!==this.checkboxes.suhlas_elekt_kom&&"0"!==this.checkboxes.suhlas_navrh?(this.invalid_checkboxes=!1,"classic_confirm"===this.mode?this.run_confirm(!0):"sms_agent"===this.mode||"provider_agent"===this.mode?(E().store_modal_data(this.checkboxes),E().open_it("signature_agent")):"sms_client"!==this.mode&&"provider_client"!==this.mode||(E().store_modal_data({mode:this.mode,checkboxes:this.checkboxes}),E().open_it("signature_client"))):this.invalid_checkboxes=!0},run_confirm(e){let t={};e&&(t=this.checkboxes),this.confirm_running=!0,In.confirm_session(t).then((e=>{this.confirm_running=!1,200===e.status?"success"!==e.result?.response&&100!==e.result?.state?(console.log("confirm simple error"),E().store_modal_data(e.result),E().open_it("confirm_simple_error")):(0,c.Z)().change_step(5):console.log("confirm error",e)}))},marketing_modal(){E().open_it("marketing")},marketing_ek_modal(){E().open_it("marketing_ek")}},computed:{wording(){let e={classic_confirm:{span:"Dokončiť",paragraph:"",label:"Uvedený návrh na uzatvorenie poistnej zmluvy som si prečítal(a) a súhlasím s ním. Týmto prehlasujem, že som bol oboznámený(á) s vyššie uvedenou predzmluvnou dokumentáciou, obsahu som porozumel(a) a týmto vyjadrujem súhlas."},sms_agent:{span:"Odoslať návrh emailom",paragraph:"Pre dokončenie zmluvy o poskytnutí finančnej služby je potrebné potvrdenie klienta formou SMS autorizácie.",label:"Totožnosť klienta som overil a súhlasím s odoslaním dokumentácie na email klienta, aby dokončil autorizáciu."},sms_client:{span:"Vyžiadať SMS kód",paragraph:'Pre dokončenie zmluvy o poskytnutí finančnej služby je potrebné potvrdenie cez SMS kód - kliknutím na tlačitko "vyžiadať sms kód".',label:"Oboznámil som sa s predzmluvnou dokumentáciou, nemám žiadne výhrady s jej obsahom a žiadam o zaslanie SMS kódu na moje telefónne číslo."},provider_agent:{span:"Odoslať dokumentáciu emailom",paragraph:"Pre akceptáciu predzmluvnej dokumentácie je potrebné potvrdenie klienta formou SMS autorizácie a pre dokončenie zmluvy je potrebné doplniť chýbajúce údaje na webe providera a zmluvu podpísať.",label:"Totožnosť klienta som overil a súhlasím s odoslaním dokumentácie na email klienta, aby dokončil autorizáciu. Oboznámil som sa s predzmluvnou dokumentáciou, nemám žiadne výhrady s jej obsahom a žiadam o presmerovanie na stránku providera."},provider_client:{span:"Vyžiadať SMS kód",paragraph:"Pre akceptáciu predzmluvnej dokumentácie je potrebné potvrdenie klienta formou SMS autorizácie a pre dokončenie zmluvy je potrebné doplniť chýbajúce údaje na webe providera a zmluvu podpísať.",label:"Oboznámil som sa s predzmluvnou dokumentáciou, nemám žiadne výhrady s jej obsahom a žiadam o zaslanie SMS kódu na moje telefónne číslo."}};return e.hasOwnProperty(this.mode)?e[this.mode]:{}}}};const mo=(0,y.Z)(ho,[["render",Tn]]);var go=mo;const fo={"data-cy":"calc_confirm"},bo={key:0,class:"mb-5"},vo=(0,n._)("strong",{class:"text-accent"},"ešte dnes",-1),yo={key:0,class:"text-highlight"},wo={class:"row gx-3 gy-3"},ko=["innerHTML"],xo={key:1,class:"mt-4 mb-5 mx-4"},Zo={key:2,class:"row"},jo={class:"col-md-4 mb-3 mb-md-0"},zo={class:"col-sm-6 col-md-4 mb-3 mb-md-0"},Do={class:"col-sm-6 col-md-4"},Oo=["innerHTML"],So={class:"col-12 px-0 mt-5","data-cy":"docs_landing"},qo={class:"row"},Po={class:"col-12 mb-5 text-center"};function Co(e,t,a,s,i,o){const r=(0,n.up)("Title"),l=(0,n.up)("Gateways"),_=(0,n.up)("Info"),d=(0,n.up)("Qr"),c=(0,n.up)("Point"),u=(0,n.up)("Documents_prepare"),p=(0,n.up)("Docs_template"),h=(0,n.up)("Remap");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("section",fo,[(0,n.Wm)(r,{title:"Gratulujeme",subtitle:"Návrh zmluvy bol úspešne vytvorený a zaslaný poskytovateľovi."},{default:(0,n.w5)((()=>[o.add_pay_info?((0,n.wg)(),(0,n.iD)("p",bo,[(0,n.Uk)(" Splátku uhraďte "),vo,(0,n.Uk)(". "),o.add_what_next?((0,n.wg)(),(0,n.iD)("strong",yo," Bez zaplatenia zmluva nevznikne. ")):(0,n.kq)("",!0)])):(0,n.kq)("",!0)])),_:1}),(0,n._)("div",wo,[(0,n.Wm)(c,{order:1,title:o.point_one_title},{default:(0,n.w5)((()=>[o.dds?((0,n.wg)(),(0,n.iD)("p",{key:0,innerHTML:i.html.view_confirm_payment,class:"mt-4 mb-5 mx-4"},null,8,ko)):o.investicie_no_payment?((0,n.wg)(),(0,n.iD)("p",xo," Platobné inštrukcie nájdete v dokumentoch investičnej spoločnosti ")):((0,n.wg)(),(0,n.iD)("div",Zo,[(0,n._)("div",jo,[(0,n.Wm)(l)]),(0,n._)("div",zo,[(0,n.Wm)(_)]),(0,n._)("div",Do,[(0,n.Wm)(d)])]))])),_:1},8,["title"]),(0,n.Wm)(c,{order:2,title:"Uložiť dokumenty"},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{start_doc_requests:i.start_doc_requests,step_html:"5"},null,8,["start_doc_requests"])])),_:1}),(0,n.Wm)(c,{order:3,title:"E-mail a ďalšie inštrukcie"},{default:(0,n.w5)((()=>[(0,n._)("div",{innerHTML:i.html.view_confirm_text},null,8,Oo)])),_:1}),(0,n._)("div",So,[(0,n.Wm)(p)])])]),o.remap_active?((0,n.wg)(),(0,n.j4)(h,{key:0})):(0,n.kq)("",!0),(0,n._)("div",qo,[(0,n._)("div",Po,[(0,n._)("button",{onClick:t[0]||(t[0]=(...e)=>o.clear&&o.clear(...e)),type:"button",class:"btn btn-primary btn-lg btn-left"}," Vymazať údaje ")])])],64)}const To=(0,n._)("h4",null,"Platba online",-1),Eo={class:"gateways","data-cy":"gateways"},Uo=["href","id","title"],Mo=["src","alt"];function Io(e,t,a,s,o,r){return(0,n.wg)(),(0,n.iD)(n.HY,null,[To,(0,n._)("div",Eo,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.gateways,((e,t)=>(0,n.wy)(((0,n.wg)(),(0,n.iD)("a",{href:e.url,id:t,title:e.name,target:"_blank"},[(0,n._)("img",{src:e.logo,alt:e.name,width:"127"},null,8,Mo)],8,Uo)),[[i.F8,""!==e.url]]))),256))])],64)}class Ro{payment_info(){let e={action_name:"getpaymentinfo",method:"GET",url:(0,c.Z)().endpoint_url()+"online/getpaymentinfo/?"+N.Z.add_token_as_parameter()},t=new F;return t.prepare_params(e).handle_response().catch((e=>{throw e}))}generate_qr(){let e={action_name:"getpaymentqr",method:"GET",url:(0,c.Z)().endpoint_url()+"online/getpaymentqr/?"+N.Z.add_token_as_parameter()},t=new F;return t.prepare_params(e).handle_response().catch((e=>{throw e}))}get_gateways(){let e={action_name:"getpaymentgateways",method:"GET",url:(0,c.Z)().endpoint_url()+"online/getpaymentgateways/?"+N.Z.add_token_as_parameter()},t=new F;return t.prepare_params(e).handle_response().catch((e=>{throw e}))}payment_create(e){let t={action_name:"payment-create",method:"POST",url:(0,c.Z)().endpoint_url()+"online/payment-create/"+e+"/?"+N.Z.add_token_as_parameter()},a=new F;return a.prepare_params(t).handle_response().catch((e=>{throw e}))}payment_result(e,t){let a={action_name:"payment-result",method:"PUT",url:(0,c.Z)().endpoint_url()+"online/payment-result/"+e+"/?result="+t+N.Z.add_token_as_parameter()},s=new F;return s.prepare_params(a).handle_response().catch((e=>{throw e}))}}var Lo=new Ro,Ho={props:{},components:{},emits:[],data(){return{gateways:{}}},created(){Lo.get_gateways().then((e=>{for(let t in e.result){if(!e.result.hasOwnProperty(t))continue;if(isNaN(t))continue;let a=e.result[t]?.name,s=e.result[t]?.url_logo;null===s?s="":"http"!==s.substring(0,4)&&(s="https://www.najpoistenie.sk/wp-content/themes/najpoistenie/images/loga-banky/"+s+".png"),this.gateways[t]={logo:s,name:a,url:""},Lo.payment_create(t).then((e=>{200!==e.status&&console.log("requesting gateway URL failed with id: "+t,e),this.gateways[t].url=e.result.url;let a=(0,c.Z)().get_payment_data().payment_debug;a&&this.debug_url_for_payment_gateway(t)}))}}))},methods:{debug_url_for_payment_gateway(e){let t=this.gateways[e].url,a=t?.replace("pay-request","pay-request-test");this.gateways[e].url=a}},computed:{},watch:{}};const No=(0,y.Z)(Ho,[["render",Io]]);var Ko=No;const $o=(0,n._)("h4",null,"Platba prevodom na účet",-1),Fo=(0,n._)("br",null,null,-1),Vo=(0,n._)("br",null,null,-1),Ao=(0,n._)("br",null,null,-1),Wo=(0,n._)("br",null,null,-1),Bo=(0,n._)("br",null,null,-1);function Yo(e,t,a,s,i,r){return(0,n.wg)(),(0,n.iD)(n.HY,null,[$o,(0,n.Uk)(" IBAN: "),(0,n._)("strong",null,(0,o.zw)(i.payment_info.iban),1),Fo,(0,n.Uk)(" SWIFT: "),(0,n._)("strong",null,(0,o.zw)(i.payment_info.swift),1),Vo,(0,n.Uk)(" Platba: "),(0,n._)("strong",null,(0,o.zw)(i.payment_info.amount),1),Ao,(0,n.Uk)(" Variabilný symbol: "),(0,n._)("strong",null,(0,o.zw)(i.payment_info.vs),1),Wo,(0,n.Uk)(" Konštantný symbol: "),(0,n._)("strong",null,(0,o.zw)(i.payment_info.ks),1),Bo],64)}var Go={props:{},components:{},emits:[],data(){return{payment_info:{}}},created(){Lo.payment_info().then((e=>{200===e.status&&(this.payment_info=e.result.paymentinfo)}))},methods:{},computed:{},watch:{}};const Jo=(0,y.Z)(Go,[["render",Yo]]);var Qo=Jo;const Xo=(0,n._)("h4",null,"Platba cez QR kód",-1),er={id:"qr_container"},tr=["src"];function ar(e,t,a,s,i,o){return(0,n.wg)(),(0,n.iD)(n.HY,null,[Xo,(0,n._)("div",er,[(0,n._)("img",{src:o.qr_code,class:"qr_code"},null,8,tr)])],64)}var sr={props:{},components:{},emits:[],data(){return{base64:""}},created(){Lo.generate_qr().then((e=>{200===e.status&&(this.base64=e.result.pbs)}))},methods:{},computed:{qr_code(){return this.base64?"data:image/png;base64,"+this.base64:""}},watch:{}};const ir=(0,y.Z)(sr,[["render",ar]]);var nr=ir;const or={class:"x-sell","data-cy":"remap"},rr=["innerHTML"],lr=(0,n._)("br",null,null,-1);function _r(e,t,a,s,r,l){return(0,n.wg)(),(0,n.iD)("section",or,[(0,n._)("div",{innerHTML:r.view_redirect_text,class:"text-center text-sm-start"},null,8,rr),(0,n._)("button",{onClick:t[0]||(t[0]=(...e)=>l.run_remap&&l.run_remap(...e)),class:"btn btn-primary btn-right btn-lg"}," Porovnať havarijné poistenie "),(0,n.wy)((0,n._)("p",null,[(0,n.Uk)(" FAILED:"),lr,(0,n.Uk)(" "+(0,o.zw)(r.remap_error),1)],512),[[i.F8,r.remap_error]])])}class dr{session_remap(){let e={action_name:"session-remap",method:"GET",url:(0,c.Z)().endpoint_url()+"online/session-remap/?destGroup=2&"+N.Z.add_token_as_parameter()},t=new F;return t.prepare_params(e).handle_response().then().catch((e=>{throw e}))}}var cr=new dr,ur={props:{},components:{},emits:[],data(){return{view_redirect_text:"",remap_error:""}},created(){Un.get_it("view_redirect_text").then((e=>{this.view_redirect_text=e.result?.html||""}))},methods:{run_remap(){this.remap_error="",cr.session_remap().then((e=>{if(200!==e.status)return void(this.remap_error=e.result.message);let t=e.result.new_token;void 0!==t&&null!==t&&""!==t?(N.Z.clear_session(),(0,c.Z)().set_session_token(t,!1),(0,c.Z)().change_product_group_id(2),(0,c.Z)().change_step(1)):this.remap_error=JSON.stringify(e.result)}))}},computed:{},watch:{}};const pr=(0,y.Z)(ur,[["render",_r]]);var hr=pr;const mr={class:"calc_title_area"},gr={class:"text-primary"},fr={class:"mb-3"};function br(e,t,a,s,i,r){return(0,n.wg)(),(0,n.iD)("div",mr,[(0,n._)("h2",gr,(0,o.zw)(a.title),1),(0,n._)("p",fr,(0,o.zw)(a.subtitle),1),(0,n.WI)(e.$slots,"default")])}var vr={props:{title:String,subtitle:String},components:{},emits:[],data(){return{}},created(){},methods:{},computed:{},watch:{}};const yr=(0,y.Z)(vr,[["render",br]]);var wr=yr;const kr=["data-cy"],xr={class:"d-flex point-head"},Zr={class:"flex-shrink-0 point-number"},jr={class:"flex-grow-1"},zr={class:"point-body"};function Dr(e,t,a,s,i,r){return(0,n.wg)(),(0,n.iD)("div",{class:"col-12 point-box","data-cy":"point_"+a.order},[(0,n._)("div",xr,[(0,n._)("div",Zr,[(0,n._)("span",{class:(0,o.C_)("i_next_step"+a.order)},null,2)]),(0,n._)("div",jr,[(0,n._)("h3",null,(0,o.zw)(a.title),1)])]),(0,n._)("div",zr,[(0,n.WI)(e.$slots,"default")])],8,kr)}var Or={props:{order:Number,title:String},components:{},emits:[],data(){return{}},created(){},methods:{},computed:{},watch:{}};const Sr=(0,y.Z)(Or,[["render",Dr]]);var qr=Sr;const Pr={class:"docs_landing_scope"},Cr=["innerHTML"],Tr={key:3,class:"row"},Er={class:"col-12 col-md-4"},Ur={key:4},Mr={key:0},Ir=(0,n._)("hr",null,null,-1);function Rr(e,t,a,s,i,r){const l=(0,n.up)("Send_button"),_=(0,n.up)("Upload_input"),d=(0,n.up)("Testing_template");return(0,n.wg)(),(0,n.iD)("div",Pr,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.clear_template_data,(e=>((0,n.wg)(),(0,n.iD)("div",null,["html_key"===e.key?((0,n.wg)(),(0,n.iD)("div",{key:0,innerHTML:e.content,class:"dl_item_text"},null,8,Cr)):"button_key"===e.key?((0,n.wg)(),(0,n.j4)(l,{key:1,input:e.content},null,8,["input"])):"input_key"===e.key?((0,n.wg)(),(0,n.j4)(_,{key:2,tag:e.tag,onRefresh_uploaded_ids:r.refresh_uploaded_ids},null,8,["tag","onRefresh_uploaded_ids"])):"tiles_key"===e.key?((0,n.wg)(),(0,n.iD)("div",Tr,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.all_tags,(e=>((0,n.wg)(),(0,n.iD)("div",Er,[(0,n.Wm)(_,{tag:e,onRefresh_uploaded_ids:r.refresh_uploaded_ids},null,8,["tag","onRefresh_uploaded_ids"])])))),256))])):"grouped_key"===e.key?((0,n.wg)(),(0,n.iD)("div",Ur,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.all_tags,(e=>((0,n.wg)(),(0,n.j4)(_,{tag:e,onRefresh_uploaded_ids:r.refresh_uploaded_ids},null,8,["tag","onRefresh_uploaded_ids"])))),256))])):(0,n.kq)("",!0)])))),256)),i.debug?((0,n.wg)(),(0,n.iD)("div",Mr,[Ir,(0,n._)("pre",null,"\t\t\t\t"+(0,o.zw)(i.session_debug)+"\n\t\t\t",1)])):(0,n.kq)("",!0),(0,n.Wm)(d)])}var Lr=a(6107);const Hr={class:"img_wrapper"},Nr=["src"],Kr=["src"],$r={key:0,class:"dl_filename pt-1 pb-0 py-md-4"},Fr=["title"],Vr={key:1,class:"my-auto mx-auto mx-md-0"},Ar=["multiple"],Wr={class:"dl_progress"},Br=["title"],Yr=["onClick"],Gr=(0,n._)("div",{class:"delete_symbol"},null,-1),Jr=[Gr],Qr={key:1,src:Lr,width:"41",height:"41"},Xr=["src"],el={key:1,class:"dl_action pt-2 pb-3 py-md-3 py-md-4 px-3"},tl=["disabled"],al={key:2,class:"dl_action pt-2 pb-3 py-md-3 py-md-4 pe-3"};function sl(e,t,a,s,r,l){return(0,n.wy)(((0,n.wg)(),(0,n.iD)("div",{class:(0,o.C_)(l.sii?[]:["tiles dl_item_file d-flex flex-column text-center",l.class_status])},[l.dgg_only_first?((0,n.wg)(),(0,n.iD)("div",{key:0,class:(0,o.C_)(l.sii?"dl_title text-center text-md-start":"dl_title text-center")},[(0,n._)("h5",null,(0,o.zw)(l.heading_and_required),1)],2)):(0,n.kq)("",!0),(0,n._)("div",{class:(0,o.C_)(l.sii?["dl_item_file d-flex flex-column flex-md-row align-items-stretch text-center text-md-start",l.class_status,l.dgg_not_last]:["d-flex flex-column"])},[(0,n._)("div",{class:(0,o.C_)(l.sii?"dl_image d-flex pb-2 pt-3 p-md-2 mx-auto mx-md-0 mx-auto mx-md-0":"dl_image px-3 py-2")},[(0,n._)("div",Hr,[l.sii?((0,n.wg)(),(0,n.iD)("img",{key:0,src:l.image_sample,width:"67",height:"67",class:"my-auto"},null,8,Nr)):((0,n.wg)(),(0,n.iD)("img",{key:1,src:l.image_sample,width:"322",height:"241.5"},null,8,Kr))])],2),l.sii?((0,n.wg)(),(0,n.iD)("div",$r,[l.mff?((0,n.wg)(),(0,n.iD)("p",{key:0,class:"my-auto mx-auto mx-md-0",title:l.give_filename.names.join(" ")},(0,o.zw)(l.give_filename.label),9,Fr)):((0,n.wg)(),(0,n.iD)("p",Vr,(0,o.zw)(l.give_filename),1))])):(0,n.kq)("",!0),(0,n._)("div",{class:(0,o.C_)(l.sii?"dl_up_download py-3 py-md-4 px-3":"dl_up_download py-3")},[(0,n._)("input",{onChange:t[0]||(t[0]=(...e)=>l.picked_file&&l.picked_file(...e)),multiple:l.mff,ref:"file_input",type:"file",id:"{{ input.tags }}"},null,40,Ar),(0,n._)("div",{class:(0,o.C_)(l.sii?"btn-wrapper my-auto mx-auto mx-md-0":"btn-wrapper mx-auto")},[(0,n._)("button",{onClick:t[1]||(t[1]=(...e)=>l.select_file&&l.select_file(...e)),type:"button",class:"btn btn-primary btn-upload btn-m",title:"Nahrať súbor"},(0,o.zw)(l.mff?"Vyberte súbory":"Vyberte súbor"),1),(0,n._)("button",{onClick:t[2]||(t[2]=(...e)=>l.download_doc&&l.download_doc(...e)),type:"button",class:(0,o.C_)(["btn btn-primary btn-download btn-m btn-compact",l.allow_download?"":"v_hidden"]),title:"Stiahnuť súbor"},null,2)],2)],2),(0,n._)("div",Wr,[(0,n._)("div",{style:(0,o.j5)({height:r.number_solid+"%"}),class:"dl_bar bar_vertical"},null,4),(0,n._)("div",{style:(0,o.j5)({height:r.number_opaque+"%",opacity:"0.3"}),class:"dl_bar bar_vertical"},null,4),(0,n._)("div",{style:(0,o.j5)({width:r.number_solid+"%"}),class:"dl_bar bar_horizontal"},null,4),(0,n._)("div",{style:(0,o.j5)({width:r.number_opaque+"%",opacity:"0.3"}),class:"dl_bar bar_horizontal"},null,4)]),(0,n._)("div",{class:(0,o.C_)(l.sii?"dl_status pt-3 pb-2 py-md-3 py-md-4 ps-md-3":"dl_status py-4 py-md-3 px-3")},[(0,n._)("p",{class:(0,o.C_)(l.sii?"my-auto mx-auto mx-md-0":"my-auto mx-auto")},(0,o.zw)(l.user_info_status),3),l.mff?((0,n.wg)(!0),(0,n.iD)(n.HY,{key:0},(0,n.Ko)(r.preview_many,((e,t)=>((0,n.wg)(),(0,n.iD)("div",{title:t+(e.allow_delete?"":" ODOSLANÝ"),class:"cross_on_hover"},[e.allow_delete?((0,n.wg)(),(0,n.iD)("div",{key:0,onClick:e=>l.delete_doc(t),class:"overlay"},Jr,8,Yr)):(0,n.kq)("",!0),"pdf_icon"===e.src?((0,n.wg)(),(0,n.iD)("img",Qr)):((0,n.wg)(),(0,n.iD)("img",{key:2,src:e.src,width:"41",height:"41"},null,8,Xr))],8,Br)))),256)):(0,n.kq)("",!0)],2),l.sii&&!l.dgg?((0,n.wg)(),(0,n.iD)("div",el,[(0,n._)("button",{onClick:t[3]||(t[3]=(...e)=>l.send_to_provider&&l.send_to_provider(...e)),disabled:l.send_is_disabled,type:"button",class:"btn btn-primary btn-send btn-m my-auto mx-auto mx-md-0"}," Poslať ",8,tl)])):(0,n.kq)("",!0),l.show_minus?((0,n.wg)(),(0,n.iD)("div",al,[(0,n._)("span",{onClick:t[4]||(t[4]=(...e)=>l.decrease_shown&&l.decrease_shown(...e)),class:"dl_remove mx-auto mx-md-0 my-md-auto",title:"Odobrať súbor"})])):(0,n.kq)("",!0)],2)],2)),[[i.F8,l.is_displayed_in_group]])}class il{create_data_record(e){let t={action_name:"create-data-record-request",method:"POST",url:(0,c.Z)().endpoint_url()+"online/create-data-record-request/?data_record_token="+e+N.Z.add_token_as_parameter(),body:JSON.stringify({data_record_data:["test"]}),content_type:"application/json"},a=new F;return a.prepare_params(t).handle_response().catch((e=>{throw e}))}}var nl=new il,ol=(0,T.Q_)("STATE_docs_landing",{state:()=>({session_state:[],input_data:{},tag_status:{},group_errors:{},group_displayed:{}}),getters:{one_session_state_by_tag(){const e=this.session_state;return t=>{let a,s=e.length;for(a=0;a<s;a++)if(e[a].tags[0]===t)return e[a];return null}},all_session_state_by_tag(){const e=this.session_state;return t=>{let a,s=[],i=e.length;for(a=0;a<i;a++)e[a].tags[0]===t&&s.push(e[a]);return s}},get_input_data(){const e=this.input_data;return t=>e[t]||{}},get_tag_status(){const e=this.tag_status;return t=>e[t]},get_tags_by_group(){const e=this.input_data;return t=>{let a=[];e.length;for(let s in e)e.hasOwnProperty(s)&&e[s].group===t&&a.push(s);return a}},get_group_error(){const e=this.group_errors;return t=>e[t]||""},grouped_shown_state_by_tag(){return e=>{let t=this.get_input_data(e).group;return this.group_displayed[t].shown_tags[e]}},grouped_all_are_shown(){return e=>{let t=this.group_displayed[e];return void 0===t||t.current>=t.max}},grouped_tag_position(){return e=>{let t=this.group_displayed[this.get_input_data(e).group].shown_tags,a=[];for(let i in t)t.hasOwnProperty(i)&&!0===t[i]&&a.push(i);let s=a.indexOf(e);return 0===s&&s===a.length-1?"both":0===s?"first":s===a.length-1?"last":"neither"}}},actions:{set_doc_session_state(e){this.session_state=e},add_input_data(e,t){this.input_data[e]=t},set_tag_status(e,t){let a=["empty","uploading","uploaded","failed","sending","sent","error"];-1!==a.indexOf(t)?this.tag_status[e]=t:console.log("baaad status")},init_status_from_session(e){const t=this.session_state;let a,s="empty",i=t.length;for(a=0;a<i;a++)if(t[a].tags?.[0]===e){if(!("object"===typeof t[a].dataRecords&&Object.keys(t[a].dataRecords).length>0)){s="uploaded";break}s="sent"}this.set_tag_status(e,s)},add_group_error(e,t){this.group_errors[e]=t},setup_displayed_in_group(e,t,a){let s,i={current:0,max:t,shown_tags:{}},n=a.length;for(s=0;s<n;s++){const e=this.one_session_state_by_tag(a[s]);0===s||null!==e?(i.shown_tags[a[s]]=!0,i.current++):i.shown_tags[a[s]]=!1}this.group_displayed[e]=i},increase_input_in_group(e){let t=this.group_displayed[e];if(!(t.current>=t.max)){this.group_displayed[e].current=this.group_displayed[e].current+1;for(let a in t.shown_tags)if(t.shown_tags.hasOwnProperty(a)&&!1===t.shown_tags[a]){this.group_displayed[e].shown_tags[a]=!0;break}}},decrease_input_in_group(e){let t=this.get_input_data(e).group;this.group_displayed[t].current<=1||(this.group_displayed[t].current=this.group_displayed[t].current-1,this.group_displayed[t].shown_tags[e]=!1)}}}),rl={props:{tag:String},components:{},emits:["refresh_uploaded_ids"],data(){return{debug:!1,error_message:"",preview_one:"",preview_many:{},number_solid:0,number_opaque:0,number_increment:0}},created(){ol().init_status_from_session(this.tag),this.download_preview()},methods:{select_file(){this.$refs.file_input.click()},set_status(e){ol().set_tag_status(this.tag,e)},picked_file(e){if(this.set_status("uploading"),this.validate_files_stop_upload(e.target.files))this.set_status("failed");else{for(let t in e.target.files){if(!e.target.files.hasOwnProperty(t))continue;let a=this.prepare_payload(e.target.files[t]);this.upload_doc(a)}this.$refs.file_input.value=null}},validate_files_stop_upload(e){if(this.mff&&this.input_data.multiple>1){let t=e.length,a=this.get_all_session.length,s=this.input_data.multiple;if(t+a>s)return this.error_message="Presiahnuté maximálne množstvo súborov, vybrané: "+t+" nahrané: "+a+", max: "+s,!0}let t=2,a=1048576;for(let s in e){if(!e.hasOwnProperty(s))continue;let i=e[s];if(i.size>t*a)return this.error_message="Presiahnutá povolená veľkosť súboru "+Math.round(i.size/a*100)/100+"mb, max: "+t+"mb",!0}return!1},prepare_payload(e){let t=N.Z.slugify_keep_extension_add_tag(e.name,this.tag);N.Z.starts_with(e.type,"image/")?this.mff?this.preview_many[t]={allow_delete:!0,src:URL.createObjectURL(e)}:this.preview_one=URL.createObjectURL(e):this.mff&&(this.preview_many[t]={allow_delete:!0,src:"pdf_icon"});let a=new FormData;if(a.append("file",e,t),a.append("title",t),a.append("description","uploaded by docs landing page"),a.append("type",e.type),a.append("tags",this.tag),this.mff||null===this.get_one_session||a.append("id",this.get_one_session.id),this.debug){let e=[];for(let t of a)e.push(t);console.log("PAYLOAD:",e)}return a},upload_doc(e){ao.upload_session_document(e).then((e=>{if(200===e.status)return this.set_status("uploaded"),void this.$emit("refresh_uploaded_ids");this.set_status("failed"),console.log(e)}))},download_doc(){let e=[];e=this.mff?this.get_all_session:[this.get_one_session];let t,a=e.length;for(t=0;t<a;t++){let a=e[t].name,s=e[t].id,i=e[t].documentType;ao.get_session_document(s).then((e=>{200!==e.status?(this.error_message=e.result?.message,this.set_status("failed")):N.Z.downloadBase64(a,e.result.content,null,i)}))}},delete_doc(e){let t,a=this.get_all_session;for(var s=a.length-1;s>=0;s--)a[s].name===e&&(t=a[s].id);void 0!==t?ao.delete_session_document(t).then((t=>{200===t.status&&(delete this.preview_many[e],0===Object.keys(this.preview_many).length&&this.set_status("empty"),this.$emit("refresh_uploaded_ids"))})):console.log("this should not happen, we dont have ID for "+e)},download_preview(){if("sent"!==this.get_status&&"uploaded"!==this.get_status)return;this.number_solid=100;let e=this.sii?100:350;if(this.mff){let t,a=this.get_all_session,s=a.length;for(t=s-1;t>=0;t--){let s=a[t].name,i=a[t].id,n=a[t].documentType,o=a[t].dataRecords;N.Z.starts_with(n,"image/")?ao.get_session_document_preview(i,e).then((e=>{void 0!==e.result.content&&(this.preview_many[s]={allow_delete:0===o.length,src:"data:image/jpeg;charset=utf-8;base64,"+e.result.content})})):this.preview_many[s]={allow_delete:0===o.length,src:"pdf_icon"}}return}this.get_one_session.name;let t=this.get_one_session.id,a=this.get_one_session.documentType;N.Z.starts_with(a,"image/")&&ao.get_session_document_preview(t,e).then((e=>{this.preview_one="data:image/jpeg;charset=utf-8;base64,"+e.result.content}))},send_to_provider(){let e=this.input_data.send;void 0!==e?(this.set_status("sending"),nl.create_data_record(e).then((e=>{if(200===e.status)return this.forbid_deletation_for_sent(),void this.set_status("sent");this.error_message=e.result?.message,this.set_status("error")}))):console.log("record_token is undefined, input has no send=... parameter")},forbid_deletation_for_sent(){if(this.mff)for(let e in this.preview_many)this.preview_many.hasOwnProperty(e)&&(this.preview_many[e].allow_delete=!1)},progress_bar_loading(){this.number_solid=0,this.number_opaque=0,this.number_increment=2;let e=setInterval((()=>{this.number_opaque=this.number_opaque+2,this.number_opaque>=100&&(this.number_opaque=this.number_solid-10)}),10),t=setInterval((()=>{"uploaded"!==this.get_status&&"sent"!==this.get_status||(this.number_increment=5),this.number_increment>0?this.number_increment=this.number_increment-.03:this.number_increment=0,this.number_solid=this.number_solid+this.number_increment,(this.number_solid>=100||"failed"===this.get_status||"error"===this.get_status)&&(this.number_solid=100,clearInterval(t),clearInterval(e))}),50)},decrease_shown(){ol().decrease_input_in_group(this.tag);let e=this.get_one_session;null!==e&&ao.delete_session_document(e.id).then((e=>{200===e.status&&(this.preview_one="",this.number_solid=0,this.number_opaque=0,this.set_status("empty"),this.$emit("refresh_uploaded_ids"))}))}},computed:{get_status(){return ol().get_tag_status(this.tag)},input_data(){return ol().get_input_data(this.tag)},get_one_session(){return ol().one_session_state_by_tag(this.tag)},get_all_session(){return ol().all_session_state_by_tag(this.tag)},send_is_disabled(){return"uploaded"!==this.get_status&&"error"!==this.get_status},user_info_status(){let e={empty:"Nahrajte prosím prílohu",uploading:"Nahrávam...",uploaded:this.mff?"súbory nahraté":"súbor nahratý",failed:""===this.error_message?"nahrávanie zlyhalo":this.error_message,sending:"Odosielam...",sent:this.mff?"súbory odoslané do poisťovne":"odoslaný do poisťovne "+N.Z.format_docs_date(this.get_one_session?.dataRecords[0]?.processed),error:this.sioo?this.error_message:ol().get_group_error(this.input_data.group)};return e[this.get_status]},class_status(){let e={empty:"",uploading:"",uploaded:"dl_success",failed:"dl_warning",sending:"",sent:"dl_sent",error:"dl_warning"};return e[this.get_status]},allow_download(){return"empty"!==this.get_status&&"uploading"!==this.get_status&&"sending"!==this.get_status},sioo(){return"single"===this.input_data.type},sii(){return"single"===this.input_data.type||"grouped"===this.input_data.type},mff(){return!isNaN(this.input_data.multiple)&&0!==this.input_data.multiple},dgg(){return"grouped"===this.input_data.type},heading_and_required(){return this.input_data.heading+(this.input_data.required?" *":"")},dgg_only_first(){if(!this.dgg)return!0;let e=ol().grouped_tag_position(this.tag);return"first"===e||"both"===e},dgg_not_last(){if(!this.dgg)return!1;let e=ol().grouped_tag_position(this.tag);return"last"!==e&&"both"!==e?"grouped_not_last":""},image_sample(){if(""!==this.preview_one)return this.preview_one;if(this.sii)return a(6107);try{return a(9299)("./"+this.input_data.image+".jpg")}catch(e){return a(3125)}},give_filename(){if(!this.mff)return this.get_one_session?.name;let e=this.get_all_session,t={label:"",names:[]};1===e.length?t.label=e.length+" súbor":e.length>1&&e.length<5?t.label=e.length+" súbory":e.length>=5&&(t.label=e.length+" súborov");let a,s=e.length;for(a=0;a<s;a++)t.names.push(e[a].name);return t},is_displayed_in_group(){return!this.dgg||ol().grouped_shown_state_by_tag(this.tag)},show_minus(){if(!this.dgg)return!1;let e=ol().grouped_tag_position(this.tag);return"both"!==e&&("empty"===this.get_status||"uploaded"===this.get_status)}},watch:{get_status(){"uploading"!==this.get_status&&"sending"!==this.get_status||this.progress_bar_loading()}}};const ll=(0,y.Z)(rl,[["render",sl]]);var _l=ll,dl=a(3125);const cl={key:0},ul=(0,n._)("h2",null,"Testing template",-1),pl=(0,n._)("div",{class:"dl_item_text"},[(0,n._)("h4",null,"Single file upload"),(0,n._)("p",null,[(0,n._)("strong",null,"Single file upload"),(0,n.Uk)(" Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam. ")]),(0,n._)("ul",null,[(0,n._)("li",null,"lorem ipsum"),(0,n._)("li",null,"dolor sit"),(0,n._)("li",null,"adipisicing elit")])],-1),hl=(0,n._)("div",{class:"dl_title text-center text-md-left"},[(0,n._)("h5",null," Default ")],-1),ml={class:"dl_item_file d-flex flex-column flex-md-row align-items-stretch text-center text-md-left"},gl=(0,n.uE)('<div class="dl_image d-flex pb-2 pt-3 p-md-2 mx-auto mx-md-0 mx-auto mx-md-0"><div class="img_wrapper"><img src="'+Lr+'" width="67" height="67" class="my-auto"></div></div><div class="dl_filename pt-1 pb-0 py-md-4"><p class="my-auto mx-auto mx-md-0"> Loremipsumdolor.docx </p></div>',2),fl={class:"dl_up_download py-3 py-md-4 px-3"},bl={class:"btn-wrapper my-auto mx-auto mx-md-0"},vl=(0,n._)("button",{type:"button",class:"btn btn-primary btn-download btn-m btn-compact"},null,-1),yl=(0,n.uE)('<div class="dl_progress"><div class="dl_bar bar_vertical" style="height:0;"></div><div class="dl_bar bar_horizontal" style="width:0;"></div></div><div class="dl_status pt-3 pb-2 py-md-3 py-md-4 pl-md-3"><p class="my-auto mx-auto mx-md-0"> Nahrajte prosím prílohu </p></div><div class="dl_action pt-2 pb-3 py-md-3 py-md-4 px-3"><button type="button" class="btn btn-primary btn-send btn-m my-auto mx-auto mx-md-0" disabled="disabled"> Poslať </button></div>',3),wl=(0,n._)("div",{class:"dl_title text-center text-md-left"},[(0,n._)("h5",null," Uploading ")],-1),kl={class:"dl_item_file d-flex flex-column flex-md-row align-items-stretch text-center text-md-left"},xl=(0,n.uE)('<div class="dl_image d-flex pb-2 pt-3 p-md-2 mx-auto mx-md-0"><div class="img_wrapper"><img src="'+Lr+'" width="67" height="67" class="my-auto"></div></div><div class="dl_filename pt-1 pb-0 py-md-4"><p class="my-auto mx-auto mx-md-0"> Loremipsumdolor.docx </p></div>',2),Zl={class:"dl_up_download py-3 py-md-4 px-3"},jl={class:"btn-wrapper my-auto mx-auto mx-md-0"},zl=(0,n._)("button",{type:"button",class:"btn btn-primary btn-download btn-m btn-compact"},null,-1),Dl=(0,n.uE)('<div class="dl_progress"><div class="dl_bar bar_vertical" style="height:30%;"></div><div class="dl_bar bar_horizontal" style="width:30%;"></div></div><div class="dl_status pt-3 pb-2 py-md-3 py-md-4 pl-md-3"><p class="my-auto mx-auto mx-md-0"> Nahrávam... </p></div><div class="dl_action pt-2 pb-3 py-md-3 py-md-4 px-3"><button type="button" class="btn btn-primary btn-send btn-m my-auto mx-auto mx-md-0" disabled="disabled"> Poslať </button></div>',3),Ol=(0,n._)("div",{class:"dl_title text-center text-md-left"},[(0,n._)("h5",null," Success ")],-1),Sl={class:"dl_item_file d-flex flex-column flex-md-row align-items-stretch text-center text-md-left dl_success"},ql=(0,n.uE)('<div class="dl_image d-flex pb-2 pt-3 p-md-2 mx-auto mx-md-0"><div class="img_wrapper"><img src="'+Lr+'" width="67" height="67" class="my-auto"></div></div><div class="dl_filename pt-1 pb-0 py-md-4"><p class="my-auto mx-auto mx-md-0"> Loremipsumdolorsitamet.docx </p></div>',2),Pl={class:"dl_up_download py-3 py-md-4 px-3"},Cl={class:"btn-wrapper my-auto mx-auto mx-md-0"},Tl=(0,n._)("button",{type:"button",class:"btn btn-primary btn-download btn-m btn-compact"},null,-1),El=(0,n.uE)('<div class="dl_progress"><div class="dl_bar bar_vertical" style="height:100%;"></div><div class="dl_bar bar_horizontal" style="width:100%;"></div></div><div class="dl_status pt-3 pb-2 py-md-3 py-md-4 pl-md-3"><p class="my-auto mx-auto mx-md-0"> Nahrajte prosím prílohu </p></div><div class="dl_action pt-2 pb-3 py-md-3 py-md-4 px-3"><button type="button" class="btn btn-primary btn-send btn-m my-auto mx-auto mx-md-0"> Poslať </button></div>',3),Ul=(0,n._)("div",{class:"dl_title text-center text-md-left"},[(0,n._)("h5",null," Error ")],-1),Ml={class:"dl_item_file d-flex flex-column flex-md-row align-items-stretch text-center text-md-left dl_warning"},Il=(0,n.uE)('<div class="dl_image d-flex pb-2 pt-3 p-md-2 mx-auto mx-md-0"><div class="img_wrapper"><img src="'+Lr+'" width="67" height="67" class="my-auto"></div></div><div class="dl_filename d-flex py-1 py-md-4"><p class="my-auto mx-auto mx-md-0"> Loremipsumdolorsitamet.docx </p></div>',2),Rl={class:"dl_up_download py-3 py-md-4 px-3"},Ll={class:"btn-wrapper my-auto mx-auto mx-md-0"},Hl=(0,n._)("button",{type:"button",class:"btn btn-primary btn-download btn-m btn-compact"},null,-1),Nl=(0,n.uE)('<div class="dl_progress"><div class="dl_bar bar_vertical" style="height:65%;"></div><div class="dl_bar bar_horizontal" style="width:65%;"></div></div><div class="dl_status pt-3 pb-2 py-md-3 py-md-4 pl-md-3"><p class="my-auto mx-auto mx-md-0"> Nahrajte prosím prílohu </p></div><div class="dl_action pt-2 pb-3 py-md-3 py-md-4 px-3"><button type="button" class="btn btn-primary btn-send btn-m my-auto mx-auto mx-md-0" disabled="disabled"> Poslať </button></div>',3),Kl=(0,n._)("div",{class:"dl_title text-center text-md-left"},[(0,n._)("h5",null," Odoslaný ")],-1),$l={class:"dl_item_file d-flex flex-column flex-md-row align-items-stretch text-center text-md-left dl_sent"},Fl=(0,n.uE)('<div class="dl_image d-flex pb-2 pt-3 p-md-2 mx-auto mx-md-0"><div class="img_wrapper"><img src="'+Lr+'" width="67" height="67" class="my-auto"></div></div><div class="dl_filename pt-1 pb-0 py-md-4"><p class="my-auto mx-auto mx-md-0"> Long_file_name_loremipsumdolor.docx </p></div>',2),Vl={class:"dl_up_download py-3 py-md-4 px-3"},Al={class:"btn-wrapper my-auto mx-auto mx-md-0"},Wl=(0,n._)("button",{type:"button",class:"btn btn-primary btn-download btn-m btn-compact"},null,-1),Bl=(0,n.uE)('<div class="dl_progress"><div class="dl_bar bar_vertical" style="height:100%;"></div><div class="dl_bar bar_horizontal" style="width:100%;"></div></div><div class="dl_status pt-3 pb-2 py-md-3 py-md-4 pl-md-3"><p class="my-auto mx-auto mx-md-0"> Odoslaný do poisťovne </p></div><div class="dl_action pt-2 pb-3 py-md-3 py-md-4 px-3"><button type="button" class="btn btn-primary btn-send btn-m my-auto mx-auto mx-md-0" disabled="disabled"> Poslať </button></div>',3),Yl=(0,n._)("div",{class:"dl_item_text"},[(0,n._)("h4",null,"Multi file upload"),(0,n._)("p",null,[(0,n._)("strong",null,"Multi file upload"),(0,n.Uk)(" Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam. ")])],-1),Gl={class:"row"},Jl={class:"col-12 col-md-4"},Ql={class:"tiles dl_item_file d-flex flex-column text-center"},Xl=(0,n._)("div",{class:"dl_title text-center"},[(0,n._)("h5",null,"Uploading")],-1),e_=(0,n._)("div",{class:"dl_image px-3 py-2"},[(0,n._)("div",{class:"img_wrapper"},[(0,n._)("img",{src:dl,width:"322",height:"241.5"})])],-1),t_={class:"dl_up_download py-3"},a_={class:"btn-wrapper mx-auto"},s_=(0,n._)("button",{type:"button",class:"btn btn-primary btn-download btn-m btn-compact"},null,-1),i_=(0,n.uE)('<div class="dl_progress"><div class="dl_bar bar_vertical" style="height:30%;"></div><div class="dl_bar bar_horizontal" style="width:30%;"></div></div><div class="dl_status py-4 py-md-3 px-3"><p class="my-auto mx-auto"> Nahrávam IMG_2022-09-10.jpg </p></div>',2),n_={class:"col-12 col-md-4"},o_={class:"tiles dl_item_file d-flex flex-column text-center dl_success"},r_=(0,n._)("div",{class:"dl_title text-center"},[(0,n._)("h5",null,"Success")],-1),l_=(0,n._)("div",{class:"dl_image px-3 py-2"},[(0,n._)("div",{class:"img_wrapper"},[(0,n._)("img",{src:dl,width:"322",height:"241.5"})])],-1),__={class:"dl_up_download py-3"},d_={class:"btn-wrapper mx-auto"},c_=(0,n._)("button",{type:"button",class:"btn btn-primary btn-download btn-m btn-compact"},null,-1),u_=(0,n.uE)('<div class="dl_progress"><div class="dl_bar bar_vertical" style="height:100%;"></div><div class="dl_bar bar_horizontal" style="width:100%;"></div></div><div class="dl_status py-4 py-md-3 px-3"><p class="my-auto mx-auto"> IMG_2022-09-10.jpg nahratý </p></div>',2),p_={class:"col-12 col-md-4"},h_={class:"tiles dl_item_file d-flex flex-column text-center dl_warning"},m_=(0,n._)("div",{class:"dl_title text-center"},[(0,n._)("h5",null,"Error")],-1),g_=(0,n._)("div",{class:"dl_image px-3 py-2"},[(0,n._)("div",{class:"img_wrapper"},[(0,n._)("img",{src:dl,width:"322",height:"241.5"})])],-1),f_={class:"dl_up_download py-3"},b_={class:"btn-wrapper mx-auto"},v_=(0,n._)("button",{type:"button",class:"btn btn-primary btn-download btn-m btn-compact"},null,-1),y_=(0,n.uE)('<div class="dl_progress"><div class="dl_bar bar_vertical" style="height:100%;"></div><div class="dl_bar bar_horizontal" style="width:100%;"></div></div><div class="dl_status py-4 py-md-3 px-3"><p class="my-auto mx-auto"> Vyskytla sa chyba lorem ipsum </p></div>',2),w_={class:"row"},k_={class:"col-12 col-md-4"},x_={class:"tiles dl_item_file d-flex flex-column text-center dl_sent"},Z_=(0,n._)("div",{class:"dl_title text-center"},[(0,n._)("h5",null,"Sent")],-1),j_=(0,n._)("div",{class:"dl_image px-3 py-2"},[(0,n._)("div",{class:"img_wrapper"},[(0,n._)("img",{src:dl,width:"322",height:"241.5"})])],-1),z_={class:"dl_up_download py-3"},D_={class:"btn-wrapper mx-auto"},O_=(0,n._)("button",{type:"button",class:"btn btn-primary btn-download btn-m btn-compact"},null,-1),S_=(0,n.uE)('<div class="dl_progress"><div class="dl_bar bar_vertical" style="height:100%;"></div><div class="dl_bar bar_horizontal" style="width:100%;"></div></div><div class="dl_status py-4 py-md-3 px-3"><p class="my-auto mx-auto"> IMG_2022-09-10.jpg odoslaný do poisťovne </p></div>',2),q_={class:"col-12 col-md-4"},P_={class:"tiles dl_item_file d-flex flex-column text-center"},C_=(0,n._)("div",{class:"dl_title text-center"},[(0,n._)("h5",null,"Predobok ľavý")],-1),T_=(0,n._)("div",{class:"dl_image px-3 py-2"},[(0,n._)("div",{class:"img_wrapper"},[(0,n._)("img",{src:dl,width:"322",height:"241.5"})])],-1),E_={class:"dl_up_download py-3"},U_={class:"btn-wrapper mx-auto"},M_=(0,n._)("button",{type:"button",class:"btn btn-primary btn-download btn-m btn-compact"},null,-1),I_=(0,n.uE)('<div class="dl_progress"><div class="dl_bar bar_vertical" style="height:0;"></div><div class="dl_bar bar_horizontal" style="width:0;"></div></div><div class="dl_status py-4 py-md-3 px-3"><p class="my-auto mx-auto"> Nahrajte prosím prílohu podľa vzoru na obrázku </p></div>',2),R_={class:"col-12 col-md-4"},L_={class:"tiles dl_item_file d-flex flex-column text-center"},H_=(0,n._)("div",{class:"dl_title text-center"},[(0,n._)("h5",null,"Zadobok pravý")],-1),N_=(0,n._)("div",{class:"dl_image px-3 py-2"},[(0,n._)("div",{class:"img_wrapper"},[(0,n._)("img",{src:dl,width:"322",height:"241.5"})])],-1),K_={class:"dl_up_download py-3"},$_={class:"btn-wrapper mx-auto"},F_=(0,n._)("button",{type:"button",class:"btn btn-primary btn-download btn-m btn-compact"},null,-1),V_=(0,n.uE)('<div class="dl_progress"><div class="dl_bar bar_vertical" style="height:0;"></div><div class="dl_bar bar_horizontal" style="width:0;"></div></div><div class="dl_status py-4 py-md-3 px-3"><p class="my-auto mx-auto"> Nahrajte prosím prílohu podľa vzoru na obrázku </p></div>',2),A_=(0,n.uE)('<div class="dl_item_action"><div class="row"><div class="col-12 col-sm-9 col-md-10 my-auto"><p> Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam </p></div><div class="col-12 col-sm-3 col-md-2 text-center text-sm-right"><button type="button" class="btn btn-primary btn-send btn-m mt-2 mt-md-0"> Poslať </button></div></div></div>',1);function W_(e,t,a,s,i,o){return i.show_testing_template?((0,n.wg)(),(0,n.iD)("div",cl,[ul,pl,hl,(0,n._)("div",ml,[gl,(0,n._)("div",fl,[(0,n._)("input",{type:"file",id:"{{ input.tags }}",onChange:t[0]||(t[0]=(...t)=>e.picked_file&&e.picked_file(...t)),ref:"file_input"},null,544),(0,n._)("div",bl,[(0,n._)("button",{type:"button",class:"btn btn-primary btn-upload btn-m",onClick:t[1]||(t[1]=(...t)=>e.select_file&&e.select_file(...t))}," Vyberte súbor "),vl])]),yl]),wl,(0,n._)("div",kl,[xl,(0,n._)("div",Zl,[(0,n._)("input",{type:"file",id:"{{ input.tags }}",onChange:t[2]||(t[2]=(...t)=>e.picked_file&&e.picked_file(...t)),ref:"file_input"},null,544),(0,n._)("div",jl,[(0,n._)("button",{type:"button",class:"btn btn-primary btn-upload btn-m",onClick:t[3]||(t[3]=(...t)=>e.select_file&&e.select_file(...t))}," Vyberte súbor "),zl])]),Dl]),Ol,(0,n._)("div",Sl,[ql,(0,n._)("div",Pl,[(0,n._)("input",{type:"file",id:"{{ input.tags }}",onChange:t[4]||(t[4]=(...t)=>e.picked_file&&e.picked_file(...t)),ref:"file_input"},null,544),(0,n._)("div",Cl,[(0,n._)("button",{type:"button",class:"btn btn-primary btn-upload btn-m",onClick:t[5]||(t[5]=(...t)=>e.select_file&&e.select_file(...t))}," Vyberte súbor "),Tl])]),El]),Ul,(0,n._)("div",Ml,[Il,(0,n._)("div",Rl,[(0,n._)("input",{type:"file",id:"{{ input.tags }}",onChange:t[6]||(t[6]=(...t)=>e.picked_file&&e.picked_file(...t)),ref:"file_input"},null,544),(0,n._)("div",Ll,[(0,n._)("button",{type:"button",class:"btn btn-primary btn-upload btn-m",onClick:t[7]||(t[7]=(...t)=>e.select_file&&e.select_file(...t))}," Vyberte súbor "),Hl])]),Nl]),Kl,(0,n._)("div",$l,[Fl,(0,n._)("div",Vl,[(0,n._)("input",{type:"file",id:"{{ input.tags }}",onChange:t[8]||(t[8]=(...t)=>e.picked_file&&e.picked_file(...t)),ref:"file_input"},null,544),(0,n._)("div",Al,[(0,n._)("button",{type:"button",class:"btn btn-primary btn-upload btn-m",onClick:t[9]||(t[9]=(...t)=>e.select_file&&e.select_file(...t))}," Vyberte súbor "),Wl])]),Bl]),Yl,(0,n._)("div",Gl,[(0,n._)("div",Jl,[(0,n._)("div",Ql,[Xl,e_,(0,n._)("div",t_,[(0,n._)("input",{type:"file",id:"{{ input.tags }}",onChange:t[10]||(t[10]=(...t)=>e.picked_file&&e.picked_file(...t)),ref:"file_input"},null,544),(0,n._)("div",a_,[(0,n._)("button",{type:"button",class:"btn btn-primary btn-upload btn-m",onClick:t[11]||(t[11]=(...t)=>e.select_file&&e.select_file(...t))}," Vyberte súbor "),s_])]),i_])]),(0,n._)("div",n_,[(0,n._)("div",o_,[r_,l_,(0,n._)("div",__,[(0,n._)("input",{type:"file",id:"{{ input.tags }}",onChange:t[12]||(t[12]=(...t)=>e.picked_file&&e.picked_file(...t)),ref:"file_input"},null,544),(0,n._)("div",d_,[(0,n._)("button",{type:"button",class:"btn btn-primary btn-upload btn-m",onClick:t[13]||(t[13]=(...t)=>e.select_file&&e.select_file(...t))}," Vyberte súbor "),c_])]),u_])]),(0,n._)("div",p_,[(0,n._)("div",h_,[m_,g_,(0,n._)("div",f_,[(0,n._)("input",{type:"file",id:"{{ input.tags }}",onChange:t[14]||(t[14]=(...t)=>e.picked_file&&e.picked_file(...t)),ref:"file_input"},null,544),(0,n._)("div",b_,[(0,n._)("button",{type:"button",class:"btn btn-primary btn-upload btn-m",onClick:t[15]||(t[15]=(...t)=>e.select_file&&e.select_file(...t))}," Vyberte súbor "),v_])]),y_])])]),(0,n._)("div",w_,[(0,n._)("div",k_,[(0,n._)("div",x_,[Z_,j_,(0,n._)("div",z_,[(0,n._)("input",{type:"file",id:"{{ input.tags }}",onChange:t[16]||(t[16]=(...t)=>e.picked_file&&e.picked_file(...t)),ref:"file_input"},null,544),(0,n._)("div",D_,[(0,n._)("button",{type:"button",class:"btn btn-primary btn-upload btn-m",onClick:t[17]||(t[17]=(...t)=>e.select_file&&e.select_file(...t))}," Vyberte súbor "),O_])]),S_])]),(0,n._)("div",q_,[(0,n._)("div",P_,[C_,T_,(0,n._)("div",E_,[(0,n._)("input",{type:"file",id:"{{ input.tags }}",onChange:t[18]||(t[18]=(...t)=>e.picked_file&&e.picked_file(...t)),ref:"file_input"},null,544),(0,n._)("div",U_,[(0,n._)("button",{type:"button",class:"btn btn-primary btn-upload btn-m",onClick:t[19]||(t[19]=(...t)=>e.select_file&&e.select_file(...t))}," Vyberte súbor "),M_])]),I_])]),(0,n._)("div",R_,[(0,n._)("div",L_,[H_,N_,(0,n._)("div",K_,[(0,n._)("input",{type:"file",id:"{{ input.tags }}",onChange:t[20]||(t[20]=(...t)=>e.picked_file&&e.picked_file(...t)),ref:"file_input"},null,544),(0,n._)("div",$_,[(0,n._)("button",{type:"button",class:"btn btn-primary btn-upload btn-m",onClick:t[21]||(t[21]=(...t)=>e.select_file&&e.select_file(...t))}," Vyberte súbor "),F_])]),V_])])]),A_])):(0,n.kq)("",!0)}var B_={props:{},components:{},data(){return{show_testing_template:!1}},created(){},methods:{},computed:{}};const Y_=(0,y.Z)(B_,[["render",W_]]);var G_=Y_;const J_={class:"dl_item_action"},Q_={class:"row"},X_={class:"col-12 col-sm-9 my-auto text-center text-md-start"},ed={class:"col-12 col-sm-3 text-center text-md-end text-nowrap"},td=["disabled","title"];function ad(e,t,a,s,i,r){return(0,n.wg)(),(0,n.iD)("div",J_,[(0,n._)("div",Q_,[(0,n._)("div",X_,[(0,n._)("p",null,(0,o.zw)(a.input.text),1)]),(0,n._)("div",ed,[r.allow_adding_more?((0,n.wg)(),(0,n.iD)("span",{key:0,onClick:t[0]||(t[0]=(...e)=>r.increase_shown&&r.increase_shown(...e)),class:"dl_add align-middle d-block d-sm-inline-block mx-auto me-sm-3 mt-2 mt-sm-0",title:"Pridať súbor"})):(0,n.kq)("",!0),(0,n._)("button",{onClick:t[1]||(t[1]=(...e)=>r.send_to_provider&&r.send_to_provider(...e)),disabled:r.send_disabled,type:"button",class:"btn btn-primary btn-send btn-m mt-2 mt-sm-0",title:a.input.group}," Poslať ",8,td)])])])}var sd={props:{input:{send:String,text:String,group:String}},components:{},data(){return{}},methods:{set_status(e){var t,a=this.grouped_tags.length;for(t=0;t<a;t++){let a=this.grouped_tags[t];"empty"!==ol().get_tag_status(a)&&ol().set_tag_status(a,e)}},send_to_provider(){let e=this.input.send;void 0!==e?(this.set_status("sending"),nl.create_data_record(e).then((e=>{200!==e.status?(ol().add_group_error(this.input.group,e.result?.message),this.set_status("error")):this.set_status("sent")}))):console.log("record_token is undefined, input has no send=... parameter")},increase_shown(){ol().increase_input_in_group(this.input.group)}},computed:{grouped_tags(){return ol().get_tags_by_group(this.input.group)},send_disabled(){let e,t=!0,a=this.grouped_tags.length;for(e=0;e<a;e++){let a=this.grouped_tags[e],s=ol().get_tag_status(a),i=ol().get_input_data(a).required;if(i&&"empty"===s){t=!0;break}"uploaded"!==s&&"error"!==s||(t=!1)}return t},allow_adding_more(){return!ol().grouped_all_are_shown(this.input.group)}}};const id=(0,y.Z)(sd,[["render",ad]]);var nd=id;class od{process_template(e){let t,a=e.split("%%"),s=[],i=a.length;for(t=0;t<i;t++){let e=a[t].replace(/\n/g,"").replace(/\t/g,"").trim();if(-1!==e.indexOf("send_button"))s.push({key:"button_key",content:{send:e.match(/send=\w+/)?.[0].replace("send=",""),text:e.match(/text="(.*?)"/)?.[0].replace('text="',"").replace('"',""),group:e.match(/group=\w+/)?.[0].replace("group=","")}});else if(null===e.match(/type=\w+/)){if(""===e||-1!==e.indexOf("display:none"))continue;s.push({key:"html_key",content:e})}else s.push(this.create_input_object(e))}return s}create_input_object(e){let t=e.match(/type=\w+/)?.[0].replace("type=","");if("single"===t){let a=e.match(/tags=\w+/)?.[0].replace("tags=",""),s=e.match(/send=\w+/)?.[0].replace("send=",""),i=e.match(/heading="(.*?)"/)?.[0].replace('heading="',"").replace('"',""),n=parseInt(e.match(/multiple=\w+/)?.[0].replace("multiple=",""),10),o={type:t,group:null,tags:a,send:s,heading:i,image:null,required:!1,multiple:n};return ol().add_input_data(a,o),{key:"input_key",tag:a}}if("tiles"===t){let a,s=[],i=e.match(/group=\w+/)?.[0].replace("group=",""),n=e.split("%"),o=n.length;for(a=0;a<o;a++){if(n[a].match(/type=/))continue;let e=n[a].match(/tags=\w+/)?.[0].replace("tags=",""),o=n[a].match(/heading="(.*?)"/)?.[0].replace('heading="',"").replace('"',""),r=n[a].match(/image="(.*?)"/)?.[0].replace('image="',"").replace('"',""),l=!!n[a].match(/required=1/),_={type:t,group:i,tags:e,send:null,heading:o,image:r,required:l,multiple:NaN};ol().add_input_data(e,_),s.push(e)}return{key:"tiles_key",all_tags:s}}if("grouped"===t){let a,s=[],i=e.match(/tags=\w+/)?.[0].replace("tags=",""),n=e.match(/group=\w+/)?.[0].replace("group=",""),o=e.match(/heading="(.*?)"/)?.[0].replace('heading="',"").replace('"',""),r=parseInt(e.match(/max=\w+/)?.[0].replace("max=",""),10),l=r;for(a=0;a<l;a++){let e=i+(a+1),r={type:t,group:n,tags:e,send:null,heading:o,image:null,required:!1,multiple:NaN};ol().add_input_data(e,r),s.push(e)}return ol().setup_displayed_in_group(n,r,s),{key:"grouped_key",all_tags:s}}return console.log("Parameter type="+t+" was not recognized."),{}}}var rd=new od,ld={props:{},components:{Upload_input:_l,Testing_template:G_,Send_button:nd},data(){return{debug:!1,template_name:"",template_raw:"",template_array:[],session_debug:"",debug_template:'\n\t\t\t\t\t<h2>Document upload landing page</h2>\n\t\t\t\t\t%% type=grouped tags=udalost group=udalost heading="Škodová udalosť záznamy" max=4 %%\n\t\t\t\t\t%% send_button send=upload_kasko_protokol_foto group=udalost plus_button=1 text="Deus vult dolor sit amet..." %%\n\t\t\t\t\t<p>\n\t\t\t\t\t\tLorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n\t\t\t\t\t</p>\n\t\t\t\t\t%% type=single tags=tp send=upload_kasko_tp_foto heading="Kapota auta" multiple=3 %%\n\t\t\t\t\t<p>\n\t\t\t\t\t\tLorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n\t\t\t\t\t</p>\n\t\t\t\t\t%% type=single tags=faktura send=upload_kasko_faktura_foto heading="Technický preukaz" %%\n\t\t\t\t\t<p>\n\t\t\t\t\t\tLorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tUt enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.\n\t\t\t\t\t</p>\n\t\t\t\t\t%%\n\t\t\t\t\t\ttype=tiles group=kufre\n\t\t\t\t\t\t%\n\t\t\t\t\t\ttags=protokol1 heading="Kufor 1" image="07_lavobok" required=1\n\t\t\t\t\t\t%\n\t\t\t\t\t\ttags=protokol2 heading="Kufor 2" image="08_pravobok" required=1\n\t\t\t\t\t\t%\n\t\t\t\t\t\ttags=protokol3 heading="Kufor 3" image="09_celne_sklo" required=1\n\t\t\t\t\t\t%\n\t\t\t\t\t\ttags=protokol4 heading="Kufor 4" required=0\n\t\t\t\t\t\t%\n\t\t\t\t\t\ttags=protokol5 heading="Kufor 5" required=0\n\t\t\t\t\t%%\n\t\t\t\t\t%% send_button send=upload_kasko_protokol_foto group=kufre text="Deus vult dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam" %%\n\t\t\t\t'}},created(){this.we_dont_have_token()||Promise.resolve().then((()=>this.get_template_token_name())).then((()=>Promise.all([this.get_document_template(),this.get_session_documents()]))).then((()=>{this.template_array=rd.process_template(this.template_raw)}))},methods:{we_dont_have_token(){return""===(0,c.Z)().get_session_token()&&(console.log("Session token is required."),!0)},get_template_token_name(){return this.debug?(console.log("using template: DEBUG"),Promise.resolve()):B.get_data().then((e=>{this.template_name=e.result.call_params?.osm_doc_template||"upload_placeholder",console.log("using template: "+this.template_name)}))},get_document_template(){return this.debug?(this.template_raw=this.debug_template,Promise.resolve()):Un.get_it(this.template_name).then((e=>{this.template_raw=e.result.error||e.result.html}))},get_session_documents(){return ao.session_documents(!0).then((e=>{this.session_debug=JSON.stringify(e,null,2),ol().set_doc_session_state(e.result.data?.documents)}))},refresh_uploaded_ids(){this.get_session_documents()}},computed:{clear_template_data(){return this.template_array}}};const _d=(0,y.Z)(ld,[["render",Rr]]);var dd=_d,cd={props:{},components:{Documents_prepare:po,Gateways:Ko,Info:Qo,Qr:nr,Remap:hr,Title:wr,Point:qr,Docs_template:dd},emits:[],data(){return{group:0,receiver:0,html:{view_confirm_payment:"",view_confirm_text:""},start_doc_requests:!1,load_docs_landing_section:!1}},created(){this.group=(0,c.Z)().product_group_id(),Un.get_it("view_confirm_text").then((e=>{this.html.view_confirm_text=e.result?.html})),Un.get_it("view_confirm_payment").then((e=>{this.html.view_confirm_payment=e.result?.html})),Un.get_it("view_confirm_docs_landing").then((e=>{e.result?.html&&e.result?.html.indexOf('id="osm_app"')>-1&&(this.load_docs_landing_section=!0)})),Promise.resolve().then((()=>B.get_data())).then((e=>{(0,g.Z)().extract_selected_product(e),this.receiver=parseInt(e.result?.call_params?.receiver,10),this.start_doc_requests=!0}))},methods:{clear(){E().open_it("cleaning_session")}},computed:{add_what_next(){return 4!==this.group},add_pay_info(){return 85!==this.group&&86!==this.group&&3!==this.group},dds(){return 85===this.group||86===this.group||73===this.group||3===this.group},investicie_no_payment(){return 6===this.group},remap_active(){return 2===this.receiver&&1===this.group},point_one_title(){return 85===this.group||86===this.group||3===this.group?"Podpísať vygenerovanú dokumentáciu":6===this.group?"Uhradiť na účet finančnej inštitúcie":"Uhradiť na účet poisťovne"}},watch:{}};const ud=(0,y.Z)(cd,[["render",Co]]);var pd=ud;const hd={"data-cy":"calc_payment"},md={key:0,class:"row gx-3 gy-3"},gd={class:"row"},fd={class:"col-md-4 mb-3 mb-md-0"},bd={class:"col-sm-6 col-md-4 mb-3 mb-md-0"},vd={class:"col-sm-6 col-md-4"},yd=["innerHTML"],wd={class:"col-12 px-0 mt-5","data-cy":"docs_landing"};function kd(e,t,a,s,i,o){const r=(0,n.up)("Title"),l=(0,n.up)("Gateways"),_=(0,n.up)("Info"),d=(0,n.up)("Qr"),c=(0,n.up)("Point"),u=(0,n.up)("Documents_prepare"),p=(0,n.up)("Docs_template");return(0,n.wg)(),(0,n.iD)("section",hd,[(0,n.Wm)(r,{title:o.title,subtitle:o.subtitle},null,8,["title","subtitle"]),null!==i.success&&"ERROR"!==i.success?((0,n.wg)(),(0,n.iD)("div",md,[!0!==i.success?((0,n.wg)(),(0,n.j4)(c,{key:0,order:1,title:"Uhradiť poistenie"},{default:(0,n.w5)((()=>[(0,n._)("div",gd,[(0,n._)("div",fd,[(0,n.Wm)(l)]),(0,n._)("div",bd,[(0,n.Wm)(_)]),(0,n._)("div",vd,[(0,n.Wm)(d)])])])),_:1})):(0,n.kq)("",!0),(0,n.Wm)(c,{order:i.success?1:2,title:"Uložiť dokumenty"},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{start_doc_requests:i.start_doc_requests,step_html:"5"},null,8,["start_doc_requests"])])),_:1},8,["order"]),(0,n.Wm)(c,{order:i.success?2:3,title:"E-mail a ďalšie inštrukcie"},{default:(0,n.w5)((()=>[(0,n._)("div",{innerHTML:i.view_confirm_text},null,8,yd)])),_:1},8,["order"]),(0,n._)("div",wd,[(0,n.Wm)(p)])])):(0,n.kq)("",!0)])}var xd={props:{},components:{Documents_prepare:po,Gateways:Ko,Info:Qo,Qr:nr,Title:wr,Point:qr,Payment_requests:Lo,Docs_template:dd},emits:[],data(){return{success:null,start_doc_requests:!1,view_confirm_text:"",load_docs_landing_section:!1}},created(){Un.get_it("view_confirm_text").then((e=>{this.view_confirm_text=e.result?.html})),Un.get_it("view_confirm_docs_landing").then((e=>{e.result?.html&&e.result?.html.indexOf('id="osm_app"')>-1&&(this.load_docs_landing_section=!0)})),Promise.resolve().then((()=>B.get_data())).then((e=>{(0,g.Z)().extract_selected_product(e),this.start_doc_requests=!0}));let e=(0,c.Z)().get_payment_data();if(!e.payment_id||!e.payment_result)return console.log("ERROR: payment is empty",structuredClone(e)),void(this.success="ERROR");Lo.payment_result(e.payment_id,e.payment_result).then((e=>{console.log(e.result),this.success=20===e.result.payment_state}))},methods:{},computed:{title(){return null===this.success?"Spracovávam platobnú informáciu...":"ERROR"===this.success?"Platobnú informáciu sa nepodarilo získať. Prosím kontaktuje administrátora.":this.success?"Platba úspešná!":"Platba neúspešná!"},subtitle(){return null===this.success||"ERROR"===this.success?"":this.success?"Gratulujeme! Vaša zmluva je platná.":"Platba nebola úspešná alebo informácia a zrealizovaní platby je nedostupná. Prosím skontrolujte si výsledok cez internetbanking."}},watch:{}};const Zd=(0,y.Z)(xd,[["render",kd]]);var jd=Zd;const zd=(0,n._)("h1",{class:"my-5 text-center fw-bold text-uppercase"},"testing sandbox",-1),Dd={class:"container"},Od={class:"row"},Sd={class:"col-4"},qd={class:"col-4"},Pd={class:"col-4"};function Cd(e,t,a,s,i,o){const r=(0,n.up)("Datepicker");return(0,n.wg)(),(0,n.iD)(n.HY,null,[zd,(0,n._)("div",Dd,[(0,n._)("div",Od,[(0,n._)("div",Sd,[(0,n.Wm)(r,{field_id:"zaciatok_poistenie",field_data:{type_settings:{calendar_type:"standard"}}})]),(0,n._)("div",qd,[(0,n.Wm)(r,{field_id:"koniec_poistenia",field_data:{type_settings:{calendar_type:"years_first"}}})]),(0,n._)("div",Pd,[(0,n.Wm)(r,{field_id:"datum_narodenia",field_data:{type_settings:{calendar_type:"no_value_show_oldies"}}})])])])],64)}var Td={props:{},components:{Datepicker:It},emits:[],data(){return{}},created(){},methods:{},computed:{},watch:{}};const Ed=(0,y.Z)(Td,[["render",Cd]]);var Ud=Ed;const Md={class:"session_cookie_manager"},Id={class:"table table-striped table-hover table-borderless align-middle table-sm"},Rd=(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("th",{scope:"col"},"ID"),(0,n._)("th",{scope:"col"},"name"),(0,n._)("th",{scope:"col"},"step"),(0,n._)("th",{scope:"col"},"session"),(0,n._)("th",{scope:"col"},"expire"),(0,n._)("th",{scope:"col"},"open"),(0,n._)("th",{scope:"col"},"delete")])],-1),Ld={scope:"row"},Hd=["onClick"],Nd=["onClick"];function Kd(e,t,a,s,i,r){return(0,n.wg)(),(0,n.iD)("section",Md,[(0,n._)("table",Id,[Rd,(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.all_data,((e,t)=>((0,n.wg)(),(0,n.iD)("tr",null,[(0,n._)("th",Ld,(0,o.zw)(t),1),(0,n._)("td",null,(0,o.zw)(e.name),1),(0,n._)("td",null,(0,o.zw)(e.step),1),(0,n._)("td",null,(0,o.zw)(e.session),1),(0,n._)("td",null,(0,o.zw)(e.expire),1),(0,n._)("td",null,[(0,n._)("button",{onClick:e=>r.open_this_group(t),class:"btn btn-sm btn-primary"}," open ",8,Hd)]),(0,n._)("td",null,[(0,n._)("button",{onClick:e=>r.clear_this_group(t),class:"btn btn-sm btn-secondary"}," clear ",8,Nd)])])))),256))])])])}var $d=a(6956),Fd={props:{},components:{},emits:[],data(){return{all_data:{}}},created(){let e=b.group_names();for(let t in e){if(!e.hasOwnProperty(t))continue;let a=$d.Z.get_cookie(this.c_name(t,"step"))||1,s=$d.Z.get_cookie(this.c_name(t,"session"))||"",i=$d.Z.get_cookie(this.c_name(t,"expire"));i?(i=new Date(i),i=i.toLocaleString("sk-SK")):i="",this.all_data[t]={name:e[t],step:a,session:s,expire:i}}},methods:{open_this_group(e){(0,c.Z)().set_session_token(this.all_data[e].session,!1),(0,c.Z)().change_product_group_id(e),(0,c.Z)().change_step(parseInt(this.all_data[e].step,10))},clear_this_group(e){$d.Z.delete_cookie(this.c_name(e,"step")),$d.Z.delete_cookie(this.c_name(e,"session")),$d.Z.delete_cookie(this.c_name(e,"expire")),this.all_data[e].step=1,this.all_data[e].session="",this.all_data[e].expire=""},c_name(e,t){return"session"!==t&&"step"!==t&&"expire"!==t?(console.log("Error: wrong cookie type."),""):"osm_cookie_"+(0,c.Z)().get_endpoint_type()+"_"+e+"_"+t}},computed:{},watch:{}};const Vd=(0,y.Z)(Fd,[["render",Kd]]);var Ad=Vd;const Wd={class:"text-center pt-5","data-cy":"error_page"},Bd=(0,n._)("h1",null," Ľutujeme, niečo sa nepodarilo :( ",-1),Yd=(0,n._)("p",null,[(0,n.Uk)(" Vyskytla sa neočakávaná chyba, preto nebolo možné dokončiť operáciu."),(0,n._)("br"),(0,n.Uk)(" Pre informácie ohľadom ďalšieho postupu nás prosím kontaktujte. ")],-1),Gd={key:0},Jd={class:"text-primary"},Qd=(0,n._)("p",null," Volajte kedykoľvek pondelok až piatok 09:00 - 17:00 ",-1),Xd={class:"text-primary"},ec=(0,n._)("p",null," Pošlite nám fotku tejto obrazovky a ozveme sa vám. ",-1),tc=(0,n._)("p",null,[(0,n._)("small",null," toto je experimentalna feature, moze pomoct debugnut session, postupne automaticky validuje stepy aby urcila ktory bol posledny uspesny krok ")],-1);function ac(e,t,a,s,i,r){const l=(0,n.up)("Navigation");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",Wd,[Bd,Yd,r.show_phone?((0,n.wg)(),(0,n.iD)("div",Gd,[(0,n._)("h3",Jd,(0,o.zw)(r.phone),1),Qd])):(0,n.kq)("",!0),(0,n._)("h3",Xd,(0,o.zw)(r.email),1),ec]),(0,n._)("pre",null,(0,o.zw)(r.error),1),(0,n.Wm)(l,{onPrev:r.prev_button,onNext:r.next_button,show_back:"true",disable_next:i.disable_next},null,8,["onPrev","onNext","disable_next"]),(0,n._)("button",{onClick:t[0]||(t[0]=(...e)=>r.open_where&&r.open_where(...e)),class:"btn btn-secondary mt-5"}," ? Kamže patrí táto session ? "),tc],64)}var sc={props:{},components:{Navigation:pe},emits:[],data(){return{disable_next:!0,attempt:0,max_tries:20,session_state:0,timeout_handle:""}},created(){this.continue_session()},methods:{prev_button(){clearTimeout(this.timeout_handle),(0,c.Z)().change_step(this.error.step)},next_button(){100!==this.session_state?In.repeat_confirm().then((e=>{"success"!==e.result?.response&&100!==e.result?.state||(0,c.Z)().change_step(5)})):(0,c.Z)().change_step(5)},continue_session(){B.session_info().then((e=>{if("success"===e.result?.response||100===e.result?.state)this.session_state=100,this.disable_next=!1;else if(90===e.result?.state)this.session_state=90,this.disable_next=!1;else{if(this.attempt>this.max_tries)return void console.log("continue_session reached max_tries");this.attempt++,this.timeout_handle=setTimeout((()=>{this.continue_session()}),5e3)}}))},open_where(){clearTimeout(this.timeout_handle),E().open_it("where_to_session")}},computed:{error(){return(0,K.Z)().get_last_request()},email(){return b.email_address()},show_phone(){return!(0,g.Z)().direct_user_no_agent()},phone(){return b.phone_number(!0)}},watch:{}};const ic=(0,y.Z)(sc,[["render",ac]]);var nc=ic;const oc=e=>((0,n.dD)("data-v-209fcaac"),e=e(),(0,n.Cn)(),e),rc={class:"text-center py-5","data-cy":"maintenance"},lc=oc((()=>(0,n._)("h1",null," Prebieha údržba ",-1))),_c=oc((()=>(0,n._)("p",null,[(0,n.Uk)(" Momentálne na našich serveroch prebieha plánovaná údržba."),(0,n._)("br"),(0,n.Uk)(" Usilovne pracujeme na tom, aby sme vám prinášali rastúcu kvalitu služieb."),(0,n._)("br"),(0,n.Uk)(" Služba bude znovu dostupná v priebehu niekolkých hodín. ")],-1))),dc=[lc,_c];function cc(e,t,a,s,i,o){return(0,n.wg)(),(0,n.iD)("div",rc,dc)}var uc={props:{},components:{},emits:[],data(){return{}},created(){},methods:{},computed:{},watch:{}};const pc=(0,y.Z)(uc,[["render",cc],["__scopeId","data-v-209fcaac"]]);var hc=pc,mc={props:{},components:{Info:k,Progress_bar:I,Step0_offer:ae,Step1_groupform:Ba,Step2_results:rn,Step4_proposal:go,Step5_confirm:pd,Step6_payment:jd,Step99_lukas:Ud,Step_manager_111:Ad,Step_error_404:nc,Step_maintenance_503:hc},emits:[],data(){return{}},created(){},methods:{},computed:{step(){return(0,c.Z)().current_step()}},watch:{}};const gc=(0,y.Z)(mc,[["render",p]]);var fc=gc;function bc(e,t,a,s,i,o){const r=(0,n.up)("Clearance"),l=(0,n.up)("Email"),_=(0,n.up)("Product_detail"),d=(0,n.up)("Where_to_session"),c=(0,n.up)("Calculate_error_in_validate"),u=(0,n.up)("Calculate_error_in_form"),p=(0,n.up)("Calculate_generic_error"),h=(0,n.up)("Confirm_simple_error"),m=(0,n.up)("Session_document_error"),g=(0,n.up)("Global_form_invalid"),f=(0,n.up)("Marketing"),b=(0,n.up)("Marketing_ek"),v=(0,n.up)("Signature_agent"),y=(0,n.up)("Signature_client"),w=(0,n.up)("Cleaning_session"),k=(0,n.up)("Credentials_scan");return(0,n.wg)(),(0,n.iD)(n.HY,null,["clearance"===o.opened_modal?((0,n.wg)(),(0,n.j4)(r,{key:0})):(0,n.kq)("",!0),"email"===o.opened_modal?((0,n.wg)(),(0,n.j4)(l,{key:1})):(0,n.kq)("",!0),"product_detail"===o.opened_modal?((0,n.wg)(),(0,n.j4)(_,{key:2})):(0,n.kq)("",!0),"where_to_session"===o.opened_modal?((0,n.wg)(),(0,n.j4)(d,{key:3})):(0,n.kq)("",!0),"calculate_error_in_validate"===o.opened_modal?((0,n.wg)(),(0,n.j4)(c,{key:4})):(0,n.kq)("",!0),"calculate_error_in_form"===o.opened_modal?((0,n.wg)(),(0,n.j4)(u,{key:5})):(0,n.kq)("",!0),"calculate_generic_error"===o.opened_modal?((0,n.wg)(),(0,n.j4)(p,{key:6})):(0,n.kq)("",!0),"confirm_simple_error"===o.opened_modal?((0,n.wg)(),(0,n.j4)(h,{key:7})):(0,n.kq)("",!0),"session_document_error"===o.opened_modal?((0,n.wg)(),(0,n.j4)(m,{key:8})):(0,n.kq)("",!0),"global_form_invalid"===o.opened_modal?((0,n.wg)(),(0,n.j4)(g,{key:9})):(0,n.kq)("",!0),"marketing"===o.opened_modal?((0,n.wg)(),(0,n.j4)(f,{key:10})):(0,n.kq)("",!0),"marketing_ek"===o.opened_modal?((0,n.wg)(),(0,n.j4)(b,{key:11})):(0,n.kq)("",!0),"signature_agent"===o.opened_modal?((0,n.wg)(),(0,n.j4)(v,{key:12})):(0,n.kq)("",!0),"signature_client"===o.opened_modal?((0,n.wg)(),(0,n.j4)(y,{key:13})):(0,n.kq)("",!0),"cleaning_session"===o.opened_modal?((0,n.wg)(),(0,n.j4)(w,{key:14})):(0,n.kq)("",!0),"credentials_scan"===o.opened_modal?((0,n.wg)(),(0,n.j4)(k,{key:15})):(0,n.kq)("",!0)],64)}const vc={class:"text-center"},yc=(0,n._)("p",null," Pre prácu s týmto produktom nemáte požadovanú licenciu. ",-1),wc=(0,n._)("br",null,null,-1),kc=["href"];function xc(e,t,a,s,i,r){const l=(0,n.up)("Modal_body");return(0,n.wg)(),(0,n.j4)(l,{close:!1,title:"Chýbajúca licencia",class:"modal-error"},{default:(0,n.w5)((()=>[(0,n._)("div",vc,[yc,(0,n._)("p",null,[(0,n.Uk)(" Ak došlo k nedorozumeniu, prosím kontaktuje nás "),wc,(0,n.Uk)("na e-mailovej adrese: "),(0,n._)("a",{href:r.mailto},(0,o.zw)(r.email),9,kc)])])])),_:1})}const Zc={class:"modal-content"},jc={class:"modal-header"},zc={class:"modal-body"};function Dc(e,t,a,s,i,r){return(0,n.wg)(),(0,n.iD)("div",{onClick:t[1]||(t[1]=(...e)=>r.did_click_outside&&r.did_click_outside(...e)),class:(0,o.C_)(["vue_modal",a.huge?"huge":""]),"data-cy":"modal"},[(0,n._)("div",Zc,[(0,n._)("div",jc,[(0,n._)("h4",null,(0,o.zw)(a.title),1),a.close?((0,n.wg)(),(0,n.iD)("span",{key:0,onClick:t[0]||(t[0]=(...e)=>r.close_me&&r.close_me(...e)),class:"i_close"})):(0,n.kq)("",!0)]),(0,n._)("div",zc,[(0,n.WI)(e.$slots,"default")])])],2)}var Oc={props:{close:Boolean,title:String,huge:Boolean},components:{},emits:[],data(){return{}},created(){document.addEventListener("keyup",this.close_me)},beforeUnmount(){document.removeEventListener("keyup",this.close_me)},methods:{close_me(e=void 0){this.close&&(void 0!==e?.keyCode&&27!==e.keyCode||E().close_them_all())},did_click_outside(e){e.target.classList.contains("vue_modal")&&this.close_me()}},computed:{},watch:{}};const Sc=(0,y.Z)(Oc,[["render",Dc]]);var qc=Sc,Pc={props:{},components:{Modal_body:qc,Bouncer_loading:X},emits:[],data(){return{}},created(){},mounted(){},methods:{},computed:{email(){return b.email_address()},mailto(){return"mailto:"+this.email}},watch:{}};const Cc=(0,y.Z)(Pc,[["render",xc]]);var Tc=Cc;const Ec={key:0},Uc=(0,n._)("p",{class:"mb-4"}," na Váš e-mail Vám pošleme odkaz, cez ktorý sa môžete kedykoľvek vrátiť naspäť a všetky vyplnené údaje budete mať uložené u nás ",-1),Mc=["disabled"],Ic={key:1},Rc=(0,n._)("p",null,[(0,n._)("span",{class:"i_success"}),(0,n._)("strong",null,"Ponuka bola odoslaná na Váš email!")],-1),Lc=[Rc];function Hc(e,t,a,s,o,r){const l=(0,n.up)("Bouncer_loading"),_=(0,n.up)("Modal_body");return(0,n.wg)(),(0,n.j4)(_,{close:!0,title:"Poslať ponuku e-mailom?",class:"modal-email"},{default:(0,n.w5)((()=>[o.success?((0,n.wg)(),(0,n.iD)("div",Ic,Lc)):((0,n.wg)(),(0,n.iD)("div",Ec,[Uc,(0,n._)("form",{onSubmit:t[2]||(t[2]=(...e)=>r.email_submited&&r.email_submited(...e))},[(0,n.wy)((0,n._)("input",{name:"email",class:"form-control mb-2",type:"email",placeholder:"Vaša e-mailová adresa","onUpdate:modelValue":t[0]||(t[0]=e=>o.email=e)},null,512),[[i.nr,o.email]]),(0,n.wy)((0,n._)("input",{name:"subject",id:"email_subject",class:"form-control mb-3",type:"text",placeholder:"Názov ponuky","onUpdate:modelValue":t[1]||(t[1]=e=>o.subject=e)},null,512),[[i.nr,o.subject]]),(0,n._)("button",{class:"btn btn-primary w-100",type:"submit",disabled:o.loading},"Odoslať",8,Mc),(0,n.wy)((0,n._)("p",null,"Emailová adresa je povinná.",512),[[i.F8,o.error]]),(0,n.wy)((0,n.Wm)(l,{size:"large"},null,512),[[i.F8,o.loading]])],32)]))])),_:1})}class Nc{email_save(e){let t={action_name:"email",method:"POST",body:e,url:(0,c.Z)().endpoint_url()+"online/email/?"+N.Z.add_token_as_parameter()},a=new F;return a.prepare_params(t).handle_response().catch((e=>{throw e}))}offer_notify(e){let t={action_name:"offer-notify",method:"GET",url:(0,c.Z)().endpoint_url()+"online/offer-notify/?"+N.Z.add_token_as_parameter()};e=""===e?" poistenie":e,t.url+="&email_subject="+encodeURIComponent(e);let a=new F;return a.prepare_params(t).handle_response().catch((e=>{throw e}))}}var Kc=new Nc,$c={props:{},components:{Modal_body:qc,Bouncer_loading:X},data(){return{email:"",subject:"",error:!1,loading:!1,success:!1}},created(){},methods:{email_submited(e){if(e.preventDefault(),""===this.email)return this.error=!0,void setTimeout((()=>{this.error=!1}),2500);this.loading=!0;let t=N.Z.custom_serialize_form_elements(e);Kc.email_save(t).then((()=>Kc.offer_notify(this.subject))).then((()=>{this.loading=!1,this.success=!0}))}},computed:{}};const Fc=(0,y.Z)($c,[["render",Hc]]);var Vc=Fc;const Ac=["innerHTML"],Wc={class:"docs_download"};function Bc(e,t,a,s,i,o){const r=(0,n.up)("Document_download"),l=(0,n.up)("Modal_body");return(0,n.wg)(),(0,n.j4)(l,{close:!0,title:i.title,huge:!0},{default:(0,n.w5)((()=>[(0,n._)("div",{innerHTML:i.html,class:"product_detail_html"},null,8,Ac),(0,n._)("div",Wc,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.static_docs,((e,t)=>((0,n.wg)(),(0,n.j4)(r,{doc:e},null,8,["doc"])))),256))])])),_:1},8,["title"])}var Yc={props:{},components:{Modal_body:qc,Document_download:_o},emits:[],data(){return{title:"",html:"",static_docs:{}}},created(){let e=E().retrieve_modal_data();this.title=e.product_name,Un.get_it(e.detail_template).then((e=>{200===e.status&&(this.html=e.result.html,this.add_tab_listeners())})),eo.static_documents().then((e=>{200===e.status&&(this.static_docs=e.result.documents)}))},methods:{add_tab_listeners(){setTimeout((()=>{let e=document.querySelectorAll("#osm_app .vue_modal .tab-pane");for(let s in e)e.hasOwnProperty(s)&&(e[s].classList.remove("fade","in"),e[s].parentNode.classList.contains("tab-pane")&&e[s].parentNode.parentNode.appendChild(e[s]));let t=document.querySelectorAll("#osm_app .vue_modal ul.nav-tabs a");for(let s in t)t.hasOwnProperty(s)&&t[s].addEventListener("click",(a=>{a.preventDefault();let s=a.target.hash.replace("#","");for(let i in e)e.hasOwnProperty(i)&&(e[i].classList.remove("active"),t[i].parentNode.classList.remove("active"),e[i].id===s&&(e[i].classList.add("active"),t[i].parentNode.classList.add("active")))}));let a=document.querySelectorAll("#osm_app .vue_modal .product_detail_tab_switcher");for(let s in a){if(!a.hasOwnProperty(s))continue;let i=a[s].dataset.show,n=a[s].dataset.scroll;a[s].addEventListener("click",(a=>{a.preventDefault();for(let n in e)e.hasOwnProperty(n)&&(e[n].classList.remove("active"),t[n].parentNode.classList.remove("active"),parseInt(n,10)===parseInt(i,10)-1&&(e[n].classList.add("active"),t[n].parentNode.classList.add("active")));let s=document.querySelector("#osm_app .vue_modal ."+n);null!==s&&s.scrollIntoView()}))}}),100)}},computed:{},watch:{}};const Gc=(0,y.Z)(Yc,[["render",Bc],["__scopeId","data-v-76583fbc"]]);var Jc=Gc;const Qc=["disabled"];function Xc(e,t,a,s,i,r){const l=(0,n.up)("Modal_body");return(0,n.wg)(),(0,n.j4)(l,{close:!0,title:"Kamže kamže s touto session?",class:"modal-error"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.info,(e=>((0,n.wg)(),(0,n.iD)("p",null,(0,o.zw)(e),1)))),256)),(0,n._)("button",{onClick:t[0]||(t[0]=(...e)=>r.send_troops&&r.send_troops(...e)),disabled:0===i.designated_location,class:"btn btn-secondary"}," Navštív step "+(0,o.zw)(this.designated_location),9,Qc)])),_:1})}var eu={props:{},components:{Modal_body:qc},emits:[],data(){return{info:[],designated_location:0}},created(){Promise.resolve().then((()=>(this.info.push("validategroupform"),A.validate_group_form()))).then((e=>(this.info.push("je form validny? "+e.result.validform),!1!==e.result.validform||(this.info.push("neni. takze pojdes do step1"),this.designated_location=1,!1)))).then((e=>!!e&&(this.info.push("getdata"),B.get_data()))).then((e=>!!e&&(this.info.push("bol vybraty produkt id: "+e.result?.call_params?.product_id),(0,g.Z)().extract_selected_product(e),null!==(0,g.Z)().get_selected_product().product_id||(this.info.push("takze nebol. pojdes step2."),this.designated_location=2,!1)))).then((e=>!!e&&(this.info.push("validateform"),A.validate_user_form()))).then((e=>!!e&&(this.info.push("je formular validny? "+e.result.validform),!1!==e.result.validform||(this.info.push("neni. takze sup do step3"),this.designated_location=3,!1)))).then((e=>!!e&&(this.info.push("getsessioninfo"),B.session_info().then((e=>(this.info.push("stav session je: "+e.result.state),!(e.result?.state<100)||(this.info.push("este neni confirmuta, takze do step4"),this.designated_location=4,!1))))))).then((e=>{if(!e)return!1;this.info.push("uz je confirmuta, tak sup step5"),this.designated_location=5}))},methods:{send_troops(){(0,c.Z)().change_step(this.designated_location),E().close_them_all()}},computed:{},watch:{}};const tu=(0,y.Z)(eu,[["render",Xc]]);var au=tu;const su=(0,n._)("p",null," Kontrolou zadaných údajov sme zistili, že nasledovná hodnota nie je validná: ",-1),iu=(0,n._)("br",null,null,-1),nu=(0,n._)("br",null,null,-1),ou=(0,n._)("br",null,null,-1),ru=["href"],lu=(0,n._)("br",null,null,-1),_u={key:0};function du(e,t,a,s,i,r){const l=(0,n.up)("Modal_body");return(0,n.wg)(),(0,n.j4)(l,{close:!1,title:"Chyba pri výpočte",class:"modal-error"},{default:(0,n.w5)((()=>[su,(0,n._)("p",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.errors,((e,t)=>((0,n.wg)(),(0,n.iD)("span",null,[(0,n.Uk)((0,o.zw)(t)+" : "+(0,o.zw)(e)+" ",1),iu])))),256))]),(0,n._)("button",{class:"btn btn-primary btn-left mt-2 mb-4",onClick:t[0]||(t[0]=(...e)=>r.go_back&&r.go_back(...e))}," Vrátiť sa na predchádzajúci krok "),(0,n._)("p",null,[(0,n.Uk)(" token: "+(0,o.zw)(r.token)+" ",1),nu,(0,n.Uk)(" time: "+(0,o.zw)(r.time),1)]),(0,n._)("p",null,[(0,n.Uk)(" Pre bližšie info o ďalšom postupe nás prosím kontaktuje: "),ou,(0,n._)("a",{href:"mailto:"+r.mail},(0,o.zw)(r.mail),9,ru),lu,r.phone?((0,n.wg)(),(0,n.iD)("span",_u,(0,o.zw)(r.phone),1)):(0,n.kq)("",!0)])])),_:1})}var cu={props:{},components:{Modal_body:qc},emits:[],data(){return{}},created(){},methods:{go_back(){(0,c.Z)().change_step(3)}},computed:{errors(){return E().retrieve_modal_data()},token(){return(0,c.Z)().get_session_token()},time(){return(new Date).toLocaleString()},mail(){return b.email_address()},phone(){return(0,g.Z)().direct_user_no_agent()?null:b.phone_number(!0)}},watch:{}};const uu=(0,y.Z)(cu,[["render",du]]);var pu=uu;const hu=(0,n._)("p",null," Na strane poisťovne prišlo k neočakávanej chybe: ",-1),mu=(0,n._)("br",null,null,-1),gu=(0,n._)("br",null,null,-1),fu=(0,n._)("br",null,null,-1),bu=["href"],vu=(0,n._)("br",null,null,-1),yu={key:0};function wu(e,t,a,s,i,r){const l=(0,n.up)("Modal_body");return(0,n.wg)(),(0,n.j4)(l,{close:!1,title:"Nebolo možné vypočítať poistné",class:"modal-error"},{default:(0,n.w5)((()=>[hu,(0,n._)("p",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.errors,((e,t)=>((0,n.wg)(),(0,n.iD)("span",null,[(0,n.Uk)((0,o.zw)(t)+" : "+(0,o.zw)(e)+" ",1),mu])))),256))]),(0,n._)("button",{class:"btn btn-primary btn-left mt-2 mb-4",onClick:t[0]||(t[0]=(...e)=>r.go_back&&r.go_back(...e))}," Vrátiť sa na predchádzajúci krok "),(0,n._)("p",null,[(0,n.Uk)(" token: "+(0,o.zw)(r.token)+" ",1),gu,(0,n.Uk)(" time: "+(0,o.zw)(r.time),1)]),(0,n._)("p",null,[(0,n.Uk)(" Pre bližšie info o ďalšom postupe nás prosím kontaktuje: "),fu,(0,n._)("a",{href:"mailto:"+r.mail},(0,o.zw)(r.mail),9,bu),vu,r.phone?((0,n.wg)(),(0,n.iD)("span",yu,(0,o.zw)(r.phone),1)):(0,n.kq)("",!0)])])),_:1})}var ku={props:{},components:{Modal_body:qc},emits:[],data(){return{}},created(){},methods:{go_back(){(0,c.Z)().change_step(3)}},computed:{errors(){return E().retrieve_modal_data()},token(){return(0,c.Z)().get_session_token()},time(){return(new Date).toLocaleString()},mail(){return b.email_address()},phone(){return(0,g.Z)().direct_user_no_agent()?null:b.phone_number(!0)}},watch:{}};const xu=(0,y.Z)(ku,[["render",wu]]);var Zu=xu;const ju=(0,n._)("p",null,[(0,n.Uk)(" Niečo sa nepodarilo. "),(0,n._)("br"),(0,n.Uk)(" Vyskúšajte stránku otvoriť znovu. ")],-1),zu=(0,n._)("br",null,null,-1),Du=(0,n._)("br",null,null,-1),Ou=["href"],Su=(0,n._)("br",null,null,-1),qu={key:0};function Pu(e,t,a,s,i,r){const l=(0,n.up)("Modal_body");return(0,n.wg)(),(0,n.j4)(l,{close:!1,title:"Nebolo možné vypočítať poistné",class:"modal-error"},{default:(0,n.w5)((()=>[ju,(0,n._)("button",{class:"btn btn-primary btn-left mt-2 mb-4",onClick:t[0]||(t[0]=(...e)=>r.go_back&&r.go_back(...e))}," Vrátiť sa na predchádzajúci krok "),(0,n._)("p",null,[(0,n.Uk)(" token: "+(0,o.zw)(r.token)+" ",1),zu,(0,n.Uk)(" time: "+(0,o.zw)(r.time),1)]),(0,n._)("p",null,[(0,n.Uk)(" Pre bližšie info o ďalšom postupe nás prosím kontaktuje: "),Du,(0,n._)("a",{href:"mailto:"+r.mail},(0,o.zw)(r.mail),9,Ou),Su,r.phone?((0,n.wg)(),(0,n.iD)("span",qu,(0,o.zw)(r.phone),1)):(0,n.kq)("",!0)])])),_:1})}var Cu={props:{},components:{Modal_body:qc},emits:[],data(){return{}},created(){},methods:{go_back(){(0,c.Z)().change_step(3)}},computed:{token(){return(0,c.Z)().get_session_token()},time(){return(new Date).toLocaleString()},mail(){return b.email_address()},phone(){return(0,g.Z)().direct_user_no_agent()?null:b.phone_number(!0)}},watch:{}};const Tu=(0,y.Z)(Cu,[["render",Pu]]);var Eu=Tu;const Uu=(0,n._)("p",null," Nebolo možné vygenerovať návrh zmluvy z nasledovného dôvodu: ",-1),Mu=(0,n._)("br",null,null,-1),Iu=(0,n._)("br",null,null,-1),Ru=(0,n._)("br",null,null,-1),Lu=["href"],Hu=(0,n._)("br",null,null,-1),Nu={key:0};function Ku(e,t,a,s,i,r){const l=(0,n.up)("Modal_body");return(0,n.wg)(),(0,n.j4)(l,{close:!1,title:"Chyba pri potvrdení",class:"modal-error"},{default:(0,n.w5)((()=>[Uu,(0,n._)("p",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.errors,((e,t)=>((0,n.wg)(),(0,n.iD)("span",null,[(0,n.Uk)((0,o.zw)(t)+" : "+(0,o.zw)(e)+" ",1),Mu])))),256))]),(0,n._)("button",{class:"btn btn-primary btn-left mt-2 mb-4",onClick:t[0]||(t[0]=(...e)=>r.go_back&&r.go_back(...e))}," Vrátiť sa na predchádzajúci krok "),(0,n._)("p",null,[(0,n.Uk)(" token: "+(0,o.zw)(r.token)+" ",1),Iu,(0,n.Uk)(" time: "+(0,o.zw)(r.time),1)]),(0,n._)("p",null,[(0,n.Uk)(" Pre bližšie info o ďalšom postupe nás prosím kontaktuje: "),Ru,(0,n._)("a",{href:"mailto:"+r.mail},(0,o.zw)(r.mail),9,Lu),Hu,r.phone?((0,n.wg)(),(0,n.iD)("span",Nu,(0,o.zw)(r.phone),1)):(0,n.kq)("",!0)])])),_:1})}var $u={props:{},components:{Modal_body:qc},emits:[],data(){return{}},created(){},methods:{go_back(){(0,c.Z)().change_step(3)}},computed:{errors(){return E().retrieve_modal_data()?.data?.errors},token(){return(0,c.Z)().get_session_token()},time(){return(new Date).toLocaleString()},mail(){return b.email_address()},phone(){return(0,g.Z)().direct_user_no_agent()?null:b.phone_number(!0)}},watch:{}};const Fu=(0,y.Z)($u,[["render",Ku]]);var Vu=Fu;const Au={key:0},Wu=(0,n._)("br",null,null,-1),Bu=(0,n._)("br",null,null,-1),Yu=(0,n._)("br",null,null,-1),Gu=["href"],Ju=(0,n._)("br",null,null,-1),Qu={key:0};function Xu(e,t,a,s,i,r){const l=(0,n.up)("Modal_body");return(0,n.wg)(),(0,n.j4)(l,{close:!1,title:"Webservice dokument error",class:"modal-error"},{default:(0,n.w5)((()=>[r.errors?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("p",Au," Načítanie dokumentov zlyhalo na strane poskytovateľa produktu. ")),(0,n._)("p",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.errors,(e=>((0,n.wg)(),(0,n.iD)("span",null,[(0,n.Uk)((0,o.zw)(e)+" ",1),Wu])))),256))]),r.errors?((0,n.wg)(),(0,n.iD)("button",{key:1,class:"btn btn-primary btn-left mt-2 mb-4",onClick:t[0]||(t[0]=(...e)=>r.go_back&&r.go_back(...e))}," Vrátiť sa na predchádzajúci krok ")):(0,n.kq)("",!0),(0,n._)("p",null,[(0,n.Uk)(" token: "+(0,o.zw)(r.token)+" ",1),Bu,(0,n.Uk)(" time: "+(0,o.zw)(r.time),1)]),(0,n._)("p",null,[(0,n.Uk)(" Pre bližšie info o ďalšom postupe nás prosím kontaktuje: "),Yu,(0,n._)("a",{href:"mailto:"+r.mail},(0,o.zw)(r.mail),9,Gu),Ju,r.phone?((0,n.wg)(),(0,n.iD)("span",Qu,(0,o.zw)(r.phone),1)):(0,n.kq)("",!0)])])),_:1})}var ep={props:{},components:{Modal_body:qc},emits:[],data(){return{}},created(){},methods:{go_back(){(0,c.Z)().change_step(3)}},computed:{errors(){return E().retrieve_modal_data()||!1},token(){return(0,c.Z)().get_session_token()},time(){return(new Date).toLocaleString()},mail(){return b.email_address()},phone(){return(0,g.Z)().direct_user_no_agent()?null:b.phone_number(!0)}},watch:{}};const tp=(0,y.Z)(ep,[["render",Xu]]);var ap=tp;const sp=(0,n._)("p",null,[(0,n.Uk)(" Pri prepočte produktov sme objavili nesprávnu hodnotu. "),(0,n._)("br"),(0,n.Uk)(" Vráťte sa prosím a upravte ju. ")],-1),ip=(0,n._)("br",null,null,-1),np=(0,n._)("br",null,null,-1),op=(0,n._)("br",null,null,-1),rp=["href"],lp=(0,n._)("br",null,null,-1),_p={key:0};function dp(e,t,a,s,i,r){const l=(0,n.up)("Modal_body");return(0,n.wg)(),(0,n.j4)(l,{close:!1,title:"Chybná hodnota vo formulári.",class:"modal-error"},{default:(0,n.w5)((()=>[sp,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.errors,((e,t)=>((0,n.wg)(),(0,n.iD)("p",null,[(0,n._)("strong",null,(0,o.zw)(t),1),(0,n.Uk)(" : "),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e,((e,t)=>((0,n.wg)(),(0,n.iD)("span",null,[(0,n.Uk)((0,o.zw)(e)+" ",1),ip])))),256))])))),256)),(0,n._)("button",{class:"btn btn-primary btn-left mt-2 mb-4",onClick:t[0]||(t[0]=(...e)=>r.go_back&&r.go_back(...e))}," Vrátiť sa na predchádzajúci krok "),(0,n._)("p",null,[(0,n.Uk)(" token: "+(0,o.zw)(r.token)+" ",1),np,(0,n.Uk)(" time: "+(0,o.zw)(r.time),1)]),(0,n._)("p",null,[(0,n.Uk)(" Pre bližšie info o ďalšom postupe nás prosím kontaktuje: "),op,(0,n._)("a",{href:"mailto:"+r.mail},(0,o.zw)(r.mail),9,rp),lp,r.phone?((0,n.wg)(),(0,n.iD)("span",_p,(0,o.zw)(r.phone),1)):(0,n.kq)("",!0)])])),_:1})}var cp={props:{},components:{Modal_body:qc},emits:[],data(){return{}},created(){},methods:{go_back(){(0,c.Z)().change_step(1)}},computed:{errors(){return E().retrieve_modal_data()||!1},token(){return(0,c.Z)().get_session_token()},time(){return(new Date).toLocaleString()},mail(){return b.email_address()},phone(){return(0,g.Z)().direct_user_no_agent()?null:b.phone_number(!0)}},watch:{}};const up=(0,y.Z)(cp,[["render",dp]]);var pp=up;const hp=["innerHTML"];function mp(e,t,a,s,i,o){const r=(0,n.up)("Modal_body");return(0,n.wg)(),(0,n.j4)(r,{close:!0,title:"",huge:!0,class:"modal-text"},{default:(0,n.w5)((()=>[(0,n._)("div",{innerHTML:i.html},null,8,hp)])),_:1})}var gp={props:{},components:{Modal_body:qc},emits:[],data(){return{html:""}},created(){Un.get_it("view_agent_suhlas").then((e=>{this.html=e.result?.html}))},methods:{},computed:{},watch:{}};const fp=(0,y.Z)(gp,[["render",mp]]);var bp=fp;const vp=["innerHTML"];function yp(e,t,a,s,i,o){const r=(0,n.up)("Modal_body");return(0,n.wg)(),(0,n.j4)(r,{close:!0,title:"",huge:!0,class:"modal-text"},{default:(0,n.w5)((()=>[(0,n._)("div",{innerHTML:i.html},null,8,vp)])),_:1})}var wp={props:{},components:{Modal_body:qc},emits:[],data(){return{html:""}},created(){Un.get_it("view_agent_suhlas_ek").then((e=>{this.html=e.result?.html}))},methods:{},computed:{},watch:{}};const kp=(0,y.Z)(wp,[["render",yp]]);var xp=kp;const Zp=(0,n._)("p",null,"Prebieha odosielanie",-1),jp=(0,n._)("p",null,"Na klientov e-mail bola zaslaná zmluvná dokumentácia.",-1),zp=(0,n._)("p",null,"Pre dokončenie, je potrebné, aby klient:",-1),Dp=(0,n._)("ul",null,[(0,n._)("li",null,"otvoril zaslaný e-mail,"),(0,n._)("li",null,"oboznámil sa so zmluvnou dokumentáciou,"),(0,n._)("li",null,"klikol na odkaz, ktorý ho presmeruje na túto stránku,"),(0,n._)("li",null,"potvrdil zadaním SMS kódu, ktorý obdrží na svoje telefónne číslo, súhlas s obsahom všetkých dokumentov.")],-1),Op=(0,n._)("p",null,"Odosielanie zlyhalo.",-1),Sp={key:0};function qp(e,t,a,s,r,l){const _=(0,n.up)("Bouncer_loading"),d=(0,n.up)("Modal_body");return(0,n.wg)(),(0,n.j4)(d,{close:!1,title:"Posielame e-mail klientovi",class:"modal-signature"},{default:(0,n.w5)((()=>[(0,n.wy)((0,n._)("div",null,[Zp,(0,n.Wm)(_)],512),[[i.F8,"sending"===r.status]]),(0,n.wy)((0,n._)("div",null,[jp,zp,Dp,(0,n._)("button",{onClick:t[0]||(t[0]=(...e)=>l.clear&&l.clear(...e)),class:"btn btn-primary"}," Vymazať a otvoriť novú kalkuláciu ")],512),[[i.F8,"success"===r.status]]),(0,n.wy)((0,n._)("div",null,[Op,r.message?((0,n.wg)(),(0,n.iD)("p",Sp,(0,o.zw)(r.message),1)):(0,n.kq)("",!0)],512),[[i.F8,"fail"===r.status]])])),_:1})}class Pp{offer_send(e){let t={action_name:"signature-offer-send",method:"GET",url:(0,c.Z)().endpoint_url()+"online/signature-offer-send/?"+N.Z.serialize_object(e)+N.Z.add_token_as_parameter()+"&signature_state=client"},a=new F;return a.prepare_params(t).handle_response().catch((e=>{throw e}))}code_send(){let e={action_name:"signature-code-send",method:"GET",url:(0,c.Z)().endpoint_url()+"online/signature-code-send/?"+N.Z.add_token_as_parameter()},t=new F;return t.prepare_params(e).handle_response().catch((e=>{throw e}))}code_check(e,t){let a={action_name:"signature-code-check",method:"POST",url:(0,c.Z)().endpoint_url()+"online/signature-code-check/?"+N.Z.serialize_object(e)+N.Z.add_token_as_parameter(),body:JSON.stringify({code:t}),content_type:"application/json"},s=new F;return s.prepare_params(a).handle_response().catch((e=>{throw e}))}update_signature_state(){let e={action_name:"results",method:"GET",url:(0,c.Z)().endpoint_url()+"online/results/?signature_state=agent_autoconfirm"+N.Z.add_token_as_parameter()},t=new F;return t.prepare_params(e).handle_response().catch((e=>{throw e}))}}var Cp=new Pp,Tp={props:{},components:{Bouncer_loading:X,Modal_body:qc},emits:[],data(){return{status:"sending",message:""}},created(){let e=E().retrieve_modal_data();Cp.offer_send(e).then((e=>{200===e.status?1===e.result.signature_required?this.status="success":(this.status="fail",this.message=JSON.stringify(e.result)):E().close_them_all()}))},methods:{clear(){N.Z.clear_session()}},computed:{},watch:{}};const Ep=(0,y.Z)(Tp,[["render",qp]]);var Up=Ep;const Mp=(0,n._)("p",null," Odosielame SMS kód na vaše telefónne číslo ",-1),Ip=(0,n._)("p",null," Odosielanie SMS správy zlyhalo. ",-1),Rp=(0,n._)("p",null,[(0,n.Uk)(" SMS správa s kódom bola vygenerovaná a mala by Vám byť doručená v krátkej dobe. "),(0,n._)("br"),(0,n.Uk)(" Zadajte SMS kód, ktorý ste obdržali. "),(0,n._)("br"),(0,n.Uk)(" Zadaním SMS kódu vyjadrujete súhlas s obsahom obdržanej predzmluvnej dokumentácie. ")],-1),Lp=(0,n._)("p",null," Kontrolujeme platnosť SMS kódu. ",-1),Hp=(0,n._)("p",null,[(0,n.Uk)(" SMS kód je platný. "),(0,n._)("br"),(0,n.Uk)(" Zmluva bola schválená. "),(0,n._)("br"),(0,n.Uk)(" Presmerovávame Vás na záverečnú časť. ")],-1),Np=(0,n._)("p",null,[(0,n.Uk)(" SMS potvrdenie predzmluvnej dokumentácie "),(0,n._)("br"),(0,n.Uk)(" prebehlo v poriadku. "),(0,n._)("br"),(0,n.Uk)(" Prosím zatvorte túto stránku a počkajte na daľšie instrukcie k uzatvoreniu poistnej zmluvy od vášho sprostredkovateľa. ")],-1),Kp=[Np];function $p(e,t,a,s,r,l){const _=(0,n.up)("Bouncer_loading"),d=(0,n.up)("Modal_body");return(0,n.wg)(),(0,n.j4)(d,{close:!1,title:"Potvrdenie SMS kódom",class:"modal-signature"},{default:(0,n.w5)((()=>[(0,n.wy)((0,n._)("div",null,[Mp,(0,n.Wm)(_)],512),[[i.F8,"sending"===r.state]]),(0,n.wy)((0,n._)("div",null,[Ip,(0,n._)("p",null,(0,o.zw)(r.message),1)],512),[[i.F8,"not_sent"===r.state]]),(0,n.wy)((0,n._)("div",null,[(0,n._)("p",null,(0,o.zw)(r.message),1)],512),[[i.F8,"already_sent"===r.state]]),(0,n.wy)((0,n._)("div",null,[Rp,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>r.sms_code=e),onKeydown:[t[1]||(t[1]=(...e)=>l.clear_error&&l.clear_error(...e)),t[2]||(t[2]=(0,i.D2)(((...e)=>l.code_validation&&l.code_validation(...e)),["enter"]))],ref:"sms_code",type:"text",name:"sms_code",class:"form-control mb-2 mx-auto mx-sm-0"},null,544),[[i.nr,r.sms_code]]),(0,n.wy)((0,n._)("p",null," Bol zadaný nesprávny formát. SMS kód je 5 ciferné číslo. ",512),[[i.F8,r.invalid_format]]),(0,n._)("button",{onClick:t[3]||(t[3]=(...e)=>l.code_validation&&l.code_validation(...e)),class:"btn btn-accent btn-right btn-lg mx-auto"}," Skontrolovať SMS kód ")],512),[[i.F8,"is_sent"===r.state]]),(0,n.wy)((0,n._)("div",null,[Lp,(0,n.Wm)(_)],512),[[i.F8,"checking"===r.state]]),(0,n.wy)((0,n._)("div",null,[(0,n._)("p",null,(0,o.zw)(r.message),1),(0,n._)("button",{onClick:t[4]||(t[4]=(...e)=>l.ask_for_code&&l.ask_for_code(...e)),class:"btn btn-primary btn-left btn-lg"}," Opraviť ")],512),[[i.F8,"failed"===r.state]]),(0,n.wy)((0,n._)("div",null,[Hp,(0,n.Wm)(_)],512),[[i.F8,"success"===r.state]]),(0,n.wy)((0,n._)("div",null,Kp,512),[[i.F8,"no_confirm"===r.state]])])),_:1})}var Fp={props:{},components:{Bouncer_loading:X,Modal_body:qc},emits:[],data(){return{state:"sending",message:"",sms_code:"",invalid_format:!1}},created(){this.ask_for_code()},methods:{ask_for_code(){Cp.code_send().then((e=>{422===e.status?(this.state="not_sent",this.message=e.result.message):409===e.status?(this.state="already_sent",this.message=e.result.message,this.confirm_or_close()):200===e.status&&"fail"!==e.result.status?(this.state="is_sent",this.$nextTick((()=>{this.$refs.sms_code.focus()}))):(this.state="not_sent",this.message=JSON.stringify(e.result))}))},code_validation(){if(5!==this.sms_code.length||!1===N.Z.contains_only_digits(this.sms_code))return void(this.invalid_format=!0);this.state="checking";let e=E().retrieve_modal_data().checkboxes;Cp.code_check(e,this.sms_code).then((e=>{422===e.status?(this.state="failed",this.message=e.result.message):409===e.status?(this.state="already_sent",this.message=e.result.message,this.confirm_or_close()):(this.state="success",this.confirm_or_close())}))},confirm_or_close(){let e=E().retrieve_modal_data().mode;if("provider_client"===e)this.state="no_confirm",Cp.update_signature_state();else{let e={};In.confirm_session(e).then((e=>{E().close_them_all(),200===e.status?"success"!==e.result?.response&&100!==e.result?.state?(console.log("confirm simple error"),E().store_modal_data(e.result),E().open_it("confirm_simple_error")):(0,c.Z)().change_step(5):console.log("confirm error",e)}))}},clear_error(){this.invalid_format=!1}},computed:{},watch:{}};const Vp=(0,y.Z)(Fp,[["render",$p]]);var Ap=Vp;const Wp=(0,n._)("p",null," Stratíte všetky údaje, ktoré ste doteraz vyplnili. ",-1);function Bp(e,t,a,s,i,o){const r=(0,n.up)("Modal_body");return(0,n.wg)(),(0,n.j4)(r,{close:!0,title:"Naozaj chcete vymazať údaje?",class:"modal-cleaning_session text-center"},{default:(0,n.w5)((()=>[Wp,(0,n._)("button",{onClick:t[0]||(t[0]=(...e)=>o.clear&&o.clear(...e)),type:"button",class:"btn btn-primary btn-w80 me-2"}," Áno "),(0,n._)("button",{onClick:t[1]||(t[1]=(...e)=>o.cancel&&o.cancel(...e)),type:"button",class:"btn btn-secondary btn-w80 ms-2"}," Nie ")])),_:1})}var Yp={props:{},components:{Modal_body:qc},data(){return{}},created(){},beforeUnmount(){},methods:{clear(){N.Z.clear_session()},cancel(){E().close_them_all()}},computed:{}};const Gp=(0,y.Z)(Yp,[["render",Bp]]);var Jp=Gp;const Qp={class:"drag-n-drop"},Xp=["onClick"],eh=(0,n._)("span",{class:"i_camera"},null,-1),th=[eh];function ah(e,t,a,s,i,o){const r=(0,n.up)("Scan_capture"),l=(0,n.up)("Scan_upload"),_=(0,n.up)("Scan_check"),d=(0,n.up)("Scan_feedback"),c=(0,n.up)("Modal_body");return(0,n.wg)(),(0,n.j4)(c,{close:!0,title:"Naskenovanie dokladov",class:"modal-credentials_scan"},{default:(0,n.w5)((()=>[((0,n.wg)(),(0,n.iD)(n.HY,null,(0,n.Ko)(2,(e=>(0,n._)("div",Qp,[(0,n._)("button",{onClick:t=>o.camera_toggle(e),class:"btn btn-primary dd_camera"},th,8,Xp),i.active_cameras[e]?((0,n.wg)(),(0,n.j4)(r,{key:0,position:e,onScan_payload:o.scan_payload,onScan_feedback:o.add_to_feedback},null,8,["position","onScan_payload","onScan_feedback"])):((0,n.wg)(),(0,n.j4)(l,{key:1,position:e,debug:i.debug,onScan_payload:o.scan_payload,onScan_feedback:o.add_to_feedback},null,8,["position","debug","onScan_payload","onScan_feedback"]))]))),64)),(0,n.Wm)(_,{debug:i.debug,side_payloads:i.side_payloads,onScan_feedback:o.add_to_feedback},null,8,["debug","side_payloads","onScan_feedback"]),(0,n.Wm)(d,{feedback:i.feedback},null,8,["feedback"])])),_:1})}const sh={class:"contentarea_video"},ih={class:"scan_camera"},nh={ref:"video",class:"scan_video"},oh={ref:"button",class:"scan_button btn btn-primary"},rh={ref:"canvas",class:"scan_canvas"},lh={class:"scan_output"},_h={ref:"photo",class:"scan_photo",alt:"The screen capture will appear in this box."};function dh(e,t,a,s,o,r){return(0,n.wg)(),(0,n.iD)("div",sh,[(0,n.wy)((0,n._)("div",ih,[(0,n._)("video",nh," Video stream not available. ",512),(0,n._)("button",oh," Odfotiť ",512)],512),[[i.F8,!o.show_result]]),(0,n._)("canvas",rh,null,512),(0,n.wy)((0,n._)("div",lh,[(0,n._)("img",_h,null,512)],512),[[i.F8,o.show_result]])])}var ch={props:{position:Number},components:{},emits:["scan_feedback","scan_payload"],data(){return{show_result:!1}},created(){void 0!==navigator.mediaDevices?this.$nextTick((()=>{this.scan_stream()})):this.$emit("scan_feedback","Zariadenie pravdepodobne nemá kameru.")},methods:{scan_stream(){var e=550,t=0,a=!1,s=this.$refs.video,i=this.$refs.canvas,n=this.$refs.photo,o=this.$refs.button;function r(){navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then((function(e){s.srcObject=e,s.play()})).catch((function(e){console.log("An error occurred: "+e)})),s.addEventListener("canplay",(function(n){a||(t=s.videoHeight/(s.videoWidth/e),isNaN(t)&&(t=e/(4/3)),s.setAttribute("width",e),s.setAttribute("height",t),i.setAttribute("width",e),i.setAttribute("height",t),a=!0)}),!1),o.addEventListener("click",(function(e){_(),d(),e.preventDefault()}),!1),l()}function l(){var e=i.getContext("2d");e.fillStyle="#AAA",e.fillRect(0,0,i.width,i.height);var t=i.toDataURL("image/png");n.setAttribute("src",t)}function _(){var a=i.getContext("2d");if(e&&t){i.width=e,i.height=t,a.drawImage(s,0,0,e,t);var o=i.toDataURL("image/png");n.setAttribute("src",o)}else l()}const d=()=>{this.show_result=!0,this.$emit("scan_payload",n.src,this.position)};r()}},computed:{},watch:{}};const uh=(0,y.Z)(ch,[["render",dh]]);var ph=uh;const hh={class:"text-center"},mh=["disabled"];function gh(e,t,a,s,o,r){const l=(0,n.up)("Bouncer_loading");return(0,n.wg)(),(0,n.iD)("div",hh,[(0,n._)("button",{onClick:t[0]||(t[0]=(...e)=>r.send_scan_pages&&r.send_scan_pages(...e)),disabled:r.pages_not_ready,class:"btn btn-primary"}," Overiť a vyplniť údaje ",8,mh),(0,n.wy)((0,n._)("div",null,[(0,n.Wm)(l,{size:"small"})],512),[[i.F8,o.loading]])])}class fh{add_page(e){let t={image:e.split(",")?.[1]||""},a={action_name:"id-scan/add-page",method:"POST",url:(0,c.Z)().endpoint_url()+"api/online/id-scan/add-page/?"+N.Z.add_token_as_parameter(),body:JSON.stringify(t),content_type:"application/json"},s=new F;return s.prepare_params(a).handle_response().catch((e=>{throw e}))}scan_groups(){let e={action_name:"id-scan/get-scan-groups",method:"GET",url:(0,c.Z)().endpoint_url()+"api/online/id-scan/get-scan-groups/?"+N.Z.add_token_as_parameter()},t=new F;return t.prepare_params(e).handle_response().catch((e=>{throw e}))}scan_group_documents(){let e={action_name:"id-scan/get-scan-group-documents",method:"GET",url:(0,c.Z)().endpoint_url()+"api/online/id-scan/get-scan-group-documents/?"+N.Z.add_token_as_parameter()},t=new F;return t.prepare_params(e).handle_response().catch((e=>{throw e}))}}var bh=new fh,vh={props:{debug:Boolean,side_payloads:Object},components:{Bouncer_loading:X},emits:["scan_feedback"],data(){return{loading:!1,check_repeated:0,max_checks:10,check_delay:2e3}},created(){},methods:{send_scan_pages(){this.pages_not_ready||(this.loading=!0,this.debug&&this.$emit("scan_feedback","sending pages"),Promise.resolve().then((()=>bh.add_page(this.side_payloads["1"]))).then((e=>200!==e.status?(this.$emit("scan_feedback","Nahrávanie strany 1 zlyhalo."),console.log(e),!1):(this.debug&&this.$emit("scan_feedback","page 1 sent"),!0))).then((async e=>{if(!0!==e)return e;await new Promise(((e,t)=>{setTimeout((()=>{e()}),1e3)}));return bh.add_page(this.side_payloads["2"])})).then((e=>200!==e.status?(this.$emit("scan_feedback","Nahrávanie strany 2 zlyhalo."),console.log(e),!1):(this.debug&&this.$emit("scan_feedback","page 2 sent"),!0))).then((e=>{!0===e&&this.credentials_check()})))},credentials_check(){this.debug&&this.$emit("scan_feedback","asking backend for scan check"),bh.scan_groups().then((e=>{422===e.status?(this.loading=!1,this.$emit("scan_feedback","422 Unprocessable Entity, message: "),this.$emit("scan_feedback",e.result.message)):500===e.status?(this.loading=!1,this.$emit("scan_feedback","500 Internal Server Error, message: "),this.$emit("scan_feedback",e.result.message)):425===e.status?(0===this.check_repeated&&this.$emit("scan_feedback","Prebieha spracovanie."),this.check_repeated++,setTimeout((()=>{this.check_repeated<this.max_checks?(this.debug&&this.$emit("scan_feedback","repeat check no. "+this.check_repeated),this.credentials_check()):(this.$emit("scan_feedback","Overovanie dosiahlo maximálny počet pokusov."),this.loading=!1)}),this.check_delay)):(this.data=e.result,this.$emit("scan_feedback","Overovanie úspešné."),this.debug&&this.$emit("scan_feedback",JSON.stringify(this.data)),this.fill_data(),this.store_docs_into_session(),this.loading=!1)}))},fill_data(){this.debug&&this.$emit("scan_feedback","filling received data into form"),(0,g.Z)().set_multiple_form_values(this.data),this.debug||setTimeout((()=>{E().close_them_all()}),3e3)},store_docs_into_session(){6===(0,c.Z)().product_group_id()&&(this.debug&&this.$emit("scan_feedback","start scan documents request"),bh.scan_group_documents().then((e=>{this.debug&&(200===e.status?this.$emit("scan_feedback","scan documents successful"):this.$emit("scan_feedback","scan documents failed"))})))}},computed:{pages_not_ready(){return!this.side_payloads["1"]||!this.side_payloads["2"]||this.loading}},watch:{}};const yh=(0,y.Z)(vh,[["render",gh]]);var wh=yh;const kh={class:"scan_feedback"},xh=(0,n._)("br",null,null,-1);function Zh(e,t,a,s,r,l){return(0,n.wy)(((0,n.wg)(),(0,n.iD)("p",kh,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.feedback,(e=>((0,n.wg)(),(0,n.iD)("span",null,[(0,n.Uk)((0,o.zw)(e),1),xh])))),256))],512)),[[i.F8,a.feedback.length>0]])}var jh={props:{feedback:Array},components:{},emits:[],data(){return{}},created(){},methods:{},computed:{},watch:{}};const zh=(0,y.Z)(jh,[["render",Zh]]);var Dh=zh;const Oh=["src"],Sh={class:"dd_instructions"},qh={class:"dd_filename"},Ph={class:"i_check"},Ch={key:2},Th=["for"],Eh=["id","name"];function Uh(e,t,a,s,r,l){return(0,n.wg)(),(0,n.iD)("div",{onDragenter:t[1]||(t[1]=(0,i.iM)((()=>{}),["prevent"])),onDragover:t[2]||(t[2]=(0,i.iM)((()=>{}),["prevent"])),onDrop:t[3]||(t[3]=(0,i.iM)(((...e)=>l.file_change&&l.file_change(...e)),["prevent"]))},[((0,n.wg)(),(0,n.iD)(n.HY,null,(0,n.Ko)(2,(e=>(0,n._)("div",{class:(0,o.C_)(1===e?"dd_desktop":"dd_mobile")},[r.success?((0,n.wg)(),(0,n.iD)("img",{key:0,src:r.file.url,class:"scan_base64"},null,8,Oh)):((0,n.wg)(),(0,n.iD)("div",{key:1,class:(0,o.C_)(1===e?"i_dd_upload":"i_dd_camera")},null,2)),(0,n._)("p",Sh,[(0,n.Uk)((0,o.zw)(1===a.position?"Predná":"Zadná")+" strana - ",1),(0,n._)("span",qh,(0,o.zw)(r.success?r.file.name:1===e?"Presuňte súbor sem (JPEG, PNG)":"Pripravte si doklad na odfotenie"),1),(0,n.wy)((0,n._)("span",Ph,null,512),[[i.F8,r.success]])]),1===e?((0,n.wg)(),(0,n.iD)("p",Ch,"alebo")):(0,n.kq)("",!0),(0,n._)("label",{class:"btn btn-grey",for:"scan_input_"+a.position},[(0,n.Uk)((0,o.zw)(1===e?"Vybrať súbor":"Odfotiť a nahrať")+" ",1),(0,n._)("input",{id:"scan_input_"+a.position,name:"scan_input_"+a.position,type:"file",accept:"image/*",capture:"",onChange:t[0]||(t[0]=(...e)=>l.file_change&&l.file_change(...e))},null,40,Eh)],8,Th)],2))),64))],32)}var Mh={props:{debug:Boolean,position:Number},components:{},emits:["scan_feedback","scan_payload"],data(){return{file:{whole_file:"",valid:!1,name:"",size:"",type:"",url:"",base:""},success:!1}},created(){},methods:{file_change(e){let t={};if("change"===e.type?t=e.target?.files?.[0]:"drop"===e.type&&(t=e.dataTransfer?.files?.[0]),void 0!==t){if(this.file={whole_file:t,valid:!1,name:N.Z.slugify_keep_extension_add_tag(t.name,!1),size:t.size,type:t.type,url:URL.createObjectURL(t),base:""},this.scan_validate(),!1===this.file.valid)return this.success=!1,void this.$emit("scan_payload","",this.position);this.convert_base64()}},scan_validate(){this.file.size>15e6?this.$emit("scan_feedback","Súbor je príliš veľký: "+this.file.size+", povolená veľkosť: 15mb"):"image/png"===this.file.type||"image/jpg"===this.file.type||"image/jpeg"===this.file.type?(this.debug&&this.$emit("scan_feedback","file "+this.file.name+" valid"),this.file.valid=!0):this.$emit("scan_feedback","Nepodporovaný typ súboru: "+this.file.type+", povolené typy: .png .jpg .jpeg")},convert_base64(){let e=new FileReader;e.addEventListener("load",(e=>{this.file.base=e.target.result,this.debug&&this.$emit("scan_feedback","converted file "+this.file.name+" to base64"),this.$emit("scan_payload",this.file.base,this.position),this.success=!0})),e.readAsDataURL(this.file.whole_file)}},computed:{},watch:{}};const Ih=(0,y.Z)(Mh,[["render",Uh]]);var Rh=Ih,Lh={props:{},components:{Modal_body:qc,Scan_capture:ph,Scan_check:wh,Scan_feedback:Dh,Scan_upload:Rh},emits:[],data(){return{feedback:[],debug:!1,side_payloads:{1:"",2:""},active_cameras:{1:!1,2:!1}}},created(){},methods:{scan_payload(e,t){this.side_payloads[t]=e},add_to_feedback(e){this.feedback.push(e)},camera_toggle(e){this.active_cameras[e]=!this.active_cameras[e]}},computed:{},watch:{}};const Hh=(0,y.Z)(Lh,[["render",ah]]);var Nh=Hh,Kh={props:{},components:{Clearance:Tc,Email:Vc,Product_detail:Jc,Where_to_session:au,Calculate_error_in_validate:pu,Calculate_error_in_form:Zu,Calculate_generic_error:Eu,Confirm_simple_error:Vu,Session_document_error:ap,Global_form_invalid:pp,Marketing:bp,Marketing_ek:xp,Signature_agent:Up,Signature_client:Ap,Cleaning_session:Jp,Credentials_scan:Nh},data(){return{}},methods:{},computed:{opened_modal(){return E().which_is_open()}}};const $h=(0,y.Z)(Kh,[["render",bc]]);var Fh=$h;const Vh=["data-cy"],Ah={class:"row"};function Wh(e,t,a,s,i,r){const l=(0,n.up)("Actions_loader");return(0,n.wg)(),(0,n.iD)("div",{class:(0,o.C_)([r.find_template]),"data-cy":r.cypres},[(0,n._)("div",Ah,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.step_actions,((e,t)=>((0,n.wg)(),(0,n.j4)(l,{action:e,onRequested_step:r.next_step},null,8,["action","onRequested_step"])))),256))])],10,Vh)}class Bh{flow_init_session(){var e=200;let t={action_name:"init",method:"GET",url:State.endpoint_url()+"osmapp/init/"+e},a=new F;return a.prepare_params(t).handle_response().then((e=>{State.set_session_token(e.result.data.session),State.set_workflow_status(e.result.data.workflowStatus)})).catch((e=>{throw e}))}flow_next_step(e){var t=0;let a={action_name:"nextstep",method:"GET",url:State.endpoint_url()+"osmapp/nextstep/"+State.get_session_token()};var s=[];void 0!==e&&s.push("step="+e),t>0&&s.push("&delay="+1e3*t),s.push("with-session-data=1"),"prod"!==State.endpoint_type()&&s.push("debug-info=1"),s.length>0&&(a.url+="/?"+s.join("&"));let i=new F;return i.prepare_params(a).handle_response().then((e=>{422!==e.status&&State.set_workflow_status(e.result.data.workflowStatus)})).catch((e=>{throw e}))}flow_status(){let e={action_name:"status",method:"GET",url:State.endpoint_url()+"osmapp/status/"+State.get_session_token()};var t=[];t.push("with-session-data=1"),"prod"!==State.endpoint_type()&&t.push("debug-info=1"),t.length>0&&(e.url+="/?"+t.join("&"));let a=new F;return a.prepare_params(e).handle_response().then((e=>{State.set_workflow_status(e.result.data.workflowStatus)})).catch((e=>{throw e}))}}var Yh=new Bh;const Gh=["data-cy"];function Jh(e,t,a,s,i,r){const l=(0,n.up)("Image_action"),_=(0,n.up)("Navigation_action"),d=(0,n.up)("Form_action"),c=(0,n.up)("Html_action");return(0,n.wg)(),(0,n.iD)("div",{class:(0,o.C_)([r.size]),"data-cy":r.cypres},["image"===r.type?((0,n.wg)(),(0,n.j4)(l,{key:0,action:a.action},null,8,["action"])):"navigation"===r.type?((0,n.wg)(),(0,n.j4)(_,{key:1,action:a.action,onRequested_step:r.requested_step},null,8,["action","onRequested_step"])):"getForm"===r.type?((0,n.wg)(),(0,n.j4)(d,{key:2,action:a.action,onNext_step:r.next_step},null,8,["action","onNext_step"])):"getHtml"===r.type?((0,n.wg)(),(0,n.j4)(c,{key:3,action:a.action},null,8,["action"])):(0,n.kq)("",!0)],10,Gh)}const Qh={class:"row"},Xh={class:"col-6 offset-3"},em=["src"];function tm(e,t,a,s,i,o){return(0,n.wg)(),(0,n.iD)("div",Qh,[(0,n._)("div",Xh,[(0,n._)("img",{class:"img",src:o.give_img},null,8,em)])])}var am={props:{action:Object},components:{},data(){return{}},mounted(){},methods:{},computed:{give_img(){return this.action.functionParams.url}}};const sm=(0,y.Z)(am,[["render",tm],["__scopeId","data-v-7248ce3a"]]);var im=sm;const nm={class:"text-center my-4"},om=["onClick"];function rm(e,t,a,s,i,r){return(0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.action.functionParams,((e,t)=>((0,n.wg)(),(0,n.iD)("div",nm,[(0,n._)("button",{class:"btn btn-secondary btn-lg",onClick:t=>this.$emit("requested_step",e.step)},(0,o.zw)(e.label),9,om)])))),256)}var lm={props:{action:Object},components:{},data(){return{}},mounted(){},emits:["requested_step"],methods:{},computed:{}};const _m=(0,y.Z)(lm,[["render",rm]]);var dm=_m;const cm=e=>((0,n.dD)("data-v-eb8c070a"),e=e(),(0,n.Cn)(),e),um={class:"row mt-4 mb-2 justify-content-center","data-cy":"pagination"},pm={class:"col-1 text-center"},hm={key:0,class:"error_counter_info"},mm=cm((()=>(0,n._)("span",{class:"mark-circle mark-orange"},"!",-1))),gm=["onClick"],fm={class:"row"},bm={class:"col-12"},vm={class:"row mt-5","data-cy":"navigation"},ym={class:"col text-center"},wm={class:"col text-center"};function km(e,t,a,s,i,r){const l=(0,n.up)("Tabs");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",um,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.all_form_tabs,((e,t)=>((0,n.wg)(),(0,n.iD)("div",pm,[r.count_tab_errors(t)>0?((0,n.wg)(),(0,n.iD)("div",hm,[mm,(0,n.Uk)(" "+(0,o.zw)(r.count_tab_errors(t)),1)])):(0,n.kq)("",!0),(0,n._)("button",{class:(0,o.C_)(["btn","btn-sm",t==i.tab_current?"btn-grey":"btn-white"]),onClick:e=>r.switch_tab(t)}," tab "+(0,o.zw)(t),11,gm)])))),256))]),(0,n._)("div",fm,[(0,n._)("div",bm,[(0,n.Wm)(l,{tab_current:i.tab_current},null,8,["tab_current"])])]),(0,n._)("div",vm,[(0,n._)("div",ym,[r.show_back_button?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"btn btn-primary btn-lg btn-left",onClick:t[0]||(t[0]=e=>r.prev())}," Naspäť ")):(0,n.kq)("",!0)]),(0,n._)("div",wm,[(0,n._)("button",{class:"btn btn-primary btn-lg btn-right",onClick:t[1]||(t[1]=e=>r.next())}," Pokračovať ")])])],64)}class xm{osmapi_get_form(e){let t={action_name:"get-form",method:"GET",url:State.endpoint_url()+"osmapi/get-form/"+State.get_session_token()};var a=[];a.push("source="+e.functionParams.source),a.push("source-id="+e.functionParams["source-id"]),a.push("action-id="+e.id),a.push("json=1"),a.length>0&&(t.url+="/?"+a.join("&"));let s=new F;return s.prepare_params(t).handle_response().catch((e=>{throw e}))}osmapi_validate_form(e){let t={action_name:"validate-form",method:"POST",url:State.endpoint_url()+"osmapi/validate-form/"+State.get_session_token(),content_type:"application/json"};console.log(t,"body stringify not serialize???");var a=[];a.push("source="+e.functionParams.source),a.push("source-id="+e.functionParams["source-id"]),a.push("action-id="+e.id),a.push("json=1"),a.push("without_form=1"),a.length>0&&(t.url+="/?"+a.join("&"));let s=new F;return s.prepare_params(t).handle_response().catch((e=>{throw e}))}}var Zm=new xm,jm={props:{action:Object},components:{Tabs:$a},data(){return{tab_current:0,tab_last:0}},mounted(){Zm.osmapi_get_form(this.action).then((e=>{if(200===e.status){var t=e.result.data.resultData.form;(0,C.Z)().set_form(t),this.tab_last=Object.keys(t).length,this.tab_current=parseInt(Object.keys(t)[0],10)}}))},methods:{prev(){this.tab_current<=1||this.tab_current--},next(){this.tab_current>=this.tab_last?this.validate_form():this.tab_current++},switch_tab(e){this.tab_current=parseInt(e,10)},validate_form(){Zm.osmapi_validate_form(this.action).then((e=>{(0,C.Z)().set_errors(e.result.data.resultData.form_validation_error_elements),!1!==e.result.data.resultData.validform&&((0,C.Z)().clear_form(),this.$emit("next_step"))}))}},computed:{show_back_button(){return this.tab_last>1&&this.tab_current>1},all_form_tabs(){return(0,C.Z)().get_form()},count_tab_errors(){return e=>{var t=(0,C.Z)().get_form(),a=(0,C.Z)().get_errors(),s=0;for(var i in t)if(t.hasOwnProperty(i)){var n=t[i];for(var o in n)if(n.hasOwnProperty(o)){var r=Object.keys(n[o])[0];a.hasOwnProperty(r)&&i===e&&s++}}return s}}}};const zm=(0,y.Z)(jm,[["render",km],["__scopeId","data-v-eb8c070a"]]);var Dm=zm;const Om={class:"row my-3"},Sm={class:"col-12"},qm=["innerHTML"];function Pm(e,t,a,s,i,o){return(0,n.wg)(),(0,n.iD)("div",Om,[(0,n._)("div",Sm,[(0,n._)("div",{innerHTML:o.print_html},null,8,qm)])])}class Cm{osmapi_get_flow_html(e){let t={action_name:"get-html",method:"GET",url:State.endpoint_url()+"osmapi/get-html/"+State.get_session_token()};var a=[];a.push("template="+e.functionParams.template),a.length>0&&(t.url+="/?"+a.join("&"));var s=new F;return s.prepare_params(t).handle_response().catch((e=>{throw e}))}}var Tm=new Cm,Em={props:{action:Object},components:{},data(){return{html:""}},mounted(){Tm.osmapi_get_flow_html(this.action).then((e=>{200===e.status&&(this.html=e.result.data.resultData.html)}))},methods:{},computed:{print_html(){return this.html}}};const Um=(0,y.Z)(Em,[["render",Pm]]);var Mm=Um,Im={props:{action:Object},components:{Image_action:im,Navigation_action:dm,Form_action:Dm,Html_action:Mm},data(){return{}},mounted(){},emits:["requested_step","next_step"],methods:{requested_step(e){this.$emit("requested_step",e)},next_step(){this.$emit("requested_step")}},computed:{type(){return this.action.function},size(){return"full"===this.action.functionPosition.size?"col-12":"half"===this.action.functionPosition.size?"col-12 col-lg-6":"col-12"},cypres(){return"action_"+this.action.function+"_order_"+this.action.functionPosition.order}}};const Rm=(0,y.Z)(Im,[["render",Jh]]);var Lm=Rm,Hm={props:{},components:{Actions_loader:Lm},data(){return{status_repeat_frequency:3e3,status_repeats_count:0,status_repeats_limit:10}},methods:{init_session(){""===State.get_session_token()?Yh.flow_init_session().then((()=>{this.what_to_do_next()})):this.status()},next_step(e=void 0){this.status_repeats_count=0,Yh.flow_next_step(e).then((()=>{this.what_to_do_next()}))},status(){Yh.flow_status().then((()=>{this.what_to_do_next()}))},what_to_do_next(){var e=State.get_workflow_step_state(),t=State.get_workflow_internal(),a=State.get_workflow_finished();if(!0!==a)if("success"===e)this.next_step();else if(!0===t){if(this.status_repeats_count>this.status_repeats_limit)return void console.log("reached status repeat limit, stopping requests");this.status_repeats_count++,setTimeout(function(){this.status()}.bind(this),this.status_repeat_frequency)}}},computed:{step_actions(){var e,t=State.get_workflow_actions(),a={},s=t.length;for(e=0;e<s;e++)"template"!==t[e].function&&(a[t[e].functionPosition.order]=t[e]);return a},find_template(){var e,t=State.get_workflow_actions(),a=t.length;for(e=0;e<a;e++)if("template"===t[e].function)return t[e].functionParams.type;return null},cypres(){return"step_"+State.get_workflow_step()+"_template_"+this.find_template}},created(){this.init_session()}};const Nm=(0,y.Z)(Hm,[["render",Wh],["__scopeId","data-v-043bd9e9"]]);var Km=Nm,$m={i8:"0.5.44"},Fm=a(7401),Vm={components:{View_switcher:fc,Modal_switcher:Fh,Flow_sandbox:Km,Docs_template:dd},inject:["config"],data(){return{}},created(){(0,c.Z)().save_the_config(this.config),(0,g.Z)().save_agent_code(this.config.agent_code),(0,g.Z)().set_filtered_products(this.config.filtered_products),console.log("osm_app:",$m.i8),Fm.Z.init_manager()},mounted(){},beforeDestroy(){},methods:{},computed:{skin(){return(0,c.Z)().skin_class()},loading_class(){return"loading"===E().which_is_open()?"loading":""},mode(){return(0,c.Z)().get_run_mode()},step_class(){return"form_app"===(0,c.Z)().get_run_mode()?"step"+(0,c.Z)().current_step():""}}};const Am=(0,y.Z)(Vm,[["render",d],["__scopeId","data-v-ecd6b614"]]);var Wm=Am;const Bm=(0,T.WB)();class Ym{constructor(){(0,s.Z)(this,"app",{})}init(e){Va.clear_form_cache(),this.app=(0,i.ri)(Wm).use(Bm),this.app.provide("config",e).mount("#osm_app")}destroy(){(0,c.Z)().$reset(),ol().$reset(),(0,K.Z)().$reset(),E().$reset(),(0,g.Z)().$reset(),(0,C.Z)().$reset(),this.app.unmount(),this.app=""}dump(){return structuredClone(Bm.state.value)}expose_state(){let e=Bm.state.value.STATE_core;return{session_token:e.session_token,group_id:e.group_id,step:e.step}}insert_access_token(e){(0,c.Z)().save_bearer(e)}autofill_run(){(0,g.Z)().autofill_run()}}window.osm_app=new Ym},4634:function(e,t,a){"use strict";var s=a(9876),i=a(7401);t["Z"]=(0,s.Q_)("STATE_core",{state:()=>({access_token:"",get_access_token_promise:"",session_token:"",endpoint_type:"",run_mode:"",backend_type:"",group_id:0,step:0,skin:"",payment:{},cookie_session_manager:!1,proxy_endpoint:"",proxy_scope:"",save_exposed_state:null}),getters:{current_step(){return()=>this.step},product_group_id(){return()=>this.group_id},get_session_token(){return()=>this.session_token},give_bearer(){return()=>"Bearer "+this.access_token},myport_access_token_promise(){return()=>this.get_access_token_promise({refresh:!0})},get_endpoint_type(){return()=>this.endpoint_type},endpoint_url(){return()=>{let e=this.get_endpoint_type(),t={minor_stage:"https://api-minor-stage.finportal.sk/esb/online-sale-mw/",stage:"https://api-stage.finportal.sk/esb/online-sale-mw/",edu:"https://api-edu.finportal.sk/esb/online-sale-mw/",production:"https://backoffice.finportal.sk/esb/online-sale-mw/",pg_production:"https://api.partnerspoistenie.sk/esb/online-sale-mw/",develop:"https://api-develop.intechon.sk/esb/online-sale-mw/",dev:this.proxy_endpoint+"/online-sale-mw/"};return t.hasOwnProperty(e)?t[e]:(console.log("baaad endpoint_type"),null)}},oauth_url(){return()=>this.endpoint_url().replace("/online-sale-mw/","")+"/auth/oauth/v2/token/"},get_backend_type(){return()=>this.backend_type},give_api_scope(){return()=>this.proxy_scope},skin_class(){return()=>"skin-"+this.skin},is_partners_skin(){return()=>"partners"===this.skin},get_skin_type(){return()=>this.skin},get_run_mode(){return()=>this.run_mode},get_payment_data(){return()=>this.payment},is_cookie_manager_on(){return()=>this.cookie_session_manager}},actions:{save_the_config(e){this.access_token=e.access_token,this.get_access_token_promise=e.get_access_token_promise||null,this.session_token=e.session_token,this.endpoint_type=e.endpoint_type,this.run_mode=e.run_mode,this.backend_type=e.backend_type,this.group_id=e.group_id,this.step=e.step,this.skin=e.skin,this.payment=e.payment||{},this.cookie_session_manager=e.cookie_session_manager||!1,this.proxy_endpoint=e.proxy_endpoint,this.proxy_scope=e.proxy_scope,this.save_exposed_state=e.save_exposed_state||null},change_step(e){this.step=e,i.Z.update_step(),null!==this.save_exposed_state&&this.save_exposed_state({session_token:this.session_token,group_id:this.group_id,step:this.step})},change_product_group_id(e){this.group_id=e},set_session_token(e,t){!1===t&&""!==this.session_token||(this.session_token=e,i.Z.update_session())},save_bearer(e){this.access_token=e,"503"!==e&&503!==e||this.change_step(503)}}})},8686:function(e,t,a){"use strict";var s=a(9876);t["Z"]=(0,s.Q_)("STATE_error",{state:()=>({headers:{},params:{},date:"",session:"",step:0,status:0,result:{}}),getters:{get_last_request(){return()=>({url:this.params?.url,date:this.date,status:this.status,session:this.session,step:this.step})}},actions:{set_last_request(e,t,a,s,i,n){this.headers=e,this.params=t,this.date=a,this.session=s,this.step=i,this.status=n?.status,this.result=n?.result}}})},1958:function(e,t,a){"use strict";var s=a(9876);a(8250);t["Z"]=(0,s.Q_)("STATE_forms",{state:()=>({form_storage:{},error_object:{},tab_page:{current:0,last:0}}),getters:{get_form(){return()=>this.form_storage},get_errors(){return()=>this.error_object},get_tab_page(){return()=>this.tab_page}},actions:{set_form(e){this.form_storage=e},clear_form(){this.form_storage={},this.tab_page.current=0,this.tab_page.last=0},set_errors(e){this.error_object=e},clear_errors(e){this.error_object={}},set_tab_page(e,t=!1){this.tab_page.current=e,t&&(this.tab_page.last=t)}}})},8250:function(e,t,a){"use strict";var s=a(9876),i=a(1825),n=a(4634);t["Z"]=(0,s.Q_)("STATE_params",{state:()=>({call_params:{},form_values:{},agent_code:"",selected_product:{},filtered_products:"",receiver:0}),getters:{get_call_param(){return e=>void 0===this.call_params[e]||null===this.call_params[e]?"":this.call_params[e]},get_form_value(){return e=>void 0===this.form_values[e]||null===this.form_values[e]?"":this.form_values[e]},all_form_values(){return()=>this.form_values},get_user_input(){return e=>"kod"===e?this.agent_code:"receiver"===e?this.receiver:void 0!==this.form_values[e]&&null!==this.form_values[e]?this.form_values[e]:void 0!==this.call_params[e]&&null!==this.call_params[e]?this.call_params[e]:""},get_selected_product(){return()=>this.selected_product},agent_code_param(){return()=>"&kod="+this.agent_code},direct_user_no_agent(){return()=>""===this.agent_code},get_agent_code(){return()=>this.agent_code},get_filtered_products(){return()=>this.filtered_products||""},add_filtered_param(){return()=>""===this.filtered_products?"":"&filtered_products="+this.filtered_products}},actions:{store_call_params(e){for(let t in e)if(e.hasOwnProperty(t))if("kod"===t)""===this.agent_code&&this.save_agent_code(e[t]);else{if("product_id"===t||"form_id"===t||"next_contract"===t||"period"===t)continue;if("filtered_products"===t)this.set_filtered_products(e[t]);else{if(i.Z.starts_with(t,"_"))continue;if("json"===t||"global"===t)continue;"receiver"===t?this.receiver=e[t]:this.call_params[t]=e[t]}}},set_form_value(e,t){this.form_values[e]=t},set_multiple_form_values(e){for(let t in e)e.hasOwnProperty(t)&&this.set_form_value(t,e[t])},delete_form_value(e){this.form_values[e]=""},reset_form_values(){this.form_values={}},insert_form_values(e){for(let t in e)if(e.hasOwnProperty(t))for(let a in e[t]){if(!e[t].hasOwnProperty(a))continue;let s=Object.keys(e[t][a])[0];if("_block"===s)for(let n in e[t][a][s].elements){if(!e[t][a][s].elements.hasOwnProperty(n))continue;let o,r;i.Z.contains_only_digits(n)?(r=i.Z.first_key(e[t][a][s].elements[n]),o=e[t][a][s].elements[n][r].value):(r=n,o=e[t][a][s].elements[n].value),o=null===o?"":o,this.set_form_value(r,o)}else{let i=e[t][a][s].value;i=null===i?"":i,this.set_form_value(s,i)}}},set_selected_product(e,t,a,s){this.selected_product={product_id:parseInt(e,10)||null,form_id:parseInt(t,10)||null,next_contract:a||"",period:parseInt(s,10)||null}},extract_selected_product(e){this.set_selected_product(e.result?.call_params?.product_id,e.result?.call_params?.form_id,e.result?.call_params?.next_contract,e.result?.call_params?.period)},save_agent_code(e){this.agent_code=e},set_filtered_products(e){this.filtered_products=e||""},autofill_run(){let e={1:{1:{pzp_auto_search:"BL591VF",datumnarodenia:"02.01.1990",psc_mesto:"98701 - Poltár"},2:{havarijne_auto_search:"BL591VF",havarijne_auto_cena_stanovenie:2,havarijne_auto_cena:"15000",havarijne_auto_cena_aktualna:"6666",havarijne_datumnarodenia:"02.01.1990",havarijne_psc_mesto:"98701 - Poltár"},3:{hypo_uver_suma:"222000",hypo_zabezpecenie1_cena:"255000",hypo_osoba1_prijem:"4400"},4:{zp_poistenie_pd:"20",zp_osoba1_prijem:"2222",zp_osoba1_vyska:"180",zp_osoba1_hmotnost:"80",zp_osoba1_poistenie_ks:"1",zp_osoba1_ps_ks:"111000",zp_osoba1_pd_ks:"20"},5:{},6:{sporenie_suma:"1500",sporenie_esg:"3"},7:{vsetko_dospeli:"1"},8:{},9:{majetok_plocha_uzitkova:"85",majetok_plocha_neobytna:"25",majetok_nehnutelnost_ulica:"asd",majetok_nehnutelnost_supcislo:"2",majetok_nehnutelnost_cislo:"2",majetok_psc_mesto:"98701 - Poltár",majetok_nehnutelnost_poistna_suma:"255000",majetok_domacnost_poistna_suma:"115000"},10:{},72:{},82:{},73:{},85:{},86:{}},3:{1:{person_meno:this.random_witcher_name(0),person_priezvisko:this.random_witcher_name(1),person_rodne_cislo:"9001020017",person_cislo_op:"EA123456",person_telefon:"+421900123456",person_email:"qatrash@intechon.sk",adresa_ulica:"asd",adresa_cislo:"2",mr_pfa:"1",mr_klient:"1",mr_klient_financie:"1",auto_km:"22000"},2:{havarijne_person_email:"qatrash@intechon.sk",havarijne_person_meno:this.random_witcher_name(0),havarijne_person_priezvisko:this.random_witcher_name(1),havarijne_adresa_ulica:"asd",havarijne_person_rodne_cislo:"9001020017",havarijne_person_telefon:"+421900123456",havarijne_person_cislo_op:"EA123456",havarijne_adresa_cislo:"2",havarijne_auto_km:"55000",havarijne_mr_klient:"1",havarijne_mr_klient_financie:"1"},3:{hypo_uver_ucel:1,hypo_uver_datumsplatok:5,hypo_osoba1_meno:this.random_witcher_name(0),hypo_osoba1_priezvisko:this.random_witcher_name(1),hypo_osoba1_priezvisko_rodne:"asd",hypo_osoba1_rodnecislo:"9001020017",hypo_osoba1_telefon:"+421904364330",hypo_osoba1_email:"qatrash@intechon.sk",hypo_osoba1_doklad_cislo:"EA123456",hypo_osoba1_doklad_platnost:"04.04.2030",hypo_osoba1_adresa_ulica:"asd",hypo_osoba1_adresa_cislo:"2",hypo_osoba1_adresa_psc_mesto:"98701 - Poltár",hypo_osoba1_prijem1_zaciatok:"02.02.2020",hypo_osoba1_doklad_platnost_od:"11.11.2011",hypo_osoba1_doklad_platnost_do:"03.03.2033"},4:{zp_osoba0_meno:this.random_witcher_name(0),zp_osoba0_priezvisko:this.random_witcher_name(1),zp_osoba0_rodnecislo:"9001020017",zp_osoba0_cislo_op:"EA123456",zp_osoba0_ucet_cislo:"SK3509000000000179610393",zp_osoba0_telefon:"+421904364330",zp_osoba0_email:"lukas.mihalciny@finportal.sk",zp_osoba0_adresa_ulica:"asd",zp_osoba0_adresa_cislo:"2",zp_osoba0_adresa_psc_mesto:"98701 - Poltár",zp_osoba1_dotaznik_lekar_meno:this.random_witcher_name(0),zp_osoba1_dotaznik_lekar_adresa:"asd",zp_osoba1_dotaznik_lekar_telefon:"+421900123456",zp_osoba0_mr_pfa:"1",zp_osoba0_mr_klient:"1",zp_osoba0_mr_povolanie:"asd",zp_osoba0_mr_prijem:"3000",zp_osoba0_mr_vydavky:"500",zp_osoba0_mr_uspory:"200",zp_osoba0_mr_zdovodnenie:"3"},5:{},6:{use_proposal_number:"2222000050",sporenie_person_meno:this.random_witcher_name(0),sporenie_person_priezvisko:this.random_witcher_name(1),sporenie_person_rodne_cislo:"9001020017",sporenie_person_cislo_op:"EA123456",sporenie_person_doklad_datum_vydanie:"02.02.2000",sporenie_person_doklad_platnost:"04.04.2030",sporenie_person_doklad_vydanie:"asd",sporenie_person_miesto_narodenia:"asd",sporenie_person_telefon:"+421904364330",sporenie_person_email:"lukas.mihalciny@finportal.sk",sporenie_adresa_ulica:"asd",sporenie_adresa_cislo:"2",sporenie_adresa_psc_mesto:"98701 - Poltár",sporenie_ucet_cislo:"SK3509000000000179610393",sporenie_mr_pfa:"1",sporenie_mr_klient:"1",sporenie_mr_povolanie:"asd",sporenie_mr_prijem:"3000",sporenie_mr_vydavky:"500",sporenie_mr_splatky:"200",sporenie_mr_zdovodnenie:"3"},7:{cestovne_person_meno:this.random_witcher_name(0),cestovne_person_priezvisko:this.random_witcher_name(1),cestovne_person_rodne_cislo:"9001020017",cestovne_person_cislo_op:"EA123456",cestovne_person_telefon:"+421900123456",cestovne_person_email:"qatrash@intechon.sk",cestovne_adresa_ulica:"asd",cestovne_adresa_cislo:"2",cestovne_psc_mesto:"98701 - Poltár",cestovne_mr_klient:"1",cestovne_mr_klient_financie:"1"},8:{},9:{},10:{},72:{},82:{},73:{},85:{},86:{}}},t=(0,n.Z)().current_step(),a=(0,n.Z)().product_group_id();console.dir(e[t]?.[a]),this.set_multiple_form_values(e[t]?.[a]||{})},random_witcher_name(e){let t=[["Dinleu","Stawa","Dheles","Eamnith","Zhilno","Flinmazhith","Leazhignia","Cheonweuzmen","Rulwola","Rigath"],["Feinlat","Keavan","Deista","Destald","Pronlald","Skazdam","Minmals","Lanald","Grulneciat","Firgat"]],a=0,s=9,i=Math.floor(Math.random()*(s-a+1))+a;return t[e][i]}}})},9299:function(e,t,a){var s={"./01_predna_lava_cast.jpg":8493,"./02_predna_prava_cast.jpg":4195,"./03_zadna_prava_cast.jpg":6336,"./04_zadna_lava_cast.jpg":3369,"./05_predna_cast.jpg":9913,"./06_zadna_cast.jpg":5428,"./07_lavobok.jpg":9803,"./08_pravobok.jpg":847,"./09_celne_sklo.jpg":9765,"./10_palubna_doska.jpg":147,"./11_najazdene_km.jpg":8140,"./12_vin_cislo.jpg":1141,"./13_motor.jpg":3322,"./14_poskodenie_celneho_skla.jpg":2622,"./15_poskodenie_vozidla.jpg":4473,"./16_ovladace_okien.jpg":754,"./17_stitok_celne.jpg":8445,"./placeholder_a.jpg":5405,"./placeholder_b.jpg":3125,"./placeholder_c.jpg":9016};function i(e){var t=n(e);return a(t)}function n(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}i.keys=function(){return Object.keys(s)},i.resolve=n,e.exports=i,i.id=9299},6107:function(e,t,a){"use strict";e.exports=a.p+"img/dl_img_doc_general.f243e334.svg"},8493:function(e,t,a){"use strict";e.exports=a.p+"img/01_predna_lava_cast.e7515db8.jpg"},4195:function(e,t,a){"use strict";e.exports=a.p+"img/02_predna_prava_cast.908f7d88.jpg"},6336:function(e,t,a){"use strict";e.exports=a.p+"img/03_zadna_prava_cast.667834ec.jpg"},3369:function(e,t,a){"use strict";e.exports=a.p+"img/04_zadna_lava_cast.60388429.jpg"},9913:function(e,t,a){"use strict";e.exports=a.p+"img/05_predna_cast.0993c142.jpg"},5428:function(e,t,a){"use strict";e.exports=a.p+"img/06_zadna_cast.96f70206.jpg"},9803:function(e,t,a){"use strict";e.exports=a.p+"img/07_lavobok.ff793539.jpg"},847:function(e,t,a){"use strict";e.exports=a.p+"img/08_pravobok.0714bd9c.jpg"},9765:function(e,t,a){"use strict";e.exports=a.p+"img/09_celne_sklo.ba9a0bca.jpg"},147:function(e,t,a){"use strict";e.exports=a.p+"img/10_palubna_doska.f259b5bf.jpg"},8140:function(e,t,a){"use strict";e.exports=a.p+"img/11_najazdene_km.57c95718.jpg"},1141:function(e,t,a){"use strict";e.exports=a.p+"img/12_vin_cislo.5667a1fd.jpg"},3322:function(e,t,a){"use strict";e.exports=a.p+"img/13_motor.8649c119.jpg"},2622:function(e,t,a){"use strict";e.exports=a.p+"img/14_poskodenie_celneho_skla.24af2742.jpg"},4473:function(e,t,a){"use strict";e.exports=a.p+"img/15_poskodenie_vozidla.15fa5016.jpg"},754:function(e,t,a){"use strict";e.exports=a.p+"img/16_ovladace_okien.f90874f7.jpg"},8445:function(e,t,a){"use strict";e.exports=a.p+"img/17_stitok_celne.a8185ff3.jpg"},5405:function(e,t,a){"use strict";e.exports=a.p+"img/placeholder_a.ba8da71b.jpg"},3125:function(e,t,a){"use strict";e.exports=a.p+"img/placeholder_b.2b07beba.jpg"},9016:function(e,t,a){"use strict";e.exports=a.p+"img/placeholder_c.792c931a.jpg"}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var a=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(a.exports,a,a.exports,__webpack_require__),a.exports}__webpack_require__.m=__webpack_modules__,function(){var e=[];__webpack_require__.O=function(t,a,s,i){if(!a){var n=1/0;for(_=0;_<e.length;_++){a=e[_][0],s=e[_][1],i=e[_][2];for(var o=!0,r=0;r<a.length;r++)(!1&i||n>=i)&&Object.keys(__webpack_require__.O).every((function(e){return __webpack_require__.O[e](a[r])}))?a.splice(r--,1):(o=!1,i<n&&(n=i));if(o){e.splice(_--,1);var l=s();void 0!==l&&(t=l)}}return t}i=i||0;for(var _=e.length;_>0&&e[_-1][2]>i;_--)e[_]=e[_-1];e[_]=[a,s,i]}}(),function(){__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return __webpack_require__.d(t,{a:t}),t}}(),function(){__webpack_require__.d=function(e,t){for(var a in t)__webpack_require__.o(t,a)&&!__webpack_require__.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){__webpack_require__.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){__webpack_require__.p="https://cdn.jsdelivr.net/gh/LukasMihalciny/osm_app_public@0.5.44/dist/"}(),function(){var e={143:0};__webpack_require__.O.j=function(t){return 0===e[t]};var t=function(t,a){var s,i,n=a[0],o=a[1],r=a[2],l=0;if(n.some((function(t){return 0!==e[t]}))){for(s in o)__webpack_require__.o(o,s)&&(__webpack_require__.m[s]=o[s]);if(r)var _=r(__webpack_require__)}for(t&&t(a);l<n.length;l++)i=n[l],__webpack_require__.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return __webpack_require__.O(_)},a=self["webpackChunkosm_app_webpack"]=self["webpackChunkosm_app_webpack"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var __webpack_exports__=__webpack_require__.O(void 0,[998],(function(){return __webpack_require__(6806)}));__webpack_exports__=__webpack_require__.O(__webpack_exports__),osm_app_webpack=__webpack_exports__})();
//# sourceMappingURL=app.js.map