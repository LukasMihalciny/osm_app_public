"use strict";(self["webpackChunkosmapp_webpack_3xx"]=self["webpackChunkosmapp_webpack_3xx"]||[]).push([[989],{7654:function(e,t,n){var o=n(8700),s=n(6343),a=n(3175),r=n(5833),i=n(6460);class l{confirm_session(e){let t="";e&&(t=(0,i.A)().get_confirm_chbs(),t=s.A.serialize_object(t));let n={action_name:"confirm",method:"GET",url:(0,o.A)().endpoint_url()+"online/confirm/?"+t+s.A.add_token_as_parameter()},r=new a.A;return r.prepare_params(n).handle_response().then((e=>408===e.status||412===e.status?this.repeat_getsessioninfo(0):e)).catch((e=>{throw e}))}repeat_confirm(){let e={action_name:"confirm",method:"GET",url:(0,o.A)().endpoint_url()+"online/confirm/?"+s.A.add_token_as_parameter()},t=new a.A;return t.prepare_params(e).handle_response().catch((e=>{throw e}))}async repeat_getsessioninfo(e){e++;let t=10,n=10;console.log("wait "+n+" seconds then try getsessioninfo, iteration: "+e+" (max "+t+")"),await s.A.sleep(n);let i={action_name:"getsessioninfo",method:"GET",url:(0,o.A)().endpoint_url()+"online/getsessioninfo/?"+s.A.add_token_as_parameter()},l=new a.A;return l.prepare_params(i).handle_response().then((n=>{if(100===n.result?.state)return n;if(e>=t){let e=(new Date).toLocaleString(),t=(0,o.A)().get_session_token(),s=(0,o.A)().current_step();return(0,r.A)().set_last_request({},i,e,t,s,n),(0,o.A)().change_step(404),{status:408,action_name:"getsessioninfo"}}return this.repeat_getsessioninfo(e)})).catch((e=>{throw e}))}}t.A=new l},9452:function(e,t,n){var o=n(8700),s=n(6343),a=n(3175);class r{session_info(){let e={action_name:"getsessioninfo",method:"GET",url:(0,o.A)().endpoint_url()+"online/getsessioninfo/?"+s.A.add_token_as_parameter()},t=new a.A;return t.prepare_params(e).handle_response().catch((e=>{throw e}))}get_data(){let e={action_name:"getdata",method:"GET",url:(0,o.A)().endpoint_url()+"online/getdata/?"+s.A.add_token_as_parameter()},t=new a.A;return t.prepare_params(e).handle_response().catch((e=>{throw e}))}set_data(e){let t={action_name:"setdata",method:"POST",url:(0,o.A)().endpoint_url()+"online/setdata/?"+s.A.serialize_object(e)+s.A.add_token_as_parameter()},n=new a.A;return n.prepare_params(t).handle_response().catch((e=>{throw e}))}}t.A=new r},1786:function(e,t,n){n.d(t,{A:function(){return b}});var o=n(641),s=n(3751);const a={key:0,class:"row mt-4 form-pagination","data-cy":"navigation"},r={class:"col-12 col-sm-4 text-center text-sm-start order-2 order-sm-1"},i={class:"col-12 col-sm-4 text-center order-3 order-sm-2"},l={class:"col-12 col-sm-4 text-center text-sm-end order-1 order-sm-3"},_=["disabled","title"];function c(e,t,n,c,p,d){const u=(0,o.g2)("Bouncer_loading");return d.completely_hide_bottom_nav?((0,o.uX)(),(0,o.CE)("div",a,[(0,o.Lk)("div",r,[n.show_back?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[0]||(t[0]=(...e)=>d.prev&&d.prev(...e)),type:"button",class:"btn btn-light btn-left btn-lg"}," Naspäť ")):(0,o.Q3)("",!0)]),(0,o.Lk)("div",i,[(0,o.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>d.clear&&d.clear(...e)),type:"button",class:"btn btn-white btn-lg"}," Vymazať údaje ")]),(0,o.Lk)("div",l,[(0,o.bo)((0,o.bF)(u,null,null,512),[[s.aG,d.loading]]),n.show_next?(0,o.bo)(((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[2]||(t[2]=(...e)=>d.next&&d.next(...e)),disabled:n.disable_next,title:n.disable_next?"Pokúšame sa zopakovať požiadavku.":"",type:"button",class:"btn btn-primary btn-right btn-lg"}," Pokračovať ",8,_)),[[s.aG,!d.loading]]):(0,o.Q3)("",!0)])])):(0,o.Q3)("",!0)}var p=n(55),d=n(2873),u=n(8700),m={props:{show_back:Boolean,show_next:Boolean,disable_next:Boolean},components:{Bouncer_loading:p.A},emits:["next","prev"],data(){return{}},created(){},methods:{next(){this.$emit("next")},prev(){this.$emit("prev")},clear(){(0,d.A)().open_it("Cleaning_session")}},computed:{loading(){return(0,d.A)().is_loading()},completely_hide_bottom_nav(){return!["np_symfony","fp_symfony"].includes((0,u.A)().get_backend_type())||!this.loading}}},h=n(6262);const g=(0,h.A)(m,[["render",c]]);var b=g},7989:function(e,t,n){n.r(t),n.d(t,{default:function(){return C}});var o=n(641),s=n(33);const a={"data-cy":"error_page"},r={class:"text-center pt-5"},i={key:0},l={class:"text-primary"},_={class:"text-primary"},c={class:"text-center"};function p(e,t,n,p,d,u){const m=(0,o.g2)("Navigation");return(0,o.uX)(),(0,o.CE)("section",a,[(0,o.Lk)("div",r,[t[2]||(t[2]=(0,o.Lk)("h1",null," Ľutujeme, niečo sa nepodarilo :( ",-1)),t[3]||(t[3]=(0,o.Lk)("p",null,[(0,o.eW)(" Vyskytla sa neočakávaná chyba, preto nebolo možné dokončiť operáciu."),(0,o.Lk)("br"),(0,o.eW)(" Pre informácie ohľadom ďalšieho postupu nás prosím kontaktujte. ")],-1)),u.phone?((0,o.uX)(),(0,o.CE)("div",i,[(0,o.Lk)("h3",l,(0,s.v_)(u.phone),1),t[1]||(t[1]=(0,o.Lk)("p",null," Volajte kedykoľvek pondelok až piatok 09:00 - 17:00 ",-1))])):(0,o.Q3)("",!0),(0,o.Lk)("h3",_,(0,s.v_)(u.email),1),t[4]||(t[4]=(0,o.Lk)("p",null," Pošlite nám fotku tejto obrazovky a ozveme sa vám. ",-1))]),(0,o.Lk)("pre",null,(0,s.v_)(u.error),1),(0,o.bF)(m,{onPrev:u.prev_button,onNext:u.next_button,show_back:!0,show_next:!0,disable_next:d.disable_next},null,8,["onPrev","onNext","disable_next"]),(0,o.Lk)("div",c,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>u.open_where&&u.open_where(...e)),class:"btn btn-outline-primary mt-5"}," Zotavenie session ")])])}var d=n(1786),u=n(5833),m=n(9819),h=n(8700),g=n(9452),b=n(7654),k=n(2873),A=(n(6343),n(3175)),f=n(3177);class v{grafana(){let e=(0,u.A)().get_detailed_fail(),t={message:"osmapp: "+e.action_name+" failed",level_name:"DEBUG",type:"frontend",context:{failed_api:e,app_state:{version:(0,h.A)().give_app_version(),session_token:(0,h.A)().get_session_token(),endpoint_type:(0,h.A)().get_endpoint_type(),run_mode:(0,h.A)().get_run_mode(),backend_type:(0,h.A)().get_backend_type(),group_id:(0,h.A)().product_group_id(),step:e.step,flow_id:(0,h.A)().get_flow_id(),signature_role:(0,h.A)().get_signature_role(),payment:(0,h.A)().get_payment_data(),representative:(0,h.A)().get_representative(),agent_code:(0,f.A)().get_agent_code(),selected_product:(0,f.A)().get_selected_product()}},request_uri:window.location.href,module_fqdn:window.location.hostname},n={action_name:"logger",method:"POST",body:JSON.stringify(t),url:(0,h.A)().grafana_url(),content_type:"application/json"},o=new A.A;return o.prepare_params(n).handle_response().catch((e=>{throw e}))}}var w=new v,x={props:{},components:{Navigation:d.A},emits:[],data(){return{disable_next:!0,attempt:0,max_tries:20,session_state:0,timeout_handle:""}},created(){w.grafana(),this.continue_session()},methods:{prev_button(){clearTimeout(this.timeout_handle),(0,h.A)().change_step(this.error.step)},next_button(){100!==this.session_state?b.A.repeat_confirm().then((e=>{"success"!==e.result?.response&&100!==e.result?.state||(0,h.A)().change_step(5)})):(0,h.A)().change_step(5)},continue_session(){g.A.session_info().then((e=>{if("success"===e.result?.response||100===e.result?.state)this.session_state=100,this.disable_next=!1;else if(90===e.result?.state)this.session_state=90,this.disable_next=!1;else{if(this.attempt>this.max_tries)return void console.log("continue_session reached max_tries");this.attempt++,this.timeout_handle=setTimeout((()=>{this.continue_session()}),5e3)}}))},open_where(){clearTimeout(this.timeout_handle),(0,k.A)().open_it("Resurrect_session")}},computed:{error(){return(0,u.A)().get_last_request()},email(){return m.A.email_address()},phone(){return m.A.phone_number()}},watch:{}},y=n(6262);const L=(0,y.A)(x,[["render",p]]);var C=L},55:function(e,t,n){n.d(t,{A:function(){return c}});var o=n(641),s=n(33);const a={class:"spinner"};function r(e,t,n,r,i,l){return(0,o.uX)(),(0,o.CE)("div",a,[(0,o.Lk)("div",{class:(0,s.C4)(["bounce1",n.size])},null,2),(0,o.Lk)("div",{class:(0,s.C4)(["bounce2",n.size])},null,2),(0,o.Lk)("div",{class:(0,s.C4)(["bounce3",n.size])},null,2)])}var i={props:{size:String},components:{},data(){return{}},created(){},methods:{},computed:{}},l=n(6262);const _=(0,l.A)(i,[["render",r]]);var c=_}}]);