"use strict";(self["webpackChunkosmapp_webpack_3x25x"]=self["webpackChunkosmapp_webpack_3x25x"]||[]).push([[730],{55:function(e,t,n){n.d(t,{A:function(){return c}});var o=n(641),s=n(33);const a={class:"spinner"};function d(e,t,n,d,i,l){return(0,o.uX)(),(0,o.CE)("div",a,[(0,o.Lk)("div",{class:(0,s.C4)(["bounce1",n.size])},null,2),(0,o.Lk)("div",{class:(0,s.C4)(["bounce2",n.size])},null,2),(0,o.Lk)("div",{class:(0,s.C4)(["bounce3",n.size])},null,2)])}var i={props:{size:String},components:{},data(){return{}},created(){},methods:{},computed:{}},l=n(6262);const r=(0,l.A)(i,[["render",d]]);var c=r},2563:function(e,t,n){n.d(t,{A:function(){return m}});var o=n(641),s=n(33);const a={class:"modal-content","data-cy":"modal_content"},d={class:"modal-header"},i={class:"modal-body","data-cy":"modal_body"};function l(e,t,n,l,r,c){return(0,o.uX)(),(0,o.CE)("div",{onClick:t[1]||(t[1]=(...e)=>c.did_click_outside&&c.did_click_outside(...e)),class:(0,s.C4)(["vue_modal",n.modal_size]),"data-cy":"modal"},[(0,o.Lk)("div",a,[(0,o.Lk)("div",d,[n.icon?((0,o.uX)(),(0,o.CE)("span",{key:0,class:(0,s.C4)(["modal-icon",n.icon])},null,2)):(0,o.Q3)("",!0),(0,o.Lk)("h4",null,(0,s.v_)(n.title),1),n.close?((0,o.uX)(),(0,o.CE)("span",{key:1,onClick:t[0]||(t[0]=(...e)=>c.close_me&&c.close_me(...e)),class:"i_close"})):(0,o.Q3)("",!0)]),(0,o.Lk)("div",i,[(0,o.RG)(e.$slots,"default")])])],2)}var r=n(2873),c={props:{close:Boolean,title:String,modal_size:String,icon:{type:String}},components:{},emits:[],data(){return{}},created(){document.addEventListener("keyup",this.close_me)},beforeUnmount(){document.removeEventListener("keyup",this.close_me)},methods:{close_me(e){this.close&&("click"===e?.type||"keyup"===e?.type&&27===e?.keyCode)&&(0,r.A)().close_them_all()},did_click_outside(e){e.target.classList.contains("vue_modal")&&this.close_me(e)}},computed:{},watch:{}},u=n(6262);const _=(0,u.A)(c,[["render",l]]);var m=_},3886:function(e,t,n){var o=n(8700),s=n(6343),a=n(3175);class d{session_documents(e){let t={action_name:"getsessiondocuments",method:"GET",url:(0,o.A)().endpoint_url()+"online/getsessiondocuments/?"+s.A.add_token_as_parameter()};e&&(t.url+="&user_uploaded=true");let n=new a.A;return n.prepare_params(t).handle_response().catch(e=>{throw e})}get_session_document(e){let t={action_name:"getsessiondocument",method:"GET",url:(0,o.A)().endpoint_url()+"online/getsessiondocument/"+e+"/?"+s.A.add_token_as_parameter()},n=new a.A;return n.prepare_params(t).handle_response().catch(e=>{throw e})}get_session_document_preview(e,t){let n={action_name:"getsessiondocument",method:"GET",url:(0,o.A)().endpoint_url()+"online/getsessiondocument/"+e+"/?"+s.A.add_token_as_parameter()};n.url+="&filters=thumbnail&thumbnail_mode=outbound&thumbnail_width="+t+"&thumbnail_height="+t;let d=new a.A;return d.prepare_params(n).handle_response().catch(e=>{throw e})}upload_session_document(e){let t={action_name:"createsessiondocument",method:"POST",body:e,content_type:null,url:(0,o.A)().endpoint_url()+"online/createsessiondocument/?"+s.A.add_token_as_parameter()},n=new a.A;return n.prepare_params(t).handle_response().catch(e=>{throw e})}delete_session_document(e){let t={action_name:"delete-uploaded-session-documents",method:"DELETE",url:(0,o.A)().endpoint_url()+"online/delete-uploaded-session-documents/?id="+e+s.A.add_token_as_parameter()},n=new a.A;return n.prepare_params(t).handle_response().catch(e=>{throw e})}}t.A=new d},4162:function(e,t,n){var o=n(8700),s=n(6343),a=n(3175),d=n(3177);class i{static_documents(){let e={action_name:"getdocuments",method:"GET",url:(0,o.A)().endpoint_url()+"online/getdocuments/"+(0,d.A)().get_selected_product().product_id+"/?"+s.A.add_token_as_parameter()},t=new a.A;return t.prepare_params(e).handle_response().catch(e=>{throw e})}get_static_document(e){let t={action_name:"getdocument",method:"GET",url:(0,o.A)().endpoint_url()+"online/getdocument/"+(0,d.A)().get_selected_product().product_id+"/"+e+"/?"+s.A.add_token_as_parameter()+"&nocontent=true"},n=new a.A;return n.prepare_params(t).handle_response().catch(e=>{throw e})}}t.A=new i},4688:function(e,t,n){n.d(t,{A:function(){return v}});var o=n(641),s=n(33),a=n(3751);const d={class:"w-100 btn-text text-start"};function i(e,t,n,i,l,r){const c=(0,o.g2)("Bouncer_loading");return r.display_document?((0,o.uX)(),(0,o.CE)("button",{key:0,"data-cy":"document_download",onClick:t[0]||(t[0]=(...e)=>r.download_pdf&&r.download_pdf(...e)),class:(0,s.C4)(["d-flex btn-text i_anchor",r.still_waiting?"document_waiting":""])},[(0,o.Lk)("div",d,[(0,o.eW)((0,s.v_)(r.name)+" ",1),(0,o.bo)((0,o.bF)(c,{size:"small"},null,512),[[a.aG,r.still_waiting]])]),t[1]||(t[1]=(0,o.Lk)("div",{class:"flex-shrink my-auto"},[(0,o.Lk)("span",{class:"i_download_item"})],-1))],2)):(0,o.Q3)("",!0)}var l=n(4162),r=n(3886),c=n(55),u=n(6343),_=n(8700),m=n(3177),p={props:{doc:Object},components:{Bouncer_loading:c.A},data(){return{is_downloading:!1}},created(){},methods:{download_pdf(){this.still_waiting||(this.is_downloading=!0,this.is_static?l.A.get_static_document(this.doc.id).then(e=>{if(200===e.status){if(void 0!==e.result.download_token&&null!==e.result.download_token){let t=(0,_.A)().document_url()+"?access_token="+e.result.download_token;window.open(t)}else u.A.downloadBase64(this.name,e.result.content);this.is_downloading=!1}else this.is_downloading=!1}):r.A.get_session_document(this.doc.id).then(e=>{200===e.status?(u.A.downloadBase64(this.name,e.result.content),this.is_downloading=!1):this.is_downloading=!1}))}},computed:{is_static(){return void 0!==this.doc.filename},name(){return this.is_static?this.doc.filename:this.doc.name},display_document(){if("ws-preview.tmp"===this.name||"error"===this.doc.documentState)return!1;let e=(0,m.A)().get_selected_product().product_id+"";return!(this.doc.tags.includes("limity")&&!this.doc.tags.includes(e))},still_waiting(){return!!this.is_downloading||!this.is_static&&("waiting"===this.doc.documentState||"available"!==this.doc.documentState)}}},h=n(6262);const w=(0,h.A)(p,[["render",i],["__scopeId","data-v-5485f504"]]);var v=w},8856:function(e,t,n){var o=n(8700),s=n(6343),a=n(3175),d=n(3177);class i{get_it(e){!1===e&&(e=(0,d.A)().get_selected_product().next_contract);let t={action_name:"gethtml",method:"POST",url:(0,o.A)().endpoint_url()+"online/gethtml/?id="+e+s.A.add_token_as_parameter()},n=new a.A;return n.prepare_params(t).handle_response().catch(e=>{throw e})}get_json_api(e){let t={action_name:"getjson",method:"POST",url:(0,o.A)().endpoint_url()+"online/getjson/?id="+e+s.A.add_token_as_parameter()},n=new a.A;return n.prepare_params(t).handle_response().catch(e=>{throw e})}}t.A=new i},9730:function(e,t,n){n.r(t),n.d(t,{default:function(){return h}});var o=n(641);const s=["innerHTML"],a={class:"docs_download"};function d(e,t,n,d,i,l){const r=(0,o.g2)("Document_download"),c=(0,o.g2)("Modal_body");return(0,o.uX)(),(0,o.Wv)(c,{close:!0,title:i.title,modal_size:"huge"},{default:(0,o.k6)(()=>[(0,o.Lk)("div",{innerHTML:i.html,class:"product_detail_html"},null,8,s),(0,o.Lk)("div",a,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.static_docs,(e,t)=>((0,o.uX)(),(0,o.Wv)(r,{doc:e},null,8,["doc"]))),256))])]),_:1},8,["title"])}var i=n(2563),l=n(2873),r=n(8856),c=n(4162),u=n(4688),_={props:{},components:{Modal_body:i.A,Document_download:u.A},emits:[],data(){return{title:"",html:"",static_docs:{}}},created(){let e=(0,l.A)().retrieve_modal_data();this.title=e.product_name,r.A.get_it(e.detail_template).then(e=>{200===e.status&&(this.html=e.result.html,this.add_tab_listeners())}),c.A.static_documents().then(e=>{200===e.status&&(this.static_docs=e.result.documents)})},methods:{add_tab_listeners(){setTimeout(()=>{let e=document.querySelectorAll("#osm_app .vue_modal .tab-pane");for(let o in e)e.hasOwnProperty(o)&&(e[o].classList.remove("fade","in"),e[o].parentNode.classList.contains("tab-pane")&&e[o].parentNode.parentNode.appendChild(e[o]));let t=document.querySelectorAll("#osm_app .vue_modal ul.nav-tabs a");for(let o in t)t.hasOwnProperty(o)&&t[o].addEventListener("click",n=>{n.preventDefault();let o=n.target.hash.replace("#","");for(let s in e)e.hasOwnProperty(s)&&(e[s].classList.remove("active"),t[s].parentNode.classList.remove("active"),e[s].id===o&&(e[s].classList.add("active"),t[s].parentNode.classList.add("active")))});let n=document.querySelectorAll("#osm_app .vue_modal .product_detail_tab_switcher");for(let o in n){if(!n.hasOwnProperty(o))continue;let s=n[o].dataset.show,a=n[o].dataset.scroll;n[o].addEventListener("click",n=>{n.preventDefault();for(let a in e)e.hasOwnProperty(a)&&(e[a].classList.remove("active"),t[a].parentNode.classList.remove("active"),parseInt(a,10)===parseInt(s,10)-1&&(e[a].classList.add("active"),t[a].parentNode.classList.add("active")));let o=document.querySelector("#osm_app .vue_modal ."+a);null!==o&&o.scrollIntoView()})}},100)}},computed:{},watch:{}},m=n(6262);const p=(0,m.A)(_,[["render",d],["__scopeId","data-v-bcfca66a"]]);var h=p}}]);