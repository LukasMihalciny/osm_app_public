"use strict";(self["webpackChunkosmapp_webpack_3xx"]=self["webpackChunkosmapp_webpack_3xx"]||[]).push([[537],{55:function(e,o,t){t.d(o,{A:function(){return d}});var a=t(641),s=t(33);const l={class:"spinner"};function n(e,o,t,n,i,r){return(0,a.uX)(),(0,a.CE)("div",l,[(0,a.Lk)("div",{class:(0,s.C4)(["bounce1",t.size])},null,2),(0,a.Lk)("div",{class:(0,s.C4)(["bounce2",t.size])},null,2),(0,a.Lk)("div",{class:(0,s.C4)(["bounce3",t.size])},null,2)])}var i={props:{size:String},components:{},data(){return{}},created(){},methods:{},computed:{}},r=t(6262);const p=(0,r.A)(i,[["render",n]]);var d=p},3175:function(e,o,t){var a=t(1114),s=t(8700),l=t(2873),n=t(5833),i=t(2754),r=t(3177);class p{constructor(){(0,a.A)(this,"params",{}),(0,a.A)(this,"headers",{}),(0,a.A)(this,"auth_fails",0),(0,a.A)(this,"auth_max",6)}prepare_params(e){return this.params=e,void 0===this.params.timeout&&(this.params.timeout=29),this.headers={method:this.params.method,mode:"cors",cache:"no-cache",credentials:"omit",signal:(0,i.A)().get_abort_signal(),headers:{"x-user-scope":(0,s.A)().give_api_scope(),Authorization:(0,s.A)().give_bearer(),Accept:"application/json"}},"POST"===this.params.method&&this.params.body&&(this.headers.body=this.params.body),void 0===this.params.content_type?this.headers.headers["Content-Type"]="application/x-www-form-urlencoded":null!==this.params.content_type&&(this.headers.headers["Content-Type"]=this.params.content_type),this}async unauthorized(){let e=(0,s.A)().get_backend_type(),o=(0,s.A)().get_endpoint_type(),t=(0,r.A)().get_receiver(),a={php_wrapper:"/authorize_frontend/?endpoint="+o+"&receiver="+t,np_wp:"/wp-content/themes/najpoistenie/api_php_requests/authorize_frontend.php",fp_symfony:"/osmapp/auth/?receiver="+t,np_symfony:"/osmapp/auth/",wrapper_sf:"/osmapp/auth/?endpoint="+o+"&receiver="+t};if(a.hasOwnProperty(e)){let o=window.location.origin+a[e];return fetch(o).then(e=>e.json()).then(e=>!!e&&((0,s.A)().save_bearer(e),!0))}if("lukas_local"===e){let e="http://wrapper.local/authorize_frontend/?endpoint="+o+"&receiver="+t;return fetch(e).then(e=>e.json()).then(e=>((0,s.A)().save_bearer(e),console.log("NEW BEARER:"),console.log(e),!0))}return"vue"===e?(console.log("VUE does not have 401 auth service, fill access_token into env.js"),!1):"myport"===e?(0,s.A)().myport_access_token_promise().then(e=>!1!==e&&((0,s.A)().save_bearer(e),!0)):(console.log("backend_type "+e+" has no access to new authorization"),!1)}switch_receiver(){let e=(0,s.A)().get_backend_type(),o=(0,s.A)().get_endpoint_type(),t=(0,r.A)().get_receiver(),a={lukas_local:"http://wrapper.local/authorize_frontend/?endpoint="+o+"&receiver="+t+"&cache=allow",wrapper_sf:window.location.origin+"/osmapp/auth/?endpoint="+o+"&receiver="+t+"&cache=allow"};if("vue"===e)return!0;if(!a.hasOwnProperty(e))return console.log("only lukas_local and wrapper_sf backend_types has access to this method"),!1;let l=a[e];return fetch(l).then(e=>e.json()).then(e=>!!e&&((0,s.A)().save_bearer(e),!0))}async handle_response(){let e=await this.call_the_api_request();if(200===e.status)return this.auth_fails=0,e;if(401===e.status){if(this.auth_fails++,this.auth_fails>this.auth_max)return console.log("Authorization reched maximum attempts. Try to refresh the app or report to admin."),{};let e=await this.unauthorized();return e?await this.prepare_params(this.params).handle_response():null}if(423===e.status&&-1===["car-data-search","car-valuation-options","car-valuation-price"].indexOf(this.params.action_name))return(0,l.A)().open_it("Clearance"),e;if(503===e.status)return(0,s.A)().change_step(503),e;if(408===e.status)return console.log("408 in request "+this.params.action_name),-1===["calculate_step2","calculate_step4","confirm"].indexOf(this.params.action_name)&&(0,l.A)().open_it("Server_timeout"),e;if(500===e.status&&"calculate_step2"===this.params.action_name||422===e.status&&"confirm"===this.params.action_name||412===e.status&&"confirm"===this.params.action_name||422===e.status&&"getsessioninfo"===this.params.action_name||"ico-info"===this.params.action_name||["car-data-search","car-valuation-options","car-valuation-price"].indexOf(this.params.action_name)>-1||422===e.status&&"session-remap"===this.params.action_name||422===e.status&&"id-scan/add-page"===this.params.action_name||422===e.status&&"id-scan/get-scan-groups"===this.params.action_name||422===e.status&&"identity-scan-check"===this.params.action_name||422===e.status&&"identity-scan"===this.params.action_name||(422===e.status||409===e.status)&&"signature-code-check"===this.params.action_name||(422===e.status||409===e.status)&&"signature-code-send"===this.params.action_name||500===e.status&&"id-scan/get-scan-groups"===this.params.action_name||425===e.status&&"id-scan/get-scan-groups"===this.params.action_name||425===e.status&&"id-scan/get-scan-group-documents"===this.params.action_name||422===e.status&&"payment-create"===this.params.action_name||422===e.status&&"offer-notify"===this.params.action_name)return e;{let o=(new Date).toLocaleString(),t=(0,s.A)().get_session_token(),a=(0,s.A)().current_step();return(0,n.A)().set_last_request(this.headers,this.params,o,t,a,e),(0,s.A)().change_step(404),(0,l.A)().close_them_all(),e}}call_the_api_request(){return new Promise((e,o)=>{let t=setTimeout(function(){return e({status:408,statusText:"Request Timeout"})},1e3*this.params.timeout),a={};fetch(this.params.url,this.headers).then(e=>{a=e;let o=e.headers.get("content-type");return-1===o.indexOf("json")?{response:"not in json format"}:e.json()}).then(o=>{a.result=o,e(a)}).catch(e=>{"AbortError"===e.name?(clearTimeout(t),console.log("abort",this.params.action_name)):console.error("Fetch error:",e)})})}}o.A=p},9537:function(e,o,t){t.r(o),t.d(o,{default:function(){return be}});var a=t(641);function s(e,o,t,s,l,n){const i=(0,a.g2)("New_session_form"),r=(0,a.g2)("List_of_sessions");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(i),(0,a.bF)(r)],64)}var l=t(3751),n=t(33);const i={class:"col-12 col-md-4 bg-light p-2"},r={class:"col-12 col-md-4 bg-light p-2"},p={class:"col-12 col-md-4 bg-light p-2"},d={class:"col-12 col-md-4 bg-light p-2"},c={key:0,class:"col-12 col-md-4 bg-light p-2"},_={key:1,class:"col-12 col-md-4 bg-light p-2"},m=["value"],u={key:2,class:"col-12 col-md-4 bg-light p-2"},h={key:3,class:"col-12 col-md-4 bg-light p-2"},g={key:4,class:"col-12 col-md-4 bg-light p-2"},k={class:"col-12 col-md-4 bg-light p-2"},f={class:"col-12 col-md-4 bg-light p-2"},v={class:"col-12 col-md-4 bg-light p-2"},b={key:5,class:"col-12 col-md-4 bg-light p-2"},y={key:6,class:"col-12 col-md-4 bg-light p-2"},w={key:7,class:"col-12 col-md-4 bg-light p-2"},L={key:8,class:"col-12 col-md-4 bg-light p-2"},A={key:9,class:"col-12 col-md-4 bg-light p-2"},x={key:10,class:"col-12 col-md-4 bg-light p-2"},C={key:11,class:"col-12 col-md-4 bg-light p-2"},E={key:12,class:"col-12 col-md-4 bg-light p-2"},X={key:13,class:"col-12 col-md-4 bg-light p-2"},z={key:14,class:"col-12 col-md-4 bg-light p-2"},U={key:15,class:"col-12 col-md-4 bg-light p-2"},F={class:"form-check pt-4"},V={class:"col-12 col-md-4 bg-light px-2 pt-4 pb-2 pb-md-4 mb-0 mb-md-3"},j=["disabled"],S={class:"col-12 col-md-4 bg-light px-2 pt-2 pt-md-4 pb-2 pb-md-4 mb-0 mb-md-3"},Q=["disabled"],J={class:"col-12 col-md-4 bg-light px-2 pb-4 pt-2 pt-md-4 mb-3"},O={key:0,class:"text-center pt-3"},T=["disabled"],I={key:1,class:"text-center pt-5 mt-5"};function P(e,o,t,s,P,R){const N=(0,a.g2)("Bouncer_loading");return R.no_keep_parameter?((0,a.uX)(),(0,a.CE)("form",{key:0,onSubmit:o[20]||(o[20]=(...e)=>R.create_session&&R.create_session(...e)),class:"create_sesssion row mt-2 mb-5","data-cy":"create_sesssion"},[(0,a.Lk)("div",i,[o[22]||(o[22]=(0,a.Lk)("label",{for:"mode",class:"form-label"},"Mode",-1)),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":o[0]||(o[0]=e=>P.model_mode=e),id:"mode",class:"form-control"},o[21]||(o[21]=[(0,a.Lk)("option",{value:"form_app"},"form_app (formuláre Najpoistenia)",-1),(0,a.Lk)("option",{value:"node_red"},"node_red (dynamické flow)",-1),(0,a.Lk)("option",{value:"docs_landing"},"docs_landing (upload page)",-1)]),512),[[l.u1,P.model_mode]])]),(0,a.Lk)("div",r,[o[24]||(o[24]=(0,a.Lk)("label",{for:"receiver",class:"form-label"},"Receiver",-1)),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":o[1]||(o[1]=e=>P.model_receiver=e),id:"receiver",class:"form-control"},o[23]||(o[23]=[(0,a.Fv)('<option value="1">1 - Finportal</option><option value="2">2 - Najpoistenie</option><option value="3">3 - UMS</option><option value="4">4 - Partners group</option><option value="5">5 - Centrum poistenia</option><option value="6">6 - Realfin</option>',6)]),512),[[l.u1,P.model_receiver]])]),(0,a.Lk)("div",p,[o[26]||(o[26]=(0,a.Lk)("label",{for:"endpoint",class:"form-label"},"Endpoint",-1)),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":o[2]||(o[2]=e=>P.model_endpoint=e),id:"endpoint",class:"form-control"},o[25]||(o[25]=[(0,a.Fv)('<option value="develop">develop</option><option value="minor_stage">minor_stage</option><option value="stage">stage</option><option value="edu">edu</option><option value="production">production</option><option value="pg_production">pg_production</option><option value="sfa_production">sfa_production</option>',7)]),512),[[l.u1,P.model_endpoint]])]),(0,a.Lk)("div",d,[o[27]||(o[27]=(0,a.Lk)("label",{for:"session",class:"form-label"},"Session",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":o[3]||(o[3]=e=>P.model_session=e),type:"text",class:"form-control",id:"session",placeholder:"uuid session token",maxlength:"36"},null,512),[[l.Jo,P.model_session]])]),"node_red"===P.model_mode?((0,a.uX)(),(0,a.CE)("div",c,[o[29]||(o[29]=(0,a.Lk)("label",{for:"flow",class:"form-label"},"Flow id",-1)),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":o[4]||(o[4]=e=>P.model_flow=e),id:"flow",class:"form-control"},o[28]||(o[28]=[(0,a.Fv)('<option value="200">200 - nahlasenie spz</option><option value="105">105 - onboarding</option><option value="106">106 - onboarding-new</option><option value="90">90 - onboarding again??</option><option value="91">91 - claims</option>',5)]),512),[[l.u1,P.model_flow]])])):"form_app"===P.model_mode?((0,a.uX)(),(0,a.CE)("div",_,[o[30]||(o[30]=(0,a.Lk)("label",{for:"group",class:"form-label"},"Group id",-1)),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":o[5]||(o[5]=e=>P.model_group=e),id:"group",class:"form-control"},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(R.group_options,(e,o)=>((0,a.uX)(),(0,a.CE)("option",{value:o},(0,n.v_)(o)+" - "+(0,n.v_)(e),9,m))),256))],512),[[l.u1,P.model_group]])])):((0,a.uX)(),(0,a.CE)("div",u)),"form_app"===P.model_mode?((0,a.uX)(),(0,a.CE)("div",h,[o[32]||(o[32]=(0,a.Lk)("label",{for:"step",class:"form-label"},"Step",-1)),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":o[6]||(o[6]=e=>P.model_step=e),id:"step",class:"form-control"},o[31]||(o[31]=[(0,a.Fv)('<option value="0">0 - offer</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6 - payment gateway</option><option value="88">88 - design samples</option><option value="404">404 - error</option><option value="503">503 - maintenance</option>',10)]),512),[[l.u1,P.model_step]])])):((0,a.uX)(),(0,a.CE)("div",g)),(0,a.Lk)("div",k,[o[34]||(o[34]=(0,a.Lk)("label",{for:"skin",class:"form-label"},"Skin",-1)),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":o[7]||(o[7]=e=>P.model_skin=e),id:"skin",class:"form-control"},o[33]||(o[33]=[(0,a.Fv)('<option value="najpoistenie">najpoistenie</option><option value="myport">myport</option><option value="finportal">finportal</option><option value="partners">partners</option><option value="neutral">neutral</option><option value="zeteo">zeteo</option>',6)]),512),[[l.u1,P.model_skin]])]),(0,a.Lk)("div",f,[o[35]||(o[35]=(0,a.Lk)("label",{for:"agent",class:"form-label"},"Agent",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":o[8]||(o[8]=e=>P.model_agent=e),type:"text",class:"form-control",id:"agent",placeholder:"kod agenta"},null,512),[[l.Jo,P.model_agent]])]),(0,a.Lk)("div",v,[o[36]||(o[36]=(0,a.Lk)("label",{for:"note",class:"form-label"},"Note",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":o[9]||(o[9]=e=>P.model_note=e),type:"text",class:"form-control",id:"note",placeholder:"napr. zivot nn 2 osoby",maxlength:"32"},null,512),[[l.Jo,P.model_note]])]),P.show_more?((0,a.uX)(),(0,a.CE)("div",b,[o[37]||(o[37]=(0,a.Lk)("label",{for:"filtered",class:"form-label"},"Filtered products",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":o[10]||(o[10]=e=>P.model_filtered=e),type:"text",class:"form-control",id:"filtered",placeholder:"219,299"},null,512),[[l.Jo,P.model_filtered]])])):(0,a.Q3)("",!0),P.show_more&&"node_red"===P.model_mode?((0,a.uX)(),(0,a.CE)("div",y,[o[38]||(o[38]=(0,a.Lk)("label",{for:"flow",class:"form-label"},"Flow manual",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":o[11]||(o[11]=e=>P.model_flow=e),type:"text",class:"form-control",id:"flow",placeholder:"105"},null,512),[[l.Jo,P.model_flow]])])):P.show_more&&"form_app"===P.model_mode?((0,a.uX)(),(0,a.CE)("div",w,[o[39]||(o[39]=(0,a.Lk)("label",{for:"group_manual",class:"form-label"},"Group manual",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":o[12]||(o[12]=e=>P.model_group=e),type:"text",class:"form-control",id:"group_manual"},null,512),[[l.Jo,P.model_group]])])):P.show_more?((0,a.uX)(),(0,a.CE)("div",L)):(0,a.Q3)("",!0),P.show_more?((0,a.uX)(),(0,a.CE)("div",A)):(0,a.Q3)("",!0),P.show_more?((0,a.uX)(),(0,a.CE)("div",x,[o[41]||(o[41]=(0,a.Lk)("label",{for:"role",class:"form-label"},"Signature Role",-1)),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":o[13]||(o[13]=e=>P.model_role=e),id:"role",class:"form-control"},o[40]||(o[40]=[(0,a.Fv)('<option value="">-</option><option value="agent">agent</option><option value="poistnik">poistnik</option><option value="ziadatel">ziadatel</option><option value="spoludlznik">spoludlznik</option>',5)]),512),[[l.u1,P.model_role]])])):(0,a.Q3)("",!0),P.show_more?((0,a.uX)(),(0,a.CE)("div",C,[o[42]||(o[42]=(0,a.Lk)("label",{for:"role_manual",class:"form-label"},"Role manual",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":o[14]||(o[14]=e=>P.model_role=e),type:"text",class:"form-control",id:"role_manual"},null,512),[[l.Jo,P.model_role]])])):(0,a.Q3)("",!0),P.show_more?((0,a.uX)(),(0,a.CE)("div",E)):(0,a.Q3)("",!0),P.show_more?((0,a.uX)(),(0,a.CE)("div",X,[o[43]||(o[43]=(0,a.Lk)("label",{for:"payment_id",class:"form-label"},"Payment ID",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":o[15]||(o[15]=e=>P.model_payment_id=e),type:"text",class:"form-control",id:"payment_id",placeholder:"&paymentid={uuid}"},null,512),[[l.Jo,P.model_payment_id]])])):(0,a.Q3)("",!0),P.show_more?((0,a.uX)(),(0,a.CE)("div",z,[o[44]||(o[44]=(0,a.Lk)("label",{for:"payment_result",class:"form-label"},"Payment Result",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":o[16]||(o[16]=e=>P.model_payment_result=e),type:"text",class:"form-control",id:"payment_result",placeholder:"&result=OK|FAIL|TOUT"},null,512),[[l.Jo,P.model_payment_result]])])):(0,a.Q3)("",!0),P.show_more?((0,a.uX)(),(0,a.CE)("div",U,[(0,a.Lk)("div",F,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":o[17]||(o[17]=e=>P.model_payment_debug=e),class:"form-check-input",type:"checkbox",value:"",id:"payment_debug"},null,512),[[l.lH,P.model_payment_debug]]),o[45]||(o[45]=(0,a.Lk)("label",{class:"form-check-label",for:"payment_debug"},"Payment debug",-1))])])):(0,a.Q3)("",!0),(0,a.Lk)("div",V,[(0,a.Lk)("button",{onClick:o[18]||(o[18]=e=>P.show_more=!P.show_more),type:"button",disabled:P.loading,class:"btn btn-sm btn-outline-primary w-100"},(0,n.v_)(P.show_more?"less":"more"),9,j)]),(0,a.Lk)("div",S,[(0,a.Lk)("button",{onClick:o[19]||(o[19]=(...e)=>R.reset_form_and_params&&R.reset_form_and_params(...e)),type:"button",disabled:P.loading,class:"btn btn-sm btn-outline-primary w-100"}," reset ",8,Q)]),(0,a.Lk)("div",J,[P.loading?((0,a.uX)(),(0,a.CE)("div",O,[(0,a.bF)(N)])):((0,a.uX)(),(0,a.CE)("button",{key:1,type:"submit",class:(0,n.C4)(["btn btn-sm w-100",P.model_session?"btn-accent":"btn-primary"]),disabled:R.list_count>=200},(0,n.v_)(R.list_count>=200?"too many sessions, delete & reload":P.model_session?"open and save":"new session"),11,T))])],32)):R.no_keep_parameter?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",I,[(0,a.bF)(N)]))}var R=t(8700),N=(t(3177),t(2375),t(7151)),q=t(3175),K=t(55),B=t(1190),D=t(9819),G={props:{},components:{Bouncer_loading:K.A},emits:[],data(){return{show_more:!1,loading:!1,model_mode:"",model_endpoint:"",model_session:"",model_receiver:"",model_group:"",model_step:"",model_flow:"",model_skin:"",model_agent:"",model_filtered:"",model_note:"",model_role:"",model_payment_id:"",model_payment_result:"",model_payment_debug:!1}},created(){this.shared_params_and_defaults()},methods:{async create_session(e=void 0){void 0!==e&&e.preventDefault(),this.loading=!0,N.A.remove_shared_url_params();let o={session_token:this.model_session,endpoint_type:this.model_endpoint,run_mode:this.model_mode,group_id:parseInt(this.model_group,10),step:parseInt(this.model_step,10),flow_id:parseInt(this.model_flow,10),skin:this.model_skin,agent_code:this.model_agent,filtered_products:this.model_filtered,signature_role:this.model_role,payment:{payment_id:this.model_payment_id,payment_result:this.model_payment_result,payment_debug:this.model_payment_debug},receiver_id:parseInt(this.model_receiver,10),backend_type:(0,R.A)().get_backend_type(),proxy_scope:(0,R.A)().give_api_scope(),user_note:this.model_note};B.A.init_app_config(o,!1),N.A.update_storage();let t=new q.A,a=await t.switch_receiver();a?(this.loading=!1,(0,R.A)().set_manager_view(!1)):console.log("failed to authorize this receiver",o.receiver_id)},reset_form_and_params(){N.A.remove_shared_url_params(),this.shared_params_and_defaults()},shared_params_and_defaults(){let e=N.A.read_link_params();this.model_mode=e.mode||"form_app",this.model_endpoint=e.endpoint||"edu",this.model_session=e.session||"",this.model_receiver=e.receiver||"2",this.model_group=e.group||"1",this.model_step=e.step||"1",this.model_flow=e.flow||"105",this.model_skin=e.skin||"najpoistenie",this.model_agent=e.agent||"",this.model_filtered=e.filtered||"",this.model_note=e.note?decodeURIComponent(e.note):"",this.model_role=e.role||"",this.model_payment_id=e.paymentid||"",this.model_payment_result=e.result||"",this.model_payment_debug="true"===e.payment_debug}},computed:{group_options(){return D.A.group_names()},list_count(){return N.A.session_list_count()},no_keep_parameter(){let e=N.A.get_keep();return null===e}},watch:{}},M=t(6262);const W=(0,M.A)(G,[["render",P]]);var $=W;const H={key:0,class:"session_cookie_manager row p-0","data-cy":"session_filter"},Y={class:"col-12 col-md-6 p-2"},Z={class:"col-12 col-md-6 p-2"},ee={key:1,class:"session_cookie_manager table-responsive p-0","data-cy":"session_list"},oe={class:"table keep_table_styles table-striped table-light table-hover table-borderless align-middle table-sm"},te={style:{"font-size":"11px"}},ae=["title"],se={key:0,class:"text-end col-sticky pe-md-5"},le={key:1,class:"text-end col-sticky"},ne=["onClick"],ie=["onClick"],re=["onClick"],pe={key:2,class:"session_cookie_manager row"},de={class:"col-12 col-md-9"},ce={class:"col-12 col-md-3"};function _e(e,o,t,s,i,r){const p=(0,a.g2)("Bouncer_loading");return(0,a.uX)(),(0,a.CE)(a.FK,null,[r.no_keep_parameter?((0,a.uX)(),(0,a.CE)("section",H,[(0,a.Lk)("div",Y,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>i.model_session=e),type:"text",class:"form-control",id:"session",placeholder:"filter session",maxlength:"36"},null,512),[[l.Jo,i.model_session]])]),(0,a.Lk)("div",Z,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>i.model_group=e),type:"text",class:"form-control",id:"group",placeholder:"filter group"},null,512),[[l.Jo,i.model_group]])])])):(0,a.Q3)("",!0),r.no_keep_parameter?((0,a.uX)(),(0,a.CE)("section",ee,[(0,a.Lk)("table",oe,[o[3]||(o[3]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",{scope:"col",class:"px-1 py-2"},"Mode"),(0,a.Lk)("th",{scope:"col",class:"px-1 py-2"},"Endpoint"),(0,a.Lk)("th",{scope:"col",class:"px-1 py-2"},"Receiver"),(0,a.Lk)("th",{scope:"col",class:"px-1 py-2"},"Session"),(0,a.Lk)("th",{scope:"col",class:"px-1 py-2"},"Group/Flow"),(0,a.Lk)("th",{scope:"col",class:"px-1 py-2"},"Step"),(0,a.Lk)("th",{scope:"col",class:"px-1 py-2"},"Note"),(0,a.Lk)("th",{scope:"col",class:"px-1 py-2"},"Updated"),(0,a.Lk)("th",{scope:"col",class:"px-1 py-2 text-end"},"Actions")])],-1)),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.displayed_sessions,(e,o)=>((0,a.uX)(),(0,a.CE)("tr",null,[(0,a.Lk)("td",{style:(0,n.Tr)({color:"form_app"===e.run_mode?"slateblue":"node_red"===e.run_mode?"darkred":"darkgoldenrod"})},(0,n.v_)(e.run_mode),5),(0,a.Lk)("td",{class:(0,n.C4)(["production","pg_production","sfa_production"].includes(e.endpoint_type)?"fw-bold":"")},(0,n.v_)(e.endpoint_type),3),(0,a.Lk)("td",null,(0,n.v_)(e.receiver_id),1),(0,a.Lk)("td",te,(0,n.v_)(o),1),(0,a.Lk)("td",null,[(0,a.Lk)("span",{class:(0,n.C4)(["i_group",r.group_icon(o)]),title:r.get_group_name(e)},null,10,ae),(0,a.eW)("    "+(0,n.v_)("form_app"===e.run_mode?e.group_id:"node_red"===e.run_mode?e.flow_id:""),1)]),(0,a.Lk)("td",null,(0,n.v_)("form_app"===e.run_mode?e.step:""),1),(0,a.Lk)("td",null,(0,n.v_)(e.user_note),1),(0,a.Lk)("td",null,(0,n.v_)(r.format_updated_date(e.updated_at)),1),i.loading===o?((0,a.uX)(),(0,a.CE)("td",se,[(0,a.bF)(p,{size:"small"})])):((0,a.uX)(),(0,a.CE)("td",le,[(0,a.Lk)("span",{class:"i_action open",title:"Open",onClick:e=>r.open_this_session(o)},null,8,ne),(0,a.Lk)("span",{class:"i_action share",title:"Share",onClick:e=>r.share_this_session(o)},null,8,ie),(0,a.Lk)("span",{class:"i_action delete",title:"Delete",onClick:e=>r.clear_this_session(o)},null,8,re)]))]))),256))])])])):(0,a.Q3)("",!0),r.no_keep_parameter?((0,a.uX)(),(0,a.CE)("section",pe,[(0,a.Lk)("div",de,[(0,a.Lk)("p",{class:(0,n.C4)([r.list_count>=200?"text-warning fw-bold":"","mt-2"])}," Max "+(0,n.v_)(r.list_count)+" / 200 ",3)]),(0,a.Lk)("div",ce,[(0,a.Lk)("button",{onClick:o[2]||(o[2]=(...e)=>r.open_export_import&&r.open_export_import(...e)),class:"btn btn-sm w-100 btn-secondary"}," Export / Import ")])])):(0,a.Q3)("",!0)],64)}var me=t(2873),ue=t(6343),he={props:{},components:{Bouncer_loading:K.A},emits:[],data(){return{all_data:{},share_indicator:null,loading:null,model_session:"",model_group:""}},created(){this.all_data=N.A.retrieve_storage(),this.autopen_keep()},methods:{autopen_keep(){let e=N.A.get_keep();null!==e&&(this.all_data.hasOwnProperty(e)?this.open_this_session(e):(console.log("Session set in KEEP parameter doesnt exist in localStorage."),N.A.delete_keep()))},async open_this_session(e){this.loading=e;let o={session_token:e,endpoint_type:this.all_data[e].endpoint_type,run_mode:this.all_data[e].run_mode,group_id:this.all_data[e].group_id,step:this.all_data[e].step,flow_id:this.all_data[e].flow_id,skin:this.all_data[e].skin,agent_code:this.all_data[e].agent_code,filtered_products:this.all_data[e].filtered_products,signature_role:this.all_data[e].signature_role,payment:this.all_data[e].payment,receiver_id:this.all_data[e].receiver_id,backend_type:(0,R.A)().get_backend_type(),proxy_scope:(0,R.A)().give_api_scope(),user_note:this.all_data[e].user_note};B.A.init_app_config(o,!1),N.A.set_keep(e);let t=new q.A,a=await t.switch_receiver();a?(this.loading=null,(0,R.A)().set_manager_view(!1)):console.log("failed to authorize this receiver",o.receiver_id)},clear_this_session(e){delete this.all_data[e],N.A.purge_storage(e)},format_updated_date(e){return ue.A.format_docs_date(e)},group_icon(e){if("node_red"===this.all_data[e].run_mode)return"node-red";if("docs_landing"===this.all_data[e].run_mode)return"upload-page";if("form_app"!==this.all_data[e].run_mode)return"enigma";switch(this.all_data[e].group_id){case 10:return"podnikatelia";case 1:return"pzp";case 2:return"havarijne";case 3:return"hypoteka";case 4:return"zivot";case 5:return"gap";case 6:return"investicie";case 73:return"cudzinci";case 7:return"cestovne";case 81:return"zdravotne";case 72:return"sedadla";case 82:return"test";case 85:return"starobne";case 86:return"doplnkove";case 88:return"specialne";case 8:return"zodpovednost";case 9:return"majetok";case 92:return"spotrebny";default:return"neznama"}},get_group_name(e){if("form_app"===e.run_mode){const o=D.A.group_names();return o[e.group_id]||`Group ${e.group_id}`}return"node_red"===e.run_mode?`Flow ${e.flow_id}`:"docs_landing"===e.run_mode?"Upload page":"Unknown"},share_this_session(e){(0,me.A)().store_modal_data(e),(0,me.A)().open_it("Share_session")},open_export_import(){(0,me.A)().open_it("Export_import_list")}},computed:{displayed_sessions(){if(""===this.model_session&&""===this.model_group)return this.all_data;let e={};for(let o in this.all_data){let t=this.all_data[o].group_id+"";!o.includes(this.model_session)||""!==this.model_group&&t!==this.model_group||(e[o]=this.all_data[o])}return e},list_count(){return N.A.session_list_count()},no_keep_parameter(){let e=N.A.get_keep();return null===e},reload_the_list(){return"reload_list"===(0,me.A)().get_modal_event_data()}},watch:{reload_the_list(){this.reload_the_list&&(this.all_data=N.A.retrieve_storage(),(0,me.A)().del_modal_event_data())}}};const ge=(0,M.A)(he,[["render",_e]]);var ke=ge,fe={props:{},components:{New_session_form:$,List_of_sessions:ke},emits:[],data(){return{}},created(){},methods:{},computed:{},watch:{}};const ve=(0,M.A)(fe,[["render",s]]);var be=ve}}]);