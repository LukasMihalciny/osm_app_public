"use strict";(self["webpackChunkosmapp_webpack_3xx"]=self["webpackChunkosmapp_webpack_3xx"]||[]).push([[77],{6458:function(e,t,s){s.r(t),s.d(t,{default:function(){return A}});var o=s(641),l=s(33),a=s(3751);const i={class:"row"},c={class:"col-12 col-md-4"},d=["disabled"],r={class:"col-12 col-md-4"},n=["disabled"],_={class:"col-12 col-md-4"},m=["disabled"],p={class:"col-12 text-center mt-4 mb-3 fw-bold",style:{"min-height":"30px"}},u={key:0},k={key:1},b={key:2},f={key:3},h={class:"col-12 text-center mt-3 mb-3 fw-bold"};function v(e,t,s,v,w,y){const C=(0,o.g2)("Modal_body");return(0,o.uX)(),(0,o.Wv)(C,{close:""===w.feedback_state,title:"Session list tools",class:"modal-share",modal_size:"medium",icon:"i_share"},{default:(0,o.k6)((()=>[(0,o.Lk)("div",i,[(0,o.Lk)("div",c,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>y.export_list&&y.export_list(...e)),disabled:""!==w.feedback_state,class:"btn btn-sm w-100 btn-secondary"}," Export ",8,d)]),(0,o.Lk)("div",r,[(0,o.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>y.delete_list&&y.delete_list(...e)),disabled:""!==w.feedback_state,class:"btn btn-sm w-100 btn-secondary"}," Delete all ",8,n)]),(0,o.Lk)("div",_,[(0,o.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>y.import_list&&y.import_list(...e)),disabled:""!==w.feedback_state,class:(0,l.C4)(["btn btn-sm w-100",w.show_import?"btn-primary":"btn-secondary"])}," Import ",10,m)]),(0,o.Lk)("div",p,["export_success"===w.feedback_state?((0,o.uX)(),(0,o.CE)("p",u,"JSON was copied to clipboard (Ctrl+C).")):(0,o.Q3)("",!0),"delete_success"===w.feedback_state?((0,o.uX)(),(0,o.CE)("p",k,"All sessions from list was deleted.")):(0,o.Q3)("",!0),"import_success"===w.feedback_state?((0,o.uX)(),(0,o.CE)("p",b,"Session list was populated from JSON in textarea.")):(0,o.Q3)("",!0),"import_error"===w.feedback_state?((0,o.uX)(),(0,o.CE)("p",f,[t[4]||(t[4]=(0,o.eW)("Import failed: ")),t[5]||(t[5]=(0,o.Lk)("br",null,null,-1)),(0,o.eW)(" "+(0,l.v_)(w.optional_message),1)])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",h,[w.show_import?(0,o.bo)(((0,o.uX)(),(0,o.CE)("textarea",{key:0,"onUpdate:modelValue":t[3]||(t[3]=e=>w.import_model=e),class:"form-control",rows:"11"},null,512)),[[a.Jo,w.import_model]]):(0,o.Q3)("",!0)])])])),_:1},8,["close"])}var w=s(2563),y=s(7151),C=(s(6343),s(2873)),x={props:{},components:{Modal_body:w.A},emits:[],data(){return{show_import:!1,import_model:"",feedback_state:"",optional_message:""}},created(){},methods:{feedback_worker(e,t){let s=["export_success","delete_success","import_success","import_error"];if(!s.includes(e))return void console.log("bad feedback type",e);this.feedback_state=e,this.optional_message=t;let o="import_error"===e?5:2;setTimeout((()=>{this.feedback_state="",this.optional_message="",(0,C.A)().set_modal_event_data("reload_list")}),1e3*o)},export_list(){let e=y.A.retrieve_storage();navigator.clipboard.writeText(JSON.stringify(e,null,2)),this.feedback_worker("export_success")},delete_list(){y.A.clean_slate(),this.feedback_worker("delete_success")},import_list(){if(!1===this.show_import)return void(this.show_import=!0);this.show_import=!1;let e=y.A.validate_imported(this.import_model);!0===e?(y.A.upsert_storages(this.import_model),this.feedback_worker("import_success")):this.feedback_worker("import_error",e)}},computed:{},watch:{}},L=s(6262);const g=(0,L.A)(x,[["render",v]]);var A=g},2563:function(e,t,s){s.d(t,{A:function(){return p}});var o=s(641),l=s(33);const a={class:"modal-content","data-cy":"modal_content"},i={class:"modal-header"},c={class:"modal-body","data-cy":"modal_body"};function d(e,t,s,d,r,n){return(0,o.uX)(),(0,o.CE)("div",{onClick:t[1]||(t[1]=(...e)=>n.did_click_outside&&n.did_click_outside(...e)),class:(0,l.C4)(["vue_modal",s.modal_size]),"data-cy":"modal"},[(0,o.Lk)("div",a,[(0,o.Lk)("div",i,[s.icon?((0,o.uX)(),(0,o.CE)("span",{key:0,class:(0,l.C4)(["modal-icon",s.icon])},null,2)):(0,o.Q3)("",!0),(0,o.Lk)("h4",null,(0,l.v_)(s.title),1),s.close?((0,o.uX)(),(0,o.CE)("span",{key:1,onClick:t[0]||(t[0]=(...e)=>n.close_me&&n.close_me(...e)),class:"i_close"})):(0,o.Q3)("",!0)]),(0,o.Lk)("div",c,[(0,o.RG)(e.$slots,"default")])])],2)}var r=s(2873),n={props:{close:Boolean,title:String,modal_size:String,icon:{type:String}},components:{},emits:[],data(){return{}},created(){document.addEventListener("keyup",this.close_me)},beforeUnmount(){document.removeEventListener("keyup",this.close_me)},methods:{close_me(e){this.close&&("click"===e?.type||"keyup"===e?.type&&27===e?.keyCode)&&(0,r.A)().close_them_all()},did_click_outside(e){e.target.classList.contains("vue_modal")&&this.close_me(e)}},computed:{},watch:{}},_=s(6262);const m=(0,_.A)(n,[["render",d]]);var p=m}}]);