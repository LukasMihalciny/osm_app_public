"use strict";(self["webpackChunkosmapp_webpack_3x25x"]=self["webpackChunkosmapp_webpack_3x25x"]||[]).push([[942],{55:function(e,t,n){n.d(t,{A:function(){return c}});var a=n(641),s=n(33);const o={class:"spinner"};function l(e,t,n,l,d,i){return(0,a.uX)(),(0,a.CE)("div",o,[(0,a.Lk)("div",{class:(0,s.C4)(["bounce1",n.size])},null,2),(0,a.Lk)("div",{class:(0,s.C4)(["bounce2",n.size])},null,2),(0,a.Lk)("div",{class:(0,s.C4)(["bounce3",n.size])},null,2)])}var d={props:{size:String},components:{},data(){return{}},created(){},methods:{},computed:{}},i=n(6262);const r=(0,i.A)(d,[["render",l]]);var c=r},2563:function(e,t,n){n.d(t,{A:function(){return p}});var a=n(641),s=n(33);const o={class:"modal-content","data-cy":"modal_content"},l={class:"modal-header"},d={class:"modal-body","data-cy":"modal_body"};function i(e,t,n,i,r,c){return(0,a.uX)(),(0,a.CE)("div",{onClick:t[1]||(t[1]=(...e)=>c.did_click_outside&&c.did_click_outside(...e)),class:(0,s.C4)(["vue_modal",n.modal_size]),"data-cy":"modal"},[(0,a.Lk)("div",o,[(0,a.Lk)("div",l,[n.icon?((0,a.uX)(),(0,a.CE)("span",{key:0,class:(0,s.C4)(["modal-icon",n.icon])},null,2)):(0,a.Q3)("",!0),(0,a.Lk)("h4",null,(0,s.v_)(n.title),1),n.close?((0,a.uX)(),(0,a.CE)("span",{key:1,onClick:t[0]||(t[0]=(...e)=>c.close_me&&c.close_me(...e)),class:"i_close"})):(0,a.Q3)("",!0)]),(0,a.Lk)("div",d,[(0,a.RG)(e.$slots,"default")])])],2)}var r=n(2873),c={props:{close:Boolean,title:String,modal_size:String,icon:{type:String}},components:{},emits:[],data(){return{}},created(){document.addEventListener("keyup",this.close_me)},beforeUnmount(){document.removeEventListener("keyup",this.close_me)},methods:{close_me(e){this.close&&("click"===e?.type||"keyup"===e?.type&&27===e?.keyCode)&&(0,r.A)().close_them_all()},did_click_outside(e){e.target.classList.contains("vue_modal")&&this.close_me(e)}},computed:{},watch:{}},_=n(6262);const u=(0,_.A)(c,[["render",i]]);var p=u},3886:function(e,t,n){var a=n(8700),s=n(6343),o=n(3175);class l{session_documents(e){let t={action_name:"getsessiondocuments",method:"GET",url:(0,a.A)().endpoint_url()+"online/getsessiondocuments/?"+s.A.add_token_as_parameter()};e&&(t.url+="&user_uploaded=true");let n=new o.A;return n.prepare_params(t).handle_response().catch(e=>{throw e})}get_session_document(e){let t={action_name:"getsessiondocument",method:"GET",url:(0,a.A)().endpoint_url()+"online/getsessiondocument/"+e+"/?"+s.A.add_token_as_parameter()},n=new o.A;return n.prepare_params(t).handle_response().catch(e=>{throw e})}get_session_document_preview(e,t){let n={action_name:"getsessiondocument",method:"GET",url:(0,a.A)().endpoint_url()+"online/getsessiondocument/"+e+"/?"+s.A.add_token_as_parameter()};n.url+="&filters=thumbnail&thumbnail_mode=outbound&thumbnail_width="+t+"&thumbnail_height="+t;let l=new o.A;return l.prepare_params(n).handle_response().catch(e=>{throw e})}upload_session_document(e){let t={action_name:"createsessiondocument",method:"POST",body:e,content_type:null,url:(0,a.A)().endpoint_url()+"online/createsessiondocument/?"+s.A.add_token_as_parameter()},n=new o.A;return n.prepare_params(t).handle_response().catch(e=>{throw e})}delete_session_document(e){let t={action_name:"delete-uploaded-session-documents",method:"DELETE",url:(0,a.A)().endpoint_url()+"online/delete-uploaded-session-documents/?id="+e+s.A.add_token_as_parameter()},n=new o.A;return n.prepare_params(t).handle_response().catch(e=>{throw e})}}t.A=new l},4162:function(e,t,n){var a=n(8700),s=n(6343),o=n(3175),l=n(3177);class d{static_documents(){let e={action_name:"getdocuments",method:"GET",url:(0,a.A)().endpoint_url()+"online/getdocuments/"+(0,l.A)().get_selected_product().product_id+"/?"+s.A.add_token_as_parameter()},t=new o.A;return t.prepare_params(e).handle_response().catch(e=>{throw e})}get_static_document(e){let t={action_name:"getdocument",method:"GET",url:(0,a.A)().endpoint_url()+"online/getdocument/"+(0,l.A)().get_selected_product().product_id+"/"+e+"/?"+s.A.add_token_as_parameter()+"&nocontent=true"},n=new o.A;return n.prepare_params(t).handle_response().catch(e=>{throw e})}}t.A=new d},4688:function(e,t,n){n.d(t,{A:function(){return w}});var a=n(641),s=n(33),o=n(3751);const l={class:"w-100 btn-text text-start"};function d(e,t,n,d,i,r){const c=(0,a.g2)("Bouncer_loading");return r.display_document?((0,a.uX)(),(0,a.CE)("button",{key:0,"data-cy":"document_download",onClick:t[0]||(t[0]=(...e)=>r.download_pdf&&r.download_pdf(...e)),class:(0,s.C4)(["d-flex btn-text i_anchor",r.still_waiting?"document_waiting":""])},[(0,a.Lk)("div",l,[(0,a.eW)((0,s.v_)(r.name)+" ",1),(0,a.bo)((0,a.bF)(c,{size:"small"},null,512),[[o.aG,r.still_waiting]])]),t[1]||(t[1]=(0,a.Lk)("div",{class:"flex-shrink my-auto"},[(0,a.Lk)("span",{class:"i_download_item"})],-1))],2)):(0,a.Q3)("",!0)}var i=n(4162),r=n(3886),c=n(55),_=n(6343),u=n(8700),p=n(3177),m={props:{doc:Object},components:{Bouncer_loading:c.A},data(){return{is_downloading:!1}},created(){},methods:{download_pdf(){this.still_waiting||(this.is_downloading=!0,this.is_static?i.A.get_static_document(this.doc.id).then(e=>{if(200===e.status){if(void 0!==e.result.download_token&&null!==e.result.download_token){let t=(0,u.A)().document_url()+"?access_token="+e.result.download_token;window.open(t)}else _.A.downloadBase64(this.name,e.result.content);this.is_downloading=!1}else this.is_downloading=!1}):r.A.get_session_document(this.doc.id).then(e=>{200===e.status?(_.A.downloadBase64(this.name,e.result.content),this.is_downloading=!1):this.is_downloading=!1}))}},computed:{is_static(){return void 0!==this.doc.filename},name(){return this.is_static?this.doc.filename:this.doc.name},display_document(){if("ws-preview.tmp"===this.name||"error"===this.doc.documentState)return!1;let e=(0,p.A)().get_selected_product().product_id+"";return!(this.doc.tags.includes("limity")&&!this.doc.tags.includes(e))},still_waiting(){return!!this.is_downloading||!this.is_static&&("waiting"===this.doc.documentState||"available"!==this.doc.documentState)}}},h=n(6262);const v=(0,h.A)(m,[["render",d],["__scopeId","data-v-5485f504"]]);var w=v},6942:function(e,t,n){n.r(t),n.d(t,{default:function(){return f}});var a=n(641),s=n(33);const o=["innerHTML"],l={key:1,class:"product_detail_html"},d={class:"nav nav-tabs nav-justified nav-bs5"},i={class:"nav-item"},r=["onClick"],c={class:"tab-content"},_=["innerHTML"],u={class:"docs_download"};function p(e,t,n,p,m,h){const v=(0,a.g2)("Document_download"),w=(0,a.g2)("Modal_body");return(0,a.uX)(),(0,a.Wv)(w,{close:!0,title:m.title,modal_size:"huge"},{default:(0,a.k6)(()=>[m.old_html?((0,a.uX)(),(0,a.CE)("div",{key:0,innerHTML:m.old_html,class:"product_detail_html"},null,8,o)):m.tab_panes?((0,a.uX)(),(0,a.CE)("div",l,[(0,a.Lk)("ul",d,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(m.nav_titles,(e,t)=>((0,a.uX)(),(0,a.CE)("li",i,[(0,a.Lk)("button",{onClick:e=>h.switch_detail_tab(t),class:(0,s.C4)([t===m.active_pane?"active":"","nav-link"])},(0,s.v_)(e),11,r)]))),256))]),(0,a.Lk)("div",c,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(m.tab_panes,(e,t)=>((0,a.uX)(),(0,a.CE)("div",{innerHTML:e,class:(0,s.C4)(["tab-pane",t===m.active_pane?"active":""])},null,10,_))),256))])])):(0,a.Q3)("",!0),(0,a.Lk)("div",u,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(m.static_docs,(e,t)=>((0,a.uX)(),(0,a.Wv)(v,{doc:e},null,8,["doc"]))),256))])]),_:1},8,["title"])}n(4114);var m=n(2563),h=n(2873),v=n(8856),w=n(4162),k=n(4688),A={props:{},components:{Modal_body:m.A,Document_download:k.A},emits:[],data(){return{title:"",old_html:"",static_docs:{},tab_panes:[],nav_titles:[],active_pane:0}},created(){let e=(0,h.A)().retrieve_modal_data();this.title=e.product_name,v.A.get_it(e.detail_template).then(e=>{200===e.status&&(e.result.html.includes("nav-tabs")?(this.old_html=e.result.html,this.$nextTick(()=>{this.add_tab_listeners_old()})):this.build_tab_panes_new(e.result.html))}),w.A.static_documents().then(e=>{200===e.status&&(this.static_docs=e.result.documents)})},methods:{add_tab_listeners_old(){let e=document.querySelectorAll("#osm_app .vue_modal .tab-pane");for(let a in e)e.hasOwnProperty(a)&&(e[a].classList.remove("fade","in"),e[a].parentNode.classList.contains("tab-pane")&&e[a].parentNode.parentNode.appendChild(e[a]));let t=document.querySelectorAll("#osm_app .vue_modal ul.nav-tabs a");for(let a in t)t.hasOwnProperty(a)&&t[a].addEventListener("click",n=>{n.preventDefault();let a=n.target.hash.replace("#","");for(let s in e)e.hasOwnProperty(s)&&(e[s].classList.remove("active"),t[s].parentNode.classList.remove("active"),e[s].id===a&&(e[s].classList.add("active"),t[s].parentNode.classList.add("active")))});let n=document.querySelectorAll("#osm_app .vue_modal .product_detail_tab_switcher");for(let a in n){if(!n.hasOwnProperty(a))continue;let s=n[a].dataset.show,o=n[a].dataset.scroll;n[a].addEventListener("click",n=>{n.preventDefault();for(let o in e)e.hasOwnProperty(o)&&(e[o].classList.remove("active"),t[o].parentNode.classList.remove("active"),parseInt(o,10)===parseInt(s,10)-1&&(e[o].classList.add("active"),t[o].parentNode.classList.add("active")));let a=document.querySelector("#osm_app .vue_modal ."+o);null!==a&&a.scrollIntoView()})}},switch_detail_tab(e){this.active_pane=parseInt(e,10)},build_tab_panes_new(e){let t=new DOMParser,n=t.parseFromString(e,"text/html"),a=n.querySelectorAll("div.tab-pane");for(let s=0;s<a.length;s++)this.nav_titles.push(a[s].dataset.tabname),this.tab_panes.push(a[s].innerHTML);this.$nextTick(()=>{let e=document.querySelectorAll("#osm_app .vue_modal .product_detail_tab_switcher");for(let t in e)e.hasOwnProperty(t)&&this.anchor_event_listener(e[t])})},anchor_event_listener(e){e.addEventListener("click",t=>{t.preventDefault(),this.switch_detail_tab(e.dataset.show-1),this.$nextTick(()=>{let t=document.querySelector("#osm_app .vue_modal ."+e.dataset.scroll);null!==t&&t.scrollIntoView()})})}},computed:{},watch:{}},g=n(6262);const b=(0,g.A)(A,[["render",p],["__scopeId","data-v-21a695a9"]]);var f=b},8856:function(e,t,n){var a=n(8700),s=n(6343),o=n(3175),l=n(3177);class d{get_it(e){!1===e&&(e=(0,l.A)().get_selected_product().next_contract);let t={action_name:"gethtml",method:"POST",url:(0,a.A)().endpoint_url()+"online/gethtml/?id="+e+s.A.add_token_as_parameter()},n=new o.A;return n.prepare_params(t).handle_response().catch(e=>{throw e})}get_json_api(e){let t={action_name:"getjson",method:"POST",url:(0,a.A)().endpoint_url()+"online/getjson/?id="+e+s.A.add_token_as_parameter()},n=new o.A;return n.prepare_params(t).handle_response().catch(e=>{throw e})}}t.A=new d}}]);