"use strict";(self["webpackChunkosmapp_webpack_3x25x"]=self["webpackChunkosmapp_webpack_3x25x"]||[]).push([[263],{2563:function(e,t,r){r.d(t,{A:function(){return p}});var s=r(641),a=r(33);const o={class:"modal-content","data-cy":"modal_content"},n={class:"modal-header"},_={class:"modal-body","data-cy":"modal_body"};function i(e,t,r,i,d,l){return(0,s.uX)(),(0,s.CE)("div",{onClick:t[1]||(t[1]=(...e)=>l.did_click_outside&&l.did_click_outside(...e)),class:(0,a.C4)(["vue_modal",r.modal_size]),"data-cy":"modal"},[(0,s.Lk)("div",o,[(0,s.Lk)("div",n,[r.icon?((0,s.uX)(),(0,s.CE)("span",{key:0,class:(0,a.C4)(["modal-icon",r.icon])},null,2)):(0,s.Q3)("",!0),(0,s.Lk)("h4",null,(0,a.v_)(r.title),1),r.close?((0,s.uX)(),(0,s.CE)("span",{key:1,onClick:t[0]||(t[0]=(...e)=>l.close_me&&l.close_me(...e)),class:"i_close"})):(0,s.Q3)("",!0)]),(0,s.Lk)("div",_,[(0,s.RG)(e.$slots,"default")])])],2)}var d=r(2873),l={props:{close:Boolean,title:String,modal_size:String,icon:{type:String}},components:{},emits:[],data(){return{}},created(){document.addEventListener("keyup",this.close_me)},beforeUnmount(){document.removeEventListener("keyup",this.close_me)},methods:{close_me(e){this.close&&("click"===e?.type||"keyup"===e?.type&&27===e?.keyCode)&&(0,d.A)().close_them_all()},did_click_outside(e){e.target.classList.contains("vue_modal")&&this.close_me(e)}},computed:{},watch:{}},c=r(6262);const u=(0,c.A)(l,[["render",i]]);var p=u},7697:function(e,t,r){r.r(t),r.d(t,{default:function(){return E}});var s=r(641),a=r(33),o=r(3751);const n={class:"ext-settings__top-nav d-flex flex-column flex-md-row align-items-md-baseline"},_={class:"tab-section flex-grow-1 order-2 order-md-1"},i={class:"nav nav-tabs flex-column flex-sm-row justify-content-center justify-content-md-start bs5-structure"},d={class:"nav-item"},l=["aria-current","onClick"],c={class:"cta-section d-flex order-1 order-md-2 flex-wrap justify-content-center justify-content-md-end"};function u(e,t,r,u,p,m){const h=(0,s.g2)("Bouncer_loading"),v=(0,s.g2)("Tabs"),b=(0,s.g2)("Modal_body");return(0,s.uX)(),(0,s.Wv)(b,{close:!1,title:"Individuálne nastavenia - "+p.product_name,class:"ext-settings",modal_size:"huge"},{default:(0,s.k6)(()=>[(0,s.Lk)("div",n,[(0,s.Lk)("div",_,[(0,s.Lk)("ul",i,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(m.tab_count,(e,t)=>(0,s.bo)(((0,s.uX)(),(0,s.CE)("li",d,[(0,s.Lk)("a",{class:(0,a.C4)(["nav-link",m.current_person===e?"active":"",m.allow_tab_switch?"":"disabled"]),"aria-current":m.current_person===e?"page":null,style:(0,a.Tr)({cursor:m.allow_tab_switch?"pointer":"default"}),href:"#",onClick:(0,o.D$)(t=>m.switch_the_tab(e),["prevent"])},(0,a.v_)(t+1)+". poistený ",15,l)],512)),[[o.aG,m.tab_is_not_empty(e)]])),256))])]),(0,s.Lk)("div",c,[(0,s.Lk)("button",{class:"btn btn-sm btn-light btn-left",onClick:t[0]||(t[0]=(...e)=>m.return_to_step1&&m.return_to_step1(...e))},(0,a.v_)(m.first_person?"Na vstup":"Naspäť"),1),p.loading?((0,s.uX)(),(0,s.Wv)(h,{key:0,style:{"margin-top":"10px","min-width":"132px","justify-content":"center",display:"flex"}})):((0,s.uX)(),(0,s.CE)("button",{key:1,class:"btn btn-sm btn-primary btn-right",onClick:t[1]||(t[1]=(...e)=>m.validate_extended&&m.validate_extended(...e))},(0,a.v_)(m.last_person?"Prepočítať":"Pokračovať"),1))])]),(0,s.bF)(v,{style:{"max-height":"calc(90vh - 55px - 65px - 30px)",overflow:"auto"}})]),_:1},8,["title"])}r(4979),r(1678);var p=r(2563),m=r(2873),h=r(3177),v=r(6460),b=r(8700),f=r(6343),A=r(3175);class k{validate_extended_form(){let e={action_name:"validategroupform",method:"POST",body:f.A.serialize_user_input(),url:(0,b.A)().endpoint_url()+"online/validategroupform/"+(0,b.A)().product_group_id()+"/?global=0&without_form=1"};e.url+=f.A.add_token_as_parameter();let t=new A.A;return t.prepare_params(e).handle_response().catch(e=>{throw e})}}var y=new k,x=r(55),g=r(5507),w=r(9614),C={props:{},components:{Bouncer_loading:x.A,Modal_body:p.A,Tabs:g.A},data(){return{extended_inputs:{},extended_errors:null,product_name:"",product_id:0,period:0,loading:!1}},created(){this.extended_inputs=(0,m.A)().retrieve_modal_data().extended_inputs,this.extended_errors=(0,m.A)().retrieve_modal_data().extended_errors,this.product_name=(0,m.A)().retrieve_modal_data().product_name,this.product_id=(0,m.A)().retrieve_modal_data().product_id,this.period=(0,m.A)().retrieve_modal_data().period,(0,h.A)().insert_product_values(this.extended_inputs),(0,v.A)().set_form(this.extended_inputs),null!==this.extended_errors&&(0,v.A)().set_errors(structuredClone(this.extended_errors)),(0,w.A)().set_tab_keys(this.extended_inputs)},methods:{return_to_step1(){this.first_person?((0,v.A)().clear_form(),(0,h.A)().reset_form_values(),(0,v.A)().clear_errors(),(0,w.A)().reset_tab_keys(),(0,b.A)().change_step(1)):((0,w.A)().decrease_tab(),f.A.this_tab_is_empty()&&this.return_to_step1())},validate_extended(){this.loading=!0,y.validate_extended_form().then(e=>{this.loading=!1,200===e.status&&((0,v.A)().clear_errors(),this.process_errors_and_go_further(e))})},process_errors_and_go_further(e){if((0,w.A)().current_tab_is_last())!0===e.result.validform?((0,v.A)().clear_form(),(0,h.A)().reset_form_values(),(0,w.A)().reset_tab_keys(),(0,m.A)().set_modal_event_data(this.product_id),(0,m.A)().close_them_all()):((0,v.A)().set_errors(e.result.form_validation_error_elements),(0,w.A)().open_first_tab_with_error(e.result.form_validation_error_tab_elements),f.A.adjust_view(!0));else{let t=e.result.form_validation_error_tab_elements?.[(0,w.A)().get_current_tab()];void 0===t?((0,w.A)().increase_tab(),f.A.this_tab_is_empty()&&this.process_errors_and_go_further(e),f.A.adjust_view()):((0,v.A)().set_errors(t),f.A.adjust_view(!0))}},switch_the_tab(e){this.allow_tab_switch&&(0,w.A)().set_current_tab(e)},tab_is_not_empty(e){return!f.A.this_tab_is_empty(e)}},computed:{tab_count(){return(0,w.A)().get_tab_keys()},first_person(){return(0,w.A)().current_tab_is_first()},last_person(){return(0,w.A)().current_tab_is_last()},current_person(){return(0,w.A)().get_current_tab()},allow_tab_switch(){return(0,h.A)().capable_agent()}}},L=r(6262);const j=(0,L.A)(C,[["render",u]]);var E=j}}]);