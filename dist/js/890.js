"use strict";(self["webpackChunkosmapp_webpack_3x25x"]=self["webpackChunkosmapp_webpack_3x25x"]||[]).push([[890],{55:function(e,o,t){t.d(o,{A:function(){return c}});var n=t(641),r=t(33);const a={class:"spinner"};function s(e,o,t,s,l,i){return(0,n.uX)(),(0,n.CE)("div",a,[(0,n.Lk)("div",{class:(0,r.C4)(["bounce1",t.size])},null,2),(0,n.Lk)("div",{class:(0,r.C4)(["bounce2",t.size])},null,2),(0,n.Lk)("div",{class:(0,r.C4)(["bounce3",t.size])},null,2)])}var l={props:{size:String},components:{},data(){return{}},created(){},methods:{},computed:{}},i=t(6262);const d=(0,i.A)(l,[["render",s]]);var c=d},2563:function(e,o,t){t.d(o,{A:function(){return p}});var n=t(641),r=t(33);const a={class:"modal-content","data-cy":"modal_content"},s={class:"modal-header"},l={class:"modal-body","data-cy":"modal_body"};function i(e,o,t,i,d,c){return(0,n.uX)(),(0,n.CE)("div",{onClick:o[1]||(o[1]=(...e)=>c.did_click_outside&&c.did_click_outside(...e)),class:(0,r.C4)(["vue_modal",t.modal_size]),"data-cy":"modal"},[(0,n.Lk)("div",a,[(0,n.Lk)("div",s,[t.icon?((0,n.uX)(),(0,n.CE)("span",{key:0,class:(0,r.C4)(["modal-icon",t.icon])},null,2)):(0,n.Q3)("",!0),(0,n.Lk)("h4",null,(0,r.v_)(t.title),1),t.close?((0,n.uX)(),(0,n.CE)("span",{key:1,onClick:o[0]||(o[0]=(...e)=>c.close_me&&c.close_me(...e)),class:"i_close"})):(0,n.Q3)("",!0)]),(0,n.Lk)("div",l,[(0,n.RG)(e.$slots,"default")])])],2)}var d=t(2873),c={props:{close:Boolean,title:String,modal_size:String,icon:{type:String}},components:{},emits:[],data(){return{}},created(){document.addEventListener("keyup",this.close_me)},beforeUnmount(){document.removeEventListener("keyup",this.close_me)},methods:{close_me(e){this.close&&("click"===e?.type||"keyup"===e?.type&&27===e?.keyCode)&&(0,d.A)().close_them_all()},did_click_outside(e){e.target.classList.contains("vue_modal")&&this.close_me(e)}},computed:{},watch:{}},u=t(6262);const _=(0,u.A)(c,[["render",i]]);var p=_},2878:function(e,o,t){var n=t(8700),r=t(6343),a=t(3175),s=t(3177);class l{get_group_form(){let e={action_name:"getgroupform",method:"GET",url:(0,n.A)().endpoint_url()+"online/getgroupform/"+(0,n.A)().product_group_id()+"/?global=2&json=1"};e.url+=r.A.add_token_as_parameter(),e.url+=(0,s.A)().agent_code_param();let o=new a.A;return o.prepare_params(e).handle_response().catch(e=>{throw e})}validate_group_form(){let e={action_name:"validategroupform",method:"POST",body:r.A.serialize_user_input(),url:(0,n.A)().endpoint_url()+"online/validategroupform/"+(0,n.A)().product_group_id()+"/?global=2&without_form=1"};e.url+=r.A.add_token_as_parameter(),e.url+=(0,s.A)().add_filtered_param();let o=new a.A;return o.prepare_params(e).handle_response().catch(e=>{throw e})}}o.A=new l},8222:function(e,o,t){var n=t(8700),r=t(6343),a=t(3175),s=t(3177);class l{get_user_form(){let e={action_name:"getform",method:"POST",body:null,url:(0,n.A)().endpoint_url()+"online/getform/"+(0,s.A)().get_selected_product().form_id+"/?json=1"};e.url+=r.A.add_token_as_parameter();let o=new a.A;return o.prepare_params(e).handle_response().catch(e=>{throw e})}validate_user_form(){let e={action_name:"validateform",method:"POST",body:r.A.serialize_user_input(),url:(0,n.A)().endpoint_url()+"online/validateform/"+(0,s.A)().get_selected_product().form_id+"/?without_form=1"};e.url+=r.A.add_token_as_parameter();let o=new a.A;return o.prepare_params(e).handle_response().catch(e=>{throw e})}}o.A=new l},9452:function(e,o,t){var n=t(8700),r=t(6343),a=t(3175);class s{session_info(){let e={action_name:"getsessioninfo",method:"GET",url:(0,n.A)().endpoint_url()+"online/getsessioninfo/?"+r.A.add_token_as_parameter()},o=new a.A;return o.prepare_params(e).handle_response().catch(e=>{throw e})}get_data(){let e={action_name:"getdata",method:"GET",url:(0,n.A)().endpoint_url()+"online/getdata/?"+r.A.add_token_as_parameter()},o=new a.A;return o.prepare_params(e).handle_response().catch(e=>{throw e})}set_data(e){let o={action_name:"setdata",method:"POST",url:(0,n.A)().endpoint_url()+"online/setdata/?"+r.A.serialize_object(e)+r.A.add_token_as_parameter()},t=new a.A;return t.prepare_params(o).handle_response().catch(e=>{throw e})}}o.A=new s},9890:function(e,o,t){t.r(o),t.d(o,{default:function(){return v}});var n=t(641),r=t(33);const a={class:"text-center p-3"};function s(e,o,t,s,l,i){const d=(0,n.g2)("Bouncer_loading"),c=(0,n.g2)("Modal_body");return(0,n.uX)(),(0,n.Wv)(c,{close:!0,title:"Zotavenie session",class:"modal-error",icon:"i_error"},{default:(0,n.k6)(()=>[o[1]||(o[1]=(0,n.Lk)("p",null," Skontrolujeme aký bol posledný úspešný stav porovnania. ",-1)),(0,n.Lk)("div",a,[0===l.designated_location?((0,n.uX)(),(0,n.Wv)(d,{key:0,size:"large"})):((0,n.uX)(),(0,n.CE)("button",{key:1,onClick:o[0]||(o[0]=(...e)=>i.send_troops&&i.send_troops(...e)),class:"btn btn-outline-primary"}," Pokracovať v kroku "+(0,r.v_)(this.designated_location),1))])]),_:1,__:[1]})}var l=t(2563),i=t(9452),d=t(8700),c=t(2873),u=t(2878),_=t(8222),p=t(3177),m=t(55),g={props:{},components:{Modal_body:l.A,Bouncer_loading:m.A},emits:[],data(){return{designated_location:0}},created(){Promise.resolve().then(()=>(console.log("getsessioninfo"),i.A.session_info())).then(e=>{if(console.log("stav session je: "+e.result.state),e.result?.state>=100)return console.log("session je uz confirmuta, takze do step5"),this.designated_location=5,Promise.reject("resurrection done")}).then(()=>(console.log("validategroupform"),u.A.validate_group_form())).then(e=>{if(console.log("je form validny? "+e.result.validform),!1===e.result.validform)return console.log("neni. takze pojdes do step1"),this.designated_location=1,Promise.reject("resurrection done")}).then(()=>(console.log("getdata"),i.A.get_data())).then(e=>{if(console.log("bol vybraty produkt id: "+e.result?.call_params?.product_id),(0,p.A)().extract_selected_product(e),null===(0,p.A)().get_selected_product().product_id)return console.log("takze nebol. pojdes step2."),this.designated_location=2,Promise.reject("resurrection done")}).then(()=>(console.log("validateform"),_.A.validate_user_form())).then(e=>{if(console.log("je formular validny? "+e.result.validform),!1===e.result.validform)return console.log("neni. takze sup do step3"),this.designated_location=3,Promise.reject("resurrection done")}).then(()=>(console.log("getsessioninfo"),i.A.session_info())).then(e=>{if(console.log("stav session je: "+e.result.state),e.result?.state<100)return console.log("este neni confirmuta, takze do step4"),this.designated_location=4,Promise.reject("resurrection done")}).then(()=>{console.log("uz je confirmuta, tak sup step5"),this.designated_location=5}).catch(e=>{console.log(e)})},methods:{send_troops(){(0,d.A)().change_step(this.designated_location),(0,c.A)().close_them_all()}},computed:{},watch:{}},h=t(6262);const f=(0,h.A)(g,[["render",s]]);var v=f}}]);