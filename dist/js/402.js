"use strict";(self["webpackChunkosmapp_webpack_3x25x"]=self["webpackChunkosmapp_webpack_3x25x"]||[]).push([[402],{55:function(e,o,a){a.d(o,{A:function(){return d}});var n=a(641),t=a(33);const l={class:"spinner"};function s(e,o,a,s,r,i){return(0,n.uX)(),(0,n.CE)("div",l,[(0,n.Lk)("div",{class:(0,t.C4)(["bounce1",a.size])},null,2),(0,n.Lk)("div",{class:(0,t.C4)(["bounce2",a.size])},null,2),(0,n.Lk)("div",{class:(0,t.C4)(["bounce3",a.size])},null,2)])}var r={props:{size:String},components:{},data(){return{}},created(){},methods:{},computed:{}},i=a(6262);const c=(0,i.A)(r,[["render",s]]);var d=c},2563:function(e,o,a){a.d(o,{A:function(){return p}});var n=a(641),t=a(33);const l={class:"modal-content","data-cy":"modal_content"},s={class:"modal-header"},r={class:"modal-body","data-cy":"modal_body"};function i(e,o,a,i,c,d){return(0,n.uX)(),(0,n.CE)("div",{onClick:o[1]||(o[1]=(...e)=>d.did_click_outside&&d.did_click_outside(...e)),class:(0,t.C4)(["vue_modal",a.modal_size]),"data-cy":"modal"},[(0,n.Lk)("div",l,[(0,n.Lk)("div",s,[a.icon?((0,n.uX)(),(0,n.CE)("span",{key:0,class:(0,t.C4)(["modal-icon",a.icon])},null,2)):(0,n.Q3)("",!0),(0,n.Lk)("h4",null,(0,t.v_)(a.title),1),a.close?((0,n.uX)(),(0,n.CE)("span",{key:1,onClick:o[0]||(o[0]=(...e)=>d.close_me&&d.close_me(...e)),class:"i_close"})):(0,n.Q3)("",!0)]),(0,n.Lk)("div",r,[(0,n.RG)(e.$slots,"default")])])],2)}var c=a(2873),d={props:{close:Boolean,title:String,modal_size:String,icon:{type:String}},components:{},emits:[],data(){return{}},created(){document.addEventListener("keyup",this.close_me)},beforeUnmount(){document.removeEventListener("keyup",this.close_me)},methods:{close_me(e){this.close&&("click"===e?.type||"keyup"===e?.type&&27===e?.keyCode)&&(0,c.A)().close_them_all()},did_click_outside(e){e.target.classList.contains("vue_modal")&&this.close_me(e)}},computed:{},watch:{}},u=a(6262);const m=(0,u.A)(d,[["render",i]]);var p=m},6402:function(e,o,a){a.r(o),a.d(o,{default:function(){return w}});var n=a(641),t=a(33),l=a(3751);const s={key:0},r={class:"mb-4"},i=["href"],c=["disabled"],d={class:"text-center mt-3"},u={key:1};function m(e,o,a,m,p,_){const k=(0,n.g2)("Bouncer_loading"),v=(0,n.g2)("Modal_body");return(0,n.uX)(),(0,n.Wv)(v,{close:!0,title:"Poslať ponuku e-mailom?",class:"modal-email",icon:"i_email"},{default:(0,n.k6)(()=>[p.success?((0,n.uX)(),(0,n.CE)("div",u,o[5]||(o[5]=[(0,n.Lk)("p",null,[(0,n.Lk)("span",{class:"i_success"}),(0,n.Lk)("strong",null,"Ponuka bola odoslaná na Váš email!")],-1)]))):((0,n.uX)(),(0,n.CE)("div",s,[(0,n.Lk)("p",{class:(0,t.C4)(_.doc_legal?"":"mb-4")}," Na Váš e-mail Vám pošleme odkaz, cez ktorý sa môžete kedykoľvek vrátiť naspäť a všetky vyplnené údaje budete mať uložené u nás. ",2),(0,n.bo)((0,n.Lk)("p",r,[(0,n.Lk)("em",null,[o[3]||(o[3]=(0,n.eW)(" Pomôžeme vám porovnať ponuky a nájsť tú najlepšiu. Pokračovaním súhlasíte so ")),(0,n.Lk)("a",{href:_.doc_legal,target:"_blank"},"spracovaním údajov",8,i),o[4]||(o[4]=(0,n.eW)(" na prípravu a odkomunikovanie ponuky na mieru. "))])],512),[[l.aG,_.doc_legal]]),(0,n.Lk)("form",{onSubmit:o[2]||(o[2]=(...e)=>_.email_submited&&_.email_submited(...e))},[(0,n.bo)((0,n.Lk)("input",{name:"email",class:"form-control mb-2",type:"email",placeholder:"Vaša e-mailová adresa","onUpdate:modelValue":o[0]||(o[0]=e=>p.email=e)},null,512),[[l.Jo,p.email]]),(0,n.bo)((0,n.Lk)("input",{name:"subject",id:"email_subject",class:"form-control mb-3",type:"text",placeholder:"Názov ponuky","onUpdate:modelValue":o[1]||(o[1]=e=>p.subject=e)},null,512),[[l.Jo,p.subject]]),(0,n.Lk)("button",{class:"btn btn-primary w-100",type:"submit",disabled:p.loading},"Odoslať",8,c),(0,n.Lk)("div",d,[(0,n.bo)((0,n.Lk)("p",null,(0,t.v_)(p.error),513),[[l.aG,p.error]]),(0,n.bo)((0,n.bF)(k,{size:"large"},null,512),[[l.aG,p.loading]])])],32)]))]),_:1})}var p=a(2563),_=a(6343),k=a(8700),v=a(3175);class b{email_save(e){let o={action_name:"email",method:"POST",body:e,url:(0,k.A)().endpoint_url()+"online/email/?"+_.A.add_token_as_parameter()},a=new v.A;return a.prepare_params(o).handle_response().catch(e=>{throw e})}offer_notify(e){let o={action_name:"offer-notify",method:"GET",url:(0,k.A)().endpoint_url()+"online/offer-notify/?"+_.A.add_token_as_parameter()};e=""===e?" poistenie":e,o.url+="&email_subject="+encodeURIComponent(e);let a=new v.A;return a.prepare_params(o).handle_response().catch(e=>{throw e})}}var h=new b,f=a(55),y=a(9819),g=a(3177),L={props:{},components:{Modal_body:p.A,Bouncer_loading:f.A},data(){return{email:"",subject:"",error:null,loading:!1,success:!1}},created(){},methods:{email_submited(e){e.preventDefault(),""!==this.email?(this.loading=!0,Promise.resolve().then(()=>{let o=_.A.custom_serialize_form_elements(e);return h.email_save(o)}).then(()=>h.offer_notify(this.subject)).then(e=>{if(200===e.status)return this.loading=!1,void(this.success=!0);this.show_error(e.result?.error),this.loading=!1})):this.show_error(null)},show_error(e){this.error=null===e||void 0===e?"Emailová adresa je povinná.":e.join(" "),setTimeout(()=>{this.error=null},3500)}},computed:{doc_legal(){return!!(0,g.A)().direct_user()&&y.A.legal_document()}}},C=a(6262);const A=(0,C.A)(L,[["render",m]]);var w=A}}]);