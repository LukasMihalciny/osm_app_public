"use strict";(self["webpackChunkosmapp_webpack_3xx"]=self["webpackChunkosmapp_webpack_3xx"]||[]).push([[211],{7004:function(e,t,n){var r=n(8700),a=n(6343),s=n(3175);class i{payment_info(){let e={action_name:"getpaymentinfo",method:"GET",url:(0,r.A)().endpoint_url()+"online/getpaymentinfo/?"+a.A.add_token_as_parameter()},t=new s.A;return t.prepare_params(e).handle_response().catch((e=>{throw e}))}generate_qr(){let e={action_name:"getpaymentqr",method:"GET",url:(0,r.A)().endpoint_url()+"online/getpaymentqr/?"+a.A.add_token_as_parameter()},t=new s.A;return t.prepare_params(e).handle_response().catch((e=>{throw e}))}get_gateways(){let e={action_name:"getpaymentgateways",method:"GET",url:(0,r.A)().endpoint_url()+"online/getpaymentgateways/?"+a.A.add_token_as_parameter()},t=new s.A;return t.prepare_params(e).handle_response().catch((e=>{throw e}))}payment_create(e){let t={action_name:"payment-create",method:"POST",url:(0,r.A)().endpoint_url()+"online/payment-create/"+e+"/?"+a.A.add_token_as_parameter()},n=new s.A;return n.prepare_params(t).handle_response().catch((e=>{throw e}))}payment_result(e,t){let n={action_name:"payment-result",method:"PUT",url:(0,r.A)().endpoint_url()+"online/payment-result/"+e+"/?result="+t+a.A.add_token_as_parameter()},i=new s.A;return i.prepare_params(n).handle_response().catch((e=>{throw e}))}}t.A=new i},1050:function(e,t,n){n.d(t,{A:function(){return m}});var r=n(641),a=n(3751);const s={class:"gateways","data-cy":"gateways"},i=["href","id","title"],o=["src","alt"];function l(e,t,n,l,u,_){return(0,r.uX)(),(0,r.CE)(r.FK,null,[t[0]||(t[0]=(0,r.Lk)("h4",null,"Platba online",-1)),(0,r.Lk)("div",s,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(u.gateways,((e,t)=>(0,r.bo)(((0,r.uX)(),(0,r.CE)("a",{href:e.url,id:t,title:e.name,target:"_blank"},[(0,r.Lk)("img",{src:e.logo,alt:e.name,width:"127"},null,8,o)],8,i)),[[a.aG,""!==e.url]]))),256))])],64)}var u=n(7004),_=n(8700),c={props:{},components:{},emits:[],data(){return{gateways:{}}},created(){u.A.get_gateways().then((e=>{for(let t in e.result){if(!e.result.hasOwnProperty(t))continue;if(isNaN(t))continue;let n=e.result[t]?.name,r=e.result[t]?.url_logo;null===r?r="":"http"!==r.substring(0,4)&&(r="https://www.najpoistenie.sk/wp-content/themes/najpoistenie/images/loga-banky/"+r+".png"),this.gateways[t]={logo:r,name:n,url:""},u.A.payment_create(t).then((e=>{200!==e.status&&console.log("requesting gateway URL failed with id: "+t,e),this.gateways[t].url=e.result.url;let n=(0,_.A)().get_payment_data().payment_debug;n&&this.debug_url_for_payment_gateway(t)}))}}))},methods:{debug_url_for_payment_gateway(e){let t=this.gateways[e].url,n=t?.replace("pay-request","pay-request-test");this.gateways[e].url=n}},computed:{},watch:{}},p=n(6262);const d=(0,p.A)(c,[["render",l]]);var m=d},5116:function(e,t,n){n.d(t,{A:function(){return _}});var r=n(641),a=n(33);function s(e,t,n,s,i,o){return(0,r.uX)(),(0,r.CE)(r.FK,null,[t[0]||(t[0]=(0,r.Lk)("h4",null,"Platba prevodom na účet",-1)),t[1]||(t[1]=(0,r.eW)(" IBAN: ")),(0,r.Lk)("strong",null,(0,a.v_)(i.payment_info.iban),1),t[2]||(t[2]=(0,r.Lk)("br",null,null,-1)),t[3]||(t[3]=(0,r.eW)(" SWIFT: ")),(0,r.Lk)("strong",null,(0,a.v_)(i.payment_info.swift),1),t[4]||(t[4]=(0,r.Lk)("br",null,null,-1)),t[5]||(t[5]=(0,r.eW)(" Platba: ")),(0,r.Lk)("strong",null,(0,a.v_)(i.payment_info.amount),1),t[6]||(t[6]=(0,r.Lk)("br",null,null,-1)),t[7]||(t[7]=(0,r.eW)(" Variabilný symbol: ")),(0,r.Lk)("strong",null,(0,a.v_)(i.payment_info.vs),1),t[8]||(t[8]=(0,r.Lk)("br",null,null,-1)),t[9]||(t[9]=(0,r.eW)(" Konštantný symbol: ")),(0,r.Lk)("strong",null,(0,a.v_)(i.payment_info.ks),1),t[10]||(t[10]=(0,r.Lk)("br",null,null,-1))],64)}var i=n(7004),o={props:{},components:{},emits:[],data(){return{payment_info:{}}},created(){i.A.payment_info().then((e=>{200===e.status&&(this.payment_info=e.result.paymentinfo)}))},methods:{},computed:{},watch:{}},l=n(6262);const u=(0,l.A)(o,[["render",s]]);var _=u},2989:function(e,t,n){n.d(t,{A:function(){return c}});var r=n(641);const a={id:"qr_container"},s=["src"];function i(e,t,n,i,o,l){return(0,r.uX)(),(0,r.CE)(r.FK,null,[t[0]||(t[0]=(0,r.Lk)("h4",null,"Platba cez QR kód",-1)),(0,r.Lk)("div",a,[(0,r.Lk)("img",{src:l.qr_code,class:"qr_code"},null,8,s)])],64)}var o=n(7004),l={props:{},components:{},emits:[],data(){return{base64:""}},created(){o.A.generate_qr().then((e=>{200===e.status&&(this.base64=e.result.pbs)}))},methods:{},computed:{qr_code(){return this.base64?"data:image/png;base64,"+this.base64:""}},watch:{}},u=n(6262);const _=(0,u.A)(l,[["render",i]]);var c=_},6804:function(e,t,n){n.d(t,{A:function(){return m}});var r=n(641),a=n(33);const s=["data-cy"],i={class:"d-flex point-head"},o={class:"flex-shrink-0 point-number"},l={class:"flex-grow-1"},u={class:"point-body"};function _(e,t,n,_,c,p){return(0,r.uX)(),(0,r.CE)("div",{class:"col-12 point-box","data-cy":"point_"+n.order},[(0,r.Lk)("div",i,[(0,r.Lk)("div",o,[(0,r.Lk)("span",{class:(0,a.C4)("i_next_step"+n.order)},null,2)]),(0,r.Lk)("div",l,[(0,r.Lk)("h3",null,(0,a.v_)(n.title),1)])]),(0,r.Lk)("div",u,[(0,r.RG)(e.$slots,"default")])],8,s)}var c={props:{order:Number,title:String},components:{},emits:[],data(){return{}},created(){},methods:{},computed:{},watch:{}},p=n(6262);const d=(0,p.A)(c,[["render",_]]);var m=d},2113:function(e,t,n){n.r(t),n.d(t,{default:function(){return N}});var r=n(641);const a={"data-cy":"calc_confirm"},s={key:0,class:"mb-5"},i={key:0,class:"text-highlight"},o={class:"row gx-3 gy-3"},l=["innerHTML"],u={key:1,class:"mt-4 mb-5 mx-4"},_={key:2,class:"row"},c={class:"col-md-4 mb-3 mb-md-0"},p={class:"col-sm-6 col-md-4 mb-3 mb-md-0"},d={class:"col-sm-6 col-md-4"},m=["innerHTML"],h={class:"col-12 px-0 mt-5","data-cy":"docs_landing"},g={key:0,class:"row"},v={class:"col-12 mb-5 text-center"};function y(e,t,n,y,k,b){const w=(0,r.g2)("Title"),f=(0,r.g2)("Singnature_form"),A=(0,r.g2)("Point"),L=(0,r.g2)("Gateways"),x=(0,r.g2)("Info"),q=(0,r.g2)("Qr"),X=(0,r.g2)("Documents_prepare"),C=(0,r.g2)("Docs_template"),E=(0,r.g2)("Remap");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.Lk)("section",a,[k.start_doc_requests&&0===k.signature_required?((0,r.uX)(),(0,r.Wv)(w,{key:0,title:"Gratulujeme",subtitle:k.html.view_confirm_congratulations},{default:(0,r.k6)((()=>[b.add_pay_info?((0,r.uX)(),(0,r.CE)("p",s,[t[2]||(t[2]=(0,r.eW)(" Splátku uhraďte ")),t[3]||(t[3]=(0,r.Lk)("strong",{class:"text-accent"},"ešte dnes",-1)),t[4]||(t[4]=(0,r.eW)(". ")),b.add_what_next?((0,r.uX)(),(0,r.CE)("strong",i," Bez zaplatenia zmluva nevznikne. ")):(0,r.Q3)("",!0)])):(0,r.Q3)("",!0)])),_:1},8,["subtitle"])):k.start_doc_requests&&1===k.signature_required?((0,r.uX)(),(0,r.Wv)(w,{key:1,title:"Záverečné kroky"})):(0,r.Q3)("",!0),(0,r.Lk)("div",o,[1===k.signature_required&&k.show_step5_sign?((0,r.uX)(),(0,r.Wv)(A,{key:0,order:0,title:"Podpísať dokumenty"},{default:(0,r.k6)((()=>[(0,r.bF)(f,{onHide_sign_section:t[0]||(t[0]=e=>k.show_step5_sign=!1),class:"mt-4 mb-4 mx-4"})])),_:1})):(0,r.Q3)("",!0),(0,r.bF)(A,{order:1,title:b.point_one_title},{default:(0,r.k6)((()=>[b.dds?((0,r.uX)(),(0,r.CE)("p",{key:0,innerHTML:k.html.view_confirm_payment,class:"mt-4 mb-5 mx-4"},null,8,l)):b.investicie_no_payment?((0,r.uX)(),(0,r.CE)("p",u," Platobné inštrukcie nájdete v dokumentoch investičnej spoločnosti ")):((0,r.uX)(),(0,r.CE)("div",_,[(0,r.Lk)("div",c,[k.start_doc_requests?((0,r.uX)(),(0,r.Wv)(L,{key:0})):(0,r.Q3)("",!0)]),(0,r.Lk)("div",p,[k.start_doc_requests?((0,r.uX)(),(0,r.Wv)(x,{key:0})):(0,r.Q3)("",!0)]),(0,r.Lk)("div",d,[k.start_doc_requests?((0,r.uX)(),(0,r.Wv)(q,{key:0})):(0,r.Q3)("",!0)])]))])),_:1},8,["title"]),(0,r.bF)(A,{order:2,title:"Uložiť dokumenty"},{default:(0,r.k6)((()=>[(0,r.bF)(X,{start_doc_requests:k.start_doc_requests,step_html:5},null,8,["start_doc_requests"])])),_:1}),(0,r.bF)(A,{order:3,title:"E-mail a ďalšie inštrukcie"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",{innerHTML:k.html.view_confirm_text},null,8,m)])),_:1}),(0,r.Lk)("div",h,[k.load_docs_landing_section?((0,r.uX)(),(0,r.Wv)(C,{key:0})):(0,r.Q3)("",!0)])])]),(0,r.bF)(E),0===k.signature_required?((0,r.uX)(),(0,r.CE)("div",g,[(0,r.Lk)("div",v,[(0,r.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>b.clear&&b.clear(...e)),type:"button",class:"btn btn-primary btn-lg btn-left"}," Vytvoriť nové porovnanie ")])])):(0,r.Q3)("",!0)],64)}var k=n(8700),b=n(4001),w=n(1050),f=n(5116),A=n(2989),L=n(9452),x=n(3177),q=n(8856),X=n(33),C=n(3751);const E={key:0,class:"x-sell text-center text-sm-start","data-cy":"remap"},W=["innerHTML"],j={key:1};function P(e,t,n,a,s,i){const o=(0,r.g2)("Bouncer_loading");return i.show_remap?((0,r.uX)(),(0,r.CE)("section",E,[s.view_redirect_text?((0,r.uX)(),(0,r.CE)("div",{key:0,innerHTML:s.view_redirect_text},null,8,W)):(0,r.Q3)("",!0),s.title?((0,r.uX)(),(0,r.CE)("div",j,[(0,r.Lk)("h2",null,(0,X.v_)(s.title),1),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(s.paragraphs,((e,t)=>((0,r.uX)(),(0,r.CE)("p",null,(0,X.v_)(e),1)))),256))])):(0,r.Q3)("",!0),s.loading?((0,r.uX)(),(0,r.Wv)(o,{key:3,class:"mb-3"})):((0,r.uX)(),(0,r.CE)("button",{key:2,onClick:t[0]||(t[0]=(...e)=>i.run_remap&&i.run_remap(...e)),class:"btn btn-primary btn-right btn-lg"},(0,X.v_)(s.button_label),1)),(0,r.bo)((0,r.Lk)("p",null,[t[1]||(t[1]=(0,r.eW)(" ERROR:")),t[2]||(t[2]=(0,r.Lk)("br",null,null,-1)),(0,r.eW)(" "+(0,X.v_)(s.remap_error),1)],512),[[C.aG,s.remap_error]])])):(0,r.Q3)("",!0)}var Q=n(55),T=n(6343),F=n(880),G={props:{},components:{Bouncer_loading:Q.A},emits:[],data(){return{view_redirect_text:"",remap_error:"",loading:!1,title:"",remap_active:!1,paragraphs:[],destination_group:2,button_label:"Porovnať havarijné poistenie"}},created(){q.A.get_it("view_redirect_text").then((e=>{let t=e.result?.html;t.includes('":')?q.A.get_json_api("view_redirect_text").then((e=>{this.title=e.result?.json?.title||"",this.remap_active=e.result?.json?.remap_active||!1,this.paragraphs=e.result?.json?.paragraphs||[],this.destination_group=parseInt(e.result?.json?.destination_group,10)||2,this.button_label=e.result?.json?.button_label||"Porovnať havarijné poistenie"})):this.view_redirect_text=t||""}))},methods:{run_remap(){this.remap_error="",this.loading=!0,F.A.session_remap(this.destination_group).then((e=>{this.loading=!1,200===e.status?T.A.open_remap("current",this.destination_group,e.result?.new_token):this.remap_error=e.result.message}))}},computed:{show_remap(){return this.title?this.remap_active:1===(0,k.A)().product_group_id()}},watch:{}},I=n(6262);const R=(0,I.A)(G,[["render",P]]);var H=R,K=n(9713),M=n(6804),S=n(6828),z=n(2873),U=n(514),B={props:{},components:{Documents_prepare:b.A,Gateways:w.A,Info:f.A,Qr:A.A,Remap:H,Title:K.A,Point:M.A,Docs_template:S["default"],Singnature_form:U.A},emits:[],data(){return{debug:!1,group:0,receiver:0,html:{view_confirm_payment:"",view_confirm_text:"",view_confirm_congratulations:""},start_doc_requests:!1,load_docs_landing_section:!1,signature_required:0,show_step5_sign:!0}},created(){this.group=(0,k.A)().product_group_id(),Promise.resolve().then((()=>L.A.get_data())).then((e=>{if(this.signature_required=e.result?.signature_required,(0,x.A)().extract_selected_product(e),this.receiver=parseInt(e.result?.call_params?.receiver,10),(0,x.A)().store_call_params(e.result?.call_params),this.debug)return Promise.reject("debug skip docs");this.start_doc_requests=!0})).then((()=>{q.A.get_it("view_confirm_text").then((e=>{this.html.view_confirm_text=e.result?.html})),q.A.get_it("view_confirm_payment").then((e=>{this.html.view_confirm_payment=e.result?.html})),q.A.get_it("view_confirm_docs_landing").then((e=>{e.result?.html&&e.result?.html.indexOf('id="osm_app"')>-1&&(this.load_docs_landing_section=!0)})),q.A.get_json_api("view_confirm_congratulations").then((e=>{this.html.view_confirm_congratulations=e.result?.json?.subtitle}))})).catch((e=>{console.log(e)}))},methods:{clear(){(0,z.A)().open_it("Cleaning_session")}},computed:{add_what_next(){return 4!==this.group},add_pay_info(){return 85!==this.group&&86!==this.group&&3!==this.group&&6!==this.group},dds(){return 85===this.group||86===this.group||73===this.group||3===this.group},investicie_no_payment(){return 6===this.group},point_one_title(){return 85===this.group||86===this.group||3===this.group?"Podpísať vygenerovanú dokumentáciu":6===this.group?"Uhradiť na účet finančnej inštitúcie":"Uhradiť na účet poisťovne"}},watch:{}};const D=(0,I.A)(B,[["render",y]]);var N=D}}]);