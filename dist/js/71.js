"use strict";(self["webpackChunkosmapp_webpack_3x25x"]=self["webpackChunkosmapp_webpack_3x25x"]||[]).push([[71],{424:function(t,e,s){s.d(e,{A:function(){return L}});var n=s(641),o=s(33),i=s(3751);const a={class:"confirm_check"},l={class:"form-check"},r={for:"suhlas_elekt_kom",class:"form-check-label"},c={key:0,class:"form-check"},d={for:"suhlas_marketing",class:"form-check-label"},_={class:"confirm_check"},u={key:0,class:"mb-2"},m={class:"form-check"},h={for:"suhlas_navrh",class:"form-check-label"},p={class:"row"},g={class:"col-12"},k={class:"text-accent mt-2"};function b(t,e,s,b,v,f){return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("div",a,[(0,n.Lk)("div",l,[(0,n.bo)((0,n.Lk)("input",{name:"suhlas_elekt_kom",id:"suhlas_elekt_kom","onUpdate:modelValue":e[0]||(e[0]=t=>f.suhlas_elekt_kom=t),"true-value":"1","false-value":"0",type:"checkbox",class:(0,o.C4)(["form-check-input",this.invalid_checkboxes?"required_checkbox":""])},null,2),[[i.lH,f.suhlas_elekt_kom]]),(0,n.Lk)("label",r,[e[5]||(e[5]=(0,n.eW)(" Súhlas s ")),(0,n.Lk)("button",{onClick:e[1]||(e[1]=(...t)=>f.marketing_ek_modal&&f.marketing_ek_modal(...t)),class:"btn-text text-start"}," elektronickou komunikáciou ")])]),v.adult_marketing?((0,n.uX)(),(0,n.CE)("div",c,[(0,n.bo)((0,n.Lk)("input",{name:"suhlas_marketing",id:"suhlas_marketing","onUpdate:modelValue":e[2]||(e[2]=t=>f.suhlas_marketing=t),"true-value":"1","false-value":"0",type:"checkbox",class:"form-check-input"},null,512),[[i.lH,f.suhlas_marketing]]),(0,n.Lk)("label",d,[e[6]||(e[6]=(0,n.eW)(" Súhlas so ")),(0,n.Lk)("button",{onClick:e[3]||(e[3]=(...t)=>f.marketing_modal&&f.marketing_modal(...t)),class:"btn-text text-start"}," spracovaním osobných údajov pre účely marketingu ")])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",_,[f.wording?.paragraph?((0,n.uX)(),(0,n.CE)("p",u,(0,o.v_)(f.wording?.paragraph),1)):(0,n.Q3)("",!0),(0,n.Lk)("div",m,[(0,n.bo)((0,n.Lk)("input",{name:"suhlas_navrh",id:"suhlas_navrh","onUpdate:modelValue":e[4]||(e[4]=t=>f.suhlas_navrh=t),"true-value":"1","false-value":"0",type:"checkbox",class:(0,o.C4)(["form-check-input",this.invalid_checkboxes?"required_checkbox":""])},null,2),[[i.lH,f.suhlas_navrh]]),(0,n.Lk)("label",h,(0,o.v_)(f.wording?.label),1)])]),(0,n.Lk)("div",p,[(0,n.Lk)("div",g,[(0,n.bo)((0,n.Lk)("p",k," Pred pokračovaním musíte potvrdiť zvýraznené zaškrtávacie políčka ",512),[[i.aG,s.invalid_checkboxes]])])])],64)}var v=s(2873),f=s(6460),w=s(3177),y={props:{mode:String,invalid_checkboxes:Boolean},components:{},emits:[],data(){return{adult_marketing:!0}},created(){let t=(0,w.A)().get_call_param("dss_osoba_dospely");this.adult_marketing="0"!==t},methods:{marketing_modal(){(0,v.A)().open_it("Marketing")},marketing_ek_modal(){(0,v.A)().open_it("Marketing_ek")}},computed:{suhlas_elekt_kom:{get(){return(0,f.A)().get_confirm_chbs().suhlas_elekt_kom},set(t){(0,f.A)().set_confirm_chb("suhlas_elekt_kom",t)}},suhlas_marketing:{get(){return(0,f.A)().get_confirm_chbs().suhlas_marketing},set(t){(0,f.A)().set_confirm_chb("suhlas_marketing",t)}},suhlas_navrh:{get(){return(0,f.A)().get_confirm_chbs().suhlas_navrh},set(t){(0,f.A)().set_confirm_chb("suhlas_navrh",t)}},wording(){let t={classic:{paragraph:"",label:"Uvedený návrh na uzatvorenie poistnej zmluvy som si prečítal(a) a súhlasím s ním. Týmto prehlasujem, že som bol oboznámený(á) s vyššie uvedenou predzmluvnou dokumentáciou, obsahu som porozumel(a) a týmto vyjadrujem súhlas."},agent:{paragraph:"Pre dokončenie zmluvy o poskytnutí finančnej služby je potrebné potvrdenie klienta formou SMS autorizácie.",label:"Totožnosť klienta som overil a súhlasím s odoslaním dokumentácie na email klienta, aby dokončil autorizáciu."},client:{paragraph:'Pre dokončenie zmluvy o poskytnutí finančnej služby je potrebné potvrdenie cez SMS kód - kliknutím na tlačitko "vyžiadať sms kód".',label:"Oboznámil som sa s predzmluvnou dokumentáciou, nemám žiadne výhrady s jej obsahom a žiadam o zaslanie SMS kódu na moje telefónne číslo."}};return t[this.mode]}},watch:{}},A=s(6262);const x=(0,A.A)(y,[["render",b]]);var L=x},1391:function(t,e,s){s.d(e,{A:function(){return k}});var n=s(641),o=s(33),i=s(3751);const a={class:"row form-pagination"},l={class:"col-12 col-sm-6 text-center text-sm-start order-2 order-sm-1"},r={class:"col-12 col-sm-6 text-center text-sm-end order-1 order-sm-2"};function c(t,e,s,c,d,_){const u=(0,n.g2)("Bouncer_loading");return(0,n.uX)(),(0,n.CE)("div",a,[(0,n.Lk)("div",l,[s.allow_back?((0,n.uX)(),(0,n.CE)("button",{key:0,onClick:e[0]||(e[0]=(...t)=>_.edit_user_data&&_.edit_user_data(...t)),class:"btn btn-white btn-left btn-lg"}," Upraviť ")):(0,n.Q3)("",!0)]),(0,n.Lk)("div",r,[(0,n.bo)((0,n.Lk)("button",{onClick:e[1]||(e[1]=(...t)=>_.main_button_press&&_.main_button_press(...t)),type:"button",class:"btn btn-accent btn-right btn-lg"},(0,o.v_)(_.wording),513),[[i.aG,!s.loading]]),(0,n.bo)((0,n.bF)(u,null,null,512),[[i.aG,s.loading]])])])}var d=s(55),_=s(8700),u=s(6460),m=s(9614),h={props:{mode:String,allow_back:Boolean,loading:Boolean},components:{Bouncer_loading:d.A},emits:["main_button_press"],data(){return{}},created(){},methods:{edit_user_data(){(0,u.A)().$reset(),(0,_.A)().change_step(3)},main_button_press(){this.$emit("main_button_press")}},computed:{wording(){let t={classic:"Dokončiť",agent:"Odoslať návrh emailom",client:"Vyžiadať SMS kód"};return t[this.mode]},requested_direction(){return(0,m.A)().get_requested_direction()}},watch:{requested_direction(){null!==this.requested_direction&&"backward"===this.requested_direction&&((0,m.A)().reset_requested_direction(),this.edit_user_data())}}},p=s(6262);const g=(0,p.A)(h,[["render",c]]);var k=g},3088:function(t,e,s){s.d(e,{A:function(){return f}});var n=s(641);const o={key:0,class:"docs_download","data-cy":"https://youtu.be/dQw4w9WgXcQ"},i={class:"docs_static"},a={class:"docs_session"},l={key:1,class:"row docs_download","data-cy":"https://youtu.be/dQw4w9WgXcQ"},r={class:"col-12 col-md-6"},c={class:"s-box-body"},d={class:"col-12 col-md-6"},_={class:"s-box-body"};function u(t,e,s,u,m,h){const p=(0,n.g2)("Document_download");return 4===s.step_html?((0,n.uX)(),(0,n.CE)("div",o,[e[2]||(e[2]=(0,n.Lk)("h3",null," Predzmluvná dokumentácia ",-1)),e[3]||(e[3]=(0,n.Lk)("p",null," Dokumenty s ktorými je klient povinný sa oboznámiť ",-1)),(0,n.Lk)("div",i,[e[0]||(e[0]=(0,n.Lk)("p",null," Produktové dokumenty ",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(m.static_docs,(t,e)=>((0,n.uX)(),(0,n.Wv)(p,{doc:t},null,8,["doc"]))),256))]),(0,n.Lk)("div",a,[e[1]||(e[1]=(0,n.Lk)("p",null," Dynamické dokumenty ",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(m.session_docs,(t,e)=>((0,n.uX)(),(0,n.Wv)(p,{doc:t},null,8,["doc"]))),256))])])):s.step_html>4?((0,n.uX)(),(0,n.CE)("div",l,[(0,n.Lk)("div",r,[(0,n.Lk)("div",c,[e[4]||(e[4]=(0,n.Lk)("p",null," Dynamické dokumenty ",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(m.session_docs,(t,e)=>((0,n.uX)(),(0,n.Wv)(p,{doc:t},null,8,["doc"]))),256))])]),(0,n.Lk)("div",d,[(0,n.Lk)("div",_,[e[5]||(e[5]=(0,n.Lk)("p",null," Produktové dokumenty ",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(m.static_docs,(t,e)=>((0,n.uX)(),(0,n.Wv)(p,{doc:t},null,8,["doc"]))),256))])])])):(0,n.Q3)("",!0)}var m=s(4162),h=s(3886),p=s(8129),g=s(2873),k={props:{start_doc_requests:Boolean,step_html:Number},components:{Document_download:p.A},emits:["all_docs_finished"],data(){return{static_docs:{},session_docs:{},turbo:{repeat_count:0,repeat_delay_fast:2e3,repeat_delay_slow:1e4,repeat_diminish:10,repeat_max:26}}},created(){!0===this.start_doc_requests&&(this.group_docs(),this.session_docs_turbo())},methods:{group_docs(){m.A.static_documents().then(t=>{this.static_docs=t.result.documents})},session_docs_turbo(){h.A.session_documents(!1).then(t=>{void 0!==t.result?.data?.documents&&(this.session_docs=t.result.data.documents);for(let s in this.session_docs)if(this.session_docs.hasOwnProperty(s)&&"ws-preview.tmp"===this.session_docs[s].name&&"error"===this.session_docs[s].documentState)return(0,g.A)().store_modal_data({type:"session_documents_webservice_doc_error",errors:this.session_docs[s].errors,is_client_role:!1}),void(0,g.A)().open_it("Ordinary_error_modal");if(!0===t.result?.data?.processingFinished)return void this.$emit("all_docs_finished");if(this.turbo.repeat_count>this.turbo.repeat_max)return void console.log("getsessiondocuments reached maximum repeat_count");this.turbo.repeat_count++;let e=this.turbo.repeat_count<this.turbo.repeat_diminish?this.turbo.repeat_delay_fast:this.turbo.repeat_delay_slow;setTimeout(()=>{this.session_docs_turbo()},e)})}},computed:{},watch:{start_doc_requests(){!0===this.start_doc_requests&&(this.group_docs(),this.session_docs_turbo())}}},b=s(6262);const v=(0,b.A)(k,[["render",u]]);var f=v},3502:function(t,e,s){s.d(e,{A:function(){return M}});var n=s(641);const o={key:0,class:"prop_confirm","data-cy":"https://youtu.be/dQw4w9WgXcQ"},i={key:2,class:"text-center"},a={class:"pt-2"},l={key:3,class:"text-center"},r={key:4,class:"text-center"},c={class:"pt-2"};function d(t,e,s,d,_,u){const m=(0,n.g2)("Confirm_checkboxes"),h=(0,n.g2)("Confirm_buttons"),p=(0,n.g2)("Bouncer_loading"),g=(0,n.g2)("Sing_clients");return u.is_step4?((0,n.uX)(),(0,n.CE)("div",o,[e[3]||(e[3]=(0,n.Lk)("h3",{class:"text-primary"}," Záverečné potvrdenie ",-1)),null!==u.mode?((0,n.uX)(),(0,n.Wv)(m,{key:0,mode:u.mode,invalid_checkboxes:_.invalid_checkboxes},null,8,["mode","invalid_checkboxes"])):(0,n.Q3)("",!0),null===u.mode||u.multiple_signatures?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(h,{key:1,mode:u.mode,allow_back:u.allow_back,loading:_.loading_offer,onMain_button_press:u.main_button_press},null,8,["mode","allow_back","loading","onMain_button_press"])),s.confirm_running?((0,n.uX)(),(0,n.CE)("h5",i,[e[0]||(e[0]=(0,n.eW)(" Potvrdzujeme... ")),(0,n.Lk)("div",a,[(0,n.bF)(p)])])):(0,n.Q3)("",!0),u.missing_client?((0,n.uX)(),(0,n.CE)("h5",l,e[1]||(e[1]=[(0,n.eW)(" Na klientov e-mail bola zaslaná predzmluvná dokumentácia."),(0,n.Lk)("br",null,null,-1),(0,n.eW)(" Pre dokončenie, je potrebné, aby klient otvoril zaslaný odkaz."),(0,n.Lk)("br",null,null,-1),(0,n.eW)(" Až potom bude môcť podpísať dokumenty. ")]))):(0,n.Q3)("",!0),u.sign_prepare?((0,n.uX)(),(0,n.CE)("h5",r,[e[2]||(e[2]=(0,n.eW)(" Pripravujeme podpisovanie... ")),(0,n.Lk)("div",c,[(0,n.bF)(p)])])):(0,n.Q3)("",!0),u.multiple_signatures?((0,n.uX)(),(0,n.Wv)(g,{key:5,class:"mt-5",global_state:u.global_state,sign_finished_at:u.sign_finished_at,clients:u.clients,logged_client:u.logged_client,onMain_button_press:u.main_button_press},null,8,["global_state","sign_finished_at","clients","logged_client","onMain_button_press"])):(0,n.Q3)("",!0)])):((0,n.uX)(),(0,n.Wv)(g,{key:1,global_state:u.global_state,sign_finished_at:u.sign_finished_at,clients:u.clients,logged_client:u.logged_client,onMain_button_press:u.main_button_press},null,8,["global_state","sign_finished_at","clients","logged_client","onMain_button_press"]))}var _=s(424),u=s(1391),m=s(33);const h={"data-cy":"https://youtu.be/dQw4w9WgXcQ",class:"signature_form"},p={class:"mb-4"},g={key:0,class:"sign_time"},k={class:"row py-3 signature_form__client"},b={class:"col-sm-3 col-md-3 align-content-md-center mb-2 mb-md-0"},v={class:"col-sm-9 col-md-5 align-content-md-center mb-2 mb-md-0"},f={class:"dots-primary"},w=["title"],y={class:"col-sm-3 col-md-2 text-md-center align-content-center"},A={class:"col-sm-9 col-md-2 text-md-end align-content-md-center"},x=["disabled"];function L(t,e,s,o,i,a){return(0,n.uX)(),(0,n.CE)("div",h,[(0,n.Lk)("h5",p,[e[2]||(e[2]=(0,n.Lk)("strong",null,"Stav: ",-1)),(0,n.eW)((0,m.v_)(s.global_state),1),e[3]||(e[3]=(0,n.Lk)("br",null,null,-1)),s.sign_finished_at?((0,n.uX)(),(0,n.CE)("small",g,[e[1]||(e[1]=(0,n.Lk)("strong",null,"Podpísané: ",-1)),(0,n.eW)((0,m.v_)(s.sign_finished_at),1)])):(0,n.Q3)("",!0)]),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.clients,(t,o)=>((0,n.uX)(),(0,n.CE)("div",k,[(0,n.Lk)("div",b,[(0,n.Lk)("strong",null,(0,m.v_)(t.name),1),e[4]||(e[4]=(0,n.Lk)("br",null,null,-1)),(0,n.Lk)("em",null,(0,m.v_)(a.rename_role(t.role)),1)]),(0,n.Lk)("div",v,[(0,n.Lk)("ul",f,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.documents,(t,e)=>((0,n.uX)(),(0,n.CE)("li",{title:a.format_sign_date(t.signedAt)},(0,m.v_)(t.name),9,w))),256))])]),(0,n.Lk)("div",y,[(0,n.Lk)("span",{class:(0,m.C4)([t.signed_client?"text-primary":"text-accent","fw-bold"])},(0,m.v_)(t.signed_client?"Podpísaný":"Nepodpísaný"),3)]),(0,n.Lk)("div",A,[o===s.logged_client?((0,n.uX)(),(0,n.CE)("button",{key:0,onClick:e[0]||(e[0]=(...t)=>a.signing_client&&a.signing_client(...t)),disabled:t.signed_client,class:(0,m.C4)(["btn btn-m mt-2 mt-sm-1",t.signed_client?"btn-outline-primary":"btn-primary"])}," Podpísať ",10,x)):(0,n.Q3)("",!0)])]))),256))])}var C=s(6343),X={props:{global_state:String,sign_finished_at:String,clients:Object,logged_client:String},components:{},emits:["main_button_press"],data(){return{}},created(){},methods:{format_sign_date(t){return C.A.format_date_to_readable(t)},rename_role(t){return"poistnik"===t?"klient":"agent"===t?"sprostredkovateľ":"spoludlznik"===t?"spoludlžník":t},signing_client(){this.$emit("main_button_press")}},computed:{},watch:{}},E=s(6262);const S=(0,E.A)(X,[["render",L]]);var z=S,j=s(8494),Q=s(8700),W=s(2873),P=s(6460),B=s(55),q={props:{confirm_running:Boolean},components:{Confirm_checkboxes:_.A,Confirm_buttons:u.A,Sing_clients:z,Bouncer_loading:B.A},emits:["run_confirm","hide_sign_section"],data(){return{sign_status:{},loading_offer:!1,invalid_checkboxes:!1}},created(){this.run_status_api()},methods:{main_button_press(){"agent"===this.mode?this.run_offer_api():"client"===this.mode&&1===this.sign_type?this.open_sms():"client"===this.mode&&3===this.sign_type?this.open_signi():console.log("unknown sign type",this.mode,this.sign_type)},run_status_api(){j.A.signature_status().then(t=>{this.sign_status=t.result,null===this.sign_status.current&&null===this.next_name&&this.is_step4&&(console.log("signature auto confirm"),this.$emit("run_confirm",!1)),null!==this.sign_status.current||null===this.next_name||this.is_step4||this.run_offer_api();let e=!0;for(let s in this.sign_status.status)"confirm"===this.sign_status.status[s].when&&(e=!1);e&&this.$emit("hide_sign_section")})},run_offer_api(){this.invalid_checkboxes=(0,P.A)().are_checkboxes_invalid(),this.invalid_checkboxes&&this.is_step4||(null!==this.next_name?(this.loading_offer=!0,j.A.offer_send(this.next_name).then(t=>{this.loading_offer=!1,200===t.status&&(this.run_status_api(),this.is_step4&&(0,W.A)().open_it("Signature_agent"))})):console.log("error: no next_name found"))},open_sms(){this.invalid_checkboxes=(0,P.A)().are_checkboxes_invalid(),this.invalid_checkboxes&&this.is_step4||(this.logged_client?((0,W.A)().store_modal_data({client_uuid:this.logged_client}),(0,W.A)().open_it("Signature_client")):console.log("no logged_client"))},open_signi(){if(this.invalid_checkboxes=(0,P.A)().are_checkboxes_invalid(),!this.invalid_checkboxes||!this.is_step4)if(this.logged_client)for(let t in this.clients[this.logged_client].documents){let e=this.clients[this.logged_client].documents[t];window.open(e.contractLink,"_blank").focus()}else console.log("no logged_client")}},computed:{is_step4(){return 4===(0,Q.A)().current_step()},next_name(){let t=this.sign_status?.status,e=null;for(let s in t)"pending"===t[s].state&&(this.is_step4&&("preconfirm"===t[s].when||null===t[s].when)||!this.is_step4&&"confirm"===t[s].when)&&(e=s);return e},clients(){return void 0===this.sign_status?.current||null===this.sign_status?.current?{}:this.sign_status.status?.[this.sign_status?.current]?.signature_status?.clients||{}},multiple_signatures(){return Object.keys(this.clients).length>1},logged_client(){for(let t in this.clients)if((0,Q.A)().get_signature_role()===this.clients[t].role)return t;return""},missing_client(){return void 0!==this.sign_status.current&&null!==this.sign_status.current&&""===this.logged_client},sign_prepare(){return void 0===this.sign_status.current},sign_type(){return this.sign_status?.status?.[this.sign_status?.current]?.type||null},mode(){return null===this.sign_status.current&&null!==this.next_name?"agent":null!==this.sign_status.current&&""!==this.logged_client?"client":null},allow_back(){return!this.loading_offer&&null===this.sign_status.current&&null!==this.next_name},global_state(){let t=0,e=0;for(let o in this.clients)e++,!0===this.clients[o].signed_client&&t++;let s=0,n=0;for(let o in this.sign_status.status)n++,!0===this.sign_status.status[o].signed&&s++;return this.loading_offer?"Aktivujeme finálne podpisovanie...":0===t&&e>0?"Dokumenty čakajú na vaše podpísanie ("+t+" / "+e+")":t>0&&t<e?"Dokumenty sú čiastočne podpísane ("+t+" / "+e+")":t>0&&t>=e?"Všetky dokumenty boli podpísané ("+t+" / "+e+")":s>0&&s>=n?"Podpisovanie bolo úspešne dokončené.":"Načítavame podpisovanie..."},sign_finished_at(){return C.A.format_date_to_readable(this.sign_status?.signed_at)},code_modal_closing(){return(0,W.A)().get_modal_event_data()}},watch:{code_modal_closing(){null!==this.code_modal_closing&&(this.run_status_api(),(0,W.A)().del_modal_event_data())}}};const F=(0,E.A)(q,[["render",d]]);var M=F},4162:function(t,e,s){var n=s(8700),o=s(6343),i=s(3175),a=s(3177);class l{static_documents(){let t={action_name:"getdocuments",method:"GET",url:(0,n.A)().endpoint_url()+"online/getdocuments/"+(0,a.A)().get_selected_product().product_id+"/?"+o.A.add_token_as_parameter()},e=new i.A;return e.prepare_params(t).handle_response().catch(t=>{throw t})}get_static_document(t){let e={action_name:"getdocument",method:"GET",url:(0,n.A)().endpoint_url()+"online/getdocument/"+(0,a.A)().get_selected_product().product_id+"/"+t+"/?"+o.A.add_token_as_parameter()+"&nocontent=true"},s=new i.A;return s.prepare_params(e).handle_response().catch(t=>{throw t})}}e.A=new l},5073:function(t,e,s){s.d(e,{A:function(){return _}});var n=s(641),o=s(33);const i={class:"calc_title_area"},a={key:0,class:"mb-3"};function l(t,e,s,l,r,c){return(0,n.uX)(),(0,n.CE)("div",i,[(0,n.Lk)("h2",{class:(0,o.C4)(!0===s.warning_color?"text-accent":"text-primary")},(0,o.v_)(s.title),3),s.subtitle?((0,n.uX)(),(0,n.CE)("p",a,(0,o.v_)(s.subtitle),1)):(0,n.Q3)("",!0),(0,n.RG)(t.$slots,"default")])}var r={props:{title:String,subtitle:String,warning_color:Boolean},components:{},emits:[],data(){return{}},created(){},methods:{},computed:{},watch:{}},c=s(6262);const d=(0,c.A)(r,[["render",l]]);var _=d},8129:function(t,e,s){s.d(e,{A:function(){return k}});var n=s(641),o=s(33),i=s(3751);const a={class:"w-100 btn-text text-start"};function l(t,e,s,l,r,c){const d=(0,n.g2)("Bouncer_loading");return c.display_document?((0,n.uX)(),(0,n.CE)("button",{key:0,"data-cy":"https://youtu.be/dQw4w9WgXcQ",onClick:e[0]||(e[0]=(...t)=>c.download_pdf&&c.download_pdf(...t)),class:(0,o.C4)(["d-flex btn-text i_anchor",c.still_waiting?"document_waiting":""])},[(0,n.Lk)("div",a,[(0,n.eW)((0,o.v_)(c.name)+" ",1),(0,n.bo)((0,n.bF)(d,{size:"small"},null,512),[[i.aG,c.still_waiting]])]),e[1]||(e[1]=(0,n.Lk)("div",{class:"flex-shrink my-auto"},[(0,n.Lk)("span",{class:"i_download_item"})],-1))],2)):(0,n.Q3)("",!0)}var r=s(4162),c=s(3886),d=s(55),_=s(6343),u=s(8700),m=s(3177),h={props:{doc:Object},components:{Bouncer_loading:d.A},data(){return{is_downloading:!1}},created(){},methods:{download_pdf(){this.still_waiting||(this.is_downloading=!0,this.is_static?r.A.get_static_document(this.doc.id).then(t=>{if(200===t.status){if(void 0!==t.result.download_token&&null!==t.result.download_token){let e=(0,u.A)().document_url()+"?access_token="+t.result.download_token;window.open(e)}else _.A.downloadBase64(this.name,t.result.content);this.is_downloading=!1}else this.is_downloading=!1}):c.A.get_session_document(this.doc.id).then(t=>{200===t.status?(_.A.downloadBase64(this.name,t.result.content),this.is_downloading=!1):this.is_downloading=!1}))}},computed:{is_static(){return void 0!==this.doc.filename},name(){return this.is_static?this.doc.filename:this.doc.name},display_document(){if("ws-preview.tmp"===this.name||"error"===this.doc.documentState)return!1;let t=(0,m.A)().get_selected_product().product_id+"";return!(this.doc.tags.includes("limity")&&!this.doc.tags.includes(t))},still_waiting(){return!!this.is_downloading||!this.is_static&&("waiting"===this.doc.documentState||"available"!==this.doc.documentState)}}},p=s(6262);const g=(0,p.A)(h,[["render",l],["__scopeId","data-v-76f71c35"]]);var k=g},8494:function(t,e,s){var n=s(8700),o=s(6343),i=s(3175),a=s(6460);class l{offer_send(t="api"){let e=(0,a.A)().get_confirm_chbs();e=o.A.serialize_object(e);let s={action_name:"signature-offer-send",method:"GET",url:(0,n.A)().endpoint_url()+"online/signature-offer-send/?"+e+o.A.add_token_as_parameter()+"&name="+t,timeout:45},l=new i.A;return l.prepare_params(s).handle_response().catch(t=>{throw t})}code_send(t){let e={action_name:"signature-code-send",method:"GET",url:(0,n.A)().endpoint_url()+"online/signature-code-send/?client="+t+o.A.add_token_as_parameter()},s=new i.A;return s.prepare_params(e).handle_response().catch(t=>{throw t})}code_check(t,e){let s=(0,a.A)().get_confirm_chbs();s=o.A.serialize_object(s);let l={action_name:"signature-code-check",method:"POST",url:(0,n.A)().endpoint_url()+"online/signature-code-check/?"+s+"&client="+e+o.A.add_token_as_parameter(),body:JSON.stringify({code:t}),content_type:"application/json",timeout:45},r=new i.A;return r.prepare_params(l).handle_response().catch(t=>{throw t})}signature_status(){let t={action_name:"signature-status",method:"GET",url:(0,n.A)().endpoint_url()+"online/signature-status/?"+o.A.add_token_as_parameter()},e=new i.A;return e.prepare_params(t).handle_response().catch(t=>{throw t})}}e.A=new l}}]);