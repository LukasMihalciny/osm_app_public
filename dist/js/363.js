"use strict";(self["webpackChunkosmapp_webpack_3x47x"]=self["webpackChunkosmapp_webpack_3x47x"]||[]).push([[363],{55:function(e,t,s){s.d(t,{A:function(){return c}});var n=s(641),a=s(33);const o={class:"spinner"};function i(e,t,s,i,r,l){return(0,n.uX)(),(0,n.CE)("div",o,[(0,n.Lk)("div",{class:(0,a.C4)(["bounce1",s.size])},null,2),(0,n.Lk)("div",{class:(0,a.C4)(["bounce2",s.size])},null,2),(0,n.Lk)("div",{class:(0,a.C4)(["bounce3",s.size])},null,2)])}var r={props:{size:String},components:{},data(){return{}},created(){},methods:{},computed:{}},l=s(6262);const d=(0,l.A)(r,[["render",i]]);var c=d},2563:function(e,t,s){s.d(t,{A:function(){return m}});var n=s(641),a=s(33);const o={class:"modal-content","data-cy":"modal_content"},i={class:"modal-header"},r={class:"modal-body","data-cy":"modal_body"};function l(e,t,s,l,d,c){return(0,n.uX)(),(0,n.CE)("div",{onClick:t[1]||(t[1]=(...e)=>c.did_click_outside&&c.did_click_outside(...e)),class:(0,a.C4)(["vue_modal",s.modal_size]),"data-cy":"modal"},[(0,n.Lk)("div",o,[(0,n.Lk)("div",i,[s.icon?((0,n.uX)(),(0,n.CE)("span",{key:0,class:(0,a.C4)(["modal-icon",s.icon])},null,2)):(0,n.Q3)("",!0),(0,n.Lk)("h4",null,(0,a.v_)(s.title),1),s.close?((0,n.uX)(),(0,n.CE)("span",{key:1,onClick:t[0]||(t[0]=(...e)=>c.close_me&&c.close_me(...e)),class:"i_close"})):(0,n.Q3)("",!0)]),(0,n.Lk)("div",r,[(0,n.RG)(e.$slots,"default")])])],2)}var d=s(2873),c={props:{close:Boolean,title:String,modal_size:String,icon:{type:String}},components:{},emits:[],data(){return{}},created(){document.addEventListener("keyup",this.close_me)},beforeUnmount(){document.removeEventListener("keyup",this.close_me)},methods:{close_me(e){this.close&&("click"===e?.type||"keyup"===e?.type&&27===e?.keyCode)&&(0,d.A)().close_them_all()},did_click_outside(e){e.target.classList.contains("vue_modal")&&this.close_me(e)}},computed:{},watch:{}},_=s(6262);const u=(0,_.A)(c,[["render",l]]);var m=u},4363:function(e,t,s){s.r(t),s.d(t,{default:function(){return h}});var n=s(641),a=s(3751),o=s(33);function i(e,t,s,i,r,l){const d=(0,n.g2)("Bouncer_loading"),c=(0,n.g2)("Modal_body");return(0,n.uX)(),(0,n.Wv)(c,{close:!1,title:"Potvrdenie SMS kódom",class:"modal-signature",icon:"i_signature"},{default:(0,n.k6)(()=>[(0,n.bo)((0,n.Lk)("div",null,[t[5]||(t[5]=(0,n.Lk)("p",null," Odosielame SMS kód na vaše telefónne číslo ",-1)),(0,n.bF)(d)],512),[[a.aG,"sending"===r.sign_state]]),(0,n.bo)((0,n.Lk)("div",null,[t[6]||(t[6]=(0,n.Lk)("p",null," Odosielanie SMS správy zlyhalo. ",-1)),(0,n.Lk)("p",null,(0,o.v_)(r.message),1)],512),[[a.aG,"not_sent"===r.sign_state]]),(0,n.bo)((0,n.Lk)("div",null,[(0,n.Lk)("p",null,(0,o.v_)(r.message),1)],512),[[a.aG,"already_sent"===r.sign_state]]),(0,n.bo)((0,n.Lk)("div",null,[t[7]||(t[7]=(0,n.Lk)("p",null,[(0,n.eW)(" SMS správa s kódom bola vygenerovaná a mala by Vám byť doručená v krátkej dobe."),(0,n.Lk)("br"),(0,n.eW)(" Zadajte SMS kód, ktorý ste obdržali."),(0,n.Lk)("br"),(0,n.eW)(" Zadaním SMS kódu vyjadrujete súhlas s obsahom obdržanej predzmluvnej dokumentácie. ")],-1)),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>r.sms_code=e),onKeydown:[t[1]||(t[1]=(...e)=>l.clear_error&&l.clear_error(...e)),t[2]||(t[2]=(0,a.jR)((...e)=>l.code_validation&&l.code_validation(...e),["enter"]))],ref:"sms_code_reference",type:"text",name:"sms_code",autocomplete:"off",class:"form-control mb-2 mx-auto mx-sm-0"},null,544),[[a.Jo,r.sms_code]]),(0,n.bo)((0,n.Lk)("p",null," Bol zadaný nesprávny formát. SMS kód je 5 ciferné číslo. ",512),[[a.aG,r.invalid_format]]),(0,n.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>l.code_validation&&l.code_validation(...e)),class:"btn btn-accent btn-right btn-lg mx-auto"}," Skontrolovať SMS kód ")],512),[[a.aG,"is_sent"===r.sign_state]]),(0,n.bo)((0,n.Lk)("div",null,[t[8]||(t[8]=(0,n.Lk)("p",null," Kontrolujeme platnosť SMS kódu. ",-1)),(0,n.bF)(d)],512),[[a.aG,"checking"===r.sign_state]]),(0,n.bo)((0,n.Lk)("div",null,[(0,n.Lk)("p",null,(0,o.v_)(r.message),1),(0,n.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>l.ask_for_code&&l.ask_for_code(...e)),class:"btn btn-primary btn-left btn-lg"}," Opraviť ")],512),[[a.aG,"failed"===r.sign_state]]),(0,n.bo)((0,n.Lk)("div",null,[t[9]||(t[9]=(0,n.Lk)("p",null,[(0,n.eW)(" SMS kód je platný. "),(0,n.Lk)("br"),(0,n.eW)(" Zmluva bola schválená. "),(0,n.Lk)("br"),(0,n.eW)(" Presmerovávame Vás na záverečnú časť. ")],-1)),(0,n.bF)(d)],512),[[a.aG,"success"===r.sign_state]]),(0,n.bo)((0,n.Lk)("div",null,[...t[10]||(t[10]=[(0,n.Lk)("p",null,[(0,n.eW)(" SMS potvrdenie predzmluvnej dokumentácie prebehlo v poriadku."),(0,n.Lk)("br"),(0,n.eW)(" Prosím zatvorte túto stránku a počkajte na ďalšie inštrukcie k uzatvoreniu poistnej zmluvy od vášho sprostredkovateľa. ")],-1)])],512),[[a.aG,"no_confirm"===r.sign_state]])]),_:1})}s(3110);var r=s(55),l=s(2563),d=s(8494),c=s(2873),_=s(6343),u=s(9452),m={props:{},components:{Bouncer_loading:r.A,Modal_body:l.A},emits:[],data(){return{sign_state:"sending",message:"",sms_code:"",invalid_format:!1,client_uuid:""}},created(){this.client_uuid=(0,c.A)().retrieve_modal_data().client_uuid,this.ask_for_code()},methods:{ask_for_code(){d.A.code_send(this.client_uuid).then(e=>{422===e.status?(this.sign_state="not_sent",this.message=e.result.message):409===e.status?(this.sign_state="already_sent",this.message=e.result.message,this.confirm_or_close()):200===e.status&&"fail"!==e.result.status?(this.sign_state="is_sent",this.$nextTick(()=>{this.$refs.sms_code_reference.focus()})):(this.sign_state="not_sent",this.message=JSON.stringify(e.result))})},code_validation(){5===this.sms_code.length&&!1!==_.A.contains_only_digits(this.sms_code)?(this.sign_state="checking",d.A.code_check(this.sms_code,this.client_uuid).then(e=>{422===e.status?(this.sign_state="failed",this.message=e.result.message):409===e.status?(this.sign_state="already_sent",this.message=e.result.message,this.confirm_or_close()):(this.sign_state="success",this.confirm_or_close())})):this.invalid_format=!0},confirm_or_close(){u.A.session_info().then(e=>{e.result?.specialData?.require_provider_confirm?this.sign_state="no_confirm":((0,c.A)().set_modal_event_data("code_modal_closing"),(0,c.A)().close_them_all())})},clear_error(){this.invalid_format=!1}},computed:{},watch:{}},p=s(6262);const k=(0,p.A)(m,[["render",i]]);var h=k},8494:function(e,t,s){s(3110);var n=s(8700),a=s(6343),o=s(3175),i=s(6460);class r{offer_send(e="api"){let t=(0,i.A)().get_confirm_chbs();t=a.A.serialize_object(t);let s={action_name:"signature-offer-send",method:"GET",url:(0,n.A)().endpoint_url()+"online/signature-offer-send/?"+t+a.A.add_token_as_parameter()+"&name="+e,timeout:45},r=new o.A;return r.prepare_params(s).handle_response().catch(e=>{throw e})}code_send(e){let t={action_name:"signature-code-send",method:"GET",url:(0,n.A)().endpoint_url()+"online/signature-code-send/?client="+e+a.A.add_token_as_parameter()},s=new o.A;return s.prepare_params(t).handle_response().catch(e=>{throw e})}code_check(e,t){let s=(0,i.A)().get_confirm_chbs();s=a.A.serialize_object(s);let r={action_name:"signature-code-check",method:"POST",url:(0,n.A)().endpoint_url()+"online/signature-code-check/?"+s+"&client="+t+a.A.add_token_as_parameter(),body:JSON.stringify({code:e}),content_type:"application/json",timeout:45},l=new o.A;return l.prepare_params(r).handle_response().catch(e=>{throw e})}signature_status(){let e={action_name:"signature-status",method:"GET",url:(0,n.A)().endpoint_url()+"online/signature-status/?"+a.A.add_token_as_parameter()},t=new o.A;return t.prepare_params(e).handle_response().catch(e=>{throw e})}}t.A=new r},9452:function(e,t,s){var n=s(8700),a=s(6343),o=s(3175);class i{session_info(){let e={action_name:"getsessioninfo",method:"GET",url:(0,n.A)().endpoint_url()+"online/getsessioninfo/?"+a.A.add_token_as_parameter()},t=new o.A;return t.prepare_params(e).handle_response().catch(e=>{throw e})}get_data(){let e={action_name:"getdata",method:"GET",url:(0,n.A)().endpoint_url()+"online/getdata/?"+a.A.add_token_as_parameter()},t=new o.A;return t.prepare_params(e).handle_response().catch(e=>{throw e})}set_data(e){let t={action_name:"setdata",method:"POST",url:(0,n.A)().endpoint_url()+"online/setdata/?"+a.A.serialize_object(e)+a.A.add_token_as_parameter()},s=new o.A;return s.prepare_params(t).handle_response().catch(e=>{throw e})}}t.A=new i}}]);