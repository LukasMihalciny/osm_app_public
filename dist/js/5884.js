"use strict";(self["webpackChunkosmapp_webpack_3x47x"]=self["webpackChunkosmapp_webpack_3x47x"]||[]).push([[5884,9111],{132:function(t,e,n){n.d(e,{A:function(){return u}});var s=n(641);const a={id:"qr_container"},o=["src"];function r(t,e,n,r,i,l){return(0,s.uX)(),(0,s.CE)(s.FK,null,[e[0]||(e[0]=(0,s.Lk)("h4",null,"Platba cez QR kód",-1)),(0,s.Lk)("div",a,[(0,s.Lk)("img",{src:l.qr_code,class:"qr_code"},null,8,o)])],64)}var i=n(7004),l={props:{},components:{},emits:[],data(){return{base64:""}},created(){i.A.generate_qr().then(t=>{200===t.status&&(this.base64=t.result.pbs)})},methods:{},computed:{qr_code(){return this.base64?"data:image/png;base64,"+this.base64:""}},watch:{}},c=n(6262);const d=(0,c.A)(l,[["render",r]]);var u=d},736:function(t,e,n){n.r(e),n.d(e,{default:function(){return R}});var s=n(641);const a={"data-cy":"calc_payment"},o={key:0,class:"row gx-3 gy-3"},r={class:"row"},i={class:"col-md-4 mb-3 mb-md-0"},l={class:"col-sm-6 col-md-4 mb-3 mb-md-0"},c={class:"col-sm-6 col-md-4"},d=["innerHTML"],u={class:"col-12 px-0 mt-5","data-cy":"docs_landing"},_={class:"row"},m={class:"col-12 mb-5 text-center"};function p(t,e,n,p,h,g){const w=(0,s.g2)("Title"),y=(0,s.g2)("Gateways"),k=(0,s.g2)("Payment_info"),v=(0,s.g2)("Qr"),f=(0,s.g2)("Point"),b=(0,s.g2)("Documents_prepare"),A=(0,s.g2)("Docs_template");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("section",a,[(0,s.bF)(w,{title:g.title,subtitle:g.subtitle,warning_color:!1===h.success},null,8,["title","subtitle","warning_color"]),null!==h.success&&"ERROR"!==h.success?((0,s.uX)(),(0,s.CE)("div",o,[!0!==h.success?((0,s.uX)(),(0,s.Wv)(f,{key:0,order:1,title:"Uhradiť poistenie"},{default:(0,s.k6)(()=>[(0,s.Lk)("div",r,[(0,s.Lk)("div",i,[h.start_doc_requests?((0,s.uX)(),(0,s.Wv)(y,{key:0})):(0,s.Q3)("",!0)]),(0,s.Lk)("div",l,[h.start_doc_requests?((0,s.uX)(),(0,s.Wv)(k,{key:0})):(0,s.Q3)("",!0)]),(0,s.Lk)("div",c,[h.start_doc_requests?((0,s.uX)(),(0,s.Wv)(v,{key:0})):(0,s.Q3)("",!0)])])]),_:1})):(0,s.Q3)("",!0),(0,s.bF)(f,{order:h.success?1:2,title:"Uložiť dokumenty"},{default:(0,s.k6)(()=>[(0,s.bF)(b,{start_doc_requests:h.start_doc_requests,step_html:6},null,8,["start_doc_requests"])]),_:1},8,["order"]),(0,s.bF)(f,{order:h.success?2:3,title:"E-mail a ďalšie inštrukcie"},{default:(0,s.k6)(()=>[(0,s.Lk)("div",{innerHTML:h.view_confirm_text},null,8,d)]),_:1},8,["order"]),(0,s.Lk)("div",u,[h.load_docs_landing_section?((0,s.uX)(),(0,s.Wv)(A,{key:0})):(0,s.Q3)("",!0)])])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",_,[(0,s.Lk)("div",m,[(0,s.Lk)("button",{onClick:e[0]||(e[0]=(...t)=>g.clear&&g.clear(...t)),type:"button",class:"btn btn-primary btn-lg btn-left"}," Vytvoriť nové porovnanie ")])])],64)}n(4979),n(1678);var h=n(8700),g=n(4001),w=n(1050),y=n(2205),k=n(132),v=n(9452),f=n(3177),b=n(8856),A=n(5073),L=n(6804),x=n(7004),E=n(2942),C=n(2873),X={props:{},components:{Documents_prepare:g.A,Gateways:w.A,Payment_info:y.A,Qr:k.A,Title:A.A,Point:L.A,Payment_requests:x.A,Docs_template:E["default"]},emits:[],data(){return{success:null,start_doc_requests:!1,view_confirm_text:"",load_docs_landing_section:!1}},created(){Promise.resolve().then(()=>v.A.get_data()).then(t=>{(0,f.A)().extract_selected_product(t),(0,f.A)().store_call_params(t.result?.call_params),this.start_doc_requests=!0}).then(()=>{b.A.get_it("view_confirm_text").then(t=>{this.view_confirm_text=t.result?.html}),b.A.get_it("view_confirm_docs_landing").then(t=>{t.result?.html&&t.result?.html.indexOf('id="osm_app"')>-1&&(this.load_docs_landing_section=!0)})});let t=(0,h.A)().get_payment_data();if(!t.payment_id||!t.payment_result)return console.log("ERROR: payment is empty",structuredClone(t)),void(this.success="ERROR");x.A.payment_result(t.payment_id,t.payment_result).then(t=>{console.log(t.result),this.success=20===t.result.payment_state})},methods:{clear(){(0,C.A)().open_it("Cleaning_session")}},computed:{title(){return null===this.success?"Spracovávam platobnú informáciu...":"ERROR"===this.success?"Platobnú informáciu sa nepodarilo získať. Prosím kontaktuje administrátora.":this.success?"Platba úspešná!":"Platba neúspešná!"},subtitle(){return null===this.success||"ERROR"===this.success?"":this.success?"Gratulujeme! Vaša zmluva je platná.":"Platba nebola úspešná alebo informácia a zrealizovaní platby je nedostupná. Prosím skontrolujte si výsledok cez internetbanking."}},watch:{}},q=n(6262);const P=(0,q.A)(X,[["render",p]]);var R=P},1050:function(t,e,n){n.d(e,{A:function(){return p}});var s=n(641),a=n(3751);const o={class:"gateways","data-cy":"gateways"},r=["href","id","title"],i=["src","alt"];function l(t,e,n,l,c,d){return(0,s.uX)(),(0,s.CE)(s.FK,null,[e[0]||(e[0]=(0,s.Lk)("h4",null,"Platba online",-1)),(0,s.Lk)("div",o,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(c.gateways,(t,e)=>(0,s.bo)(((0,s.uX)(),(0,s.CE)("a",{href:t.url,id:e,title:t.name,target:"_blank"},[(0,s.Lk)("img",{src:t.logo,alt:t.name,width:"127"},null,8,i)],8,r)),[[a.aG,""!==t.url]])),256))])],64)}var c=n(7004),d=n(8700),u={props:{},components:{},emits:[],data(){return{gateways:{}}},created(){c.A.get_gateways().then(t=>{for(let e in t.result){if(!t.result.hasOwnProperty(e))continue;if(isNaN(e))continue;let n=t.result[e]?.name,s=t.result[e]?.url_logo;null===s?s="":"http"!==s.substring(0,4)&&(s="https://www.najpoistenie.sk/wp-content/themes/najpoistenie/images/loga-banky/"+s+".png"),this.gateways[e]={logo:s,name:n,url:""},c.A.payment_create(e).then(t=>{200!==t.status&&console.log("requesting gateway URL failed with id: "+e,t),this.gateways[e].url=t.result.url;let n=(0,d.A)().get_payment_data().payment_debug;n&&this.debug_url_for_payment_gateway(e)})}})},methods:{debug_url_for_payment_gateway(t){let e=this.gateways[t].url,n=e?.replace("pay-request","pay-request-test");this.gateways[t].url=n}},computed:{},watch:{}},_=n(6262);const m=(0,_.A)(u,[["render",l]]);var p=m},2205:function(t,e,n){n.d(e,{A:function(){return _}});var s=n(641),a=n(33),o=n(3751);function r(t,e,n,r,i,l){return(0,s.uX)(),(0,s.CE)(s.FK,null,[e[2]||(e[2]=(0,s.Lk)("h4",null,"Platba prevodom na účet",-1)),(0,s.bo)((0,s.Lk)("span",null,[e[0]||(e[0]=(0,s.eW)("Názov príjemcu: ",-1)),(0,s.Lk)("strong",null,(0,a.v_)(i.payment_info.beneficiary_name),1),e[1]||(e[1]=(0,s.Lk)("br",null,null,-1))],512),[[o.aG,i.payment_info.beneficiary_name]]),e[3]||(e[3]=(0,s.eW)(" IBAN: ",-1)),(0,s.Lk)("strong",null,(0,a.v_)(i.payment_info.iban),1),e[4]||(e[4]=(0,s.Lk)("br",null,null,-1)),e[5]||(e[5]=(0,s.eW)(" SWIFT: ",-1)),(0,s.Lk)("strong",null,(0,a.v_)(i.payment_info.swift),1),e[6]||(e[6]=(0,s.Lk)("br",null,null,-1)),e[7]||(e[7]=(0,s.eW)(" Platba: ",-1)),(0,s.Lk)("strong",null,(0,a.v_)(i.payment_info.amount),1),e[8]||(e[8]=(0,s.Lk)("br",null,null,-1)),e[9]||(e[9]=(0,s.eW)(" Variabilný symbol: ",-1)),(0,s.Lk)("strong",null,(0,a.v_)(i.payment_info.vs),1),e[10]||(e[10]=(0,s.Lk)("br",null,null,-1)),e[11]||(e[11]=(0,s.eW)(" Konštantný symbol: ",-1)),(0,s.Lk)("strong",null,(0,a.v_)(i.payment_info.ks),1),e[12]||(e[12]=(0,s.Lk)("br",null,null,-1)),(0,s.bo)((0,s.Lk)("p",{class:"text-accent fw-bold pt-2"},(0,a.v_)(i.view_confirm_warnings),513),[[o.aG,i.view_confirm_warnings]])],64)}var i=n(7004),l=n(8856),c={props:{},components:{},emits:[],data(){return{payment_info:{},view_confirm_warnings:""}},created(){i.A.payment_info().then(t=>{200===t.status&&(this.payment_info=t.result.paymentinfo)}),l.A.get_json_api("view_confirm_warnings").then(t=>{200===t.status&&(this.view_confirm_warnings=t.result?.json?.warning||"")})},methods:{},computed:{},watch:{}},d=n(6262);const u=(0,d.A)(c,[["render",r]]);var _=u},4001:function(t,e,n){n.d(e,{A:function(){return v}});var s=n(641);const a={key:0,class:"docs_download","data-cy":"documents"},o={class:"docs_static"},r={class:"docs_session"},i={key:1,class:"row docs_download","data-cy":"documents"},l={class:"col-12 col-md-6"},c={class:"s-box-body"},d={class:"col-12 col-md-6"},u={class:"s-box-body"};function _(t,e,n,_,m,p){const h=(0,s.g2)("Document_download");return 4===n.step_html?((0,s.uX)(),(0,s.CE)("div",a,[e[2]||(e[2]=(0,s.Lk)("h3",null," Predzmluvná dokumentácia ",-1)),e[3]||(e[3]=(0,s.Lk)("p",null," Dokumenty s ktorými je klient povinný sa oboznámiť ",-1)),(0,s.Lk)("div",o,[e[0]||(e[0]=(0,s.Lk)("p",null," Produktové dokumenty ",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(m.static_docs,(t,e)=>((0,s.uX)(),(0,s.Wv)(h,{doc:t},null,8,["doc"]))),256))]),(0,s.Lk)("div",r,[e[1]||(e[1]=(0,s.Lk)("p",null," Dynamické dokumenty ",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(m.session_docs,(t,e)=>((0,s.uX)(),(0,s.Wv)(h,{doc:t},null,8,["doc"]))),256))])])):n.step_html>4?((0,s.uX)(),(0,s.CE)("div",i,[(0,s.Lk)("div",l,[(0,s.Lk)("div",c,[e[4]||(e[4]=(0,s.Lk)("p",null," Dynamické dokumenty ",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(m.session_docs,(t,e)=>((0,s.uX)(),(0,s.Wv)(h,{doc:t},null,8,["doc"]))),256))])]),(0,s.Lk)("div",d,[(0,s.Lk)("div",u,[e[5]||(e[5]=(0,s.Lk)("p",null," Produktové dokumenty ",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(m.static_docs,(t,e)=>((0,s.uX)(),(0,s.Wv)(h,{doc:t},null,8,["doc"]))),256))])])])):(0,s.Q3)("",!0)}var m=n(4162),p=n(3886),h=n(4688),g=n(2873),w={props:{start_doc_requests:Boolean,step_html:Number},components:{Document_download:h.A},emits:["all_docs_finished"],data(){return{static_docs:{},session_docs:{},turbo:{repeat_count:0,repeat_delay_fast:2e3,repeat_delay_slow:1e4,repeat_diminish:10,repeat_max:26}}},created(){!0===this.start_doc_requests&&(this.group_docs(),this.session_docs_turbo())},methods:{group_docs(){m.A.static_documents().then(t=>{this.static_docs=t.result.documents})},session_docs_turbo(){p.A.session_documents(!1).then(t=>{void 0!==t.result?.data?.documents&&(this.session_docs=t.result.data.documents);for(let n in this.session_docs)if(this.session_docs.hasOwnProperty(n)&&"ws-preview.tmp"===this.session_docs[n].name&&"error"===this.session_docs[n].documentState)return(0,g.A)().store_modal_data({type:"session_documents_webservice_doc_error",errors:this.session_docs[n].errors,is_client_role:!1}),void(0,g.A)().open_it("Ordinary_error_modal");if(!0===t.result?.data?.processingFinished)return void this.$emit("all_docs_finished");if(this.turbo.repeat_count>this.turbo.repeat_max)return void console.log("getsessiondocuments reached maximum repeat_count");this.turbo.repeat_count++;let e=this.turbo.repeat_count<this.turbo.repeat_diminish?this.turbo.repeat_delay_fast:this.turbo.repeat_delay_slow;setTimeout(()=>{this.session_docs_turbo()},e)})}},computed:{},watch:{start_doc_requests(){!0===this.start_doc_requests&&(this.group_docs(),this.session_docs_turbo())}}},y=n(6262);const k=(0,y.A)(w,[["render",_]]);var v=k},4162:function(t,e,n){var s=n(8700),a=n(6343),o=n(3175),r=n(3177);class i{static_documents(){let t={action_name:"getdocuments",method:"GET",url:(0,s.A)().endpoint_url()+"online/getdocuments/"+(0,r.A)().get_selected_product().product_id+"/?"+a.A.add_token_as_parameter()},e=new o.A;return e.prepare_params(t).handle_response().catch(t=>{throw t})}get_static_document(t){let e={action_name:"getdocument",method:"GET",url:(0,s.A)().endpoint_url()+"online/getdocument/"+(0,r.A)().get_selected_product().product_id+"/"+t+"/?"+a.A.add_token_as_parameter()+"&nocontent=true"},n=new o.A;return n.prepare_params(e).handle_response().catch(t=>{throw t})}}e.A=new i},4688:function(t,e,n){n.d(e,{A:function(){return w}});var s=n(641),a=n(33),o=n(3751);const r={class:"w-100 btn-text text-start"};function i(t,e,n,i,l,c){const d=(0,s.g2)("Bouncer_loading");return c.display_document?((0,s.uX)(),(0,s.CE)("button",{key:0,"data-cy":"document_download",onClick:e[0]||(e[0]=(...t)=>c.download_pdf&&c.download_pdf(...t)),class:(0,a.C4)(["d-flex btn-text i_anchor",c.still_waiting?"document_waiting":""])},[(0,s.Lk)("div",r,[(0,s.eW)((0,a.v_)(c.name)+" ",1),(0,s.bo)((0,s.bF)(d,{size:"small"},null,512),[[o.aG,c.still_waiting]])]),e[1]||(e[1]=(0,s.Lk)("div",{class:"flex-shrink my-auto"},[(0,s.Lk)("span",{class:"i_download_item"})],-1))],2)):(0,s.Q3)("",!0)}var l=n(4162),c=n(3886),d=n(55),u=n(6343),_=n(8700),m=n(3177),p={props:{doc:Object},components:{Bouncer_loading:d.A},data(){return{is_downloading:!1}},created(){},methods:{download_pdf(){this.still_waiting||(this.is_downloading=!0,this.is_static?l.A.get_static_document(this.doc.id).then(t=>{if(200===t.status){if(void 0!==t.result.download_token&&null!==t.result.download_token){let e=(0,_.A)().document_url()+"?access_token="+t.result.download_token;window.open(e)}else u.A.downloadBase64(this.name,t.result.content);this.is_downloading=!1}else this.is_downloading=!1}):c.A.get_session_document(this.doc.id).then(t=>{200===t.status?(u.A.downloadBase64(this.name,t.result.content),this.is_downloading=!1):this.is_downloading=!1}))}},computed:{is_static(){return void 0!==this.doc.filename},name(){return this.is_static?this.doc.filename:this.doc.name},display_document(){if("ws-preview.tmp"===this.name||"error"===this.doc.documentState)return!1;let t=(0,m.A)().get_selected_product().product_id+"";return!(this.doc.tags.includes("limity")&&!this.doc.tags.includes(t))},still_waiting(){return!!this.is_downloading||!this.is_static&&("waiting"===this.doc.documentState||"available"!==this.doc.documentState)}}},h=n(6262);const g=(0,h.A)(p,[["render",i],["__scopeId","data-v-5485f504"]]);var w=g},5073:function(t,e,n){n.d(e,{A:function(){return u}});var s=n(641),a=n(33);const o={class:"calc_title_area"},r={key:0,class:"mb-3"};function i(t,e,n,i,l,c){return(0,s.uX)(),(0,s.CE)("div",o,[(0,s.Lk)("h2",{class:(0,a.C4)(!0===n.warning_color?"text-accent":"text-primary")},(0,a.v_)(n.title),3),n.subtitle?((0,s.uX)(),(0,s.CE)("p",r,(0,a.v_)(n.subtitle),1)):(0,s.Q3)("",!0),(0,s.RG)(t.$slots,"default")])}var l={props:{title:String,subtitle:String,warning_color:Boolean},components:{},emits:[],data(){return{}},created(){},methods:{},computed:{},watch:{}},c=n(6262);const d=(0,c.A)(l,[["render",i]]);var u=d},6804:function(t,e,n){n.d(e,{A:function(){return p}});var s=n(641),a=n(33);const o=["data-cy"],r={class:"d-flex point-head"},i={class:"flex-shrink-0 point-number"},l={class:"flex-grow-1"},c={class:"point-body"};function d(t,e,n,d,u,_){return(0,s.uX)(),(0,s.CE)("div",{class:"col-12 point-box","data-cy":"point_"+n.order},[(0,s.Lk)("div",r,[(0,s.Lk)("div",i,[(0,s.Lk)("span",{class:(0,a.C4)("i_next_step"+n.order)},null,2)]),(0,s.Lk)("div",l,[(0,s.Lk)("h3",null,(0,a.v_)(n.title),1)])]),(0,s.Lk)("div",c,[(0,s.RG)(t.$slots,"default")])],8,o)}var u={props:{order:Number,title:String},components:{},emits:[],data(){return{}},created(){},methods:{},computed:{},watch:{}},_=n(6262);const m=(0,_.A)(u,[["render",d]]);var p=m},7004:function(t,e,n){var s=n(8700),a=n(6343),o=n(3175);class r{payment_info(){let t={action_name:"getpaymentinfo",method:"GET",url:(0,s.A)().endpoint_url()+"online/getpaymentinfo/?"+a.A.add_token_as_parameter()},e=new o.A;return e.prepare_params(t).handle_response().catch(t=>{throw t})}generate_qr(){let t={action_name:"getpaymentqr",method:"GET",url:(0,s.A)().endpoint_url()+"online/getpaymentqr/?"+a.A.add_token_as_parameter()},e=new o.A;return e.prepare_params(t).handle_response().catch(t=>{throw t})}get_gateways(){let t={action_name:"getpaymentgateways",method:"GET",url:(0,s.A)().endpoint_url()+"online/getpaymentgateways/?"+a.A.add_token_as_parameter()},e=new o.A;return e.prepare_params(t).handle_response().catch(t=>{throw t})}payment_create(t){let e={action_name:"payment-create",method:"POST",url:(0,s.A)().endpoint_url()+"online/payment-create/"+t+"/?"+a.A.add_token_as_parameter()},n=new o.A;return n.prepare_params(e).handle_response().catch(t=>{throw t})}payment_result(t,e){let n={action_name:"payment-result",method:"PUT",url:(0,s.A)().endpoint_url()+"online/payment-result/"+t+"/?result="+e+a.A.add_token_as_parameter()},r=new o.A;return r.prepare_params(n).handle_response().catch(t=>{throw t})}}e.A=new r}}]);