"use strict";(self["webpackChunkosmapp_webpack_3xx"]=self["webpackChunkosmapp_webpack_3xx"]||[]).push([[566],{9566:function(e,a,t){t.r(a),t.d(a,{default:function(){return q}});var i=t(641),n=t(33);const s={class:"row facial_scan"},o={key:0,class:"col-12 col-sm-6 mb-5"},l={class:"fw-bold"},c={class:"fw-bold"},r=["href"],d={key:1},_={key:1,class:"col-12 col-sm-6 mb-5 d-none d-sm-block"},k=["src"],u={key:1,class:"qr_code placeholder"},f={key:2,class:"col-12"},p={class:"text-center"},b=["disabled"],v={key:3,class:"text-center mt-3",style:{"min-height":"19px"}},m={class:"col-12 mb-3"};function h(e,a,t,h,y,g){const A=(0,i.g2)("Bouncer_loading"),j=(0,i.g2)("Scan_feedback"),C=(0,i.g2)("Modal_body");return(0,i.uX)(),(0,i.Wv)(C,{close:!0,title:"Tvárová biometria",class:"modal-faceauth"},{default:(0,i.k6)((()=>[(0,i.Lk)("div",s,[a[7]||(a[7]=(0,i.Lk)("div",{class:"col-12 mb-5 mt-2"},[(0,i.Lk)("p",{class:"lead",style:{}}," Pre bezpečné overenie Vašej osoby potrebujeme porovnať doklad totožnosti s tvárovou biometriou. ")],-1)),y.already_done?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",o,[a[3]||(a[3]=(0,i.Lk)("p",null,"Pre spustenie overovania na tomto zariadení kliknite na link.",-1)),(0,i.Lk)("p",l,[y.veriface_link?((0,i.uX)(),(0,i.CE)("a",{key:0,onClick:a[0]||(a[0]=(...e)=>g.open_veriface_next_tab&&g.open_veriface_next_tab(...e)),href:"#"},(0,n.v_)(y.veriface_link),1)):(0,i.Q3)("",!0)]),a[4]||(a[4]=(0,i.Lk)("p",{class:"mt-5"},"Pre preposlanie emailom, kliknite na link.",-1)),(0,i.Lk)("p",c,[y.veriface_link?((0,i.uX)(),(0,i.CE)("a",{key:0,href:g.mail_sample}," Skopírovať do emailového klienta. ",8,r)):((0,i.uX)(),(0,i.CE)("span",d,"Načítavam..."))])])),y.already_done?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",_,[a[5]||(a[5]=(0,i.Lk)("p",null,"Pre spustenie overovania na mobilnom zariadení, načítajte QR kód.",-1)),y.veriface_qr?((0,i.uX)(),(0,i.CE)("img",{key:0,src:y.veriface_qr,class:"qr_code"},null,8,k)):((0,i.uX)(),(0,i.CE)("div",u))])),y.already_done?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",f,[a[6]||(a[6]=(0,i.Lk)("ul",{class:"mb-4"},[(0,i.Lk)("li",{class:"mb-0"},"Okno nezatvárajte."),(0,i.Lk)("li",{class:"mb-0"},"Postupujte podľa pokynov v aplikácii overovania."),(0,i.Lk)("li",{class:"mb-0"},'Keď proces úspešne dokončíte kliknite na tlačidlo "Skontrolovať stav".')],-1)),(0,i.Lk)("div",p,[(0,i.Lk)("button",{onClick:a[1]||(a[1]=(...e)=>g.face_check&&g.face_check(...e)),disabled:y.loading,class:"btn btn-primary"}," Skontrolovať stav ",8,b),"object"===typeof y.success_object&&Object.keys(y.success_object).length>0?((0,i.uX)(),(0,i.CE)("button",{key:0,onClick:a[2]||(a[2]=(...e)=>g.face_fill&&g.face_fill(...e)),class:"btn btn-primary ms-1"}," Validate ")):(0,i.Q3)("",!0)])])),y.already_done?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",v,[y.loading?((0,i.uX)(),(0,i.Wv)(A,{key:0})):(0,i.Q3)("",!0)])),(0,i.Lk)("div",m,[(0,i.bF)(j,{feedback:y.feedback},null,8,["feedback"])])])])),_:1})}t(4114);var y=t(8384),g=t(2873),A=t(55),j=t(8700),C=t(6343),w=t(3175);class L{identity_scan(e){let a={action_name:"identity-scan",method:"GET",url:(0,j.A)().endpoint_url()+"online/identity-scan/?"+C.A.add_token_as_parameter()};a.url+="&serviceToken=veriface&scanGroupName="+e+"&identType=person";let t=new w.A;return t.prepare_params(a).handle_response().catch((e=>{throw e}))}identity_check(e){let a={action_name:"identity-scan-check",method:"GET",url:(0,j.A)().endpoint_url()+"online/identity-scan-check/?"+C.A.add_token_as_parameter()};a.url+="&serviceToken=veriface&scanGroupName="+e;let t=new w.A;return t.prepare_params(a).handle_response().catch((e=>{throw e}))}}var E=new L,x=t(6460),X=t(3177),S=t(9614),N=t(7406),O={props:{},components:{Modal_body:y.A,Bouncer_loading:A.A,Scan_feedback:N.A},emits:[],data(){return{debug:!0,loading:!0,already_done:!1,veriface_link:"",veriface_qr:"",success_object:{},feedback:[]}},created(){this.debug&&(this.add_feedback("DEBUG ON."),this.add_feedback("scanGroupName : "+this.facial_input_token)),this.face_init()},methods:{face_init(){if("1"===(0,X.A)().get_form_value(this.facial_input_token))return this.add_feedback("Scanovanie tejto skupiny bolo úspešne ukončené."),void(this.already_done=!0);this.loading=!0,E.identity_scan(this.facial_input_token).then((e=>{this.loading=!1,200===e.status?(this.veriface_link=e.result?.data?.url,this.veriface_qr=e.result?.data?.base64png?"data:image/png;base64,"+e.result?.data?.base64png:""):this.add_feedback(JSON.stringify(e.result.message))}))},face_check(){this.loading=!0,E.identity_check(this.facial_input_token).then((e=>{this.loading=!1,200===e.status?"object"===typeof e.result.data&&Object.keys(e.result.data).length>0?(this.add_feedback("Overovanie úspešné."),this.debug&&this.add_feedback(JSON.stringify(e.result.data)),this.success_object=e.result.data,this.debug?this.add_feedback('Automatické vyplnenie formuláru je vypnuté. Kliknite na "VALIDATE"'):this.face_fill()):this.add_feedback("BAD DATA: "+JSON.stringify(e.result)):this.add_feedback(JSON.stringify(e.result.message))}))},face_fill(){this.add_feedback("Ukladáme Vaše údaje."),(0,x.A)().clear_one_error(this.facial_input_token),(0,X.A)().set_form_value(this.facial_input_token,"1");let e=this.facial_settings?.prefix||"",a=this.facial_settings?.suffix||"";(0,X.A)().set_multiple_form_values(this.success_object,e,a),(0,g.A)().close_them_all(),(0,S.A)().set_requested_direction("forward")},open_veriface_next_tab(e){e.preventDefault(),window.open(this.veriface_link,"_blank").focus()},add_feedback(e){this.feedback.push(e)}},computed:{facial_input_token(){return(0,g.A)().retrieve_modal_data().field_id},facial_settings(){return(0,g.A)().retrieve_modal_data().data_fill},mail_sample(){let e=encodeURIComponent("Tvárová biometria"),a=encodeURIComponent("Dobrý deň, \n\r zasielame Vám link pre overenie totožnosti: \n\r\n\r "+this.veriface_link+" \n\r\n\r S pozdravom \n\r");return"mailto:?subject="+e+"&body="+a}},watch:{}},T=t(6262);const Q=(0,T.A)(O,[["render",h]]);var q=Q}}]);