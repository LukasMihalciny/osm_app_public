"use strict";(self["webpackChunkosmapp_webpack_3xx"]=self["webpackChunkosmapp_webpack_3xx"]||[]).push([[377],{3175:function(t,e,n){var s=n(1114),a=n(8700),r=n(2873),o=n(5833),i=n(2754),c=n(3177);class _{constructor(){(0,s.A)(this,"params",{}),(0,s.A)(this,"headers",{}),(0,s.A)(this,"auth_fails",0),(0,s.A)(this,"auth_max",6)}prepare_params(t){return this.params=t,void 0===this.params.timeout&&(this.params.timeout=29),this.headers={method:this.params.method,mode:"cors",cache:"no-cache",credentials:"omit",signal:(0,i.A)().get_abort_signal(),headers:{"x-user-scope":(0,a.A)().give_api_scope(),Authorization:(0,a.A)().give_bearer(),Accept:"application/json"}},"POST"===this.params.method&&this.params.body&&(this.headers.body=this.params.body),void 0===this.params.content_type?this.headers.headers["Content-Type"]="application/x-www-form-urlencoded":null!==this.params.content_type&&(this.headers.headers["Content-Type"]=this.params.content_type),this}async unauthorized(){let t=(0,a.A)().get_backend_type(),e=(0,a.A)().get_endpoint_type(),n=(0,c.A)().get_receiver(),s={php_wrapper:"/authorize_frontend/?endpoint="+e+"&receiver="+n,np_wp:"/wp-content/themes/najpoistenie/api_php_requests/authorize_frontend.php",fp_symfony:"/osmapp/auth/?receiver="+n,np_symfony:"/osmapp/auth/",wrapper_sf:"/osmapp/auth/?endpoint="+e+"&receiver="+n};if(s.hasOwnProperty(t)){let e=window.location.origin+s[t];return fetch(e).then((t=>t.json())).then((t=>!!t&&((0,a.A)().save_bearer(t),!0)))}if("lukas_local"===t){let t="http://wrapper.local/authorize_frontend/?endpoint="+e+"&receiver="+n;return fetch(t).then((t=>t.json())).then((t=>((0,a.A)().save_bearer(t),console.log("NEW BEARER:"),console.log(t),!0)))}return"vue"===t?(console.log("VUE does not have 401 auth service, fill access_token into env.js"),!1):"myport"===t?(0,a.A)().myport_access_token_promise().then((t=>!1!==t&&((0,a.A)().save_bearer(t),!0))):(console.log("backend_type "+t+" has no access to new authorization"),!1)}async handle_response(){let t=await this.call_the_api_request();if(200===t.status)return this.auth_fails=0,t;if(401===t.status){if(this.auth_fails++,this.auth_fails>this.auth_max)return console.log("Authorization reched maximum attempts. Try to refresh the app or report to admin."),{};let t=await this.unauthorized();return t?await this.prepare_params(this.params).handle_response():null}if(423===t.status&&-1===["car-data-search","car-valuation-options","car-valuation-price"].indexOf(this.params.action_name))return(0,r.A)().open_it("Clearance"),t;if(503===t.status)return(0,a.A)().change_step(503),t;if(408===t.status)return console.log("408 in request "+this.params.action_name),-1===["calculate_step2","calculate_step4","confirm"].indexOf(this.params.action_name)&&(0,r.A)().open_it("Server_timeout"),t;if(500===t.status&&"calculate_step2"===this.params.action_name||422===t.status&&"confirm"===this.params.action_name||412===t.status&&"confirm"===this.params.action_name||422===t.status&&"getsessioninfo"===this.params.action_name||"ico-info"===this.params.action_name||["car-data-search","car-valuation-options","car-valuation-price"].indexOf(this.params.action_name)>-1||422===t.status&&"session-remap"===this.params.action_name||422===t.status&&"id-scan/add-page"===this.params.action_name||422===t.status&&"id-scan/get-scan-groups"===this.params.action_name||422===t.status&&"identity-scan-check"===this.params.action_name||422===t.status&&"identity-scan"===this.params.action_name||(422===t.status||409===t.status)&&"signature-code-check"===this.params.action_name||(422===t.status||409===t.status)&&"signature-code-send"===this.params.action_name||500===t.status&&"id-scan/get-scan-groups"===this.params.action_name||425===t.status&&"id-scan/get-scan-groups"===this.params.action_name||425===t.status&&"id-scan/get-scan-group-documents"===this.params.action_name||422===t.status&&"payment-create"===this.params.action_name||422===t.status&&"offer-notify"===this.params.action_name)return t;{let e=(new Date).toLocaleString(),n=(0,a.A)().get_session_token(),s=(0,a.A)().current_step();return(0,o.A)().set_last_request(this.headers,this.params,e,n,s,t),(0,a.A)().change_step(404),(0,r.A)().close_them_all(),t}}call_the_api_request(){return new Promise(((t,e)=>{let n=setTimeout((function(){return t({status:408,statusText:"Request Timeout"})}),1e3*this.params.timeout),s={};fetch(this.params.url,this.headers).then((t=>{s=t;let e=t.headers.get("content-type");return-1===e.indexOf("json")?{response:"not in json format"}:t.json()})).then((e=>{s.result=e,t(s)})).catch((t=>{"AbortError"===t.name?(clearTimeout(n),console.log("abort",this.params.action_name)):console.error("Fetch error:",t)}))}))}}e.A=_},7618:function(t,e,n){n(4114);var s=n(6343),a=n(9452),r=n(6460),o=n(6884),i=n(2310);class c{check_scan_promise(){return new Promise(((t,e)=>{let n=this.displayed_scan_inputs_in_current_tab();0!==n.length?Promise.resolve().then((()=>o.A.identity_refresh())).then((t=>{if(200===t.status)return a.A.session_info();e("get-scan-groups failed")})).then((a=>{if(200!==a.status)return void e("sessioninfo failed");let o=a.result.scan_id_status,i=!1;if(!0===o.required&&!1===o.succeeded){for(let t=0;t<n.length;t++){if(t+1>o.count)break;let e=n[t];!0!==o.names[e]&&((0,r.A)().set_one_error(e,"DISPLAY ERROR"),i=!0)}i?(s.A.adjust_view(!0),e("scan required, reject validate")):t()}else t()})):t()}))}displayed_scan_inputs_in_current_tab(){let t=[],e=s.A.active_tab();for(let n in e){let a=s.A.first_value(e[n]),r=s.A.first_key(e[n]);"scan_modal"!==a.type_settings?.upload&&"veriface_modal"!==a.type_settings?.upload||t.push(r)}return t}check_flow_scan_promise(){return new Promise(((t,e)=>{let n=this.displayed_scan_inputs_in_current_tab();0!==n.length?Promise.resolve().then((()=>o.A.identity_flow_refresh())).then((t=>{if(200===t.status)return i.A.flow_status();e("osmapi/identity-scan-check failed")})).then((n=>{if(200!==n.status)return void e("status failed");let a=n.result?.data?.workflowStatus?.actions,o=!1;for(let t in a){if("identityScan"!==a[t].function)continue;let e=a[t]?.functionParams?.identToken;"success"!==a[t].state&&((0,r.A)().set_one_error(e,"DISPLAY ERROR"),o=!0)}o?(s.A.adjust_view(!0),e("scan required, reject validate")):t()})):t()}))}}e.A=new c},2310:function(t,e,n){n(4114);var s=n(3175),a=n(8700),r=n(5143);class o{flow_init_session(){let t={action_name:"init",method:"GET",url:(0,a.A)().endpoint_url()+"osmapp/init/"+(0,a.A)().get_flow_id()},e=new s.A;return e.prepare_params(t).handle_response().then((t=>(200!==t.status||((0,a.A)().set_session_token(t.result?.data?.session),(0,r.A)().set_workflow_status(t.result?.data?.workflowStatus),(0,r.A)().set_workflow_name(t.result?.data?.workflow)),t))).catch((t=>{throw t}))}flow_next_step(t){var e=0;let n={action_name:"nextstep",method:"GET",url:(0,a.A)().endpoint_url()+"osmapp/nextstep/"+(0,a.A)().get_session_token()};var o=[];void 0!==t&&o.push("step="+t),e>0&&o.push("&delay="+1e3*e),o.push("with-session-data=1"),(0,a.A)().is_prod_endpoint()||o.push("debug-info=1"),o.length>0&&(n.url+="/?"+o.join("&"));let i=new s.A;return i.prepare_params(n).handle_response().then((t=>(200!==t.status||((0,r.A)().set_workflow_status(t.result?.data?.workflowStatus),(0,r.A)().set_workflow_name(t.result?.data?.workflow)),t))).catch((t=>{throw t}))}flow_status(){let t={action_name:"status",method:"GET",url:(0,a.A)().endpoint_url()+"osmapp/status/"+(0,a.A)().get_session_token()};var e=[];e.push("with-session-data=1"),(0,a.A)().is_prod_endpoint()||e.push("debug-info=1"),e.length>0&&(t.url+="/?"+e.join("&"));let n=new s.A;return n.prepare_params(t).handle_response().then((t=>(200!==t.status||((0,r.A)().set_workflow_status(t.result?.data?.workflowStatus),(0,r.A)().set_workflow_name(t.result?.data?.workflow)),t))).catch((t=>{throw t}))}}e.A=new o},6884:function(t,e,n){var s=n(8700),a=n(6343),r=n(3175);class o{identity_scan(t,e,n){let o={action_name:"identity-scan",method:"GET",url:(0,s.A)().endpoint_url()+"online/identity-scan/?"+a.A.add_token_as_parameter()};o.url+="&serviceToken=veriface&scanGroupName="+e+"&identType="+n+"&identNew="+(t?"true":"false");let i=new r.A;return i.prepare_params(o).handle_response().catch((t=>{throw t}))}identity_check(t){let e={action_name:"identity-scan-check",method:"GET",url:(0,s.A)().endpoint_url()+"online/identity-scan-check/?"+a.A.add_token_as_parameter()};e.url+="&serviceToken=veriface&scanGroupName="+t;let n=new r.A;return n.prepare_params(e).handle_response().catch((t=>{throw t}))}identity_refresh(){let t={action_name:"id-scan/get-scan-groups",method:"GET",url:(0,s.A)().endpoint_url()+"api/online/id-scan/get-scan-groups/?"+a.A.add_token_as_parameter()},e=new r.A;return e.prepare_params(t).handle_response().catch((t=>{throw t}))}identity_flow_scan(t,e,n,a){let o={action_name:"identity-scan",method:"GET",url:(0,s.A)().endpoint_url()+"osmapi/identity-scan/"+(0,s.A)().get_session_token()+"/?"};o.url+="serviceToken=veriface&identToken="+e+"&identType="+n+"&action-id="+a+"&identNew="+(t?"true":"false");let i=new r.A;return i.prepare_params(o).handle_response().catch((t=>{throw t}))}identity_flow_check(t,e){let n={action_name:"identity-scan-check",method:"GET",url:(0,s.A)().endpoint_url()+"osmapi/identity-scan-check/"+(0,s.A)().get_session_token()+"/?"};n.url+="serviceToken=veriface&identToken="+t+"&action-id="+e;let a=new r.A;return a.prepare_params(n).handle_response().catch((t=>{throw t}))}identity_flow_refresh(){let t={action_name:"identity-scan-check",method:"GET",url:(0,s.A)().endpoint_url()+"osmapi/identity-scan-check/"+(0,s.A)().get_session_token()+"/?"};t.url+="serviceToken=veriface";let e=new r.A;return e.prepare_params(t).handle_response().catch((t=>{throw t}))}}e.A=new o},9452:function(t,e,n){var s=n(8700),a=n(6343),r=n(3175);class o{session_info(){let t={action_name:"getsessioninfo",method:"GET",url:(0,s.A)().endpoint_url()+"online/getsessioninfo/?"+a.A.add_token_as_parameter()},e=new r.A;return e.prepare_params(t).handle_response().catch((t=>{throw t}))}get_data(){let t={action_name:"getdata",method:"GET",url:(0,s.A)().endpoint_url()+"online/getdata/?"+a.A.add_token_as_parameter()},e=new r.A;return e.prepare_params(t).handle_response().catch((t=>{throw t}))}set_data(t){let e={action_name:"setdata",method:"POST",url:(0,s.A)().endpoint_url()+"online/setdata/?"+a.A.serialize_object(t)+a.A.add_token_as_parameter()},n=new r.A;return n.prepare_params(e).handle_response().catch((t=>{throw t}))}}e.A=new o},3027:function(t,e,n){n.r(e),n.d(e,{default:function(){return gt}});var s=n(641),a=n(33);const r={class:"row"};function o(t,e,n,o,i,c){const _=(0,s.g2)("Info"),u=(0,s.g2)("Actions_loader"),l=(0,s.g2)("Internal_step");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(_),(0,s.Lk)("div",{class:(0,a.C4)([c.find_template]),"data-cy":"nodered_flow"},[(0,s.Lk)("div",r,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(c.step_actions,((t,e)=>((0,s.uX)(),(0,s.Wv)(u,{action:t,onRequested_step:c.next_step},null,8,["action","onRequested_step"])))),256)),i.display_internal?((0,s.uX)(),(0,s.Wv)(l,{key:0,error:i.error,onRepeat_next:c.next_step},null,8,["error","onRepeat_next"])):(0,s.Q3)("",!0)])],2)],64)}n(4114);var i=n(4002),c=n(2310);const _=["data-cy"];function u(t,e,n,r,o,i){const c=(0,s.g2)("Image_action"),u=(0,s.g2)("Navigation_action"),l=(0,s.g2)("Form_action"),p=(0,s.g2)("Html_action");return(0,s.uX)(),(0,s.CE)("div",{class:(0,a.C4)([i.size]),"data-cy":i.cypres},["image"===i.type?((0,s.uX)(),(0,s.Wv)(c,{key:0,action:n.action},null,8,["action"])):"navigation"===i.type?((0,s.uX)(),(0,s.Wv)(u,{key:1,action:n.action,onRequested_step:i.requested_step},null,8,["action","onRequested_step"])):"getForm"===i.type?((0,s.uX)(),(0,s.Wv)(l,{key:2,action:n.action,onNext_step:i.next_step},null,8,["action","onNext_step"])):"getHtml"===i.type?((0,s.uX)(),(0,s.Wv)(p,{key:3,action:n.action},null,8,["action"])):(0,s.Q3)("",!0)],10,_)}const l={class:"row"},p={class:"col-6 offset-3"},d=["src"];function h(t,e,n,a,r,o){return(0,s.uX)(),(0,s.CE)("div",l,[(0,s.Lk)("div",p,[(0,s.Lk)("img",{class:"img",src:o.give_img},null,8,d)])])}var m={props:{action:Object},components:{},data(){return{}},mounted(){},methods:{},computed:{give_img(){return this.action.functionParams.url}}},f=n(6262);const w=(0,f.A)(m,[["render",h],["__scopeId","data-v-7248ce3a"]]);var v=w;const A={class:"row mt-4 mb-2 justify-content-center align-items-center"},g={class:"col text-center"},k=["onClick"];function y(t,e,n,r,o,i){return(0,s.uX)(),(0,s.CE)("div",A,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.action.functionParams,((t,e)=>((0,s.uX)(),(0,s.CE)("div",g,[(0,s.Lk)("button",{class:(0,a.C4)(["btn btn-m btn-primary",t.arrow?"btn-"+t.arrow:""]),onClick:e=>i.change_step_or_return_to_myport(t.step)},(0,a.v_)(t.label),11,k)])))),256))])}var b={props:{action:Object},components:{},data(){return{}},mounted(){},emits:["requested_step"],methods:{change_step_or_return_to_myport(t){0==t&&(console.log("osmapp history back to myport"),history.back()),this.$emit("requested_step",t)}},computed:{}};const x=(0,f.A)(b,[["render",y]]);var T=x;const E={class:"row mt-4 mb-2 justify-content-center align-items-center","data-cy":"pagination"},L={class:"col text-center"},j={class:"col text-center"},C={class:"row"},q={class:"col-12"},P={class:"row mt-4 mb-2 justify-content-center align-items-center","data-cy":"pagination"},X={class:"col text-center"},z={class:"col text-center"};function G(t,e,n,a,r,o){const i=(0,s.g2)("Tabs");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",E,[(0,s.Lk)("div",L,[o.show_back_button?((0,s.uX)(),(0,s.CE)("button",{key:0,class:"btn btn-m btn-primary btn-left",onClick:e[0]||(e[0]=t=>o.prev())}," Naspäť ")):(0,s.Q3)("",!0)]),(0,s.Lk)("div",j,[(0,s.Lk)("button",{class:"btn btn-m btn-primary btn-right",onClick:e[1]||(e[1]=t=>o.next())}," Pokračovať ")])]),(0,s.Lk)("div",C,[(0,s.Lk)("div",q,[(0,s.bF)(i)])]),(0,s.Lk)("div",P,[(0,s.Lk)("div",X,[o.show_back_button?((0,s.uX)(),(0,s.CE)("button",{key:0,class:"btn btn-m btn-primary btn-left",onClick:e[2]||(e[2]=t=>o.prev())}," Naspäť ")):(0,s.Q3)("",!0)]),(0,s.Lk)("div",z,[(0,s.Lk)("button",{class:"btn btn-m btn-primary btn-right",onClick:e[3]||(e[3]=t=>o.next())}," Pokračovať ")])])],64)}var O=n(3175),R=n(6343),I=n(8700);class S{osmapi_get_form(t){let e={action_name:"get-form",method:"GET",url:(0,I.A)().endpoint_url()+"osmapi/get-form/"+(0,I.A)().get_session_token()};var n=[];n.push("source="+t.functionParams.source),n.push("source-id="+t.functionParams["source-id"]),n.push("action-id="+t.id),n.push("json=1"),n.length>0&&(e.url+="/?"+n.join("&"));let s=new O.A;return s.prepare_params(e).handle_response().catch((t=>{throw t}))}osmapi_validate_form(t){let e={action_name:"validate-form",method:"POST",url:(0,I.A)().endpoint_url()+"osmapi/validate-form/"+(0,I.A)().get_session_token(),body:R.A.objectify_user_input(),content_type:"application/json"};var n=[];n.push("source="+t.functionParams.source),n.push("source-id="+t.functionParams["source-id"]),n.push("action-id="+t.id),n.push("json=1"),n.push("without_form=1"),n.length>0&&(e.url+="/?"+n.join("&"));let s=new O.A;return s.prepare_params(e).handle_response().catch((t=>{throw t}))}}var F=new S,N=n(5197),D=n(6460),W=n(9614),H=n(3177),K=n(7618),Q={props:{action:Object},components:{Tabs:N.A},data(){return{tab_current:0,tab_last:0}},mounted(){Promise.resolve().then((()=>F.osmapi_get_form(this.action))).then((t=>{if(200===t.status){var e=t.result?.data?.resultData?.form;(0,D.A)().set_form(e),(0,H.A)().insert_form_values(e),(0,W.A)().set_tab_keys(e)}})).then((()=>c.A.flow_status())).then((t=>{200===t.status&&(0,H.A)().store_call_params(t.result.data?.sessionData)}))},methods:{prev(){},next(){this.validate_form()},validate_form(){Promise.resolve().then((()=>K.A.check_flow_scan_promise())).then((()=>F.osmapi_validate_form(this.action))).then((t=>{(0,D.A)().set_errors(t.result?.data?.resultData?.form_validation_error_elements),!1!==t.result.data?.resultData?.validform?((0,D.A)().clear_form(),this.$emit("next_step")):R.A.adjust_view(!0)})).catch((t=>{console.log(t)}))}},computed:{show_back_button(){return this.tab_last>1&&this.tab_current>1},requested_direction(){return(0,W.A)().get_requested_direction()}},watch:{requested_direction(){null!==this.requested_direction&&("backward"===this.requested_direction?((0,W.A)().reset_requested_direction(),this.prev()):"forward"===this.requested_direction&&((0,W.A)().reset_requested_direction(),this.next()))}}};const $=(0,f.A)(Q,[["render",G]]);var B=$;const M={class:"row my-3"},Y={class:"col-12"},U=["innerHTML"];function V(t,e,n,a,r,o){return(0,s.uX)(),(0,s.CE)("div",M,[(0,s.Lk)("div",Y,[(0,s.Lk)("div",{class:"prop_wording",innerHTML:o.print_html},null,8,U)])])}class Z{osmapi_get_flow_html(t){let e={action_name:"get-html",method:"GET",url:(0,I.A)().endpoint_url()+"osmapi/get-html/"+(0,I.A)().get_session_token()};var n=[];n.push("template="+t.functionParams.template),n.length>0&&(e.url+="/?"+n.join("&"));var s=new O.A;return s.prepare_params(e).handle_response().catch((t=>{throw t}))}}var J=new Z,tt={props:{action:Object},components:{},data(){return{html:""}},mounted(){J.osmapi_get_flow_html(this.action).then((t=>{200===t.status&&(this.html=t.result.data.resultData.html)}))},methods:{},computed:{print_html(){return this.html}}};const et=(0,f.A)(tt,[["render",V]]);var nt=et,st={props:{action:Object},components:{Image_action:v,Navigation_action:T,Form_action:B,Html_action:nt},emits:["requested_step","next_step"],data(){return{}},created(){},methods:{requested_step(t){this.$emit("requested_step",t)},next_step(){this.$emit("requested_step")}},computed:{type(){return this.action.function},size(){return"full"===this.action.functionPosition.size?"col-12":"half"===this.action.functionPosition.size?"col-12 col-lg-6":"col-12"},cypres(){return"action_"+this.action.function+"_order_"+this.action.functionPosition.order}},watch:{}};const at=(0,f.A)(st,[["render",u]]);var rt=at;const ot={key:0,class:"calc_title_area mt-5"},it={class:"row"},ct={class:"col-4"},_t={class:"col-4"},ut={class:"col-4"},lt={key:1,class:"calc_title_area mt-5"};function pt(t,e,n,r,o,i){const c=(0,s.g2)("Bouncer_loading");return n.error?((0,s.uX)(),(0,s.CE)("div",ot,[e[1]||(e[1]=(0,s.Lk)("h2",{class:"text-primary"},"Interný krok zlyhal",-1)),e[2]||(e[2]=(0,s.Lk)("p",{class:"mb-5 text-center"},"Spracovanie zlyhalo. Skúste ho prosím manuálne zopakovať.",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.internal_actions,((t,e)=>((0,s.uX)(),(0,s.CE)("div",it,[(0,s.Lk)("div",ct,(0,a.v_)(t.name),1),(0,s.Lk)("div",_t,(0,a.v_)(t.token),1),(0,s.Lk)("div",ut,(0,a.v_)(t.error),1)])))),256)),(0,s.Lk)("button",{onClick:e[0]||(e[0]=e=>t.$emit("repeat_next")),class:"btn btn-primary mt-5"},"Zopakovať")])):((0,s.uX)(),(0,s.CE)("div",lt,[e[3]||(e[3]=(0,s.Lk)("h2",{class:"text-primary"},"Prebieha spracovanie interného kroku",-1)),e[4]||(e[4]=(0,s.Lk)("p",{class:"mb-3 text-center"},"Chvíľu prosím počkajte kým spracujeme všetky dôležité časti.",-1)),(0,s.bF)(c,{class:"mt-3"})]))}var dt=n(55),ht=n(5143),mt={props:{error:Boolean},components:{Bouncer_loading:dt.A},emits:["repeat_next"],data(){return{}},created(){},methods:{},computed:{internal_actions(){var t=(0,ht.A)().get_workflow_actions();let e={};for(let n in t)e[n]={name:t[n].function,error:t[n].error,token:t[n].functionParams.token};return e}},watch:{}};const ft=(0,f.A)(mt,[["render",pt]]);var wt=ft,vt={props:{},components:{Info:i.A,Actions_loader:rt,Internal_step:wt},emits:[],data(){return{status_repeat_frequency:3e3,status_repeats_count:0,status_repeats_limit:10,display_internal:!1,error:!1}},created(){this.init_session()},methods:{init_session(){(0,I.A)().is_fresh_session()?c.A.flow_init_session().then((t=>{200===t.status&&this.what_to_do_next()})):this.status()},next_step(t=void 0){this.status_repeats_count=0,this.error=!1,c.A.flow_next_step(t).then((t=>{200===t.status&&this.what_to_do_next()}))},status(){c.A.flow_status().then((t=>{200===t.status&&this.what_to_do_next()}))},what_to_do_next(){this.display_internal=!1;var t=(0,ht.A)().get_workflow_step_state(),e=(0,ht.A)().get_workflow_internal(),n=(0,ht.A)().get_workflow_finished();if(!0!==n)if("success"===t)this.next_step();else if(!0===e){if(this.display_internal=!0,this.status_repeats_count>this.status_repeats_limit)return console.log("reached status repeat limit, stopping requests"),void(this.error=!0);this.status_repeats_count++,setTimeout(function(){this.status()}.bind(this),this.status_repeat_frequency)}}},computed:{step_actions(){var t,e=(0,ht.A)().get_workflow_actions(),n=[],s=e.length;for(t=0;t<s;t++)"template"!==e[t].function&&n.push(e[t]);return n},find_template(){var t,e=(0,ht.A)().get_workflow_actions(),n=e.length;for(t=0;t<n;t++)if("template"===e[t].function)return e[t].functionParams.type;return null}},watch:{}};const At=(0,f.A)(vt,[["render",o],["__scopeId","data-v-619966c3"]]);var gt=At},4002:function(t,e,n){n.d(e,{A:function(){return x}});var s=n(641),a=n(33),r=n(3751);const o={class:"info_for_session","data-cy":"info"},i=["title"],c={title:"endpoint"},_={title:"receiver name (id)"},u={title:"session token"},l={title:"agent code"},p={title:"filtred products"},d={title:"osmapp version"},h={key:0};function m(t,e,n,m,f,w){return(0,s.bo)(((0,s.uX)(),(0,s.CE)("section",o,[(0,s.Lk)("h2",{title:w.print_group},(0,a.v_)(w.heading),9,i),(0,s.Lk)("p",c,(0,a.v_)(w.print_endpoint),1),(0,s.Lk)("p",_,(0,a.v_)(w.print_receiver),1),(0,s.Lk)("p",u,(0,a.v_)(w.print_session_token),1),(0,s.Lk)("p",l,(0,a.v_)(w.print_agent_code),1),(0,s.Lk)("p",p,(0,a.v_)(w.print_filtered_products),1),(0,s.Lk)("p",d,(0,a.v_)(w.print_version),1),w.print_flow?((0,s.uX)(),(0,s.CE)("p",h,(0,a.v_)(w.print_flow),1)):(0,s.Q3)("",!0)],512)),[[r.aG,w.info_shown]])}var f=n(8700),w=n(3177),v=n(5143),A=n(9614),g=n(9819),k={props:{},components:{},emits:[],data(){return{}},created(){},methods:{},computed:{group_id(){return(0,f.A)().product_group_id()},heading(){return"node_red"===(0,f.A)().get_run_mode()?"node_red | "+(0,v.A)().get_workflow_name():111===(0,f.A)().current_step()?"cookie session manager":g.A.group_name(this.group_id)},print_group(){return"node_red"===(0,f.A)().get_run_mode()?"flow name, for id: "+(0,f.A)().get_flow_id():"group name, for id: "+this.group_id},print_session_token(){return(0,f.A)().get_session_token()||"-"},print_agent_code(){return(0,w.A)().get_agent_code()||"-"},print_filtered_products(){return(0,w.A)().get_filtered_products()||"-"},print_version(){return(0,f.A)().give_app_version()},print_endpoint(){return(0,f.A)().get_endpoint_type()},print_receiver(){let t=(0,w.A)().get_receiver();return g.A.receiver_names(t)+" ("+t+")"},print_flow(){if("node_red"!==(0,f.A)().get_run_mode())return!1;let t="state: "+(0,v.A)().get_workflow_step_state();t+=" | step: "+(0,v.A)().get_workflow_step(),t+=" | finished: "+((0,v.A)().get_workflow_finished()?"true":"false"),t+=" | internal: "+((0,v.A)().get_workflow_internal()?"true":"false");let e=(0,v.A)().get_workflow_actions();for(let n in e)t+=" | "+e[n].function+": "+e[n].state;return t},info_shown(){return!(0,f.A)().is_prod_endpoint()||(0,w.A)().capable_agent()||(0,A.A)().show_info_section()}},watch:{}},y=n(6262);const b=(0,y.A)(k,[["render",m]]);var x=b}}]);