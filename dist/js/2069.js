"use strict";(self["webpackChunkosmapp_webpack_3x47x"]=self["webpackChunkosmapp_webpack_3x47x"]||[]).push([[2069],{2069:function(e,t,s){s.r(t),s.d(t,{default:function(){return d}});var i=s(641);const r={class:"container"},l={class:"row my-5"},n={class:"col-4 offset-4"};function o(e,t,s,o,c,_){const a=(0,i.g2)("Timepicker");return(0,i.uX)(),(0,i.CE)("div",r,[(0,i.Lk)("div",l,[(0,i.Lk)("div",n,[(0,i.bF)(a,{field_id:"time_warp",field_data:{}})])])])}var c=s(2591),_={props:{},components:{Timepicker:c.A},emits:[],data(){return{}},created(){},methods:{},computed:{},watch:{}},a=s(6262);const u=(0,a.A)(_,[["render",o]]);var d=u},2591:function(e,t,s){s.d(t,{A:function(){return b}});var i=s(641),r=s(33),l=s(3751);const n={class:"timepicker"},o={class:"number"},c={class:"number"},_={class:"confirm_time"},a=["id","name","value","disabled"];function u(e,t,s,u,d,p){return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.bo)((0,i.Lk)("div",n,[(0,i.Lk)("div",{class:(0,r.C4)(["clocks",d.aligned_to_top?"aligned_to_top":""])},[t[12]||(t[12]=(0,i.Lk)("div",{class:"overlay"},null,-1)),(0,i.Lk)("div",{class:"hours_minutes",ref:"hours_reference",onScrollPassive:t[0]||(t[0]=(...e)=>p.scroll_to_text&&p.scroll_to_text(...e))},[t[8]||(t[8]=(0,i.Lk)("span",{class:"number"},null,-1)),((0,i.uX)(),(0,i.CE)(i.FK,null,(0,i.pI)(24,(e,t)=>(0,i.Lk)("span",o,(0,r.v_)(p.time_format(e-1)),1)),64)),t[9]||(t[9]=(0,i.Lk)("span",{class:"number"},null,-1))],544),(0,i.Lk)("div",{class:"hours_minutes",ref:"minutes_reference",onScrollPassive:t[1]||(t[1]=(...e)=>p.scroll_to_text&&p.scroll_to_text(...e))},[t[10]||(t[10]=(0,i.Lk)("span",{class:"number"},null,-1)),((0,i.uX)(),(0,i.CE)(i.FK,null,(0,i.pI)(60,(e,t)=>(0,i.Lk)("span",c,(0,r.v_)(p.time_format(e-1)),1)),64)),t[11]||(t[11]=(0,i.Lk)("span",{class:"number"},null,-1))],544),(0,i.Lk)("div",_,[(0,i.Lk)("span",{onClick:t[2]||(t[2]=(...e)=>p.close_clock&&p.close_clock(...e)),class:"btn btn-sm btn-primary w-100"}," Ok ")])],2)],512),[[l.aG,d.is_opened||d.debug_keep_open]]),(0,i.Lk)("input",{id:s.field_id,name:s.field_id,value:p.value,disabled:p.is_disabled,onFocus:t[3]||(t[3]=(...e)=>p.open_clock&&p.open_clock(...e)),onBlur:t[4]||(t[4]=(...e)=>p.close_clock&&p.close_clock(...e)),onKeydown:t[5]||(t[5]=(...e)=>p.prevent_bad_input&&p.prevent_bad_input(...e)),onKeyup:t[6]||(t[6]=(...e)=>p.text_to_scroll&&p.text_to_scroll(...e)),onPaste:t[7]||(t[7]=(...e)=>p.text_to_scroll&&p.text_to_scroll(...e)),ref:"input_reference",class:"form-control input-timepicker",type:"text"},null,40,a)],64)}var d=s(3177),p=s(8700),h=s(6343),m={props:{field_id:String,field_data:Object},components:{},emits:[],data(){return{is_opened:!1,aligned_to_top:!1,scroll_timer_handle:null,pixel_height:40,debug_keep_open:!1}},created(){},methods:{open_clock(){this.is_opened=!0,this.check_the_space_under(),this.$nextTick(()=>{this.text_to_scroll()})},close_clock(){this.is_opened=!1},time_format(e){let t=e+"";return t=t.padStart(2,"0"),t},text_to_scroll(){let e=h.A.keep_only_numbers(this.$refs.input_reference.value),t="",s="";if(4===e.length)t=(e+"").substring(0,2),s=(e+"").substring(2);else{if(!(3===e.length&&e>299))return;t="0"+(e+"").substring(0,1),s=(e+"").substring(1)}this.$refs.hours_reference.scrollTo({top:t*this.pixel_height,behavior:"instant"}),this.$refs.minutes_reference.scrollTo({top:s*this.pixel_height,behavior:"instant"})},scroll_to_text(){clearTimeout(this.scroll_timer_handle),this.scroll_timer_handle=setTimeout(()=>{let e=this.$refs.hours_reference.scrollTop/this.pixel_height,t=this.$refs.minutes_reference.scrollTop/this.pixel_height;this.value=this.time_format(e)+":"+this.time_format(t)},200)},prevent_bad_input(e){if(this.status="ready",/[0-9]/gi.test(e.key))return;if(e.ctrlKey||e.metaKey)return;let t=["Backspace","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Delete","Tab","Enter","Escape","Home","End"];if(t.includes(e.key))return;let s=[":",".","-"," "];s.includes(e.key)||e.preventDefault()},check_the_space_under(){let e=window.innerHeight,t=this.$refs.input_reference.getBoundingClientRect().bottom,s=3*this.pixel_height;this.aligned_to_top=e-t<s}},computed:{is_disabled(){return(0,p.A)().is_read_only()||this.field_data.type_settings?.disabled},value:{get(){return(0,d.A)().get_form_value(this.field_id)},set(e){(0,d.A)().set_form_value(this.field_id,e)}}},watch:{}},f=s(6262);const k=(0,f.A)(m,[["render",u]]);var b=k}}]);