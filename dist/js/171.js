"use strict";(self["webpackChunkosmapp_webpack_3x25x"]=self["webpackChunkosmapp_webpack_3x25x"]||[]).push([[171],{2171:function(e,t,i){i.d(t,{A:function(){return qt}});var a=i(641);const s={class:"row input_tab","data-cy":"input_tab"};function l(e,t,i,l,n,r){const d=(0,a.g2)("Wrap");return(0,a.uX)(),(0,a.CE)("div",s,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.compute_active_tab,(e,t)=>((0,a.uX)(),(0,a.Wv)(d,{key:t,field_data:r.field_data(e),field_id:r.field_id(e)},null,8,["field_data","field_id"]))),128))])}var n=i(33);const r=["data-hide","data-cy"],d=["data-cy"];function o(e,t,i,s,l,o){const _=(0,a.g2)("Errors"),u=(0,a.g2)("Tooltip"),c=(0,a.g2)("Input_switcher"),h=(0,a.g2)("Frontend_validators");return(0,a.uX)(),(0,a.CE)("div",{class:(0,n.C4)(o.columns),"data-hide":o.hide,"data-cy":"input_wrap-"+i.field_id},[!o.zeteo_wrap&&o.has_validation?((0,a.uX)(),(0,a.Wv)(_,{key:0,has_error:o.has_error},null,8,["has_error"])):(0,a.Q3)("",!0),(0,a.Lk)("div",{class:(0,n.C4)([[o.required,o.blank,o.label_size,o.error_class,o.bootstrap_classes],"input-block"])},[o.label?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,n.C4)(["input-label",o.label_style])},(0,n.v_)(o.label),3)):(0,a.Q3)("",!0),o.zeteo_wrap?((0,a.uX)(),(0,a.Wv)(u,{key:1,tooltip_text:o.tooltip,tooltip_type:"info"},null,8,["tooltip_text"])):(0,a.Q3)("",!0),(0,a.Lk)("div",{class:(0,n.C4)([o.input_block_class,"input-area"]),"data-cy":"input-"+i.field_id},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.inputs,(e,t)=>((0,a.uX)(),(0,a.Wv)(c,{key:t,field_data:e,field_id:t},null,8,["field_data","field_id"]))),128))],10,d),o.zeteo_wrap&&o.has_validation?((0,a.uX)(),(0,a.Wv)(_,{key:2,has_error:o.has_error},null,8,["has_error"])):(0,a.Q3)("",!0),o.zeteo_wrap?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(u,{key:3,tooltip_text:o.tooltip,tooltip_type:"info"},null,8,["tooltip_text"]))],2),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.inputs,(e,t)=>((0,a.uX)(),(0,a.Wv)(h,{key:t,field_data:e,field_id:t},null,8,["field_data","field_id"]))),128))],10,r)}i(4114);var _=i(8700);function u(e,t,i,s,l,n){const r=(0,a.g2)("Checkbox"),d=(0,a.g2)("File"),o=(0,a.g2)("Legal"),_=(0,a.g2)("Plaintext"),u=(0,a.g2)("Radio"),c=(0,a.g2)("Select"),h=(0,a.g2)("Text"),p=(0,a.g2)("Textarea"),f=(0,a.g2)("Acceptance"),v=(0,a.g2)("Checkbox_icon"),m=(0,a.g2)("Coverage"),g=(0,a.g2)("Datepicker"),b=(0,a.g2)("Iban"),y=(0,a.g2)("Multiple"),k=(0,a.g2)("Plus_minus"),w=(0,a.g2)("Psc"),A=(0,a.g2)("Scan_modal"),x=(0,a.g2)("Search"),j=(0,a.g2)("Select_searchable"),z=(0,a.g2)("Slider"),C=(0,a.g2)("Spz");return"checkbox"===l.type?((0,a.uX)(),(0,a.Wv)(r,{key:0,field_id:i.field_id,field_data:i.field_data},null,8,["field_id","field_data"])):"file"===l.type?((0,a.uX)(),(0,a.Wv)(d,{key:1,field_id:i.field_id,field_data:i.field_data},null,8,["field_id","field_data"])):"legal"===l.type?((0,a.uX)(),(0,a.Wv)(o,{key:2,field_id:i.field_id,field_data:i.field_data},null,8,["field_id","field_data"])):"plaintext"===l.type?((0,a.uX)(),(0,a.Wv)(_,{key:3,field_id:i.field_id,field_data:i.field_data},null,8,["field_id","field_data"])):"radio"===l.type?((0,a.uX)(),(0,a.Wv)(u,{key:4,field_id:i.field_id,field_data:i.field_data},null,8,["field_id","field_data"])):"select"===l.type?((0,a.uX)(),(0,a.Wv)(c,{key:5,field_id:i.field_id,field_data:i.field_data},null,8,["field_id","field_data"])):"text"===l.type?((0,a.uX)(),(0,a.Wv)(h,{key:6,field_id:i.field_id,field_data:i.field_data},null,8,["field_id","field_data"])):"textarea"===l.type?((0,a.uX)(),(0,a.Wv)(p,{key:7,field_id:i.field_id,field_data:i.field_data},null,8,["field_id","field_data"])):"acceptance"===l.type?((0,a.uX)(),(0,a.Wv)(f,{key:8,field_id:i.field_id,field_data:i.field_data},null,8,["field_id","field_data"])):"checkbox_icon"===l.type?((0,a.uX)(),(0,a.Wv)(v,{key:9,field_id:i.field_id,field_data:i.field_data},null,8,["field_id","field_data"])):"coverage"===l.type?((0,a.uX)(),(0,a.Wv)(m,{key:10,field_id:i.field_id,field_data:i.field_data},null,8,["field_id","field_data"])):"date"===l.type?((0,a.uX)(),(0,a.Wv)(g,{key:11,field_id:i.field_id,field_data:i.field_data},null,8,["field_id","field_data"])):"iban"===l.type?((0,a.uX)(),(0,a.Wv)(b,{key:12,field_id:i.field_id,field_data:i.field_data},null,8,["field_id","field_data"])):"multiple"===l.type?((0,a.uX)(),(0,a.Wv)(y,{key:13,field_id:i.field_id,field_data:i.field_data},null,8,["field_id","field_data"])):"plus_minus"===l.type?((0,a.uX)(),(0,a.Wv)(k,{key:14,field_id:i.field_id,field_data:i.field_data},null,8,["field_id","field_data"])):"psc_input"===l.type?((0,a.uX)(),(0,a.Wv)(w,{key:15,field_id:i.field_id,field_data:i.field_data},null,8,["field_id","field_data"])):"scan_modal"===l.type?((0,a.uX)(),(0,a.Wv)(A,{key:16,field_id:i.field_id,field_data:i.field_data},null,8,["field_id","field_data"])):"search"===l.type?((0,a.uX)(),(0,a.Wv)(x,{key:17,field_id:i.field_id,field_data:i.field_data},null,8,["field_id","field_data"])):"select_searchable"===l.type?((0,a.uX)(),(0,a.Wv)(j,{key:18,field_id:i.field_id,field_data:i.field_data},null,8,["field_id","field_data"])):"slider"===l.type?((0,a.uX)(),(0,a.Wv)(z,{key:19,field_id:i.field_id,field_data:i.field_data},null,8,["field_id","field_data"])):"spz"===l.type?((0,a.uX)(),(0,a.Wv)(C,{key:20,field_id:i.field_id,field_data:i.field_data},null,8,["field_id","field_data"])):(0,a.Q3)("",!0)}var c=i(1602);const h={class:"input-group input-modal-trigger file_upload_input"},p=["id","name"],f={class:"input-group-append"},v=["id","name"];function m(e,t,i,s,l,r){const d=(0,a.g2)("Bouncer_loading");return(0,a.uX)(),(0,a.CE)("div",h,[(0,a.Lk)("p",{id:i.field_id,name:i.field_id,class:"form-control",style:(0,n.Tr)({background:r.gradient})},[(0,a.eW)((0,n.v_)(r.upload_info)+" ",1),r.loading?((0,a.uX)(),(0,a.Wv)(d,{key:0,size:"small",class:"ps-3"})):l.filename?((0,a.uX)(),(0,a.CE)("em",{key:1,onClick:t[0]||(t[0]=(...e)=>r.download_file&&r.download_file(...e)),class:"d-none d-sm-inline text-primary ps-1",title:"Stiahnuť súbor"},(0,n.v_)(l.filename),1)):(0,a.Q3)("",!0)],12,p),(0,a.Lk)("div",f,[(0,a.Lk)("span",{onClick:t[1]||(t[1]=(...e)=>r.open_file_selection&&r.open_file_selection(...e)),class:(0,n.C4)(["input-upload-icon",r.is_disabled?"input-upload-disabled":""]),title:"Nahrať súbor"},null,2)]),(0,a.Lk)("input",{id:i.field_id,name:i.field_id,ref:"input_reference",onChange:t[2]||(t[2]=(...e)=>r.file_was_picked&&r.file_was_picked(...e)),type:"file",style:{display:"none"}},null,40,v)])}var g=i(55),b=i(3886),y=i(3177),k=i(6343),w={props:{field_id:String,field_data:Object},components:{Bouncer_loading:g.A},emits:[],data(){return{filename:"",status:"checking",error_message:"",docs:{},progress:-10}},created(){this.ask_for_status()},methods:{ask_for_status(){return b.A.session_documents(!0).then(e=>{if(200!==e.status||"object"!==typeof e.result.data?.documents)return this.error_message="Získavanie dokumentov zlyhalo",void(this.status="error");this.docs=e.result.data?.documents;let t=!1;for(let i in this.docs)this.docs[i].tags.includes(this.field_id)&&(t=!0,this.filename=this.docs[i].name);t?(this.status="success",(0,y.A)().set_form_value(this.field_id,"1")):this.status="empty"})},open_file_selection(){this.loading||this.is_disabled||this.$refs.input_reference.click()},file_was_picked(e){this.status="sending";let t=e.target.files[0],i=this.validate_file(t);if(i)return void(this.status="error");let a=this.prepare_upload_payload(t);this.upload_file(a)},validate_file(e){let t=5,i=1048576;return e.size>t*i&&(this.error_message="Presiahnutá povolená veľkosť súboru "+Math.round(e.size/i*100)/100+"mb, max: "+t+"mb",!0)},prepare_upload_payload(e){this.filename=k.A.slugify_keep_extension_add_tag(e.name,this.field_id);let t=new FormData;return t.append("file",e,this.filename),t.append("title",this.filename),t.append("description","uploaded by osmapp"),t.append("type",e.type),t.append("tags",this.field_id),t},upload_file(e){b.A.upload_session_document(e).then(e=>{200!==e.status?(this.error_message=e?.result?.message||e?.result?.error||"Nahrávanie zlyhalo",this.status="error"):this.ask_for_status()})},download_file(){this.status="downloading";let e=0,t="";for(let i in this.docs)this.docs[i].tags.includes(this.field_id)&&(e=this.docs[i].id,t=this.docs[i].documentType);if(0===e)return this.error_message="Získavanie doukumentu zlyhalo",void(this.status="error");b.A.get_session_document(e).then(e=>{if(200===e.status)return k.A.downloadBase64(this.filename,e.result.content,null,t),void(this.status="success");this.error_message=e?.result?.message||e?.result?.error||"Sťahovanie zlyhalo",this.status="error"})}},computed:{upload_info(){let e={checking:"Načítavam...",empty:"Nahrajte prosím prílohu",sending:"Odosielam...",downloading:"Sťahujem...",success:"Súbor nahratý",error:this.error_message};return e[this.status]},loading(){return["checking","sending","downloading"].includes(this.status)},gradient(){return"linear-gradient( 120deg, rgba(255,255,255,1) 0%, rgba(255,255,255,1) "+this.progress+"%, rgba(0,0,0,0.1) "+(this.progress+.5)+"%, rgba(0,0,0,0.1) "+(this.progress+1)+"%, rgba(255,255,255,1) "+(this.progress+1.5)+"%, rgba(255,255,255,1) 100% )"},is_disabled(){return(0,_.A)().is_read_only()}},watch:{loading(){if(!this.loading)return;let e=.8,t=.1,i=.004,a=setInterval(()=>{this.progress=this.progress+e,this.loading&&e>t?e-=i:this.loading||(e=.8),this.progress>100&&(this.progress=-10,this.loading||clearInterval(a))},10)}}},A=i(6262);const x=(0,A.A)(w,[["render",m],["__scopeId","data-v-582b02c7"]]);var j=x;const z=["id","name"],C=["innerHTML"];function E(e,t,i,s,l,n){return(0,a.uX)(),(0,a.CE)("div",{id:i.field_id,name:i.field_id,class:"input-html"},[(0,a.Lk)("div",{innerHTML:i.field_data?.input_settings?.legal_html},null,8,C)],8,z)}var O={props:{field_id:String,field_data:Object,in_product:Boolean},components:{},emits:[],data(){return{}},created(){},methods:{},computed:{},watch:{}};const T=(0,A.A)(O,[["render",E]]);var X=T,L=i(4871),P=i(5683),S=i(3358),W=i(6710),V=i(3751);const I=["id","name","placeholder","disabled","rows"];function M(e,t,i,s,l,n){return(0,a.bo)(((0,a.uX)(),(0,a.CE)("textarea",{id:i.field_id,name:i.field_id,"onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),placeholder:i.field_data.placeholder,disabled:n.is_disabled,rows:n.area_rows,class:"form-control",ref:"textarea_reference"},null,8,I)),[[V.Jo,n.value,void 0,{lazy:!0}]])}var K={props:{field_id:String,field_data:Object},components:{},emits:[],data(){return{area_rows:3}},created(){this.$nextTick(()=>{let e=3,t=this.field_data.input_settings?.textarea_rows,i=this.field_data.wrapper_attrs?.match(/rows="(.*?)"/)?.[1];if("auto"!==t)return void(this.area_rows=t||(i||e));let a=3,s=80,l=20,n=this.$refs.textarea_reference.scrollHeight,r=Math.floor(n/l);r=r<a?a:r>s?s:r,this.area_rows=r})},methods:{},computed:{area_rows(){let e=this.field_data.wrapper_attrs?.match(/rows="(.*?)"/)?.[0].replace('rows="',"").replace('"',"");return void 0===e?3:e},is_disabled(){return(0,_.A)().is_read_only()||this.field_data.type_settings?.disabled},value:{get(){return(0,y.A)().get_form_value(this.field_id).replace(/\t/g,"").replace(/&#10;/g,"\n")},set(e){(0,y.A)().set_form_value(this.field_id,e)}}},watch:{}};const F=(0,A.A)(K,[["render",M]]);var R=F;const $={class:"form-check acceptance_input"},q=["id","name","disabled"],D=["for"],N=["innerHTML"];function U(e,t,i,s,l,n){return(0,a.uX)(),(0,a.CE)("div",$,[(0,a.bo)((0,a.Lk)("input",{id:i.field_id,name:i.field_id,"onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),"true-value":"1","false-value":"0",disabled:n.is_disabled,type:"checkbox",class:"form-check-input"},null,8,q),[[V.lH,n.value]]),(0,a.Lk)("label",{for:i.field_id,ref:"label_reference",class:"form-check-label"},[(0,a.Lk)("p",{innerHTML:i.field_data?.input_settings?.acceptance?.text},null,8,N)],8,D)])}var G=i(2873),B={props:{field_id:String,field_data:Object},components:{},emits:[],data(){return{}},created(){this.$nextTick(()=>{let e=this.$refs.label_reference.querySelectorAll("span");for(let t=0;t<e.length;t++)e[t].addEventListener("click",e=>{this.open_acceptance_modal(e,t)})})},methods:{open_acceptance_modal(e,t){(0,G.A)().store_modal_data({title:this.field_data.input_settings?.acceptance?.modals?.[t]?.title,content:this.field_data.input_settings?.acceptance?.modals?.[t]?.content}),(0,G.A)().open_it("Acceptance_modal")}},computed:{is_disabled(){return(0,_.A)().is_read_only()||this.field_data.type_settings?.disabled},value:{get(){return(0,y.A)().get_form_value(this.field_id)},set(e){(0,y.A)().set_form_value(this.field_id,e)}}},watch:{}};const Z=(0,A.A)(B,[["render",U]]);var H=Z;const Q={class:"form-check input-button-icon"},J=["id","name","disabled"],Y=["for"];function ee(e,t,i,s,l,r){return(0,a.uX)(),(0,a.CE)("div",Q,[(0,a.bo)((0,a.Lk)("input",{class:(0,n.C4)(r.icon_class),id:i.field_id,name:i.field_id,"onUpdate:modelValue":t[0]||(t[0]=e=>r.value=e),"true-value":"1","false-value":"0",disabled:r.is_disabled,type:"checkbox"},null,10,J),[[V.lH,r.value]]),(0,a.Lk)("label",{for:i.field_id},(0,n.v_)(r.checkbox_label),9,Y)])}var te={props:{field_id:String,field_data:Object},components:{},emits:[],data(){return{}},created(){},methods:{},computed:{checkbox_label(){return this.field_data.label},icon_class(){return this.field_data.wrapper_attrs},is_disabled(){return(0,_.A)().is_read_only()},value:{get(){return(0,y.A)().get_form_value(this.field_id)},set(e){(0,y.A)().set_form_value(this.field_id,e)}}},watch:{}};const ie=(0,A.A)(te,[["render",ee]]);var ae=ie;const se=["id","name","disabled"],le=["value"];function ne(e,t,i,s,l,r){return(0,a.bo)(((0,a.uX)(),(0,a.CE)("select",{id:i.field_id,name:i.field_id,"onUpdate:modelValue":t[0]||(t[0]=e=>r.value=e),disabled:r.is_disabled,class:"form-control"},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.options,(e,t)=>((0,a.uX)(),(0,a.CE)("option",{value:t},(0,n.v_)(e),9,le))),256))],8,se)),[[V.u1,r.value]])}i(4979),i(1678);var re={props:{field_id:String,field_data:Object},components:{},emits:[],data(){return{options:{}}},created(){this.populate_cover_options()},methods:{populate_cover_options(){let e=this.field_data.input_settings?.min,t=this.field_data.input_settings?.max,i=this.field_data.input_settings?.birth_token,a=this.field_data.input_settings?.insurace_token;if("number"!==typeof e||"number"!==typeof t||"string"!==typeof i||"string"!==typeof a)return void console.log("bad input_settings",structuredClone(this.field_id),structuredClone(this.field_data.input_settings));this.options={0:"Vyberte zo zoznamu"};let s=(0,y.A)().get_form_value(i),l=(0,y.A)().get_form_value(a),n=-1;if(s&&l){let e=k.A.format_string_to_date(s),t=k.A.format_string_to_date(l);n=t.getFullYear()-e.getFullYear()}for(let r=e;r<t+1;r++){if(n>-1&&r+n>t){parseInt(this.value,10)>r&&(this.value=r-1);break}let e="";n>-1&&(e=" (do "+(r+n)+". roku)");let i=1===r?" rok":r>1&&r<5?" roky":" rokov";this.options[r]=r+i+e}}},computed:{is_disabled(){return(0,_.A)().is_read_only()||this.field_data.type_settings?.disabled},value:{get(){return(0,y.A)().get_form_value(this.field_id)},set(e){(0,y.A)().set_form_value(this.field_id,e)}},watch_date_inputs(){return[(0,y.A)().get_form_value(this.field_data.input_settings?.birth_token),(0,y.A)().get_form_value(this.field_data.input_settings?.insurace_token)]}},watch:{watch_date_inputs(){this.populate_cover_options()}}};const de=(0,A.A)(re,[["render",ne]]);var oe=de,_e=i(6451);const ue=["id","name","placeholder","disabled","maxlength"];function ce(e,t,i,s,l,n){return(0,a.bo)(((0,a.uX)(),(0,a.CE)("input",{id:i.field_id,name:i.field_id,"onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),ref:"iban_reference",onKeypress:t[1]||(t[1]=(...e)=>n.prevent_bad_input&&n.prevent_bad_input(...e)),placeholder:i.field_data.placeholder,disabled:n.is_disabled,maxlength:l.max_length+l.max_spaces,type:"text",class:"form-control"},null,40,ue)),[[V.Jo,n.value]])}var he={props:{field_id:String,field_data:Object},components:{},emits:[],data(){return{max_length:24,max_spaces:5,spaces_before_cursor:0}},created(){},methods:{prevent_bad_input(e){/[a-z0-9]/gi.test(e.key)||e.preventDefault()},transform_iban(e){e+="";let t=e.match(/[a-z0-9]/gi);t=null===t?[]:t,e=t.join(""),e=e.toUpperCase(),e=e.slice(0,this.max_length);let i=e.match(/.{1,4}/g);return i=null===i?[]:i,e=i.join(" "),e},cursor_iban(e){let t=this.$refs.iban_reference?.selectionEnd;this.$nextTick(()=>{let i=(e.slice(0,t).match(/\s/g)||[]).length;t+=i-this.spaces_before_cursor,this.$refs.iban_reference.setSelectionRange(t,t)})}},computed:{is_disabled(){return(0,_.A)().is_read_only()||this.field_data.type_settings?.disabled},value:{get(){let e=(0,y.A)().get_form_value(this.field_id);return e=this.transform_iban(e),this.cursor_iban(e),e},set(e){let t=this.$refs.iban_reference?.selectionEnd;this.spaces_before_cursor=(e.slice(0,t).match(/\s/g)||[]).length,(0,y.A)().set_form_value(this.field_id,e.replace(/\s/g,""))}}},watch:{}};const pe=(0,A.A)(he,[["render",ce]]);var fe=pe,ve=i(4211);const me={class:"input-group input-counter"},ge={class:"input-group-prepend"},be=["id","name","disabled"],ye={class:"input-group-append"};function ke(e,t,i,s,l,n){return(0,a.uX)(),(0,a.CE)("div",me,[(0,a.Lk)("div",ge,[(0,a.Lk)("a",{onClick:t[0]||(t[0]=e=>n.substract()),class:"input-group-btn btn-minus"})]),(0,a.bo)((0,a.Lk)("input",{id:i.field_id,name:i.field_id,"onUpdate:modelValue":t[1]||(t[1]=e=>n.value=e),disabled:n.is_disabled,maxlength:"3",type:"text",class:"form-control"},null,8,be),[[V.Jo,n.value]]),(0,a.Lk)("div",ye,[(0,a.Lk)("a",{onClick:t[2]||(t[2]=e=>n.add()),class:"input-group-btn btn-plus"})])])}var we={props:{field_id:String,field_data:Object},components:{},data(){return{min:0,max:9}},created(){this.min=this.field_data.type_settings?.plus_minus_min||0,this.max=this.field_data.type_settings?.plus_minus_max||1e3},methods:{add(){this.is_disabled||this.value>=this.max||(this.value++,(0,y.A)().set_form_value(this.field_id,this.value))},substract(){this.is_disabled||this.value<=this.min||(this.value--,(0,y.A)().set_form_value(this.field_id,this.value))}},computed:{is_disabled(){return(0,_.A)().is_read_only()},value:{get(){return(0,y.A)().get_form_value(this.field_id)},set(e){(0,y.A)().set_form_value(this.field_id,e)}}},watch:{}};const Ae=(0,A.A)(we,[["render",ke]]);var xe=Ae;const je={class:"input-autocomplete"},ze=["id","name","placeholder","disabled"],Ce={key:0},Ee=["onClick"];function Oe(e,t,i,s,l,r){return(0,a.uX)(),(0,a.CE)("div",je,[(0,a.bo)((0,a.Lk)("input",{id:i.field_id,name:i.field_id,placeholder:i.field_data.placeholder,disabled:r.is_disabled,"onUpdate:modelValue":t[0]||(t[0]=e=>l.value=e),onKeyup:t[1]||(t[1]=(...e)=>r.psc_user_worker&&r.psc_user_worker(...e)),onKeydown:[t[2]||(t[2]=(0,V.jR)((...e)=>r.move_down&&r.move_down(...e),["down"])),t[3]||(t[3]=(0,V.jR)((...e)=>r.move_up&&r.move_up(...e),["up"])),t[4]||(t[4]=(0,V.jR)((...e)=>r.enter_selection&&r.enter_selection(...e),["enter"]))],onChange:t[5]||(t[5]=(...e)=>r.store_changed_psc&&r.store_changed_psc(...e)),ref:"psc_input",type:"text",class:"form-control",maxlength:"50"},null,40,ze),[[V.Jo,l.value]]),(0,a.bo)((0,a.Lk)("ul",null,[l.loading?((0,a.uX)(),(0,a.CE)("li",Ce," Načítavam... ")):((0,a.uX)(!0),(0,a.CE)(a.FK,{key:1},(0,a.pI)(r.filtered_options,(e,t)=>((0,a.uX)(),(0,a.CE)("li",{class:(0,n.C4)(t===l.selected?"active_autocomplete":""),onClick:t=>r.click_selection(e)},(0,n.v_)(e),11,Ee))),256))],512),[[V.aG,l.shown]])])}var Te=i(6460),Xe=i(3175);class Le{auto_model_table(e,t){let i=(0,Te.A)().get_form(),a={};for(let n in i)if(i.hasOwnProperty(n))for(let t in i[n]){if(!i[n].hasOwnProperty(t))continue;let s=Object.keys(i[n][t])[0];if(s!==e)continue;let l=i[n][t][s].enum;for(let e in l){if(!l.hasOwnProperty(e))continue;let t=Object.keys(l[e])[0],i=l[e][t];"object"===typeof i&&(i=i.label),a[t]=i}}let s={action_name:"reference_table_get",method:"GET",url:(0,_.A)().endpoint_url()+"online/reference_table_get/?table_token=c_test_auto_model&ematch="+a[t]},l=new Xe.A;return l.prepare_params(s).handle_response().catch(e=>{throw e})}psc_table(e){let t={action_name:"reference_table_get",method:"GET",url:(0,_.A)().endpoint_url()+"online/reference_table_get/?table_token=c_test_psc&filter="+e},i=new Xe.A;return i.prepare_params(t).handle_response().catch(e=>{throw e})}}var Pe=new Le,Se={props:{field_id:String,field_data:Object},components:{},emits:[],data(){return{value:"",options_stored:!1,loading:!1,options:[],selected:-1,shown:!1}},created(){this.value=this.get_session_value},methods:{psc_user_worker(e){let t=e?.keyCode;if((t<48||t>106)&&229!==t&&8!==t&&void 0!==t)return;let i=this.value.length;i<3?this.options_stored=!1:(!1===this.options_stored&&(this.options_stored=!0,this.get_psc_options()),this.shown=!0,8!==t&&setTimeout(()=>{1===this.filtered_options.length&&(this.value=this.filtered_options[0],this.shown=!1,(0,y.A)().set_form_value(this.field_id,this.value))},1e3))},get_psc_options(){this.loading=!0,Pe.psc_table(this.value).then(e=>{if(this.loading=!1,200!==e.status)return;let t=e.result.data;this.options=[];for(let i in t)t.hasOwnProperty(i)&&this.options.push(t[i]);this.$nextTick(()=>{this.$refs.psc_input.focus()})})},move_down(){this.selected++,this.selected>this.filtered_options.length-1&&(this.selected=0)},move_up(){this.selected--,this.selected<0&&(this.selected=this.filtered_options.length-1)},enter_selection(){-1!==this.selected&&(this.value=this.filtered_options[this.selected],this.shown=!1,(0,y.A)().set_form_value(this.field_id,this.value))},click_selection(e){this.value=e,this.shown=!1,(0,y.A)().set_form_value(this.field_id,this.value)},store_changed_psc(){(0,y.A)().set_form_value(this.field_id,this.value)}},computed:{filtered_options(){let e,t=[],i=this.options.length;for(e=0;e<i;e++){let i=k.A.slugify(this.options[e]),a=k.A.slugify(this.value);-1!==i.indexOf(a)&&t.push(this.options[e])}return t},get_session_value(){return(0,y.A)().get_form_value(this.field_id)},is_disabled(){return(0,_.A)().is_read_only()}},watch:{get_session_value(){this.value!==this.get_session_value&&(this.value=this.get_session_value,this.options_stored=!1,this.psc_user_worker())}}};const We=(0,A.A)(Se,[["render",Oe]]);var Ve=We;const Ie=["id","name","disabled"],Me={class:"veriface-feedback align-self-stretch"};function Ke(e,t,i,s,l,r){return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("button",{id:i.field_id,name:i.field_id,onClick:t[0]||(t[0]=(...e)=>r.open_modal_credentials_scan&&r.open_modal_credentials_scan(...e)),disabled:r.is_disabled||r.is_uploaded,type:"button",class:"btn btn-primary btn-veriface"},[(0,a.Lk)("span",{class:(0,n.C4)(r.is_scan?"i_faceid":"i_veriface")},null,2),(0,a.Lk)("span",null,(0,n.v_)(r.scan_button_label),1)],8,Ie),(0,a.Lk)("div",Me,[(0,a.Lk)("span",{class:(0,n.C4)(r.scan_error?"text-warning":r.is_uploaded?"text-primary":"")},[r.scan_error||r.is_uploaded?((0,a.uX)(),(0,a.CE)("span",{key:0,class:(0,n.C4)(r.scan_error?"i_warning":"i_check")},null,2)):(0,a.Q3)("",!0),(0,a.Lk)("span",{style:(0,n.Tr)({bottom:r.scan_error?"3px":r.is_uploaded?"2px":"0px",position:"relative"})},(0,n.v_)(r.scan_description),5)],2)])],64)}var Fe=i(7618),Re={props:{field_id:String,field_data:Object},components:{},emits:[],data(){return{}},created(){},methods:{open_modal_credentials_scan(){if(this.is_disabled||this.is_uploaded)return;let e=Fe.A.client_presence_type_check(this.field_id);null!==e&&((0,G.A)().store_modal_data({field_id:this.field_id,data_fill:this.field_data.input_settings?.data_fill||{},scan_type:this.is_scan?"op":"person",user_presence:e}),(0,G.A)().open_it("Facial_recognition"))}},computed:{is_disabled(){return(0,_.A)().is_read_only()},is_uploaded(){let e=(0,y.A)().get_form_value(this.field_id);return e===(0,_.A)().get_session_token()},scan_error(){return(0,Te.A)().input_has_error(this.field_id)},is_scan(){return"scan_modal"===this.field_data.type_settings?.upload},is_nodered(){return"node_red"===(0,_.A)().get_run_mode()},scan_button_label(){return this.field_data.placeholder?this.field_data.placeholder:this.is_scan?this.is_nodered?"Občiansky preukaz a získanie údajov":"Skenovanie dokladu totožnosti":this.is_nodered?"Tvárová biometria a občiansky preukaz":"Overenie totožnosti klienta"},scan_description(){return this.is_uploaded?this.is_scan?"Doklad bol úspešne nahratý a skontrolovaný.":"Identifikácia tváre a porovnanie dokladov bolo úspešné.":this.scan_error?"Overenie totožnosti je povinné.":this.is_scan?"Overenie dokladu totožnosti na diaľku.":"Overenie totožnosti pomocou tvárovej biometrie."}},watch:{}};const $e=(0,A.A)(Re,[["render",Ke]]);var qe=$e;const De={class:"input-group"},Ne=["id","name","placeholder","disabled"],Ue={class:"input-group-append"},Ge={class:"input-feedback-wrap"},Be=["innerHTML"];function Ze(e,t,i,s,l,r){const d=(0,a.g2)("Bouncer_loading");return(0,a.uX)(),(0,a.CE)("div",De,[(0,a.bo)((0,a.Lk)("input",{id:i.field_id,name:i.field_id,"onUpdate:modelValue":t[0]||(t[0]=e=>r.value=e),onKeydown:t[1]||(t[1]=(...e)=>r.prevent_letters&&r.prevent_letters(...e)),onKeyup:t[2]||(t[2]=(0,V.jR)((...e)=>r.run_search&&r.run_search(...e),["enter"])),onPaste:t[3]||(t[3]=(...e)=>r.user_paste_event&&r.user_paste_event(...e)),placeholder:i.field_data.placeholder,disabled:"loading"===l.status||r.is_disabled,ref:"ico_reference",type:"text",class:"form-control input-search"},null,40,Ne),[[V.Jo,r.value]]),(0,a.Lk)("div",Ue,[(0,a.Lk)("span",{onClick:t[4]||(t[4]=(...e)=>r.run_search&&r.run_search(...e)),class:"input-search-icon"})]),(0,a.Lk)("div",Ge,[(0,a.Lk)("div",{innerHTML:r.search_feedback,class:(0,n.C4)(["input-feedback",l.status])},null,10,Be),(0,a.bo)((0,a.bF)(d,{size:"small",class:"ps-3"},null,512),[[V.aG,"loading"===l.status]])])])}var He=i(5254),Qe={props:{field_id:String,field_data:Object},components:{Bouncer_loading:g.A},emits:[],data(){return{status:"ready",min_length:8,company_name:"",autorun_running:!1,autorun_handle:{},autorun_delay:2e3}},created(){},methods:{prevent_letters(e){if(this.status="ready",/[0-9]/gi.test(e.key))return;if(e.ctrlKey||e.metaKey)return;let t=["Backspace","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Delete","Tab","Enter","Escape","Home","End"];t.includes(e.key)||e.preventDefault()},run_search(){this.is_disabled||"loading"===this.status||(this.value=k.A.keep_only_numbers(this.value),this.size<this.min_length||(this.size>this.min_length&&(this.value=this.value.substring(0,this.min_length)),this.$nextTick(()=>{clearTimeout(this.autorun_handle),this.autorun_running=!1}),this.status="loading",Promise.all([He.A.ico_info(this.value),k.A.sleep(2)]).then(e=>void 0===e[0]?e[1]:e[0]).then(e=>{if(200!==e.status||"object"!==typeof e.result?.data||0===Object.keys(e.result?.data).length)return this.status="error",void this.$nextTick(()=>{this.$refs.ico_reference.focus()});let t=this.field_data.input_settings?.data_fill?.prefix||"",i=this.field_data.input_settings?.data_fill?.suffix||"";(0,y.A)().set_multiple_form_values(e.result.data,t,i);for(let a in e.result.data)if(k.A.ends_with(a,"company_name")||k.A.ends_with(a,"zamestnavatel_meno")){this.company_name=e.result.data[a];break}this.status="success"})))},user_paste_event(e){this.$nextTick(()=>{this.value=k.A.keep_only_numbers(this.value)})}},computed:{search_feedback(){if("error"===this.status)return"Vyhľadávanie IČO <b>"+this.value+"</b> nebolo úspešné";if("success"===this.status)return"Predvyplnili sme údaje pre <b>"+this.company_name+"</b>";if("loading"===this.status)return"Vyhľadávame právnickú alebo fyzickú osobu...";if("ready"===this.status){if(0===this.size)return"Zadajte <strong>IČO</strong> spoločnosti - právnickej osoby (Firma) alebo fyzickej osoby (Živnostník)";if(this.size===this.min_length)return"Pre vyhľadanie osoby s IČO <strong>"+this.value+'</strong><span class="hide_on_mobile"> stlačte Enter alebo</span> kliknite na Lupu';{let e=1===this.size?"znak":this.size>1&&this.size<5?"znaky":"znakov";return"Zadali ste <strong>"+this.size+"</strong> "+e+". IČO formát požaduje <strong>"+this.min_length+"</strong> čísiel"}}},is_disabled(){return(0,_.A)().is_read_only()},value:{get(){return(0,y.A)().get_form_value(this.field_id)},set(e){(0,y.A)().set_form_value(this.field_id,e)}},size(){return this.value.length}},watch:{size(){if(this.autorun_running||this.size!==this.min_length)return clearTimeout(this.autorun_handle),void(this.autorun_running=!1);this.autorun_running=!0,this.autorun_handle=setTimeout(()=>{this.run_search(),this.autorun_running=!1},this.autorun_delay)}}};const Je=(0,A.A)(Qe,[["render",Ze]]);var Ye=Je;const et={class:"input-autocomplete"},tt=["id","name","disabled"],it=["onClick"];function at(e,t,i,s,l,r){return(0,a.uX)(),(0,a.CE)("div",et,[(0,a.bo)((0,a.Lk)("input",{id:i.field_id,name:i.field_id,placeholder:"-- vyberte --","onUpdate:modelValue":t[0]||(t[0]=e=>l.displayed=e),onFocus:t[1]||(t[1]=(...e)=>r.show_list&&r.show_list(...e)),onBlur:t[2]||(t[2]=(...e)=>r.hide_with_delay&&r.hide_with_delay(...e)),onKeyup:t[3]||(t[3]=(...e)=>r.remove_previous_value&&r.remove_previous_value(...e)),onKeydown:[t[4]||(t[4]=(0,V.jR)((...e)=>r.move_down&&r.move_down(...e),["down"])),t[5]||(t[5]=(0,V.jR)((...e)=>r.move_up&&r.move_up(...e),["up"])),t[6]||(t[6]=(0,V.jR)((...e)=>r.enter_selection&&r.enter_selection(...e),["enter"]))],disabled:r.is_disabled,type:"text",class:"form-control"},null,40,tt),[[V.Jo,l.displayed]]),(0,a.bo)((0,a.Lk)("ul",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.filtered_options,(e,t)=>((0,a.uX)(),(0,a.CE)("li",{class:(0,n.C4)(t===l.selected?"active_autocomplete":""),onClick:e=>r.click_selection(t)},(0,n.v_)(e.label),11,it))),256))],512),[[V.aG,l.shown]])])}let st={props:{},components:{},emits:[],data(){return{dynamic:{auto_model:"auto_znacka",havarijne_auto_model:"havarijne_auto_znacka",gap_auto_model:"gap_auto_znacka",sedadla_auto_model:"sedadla_auto_znacka"},additional_label:"auto_model",label_name:"__input_value_label_auto_model"}},created(){this.request_dynamic_value()},methods:{request_dynamic_value(){null!==this.cached_dynamic_parent&&Pe.auto_model_table(this.dynamic[this.field_id],this.cached_dynamic_parent).then(e=>{if(200!==e.status)return;this.options={};let t=e.result.data;for(let a in t)t.hasOwnProperty(a)&&(this.options[a]={value:t[a].id,label:t[a].model},parseInt(this.options[a].value,10)===parseInt((0,y.A)().get_form_value(this.field_id),10)&&(this.displayed=this.options[a].label));let i=!0;for(let a in this.options){if(!this.options.hasOwnProperty(a))continue;let e=this.options[a].label;e===this.displayed+""&&(i=!1)}i&&(this.displayed="")})}},computed:{cached_dynamic_parent(){return this.dynamic.hasOwnProperty(this.field_id)?(0,y.A)().get_form_value(this.dynamic[this.field_id]):null},cached_additional_label(){return this.field_id!==this.additional_label?null:this.displayed}},watch:{cached_dynamic_parent(){this.request_dynamic_value()},cached_additional_label(){if(null!==this.cached_additional_label)for(let e in this.options){if(!this.options.hasOwnProperty(e))continue;let t=this.options[e].label;if(t===this.displayed){(0,y.A)().insert_form_value_without_interaction(this.label_name,this.options[e].label);break}}}}};var lt=st;let nt={props:{},components:{},emits:[],data(){return{vybava_id:"havarijne_auto_vybava",vybava_watch:["havarijne_auto_znacka","havarijne_auto_model","havarijne_objem","havarijne_vykon","havarijne_palivo","havarijne_hmotnost","havarijne_rokvyroby","havarijne_auto_vin","havarijne_auto_prevodovka","havarijne_auto_registracia","havarijne_auto_pocet_sedadiel","havarijne_auto_karoseria"],vybava_date:"havarijne_auto_registracia",vybava_required:["havarijne_auto_znacka","havarijne_auto_model","havarijne_vykon","havarijne_auto_vin","havarijne_palivo"],vybava_optional:["havarijne_objem","havarijne_hmotnost","havarijne_rokvyroby","havarijne_auto_prevodovka","havarijne_auto_registracia","havarijne_auto_pocet_sedadiel","havarijne_auto_karoseria"],vybava_additional_label:"havarijne_auto_vybava_label",delay:1e3,holding:!1,time:""}},created(){this.request_vybava()},methods:{request_vybava(){if(null===this.cached_vybava)return;let e,t=this.vybava_required.length;for(e=0;e<t;e++)if(""===this.cached_vybava[this.vybava_required[e]])return;let i=structuredClone(this.cached_vybava);for(let a in i)i.hasOwnProperty(a)&&this.vybava_optional.indexOf(a)>-1&&(""===i[a]||void 0===i[a])&&delete i[a];i.hasOwnProperty(this.vybava_date)&&(i[this.vybava_date]=k.A.format_car_request_date(i[this.vybava_date])),i=k.A.serialize_object(i),He.A.car_valuation_options(i).then(e=>{this.options={};let t=e.result.data;for(let a in t)t.hasOwnProperty(a)&&(this.options[a]={value:t[a].havarijne_auto_vybava,label:t[a].label_havarijne_auto_vybava},this.options[a].value==(0,y.A)().get_form_value(this.field_id)&&(this.displayed=this.options[a].label));let i=!0;for(let a in this.options){if(!this.options.hasOwnProperty(a))continue;let e=this.options[a].label;e===this.displayed+""&&(i=!1)}i&&(this.displayed="")})}},computed:{cached_vybava(){if(this.field_id!==this.vybava_id)return null;let e,t={},i=this.vybava_watch.length;for(e=0;e<i;e++){let i=this.vybava_watch[e];t[i]=(0,y.A)().get_form_value(i)}return t}},watch:{cached_vybava(){!0===this.holding&&clearTimeout(this.time),this.holding=!0,this.time=setTimeout(()=>{this.holding=!1,this.request_vybava()},this.delay)}}};var rt=nt,dt={props:{field_id:String,field_data:Object},components:{},emits:[],mixins:[lt,rt],data(){return{displayed:"",options:{},selected:-1,shown:!1,dont_filter_yet:!0}},created(){if(!this.dynamic.hasOwnProperty(this.field_id)&&this.field_id!==this.vybava_id)for(let e in this.field_data.enum){if(!this.field_data.enum.hasOwnProperty(e))continue;let t=k.A.enum_value(this.field_data.enum[e]),i=k.A.enum_label(this.field_data.enum[e]);""!==t&&(this.options[e]={value:t,label:i},t==(0,y.A)().get_form_value(this.field_id)&&(this.displayed=i))}},methods:{move_down(){this.selected++,this.selected>this.filtered_options.length-1&&(this.selected=0)},move_up(){this.selected--,this.selected<0&&(this.selected=this.filtered_options.length-1)},enter_selection(){if(-1!==this.selected&&void 0!==this.filtered_options[this.selected]&&((0,y.A)().set_form_value(this.field_id,this.filtered_options[this.selected].value),this.displayed=this.filtered_options[this.selected].label,this.shown=!1,this.field_id===this.vybava_id)){let e="";for(let t in this.field_data.enum){if(!this.field_data.enum.hasOwnProperty(t))continue;let i=Object.keys(this.field_data.enum[t])[0];i===event_value&&(e=this.field_data.enum[t][i])}(0,y.A)().insert_form_value_without_interaction(this.vybava_additional_label,e)}},click_selection(e){this.selected=e,this.enter_selection()},remove_previous_value(){this.dont_filter_yet=!1;let e=!1;for(let t in this.options)this.options.hasOwnProperty(t)&&this.displayed===this.options[t].label&&(e=!0);!1===e&&((0,y.A)().delete_form_value(this.field_id),this.shown=!0),setTimeout(()=>{1===Object.keys(this.filtered_options).length&&(this.selected=0,this.enter_selection())},1e3)},show_list(){this.dont_filter_yet=!0,this.shown=!0},hide_with_delay(){setTimeout(()=>{this.shown=!1},500)}},computed:{filtered_options(){if(this.dont_filter_yet)return this.options;let e=[];for(let t in this.options){if(!this.options.hasOwnProperty(t))continue;let i=k.A.slugify(this.options[t].label),a=k.A.slugify(this.displayed);-1!==i.indexOf(a)&&e.push(this.options[t])}return e},is_disabled(){return(0,_.A)().is_read_only()},searchable_in_state_changed(){return(0,y.A)().get_form_value(this.field_id)}},watch:{searchable_in_state_changed(){let e=this.searchable_in_state_changed;if(""!==e)for(let t in this.options)if(this.options.hasOwnProperty(t)&&this.options[t].value===e)return void(this.displayed=this.options[t].label)}}};const ot=(0,A.A)(dt,[["render",at]]);var _t=ot,ut=i(3327);const ct={class:"switch-group"},ht=["id","name","placeholder","maxlength","disabled"],pt={class:"input-feedback-wrap"},ft=["innerHTML"];function vt(e,t,i,s,l,r){const d=(0,a.g2)("Bouncer_loading");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",ct,[(0,a.Lk)("div",{onClick:t[0]||(t[0]=e=>l.type=1),class:(0,n.C4)(["switch-label",1===l.type?"active":""])},"EČV",2),(0,a.Lk)("div",{onClick:t[1]||(t[1]=e=>l.type=2),class:(0,n.C4)(["switch-label",2===l.type?"active":""])},"VIN",2)]),(0,a.bo)((0,a.Lk)("input",{id:i.field_id,name:i.field_id,"onUpdate:modelValue":t[2]||(t[2]=e=>r.value=e),onKeydown:t[3]||(t[3]=(...e)=>r.filter_bad_input&&r.filter_bad_input(...e)),onKeyup:t[4]||(t[4]=(0,V.jR)((...e)=>r.search_car&&r.search_car(...e),["enter"])),placeholder:1===l.type?"AB  123CD":"ZFA123456789WERTZ",maxlength:l.max_length,disabled:"loading"===l.status||r.is_disabled,ref:"input_reference",type:"text",class:(0,n.C4)(["form-control input-ecv-vin",2===l.type?"vin":""]),autocomplete:"off"},null,42,ht),[[V.Jo,r.value]]),(0,a.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>r.search_car&&r.search_car(...e)),class:"btn btn-search"}),(0,a.Lk)("div",pt,[(0,a.Lk)("div",{innerHTML:r.spz_feedback,class:(0,n.C4)(["input-feedback",l.status])},null,10,ft),(0,a.bo)((0,a.bF)(d,{size:"small",class:"ps-3"},null,512),[[V.aG,"loading"===l.status]])])],64)}var mt={props:{field_id:String,field_data:Object},components:{Bouncer_loading:g.A},emits:[],data(){return{debug:!1,type:1,status:"ready",min_length:5,spz_length:7,max_length:17,had_spaces:!1,autorun_running:!1,autorun_handle:{},autorun_delay:2e3}},created(){},methods:{filter_bad_input(e){/[a-z0-9]/gi.test(e.key)||e.preventDefault()},format_spz(e){if(this.status="ready",e=k.A.keep_only_letters_and_numbers(e),e=e.toUpperCase(),e.length>this.spz_length?this.type=2:this.type=1,2===this.type||e.length<3)return e;let t=[e.slice(0,2),e.slice(2)];return e=t.join("  "),e},cursor_spz(e){let t=this.$refs.input_reference?.selectionEnd;this.$nextTick(()=>{let i=null!==e.slice(0,t).match(/\s/g);!this.had_spaces&&i?t+=2:this.had_spaces&&!i&&(t-=2),this.$refs.input_reference.setSelectionRange(t,t)})},search_car(){if(this.spaceless_length<this.min_length||"loading"===this.status)return;clearTimeout(this.autorun_handle),this.autorun_running=!1;let e=this.value.replace(/\s/g,"");if(this.status="loading",this.debug)return console.log("run api:",e,structuredClone(this.type),structuredClone(this.status)),void setTimeout(()=>{this.status=0===Math.round(Math.random())?"error":"success",this.$nextTick(()=>{this.$refs.input_reference.focus()})},1e3);Promise.resolve().then(()=>{let t=1===this.type?"spz":"vin";return He.A.car_data_search(t,e)}).then(t=>{if(200===t.status&&0===t.result.data?.length){let t=2===this.type?"spz":"vin";return He.A.car_data_search(t,e)}return Promise.resolve(t)}).then(e=>{if(200===e.status&&0!==e.result.data?.length){let t={};t="object"===typeof e.result.data?.[0]?e.result.data[0]:e.result.data;let i=this.field_data.input_settings?.data_fill?.prefix||"",a=this.field_data.input_settings?.data_fill?.suffix||"";return(0,y.A)().set_multiple_form_values(t,i,a),void(this.status="success")}this.status="error",this.$nextTick(()=>{this.$refs.input_reference.focus()})})}},computed:{is_disabled(){return(0,_.A)().is_read_only()},spz_feedback(){if("error"===this.status)return"Vozidlo sa nenašlo v databáze vozidiel. Zadajte údaje o vozidle nižšie.";if("success"===this.status){let e=1===this.type?"EČV":"VIN";return"Predvyplnené údaje pre vozidlo s "+e+" <strong>"+this.value+"</strong>."}if("loading"===this.status)return"Vyhľadávame vozidlo...";if("ready"===this.status&&1===this.type){if(7===this.spaceless_length)return"Pre vyhľadanie vozidla s EČV <strong>"+this.value+'</strong><span class="hide_on_mobile"> stlačte Enter alebo</span> kliknite na Lupu.';if(0===this.spaceless_length)return"Zadajte EČV alebo VIN číslo vozidla.";let e=1===this.spaceless_length?"znak":this.spaceless_length>1&&this.spaceless_length<5?"znaky":"znakov";return"Zadali ste <strong>"+this.spaceless_length+"</strong> "+e+". EČV má 6 alebo 7 znakov."}return"ready"===this.status&&2===this.type?17===this.spaceless_length?"Pre vyhľadanie vozidla s VIN <strong>"+this.value+'</strong><span class="hide_on_mobile"> stlačte Enter alebo</span> kliknite na Lupu.':"Zadali ste <strong>"+this.spaceless_length+"</strong> znakov. VIN zvykne mať vačšinou 17 znakov.":"Neznáma situácia. "+this.status+" | "+this.type+" | "+this.spaceless_length},value:{get(){let e=(0,y.A)().get_form_value(this.field_id);return e=this.format_spz(e),this.cursor_spz(e),e},set(e){let t=this.$refs.input_reference?.selectionEnd;this.had_spaces=null!==e.slice(0,t).match(/\s/g),(0,y.A)().set_form_value(this.field_id,e.replace(/\s/g,"").toUpperCase())}},spaceless_length(){return this.value.replace(/\s/g,"").length}},watch:{spaceless_length(){if(this.autorun_running||![this.spz_length,this.max_length].includes(this.spaceless_length))return clearTimeout(this.autorun_handle),void(this.autorun_running=!1);this.autorun_running=!0,this.autorun_handle=setTimeout(()=>{this.search_car(),this.autorun_running=!1},this.autorun_delay)}}};const gt=(0,A.A)(mt,[["render",vt]]);var bt=gt,yt={props:{field_id:String,field_data:Object},components:{Checkbox:c.A,File:j,Legal:X,Option:Option,Plaintext:L.A,Radio:P.A,Select:S.A,Text:W.A,Textarea:R,Acceptance:H,Checkbox_icon:ae,Coverage:oe,Datepicker:_e.A,Iban:fe,Multiple:ve.A,Plus_minus:xe,Psc:Ve,Scan_modal:qe,Search:Ye,Select_searchable:_t,Slider:ut.A,Spz:bt},data(){return{type:""}},created(){"text"===this.field_data.type&&"true"===this.field_data.type_settings?.plus_minus?this.type="plus_minus":"checkbox"===this.field_data.type&&void 0!==this.field_data.type_settings?.checkbox_icon&&""!==this.field_data.type_settings?.checkbox_icon?this.type="checkbox_icon":"text"!==this.field_data.type||"scan_modal"!==this.field_data.type_settings?.upload&&"veriface_modal"!==this.field_data.type_settings?.upload?k.A.ends_with(this.field_id,"psc_mesto")?this.type="psc_input":"select"===this.field_data.type&&"multiple"===this.field_data.type_settings?.select_type?this.type="multiple":"select"===this.field_data.type&&(k.A.ends_with(this.field_id,"auto_znacka")||k.A.ends_with(this.field_id,"auto_model")||k.A.ends_with(this.field_id,"auto_vybava")||"searchable"===this.field_data.type_settings.select_type)?this.type="select_searchable":"text"===this.field_data.type&&"iban"===this.field_data.type_settings?.visual_formatting?this.type="iban":this.type=this.field_data.type:this.type="scan_modal"}};const kt=(0,A.A)(yt,[["render",u]]);var wt=kt,At=i(6488);const xt={class:"validation-placeholder validation-message"};function jt(e,t,i,s,l,r){return(0,a.uX)(),(0,a.CE)("div",xt,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.has_error,e=>((0,a.uX)(),(0,a.CE)("span",null,[t[0]||(t[0]=(0,a.Lk)("span",{class:"mark-circle mark-orange"},"!",-1)),(0,a.eW)(" "+(0,n.v_)(e),1)]))),256))])}var zt={props:{has_error:Array},components:{},emits:[],data(){return{}},created(){},methods:{},computed:{},watch:{}};const Ct=(0,A.A)(zt,[["render",jt]]);var Et=Ct,Ot=i(2095);const Tt={key:0,class:"fe_validators"},Xt={class:"mb-0"},Lt={class:"mb-0"};function Pt(e,t,i,s,l,r){return r.allow_validators?((0,a.uX)(),(0,a.CE)("div",Tt,[l.debug?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:0},(0,a.pI)(i.field_data.validators,(e,i)=>((0,a.uX)(),(0,a.CE)("span",null,[(0,a.Lk)("strong",null,(0,n.v_)(e.type),1),(0,a.eW)(" "+(0,n.v_)(e.validation)+" ",1),t[0]||(t[0]=(0,a.Lk)("br",null,null,-1))]))),256)):(0,a.Q3)("",!0),(0,a.Lk)("ul",Xt,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.reports,(e,i)=>((0,a.uX)(),(0,a.CE)("li",Lt,[(0,a.eW)((0,n.v_)(e),1),t[1]||(t[1]=(0,a.Lk)("br",null,null,-1))]))),256))])])):(0,a.Q3)("",!0)}var St=i(7928),Wt={props:{field_id:String,field_data:Object},components:{},emits:[],data(){return{debug:!1,reports:[]}},created(){},methods:{},computed:{allow_validators(){return!0===this.field_data.input_settings?.fe_validators},input_changed(){return this.allow_validators?(0,y.A)().get_form_value(this.field_id):null}},watch:{input_changed(){this.debug&&console.log("running validators for:",structuredClone(this.field_id)),this.reports=[];for(let e in this.field_data.validators){let t=this.field_data.validators[e].type,i=this.field_data.validators[e].validation,a=this.field_data.validators[e].messages;if("Application_Model_Validators_Integer"===t)isNaN(this.input_changed)&&(this.debug&&console.log("didnt pass:","Application_Model_Validators_Integer"),this.reports.push(a));else if("Zend_Validate_Regex"===t){let e=new RegExp(i.substring(1,i.length-1));e.test(this.input_changed)||(this.debug&&console.log("didnt pass:","Zend_Validate_Regex"),this.reports.push(a))}else if("Application_Model_Validators_ValueRevalidation"===t)St.A.revalidation(i)&&(this.debug&&console.log("didnt pass:","Application_Model_Validators_ValueRevalidation"),this.reports.push(a));else if("Application_Model_Validators_FullString"===t){let e=new RegExp(/[^a-zA-Z0-9ľĺĹščćťžýáíéňäúďřŕŔóÓôěĚöÖüÜĽŠČŤŽÝÁÍÉŇÄÚĎŘŮůőŐűŰ+--–\\)(&@§€#\/%?=!:_,.; \r\n\t\s]/u);e.test(this.input_changed)&&(this.debug&&console.log("didnt pass:","Application_Model_Validators_FullString"),this.reports.push(a))}}}}};const Vt=(0,A.A)(Wt,[["render",Pt]]);var It=Vt,Mt={props:{field_id:String,field_data:Object},components:{Input_switcher:wt,Errors:Et,Tooltip:Ot.A,Frontend_validators:It},emits:[],data(){return{}},created(){},methods:{},computed:{inputs(){let e={};if(void 0===this.field_data.elements)e[this.field_id]=this.field_data;else for(let t in this.field_data.elements){if(!this.field_data.elements.hasOwnProperty(t))continue;let i,a;k.A.contains_only_digits(t)?(a=k.A.first_key(this.field_data.elements[t]),i=this.field_data.elements[t][a]):(a=t,i=this.field_data.elements[a]);let s={[a]:i};At.A.visibility_boolean(s)&&(e[a]=i)}return e},has_error(){let e=(0,Te.A)().get_errors(),t=[];for(let i in this.inputs)if(this.inputs.hasOwnProperty(i)&&e.hasOwnProperty(i))for(let a in e[i])e[i].hasOwnProperty(a)&&t.push(e[i][a].replace("not_decimal","nesprávny formát desatinného čísla"));return t},error_class(){return this.zeteo_wrap||0===this.has_error.length?"":"validation-error"},has_validation(){return!this.field_data?.type_settings?.upload&&"legal"!==this.field_data?.type},bootstrap_classes(){return this.zeteo_wrap?"input-block--alt":"d-flex align-items-start align-items-sm-center flex-column"},zeteo_wrap(){return(0,_.A)().is_zeteo_skin()},columns(){if(this.zeteo_wrap&&1===(0,_.A)().current_step()&&void 0===this.field_data.elements&&"plaintext"!==this.field_data.type)return"col-sm-6 col-lg-3";let e="";if(void 0!==this.field_data.block_settings&&null!==this.field_data.block_settings)e=this.field_data.block_settings.size;else{if(void 0===this.field_data.type_settings||null===this.field_data.type_settings)return"col-12";e=this.field_data.type_settings.size}return"full"===e?"col-12":"half"===e?"col-lg-6":"third"===e?"col-lg-4":"col-12"},required(){return""},blank(){return"blank"===this.field_data.type_settings?.design?"input-block-blank":""},hide(){return void 0===this.field_data.elements?this.field_data["data-hide-condition"]:this.field_data["block_hide_condition"]},label_size(){return"fullwidth"===this.field_data.type_settings?.label_size?"input-label-full":"flex-sm-row"},label_style(){return"h1"===this.field_data.type_settings?.plaintext_style?"label-plaintext-h1":"h2"===this.field_data.type_settings?.plaintext_style?"label-plaintext-h2":""},label(){return"checkbox"!==this.field_data.type&&"acceptance"!==this.field_data.type&&"legal"!==this.field_data.type&&("checkbox_collapse"!==this.field_data.block_settings?.block_layout&&"checkbox_text"!==this.field_data.block_settings?.block_layout&&(void 0===this.field_data.elements?this.field_data.label:this.field_data.block_label))},input_block_class(){return"spz"===this.field_data.type?"flex-md-nowrap":void 0===this.field_data.elements?"":"select_text"===this.field_data.block_settings?.block_layout?"input-mixed input-select-text":"checkbox_collapse"===this.field_data.block_settings?.block_layout&&"large"===this.field_data.block_settings?.icon_button_size?"input-mixed input-onoff large_icon-onoff":"checkbox_collapse"===this.field_data.block_settings?.block_layout?"input-mixed input-onoff":"checkbox_text"===this.field_data.block_settings?.block_layout?"input-mixed input-fifty-fifty":"input-mixed"},tooltip(){return this.field_data?.description?this.field_data.description.replace(/\r\n/g,"<br>").replace(/&quot;/g,'"'):!!this.field_data?.block_input_hint&&this.field_data.block_input_hint.replace(/\r\n/g,"<br>").replace(/&quot;/g,'"')}},watch:{}};const Kt=(0,A.A)(Mt,[["render",o]]);var Ft=Kt,Rt={props:{},components:{Wrap:Ft},data(){return{}},methods:{field_id(e){return k.A.first_key(e)},field_data(e){return k.A.first_value(e)}},computed:{compute_active_tab(){return k.A.active_tab()}},watch:{}};const $t=(0,A.A)(Rt,[["render",l]]);var qt=$t},2310:function(e,t,i){i(4114);var a=i(3175),s=i(8700),l=i(5143),n=i(3177);class r{flow_init_session(){let e={action_name:"init",method:"GET",url:(0,s.A)().endpoint_url()+"osmapp/init/"+(0,s.A)().get_flow_id()+"/?"};e.url+=(0,n.A)().agent_code_param();let t=new a.A;return t.prepare_params(e).handle_response().then(e=>(200!==e.status||((0,s.A)().set_session_token(e.result?.data?.session),(0,l.A)().set_workflow_status(e.result?.data?.workflowStatus),(0,l.A)().set_workflow_name(e.result?.data?.workflow)),e)).catch(e=>{throw e})}flow_next_step(e){var t=0;let i={action_name:"nextstep",method:"GET",url:(0,s.A)().endpoint_url()+"osmapp/nextstep/"+(0,s.A)().get_session_token()};var n=[];void 0!==e&&n.push("step="+e),t>0&&n.push("&delay="+1e3*t),n.push("with-session-data=1"),(0,s.A)().is_prod_endpoint()||n.push("debug-info=1"),n.length>0&&(i.url+="/?"+n.join("&"));let r=new a.A;return r.prepare_params(i).handle_response().then(e=>(200!==e.status||((0,l.A)().set_workflow_status(e.result?.data?.workflowStatus),(0,l.A)().set_workflow_name(e.result?.data?.workflow)),e)).catch(e=>{throw e})}flow_status(){let e={action_name:"status",method:"GET",url:(0,s.A)().endpoint_url()+"osmapp/status/"+(0,s.A)().get_session_token()};var t=[];t.push("with-session-data=1"),(0,s.A)().is_prod_endpoint()||t.push("debug-info=1"),t.length>0&&(e.url+="/?"+t.join("&"));let i=new a.A;return i.prepare_params(e).handle_response().then(e=>(200!==e.status||((0,l.A)().set_workflow_status(e.result?.data?.workflowStatus),(0,l.A)().set_workflow_name(e.result?.data?.workflow)),e)).catch(e=>{throw e})}}t.A=new r},6884:function(e,t,i){var a=i(8700),s=i(6343),l=i(3175);class n{identity_scan(e,t,i){let n={action_name:"identity-scan",method:"GET",url:(0,a.A)().endpoint_url()+"online/identity-scan/?"+s.A.add_token_as_parameter()};n.url+="&serviceToken=veriface&scanGroupName="+t+"&identType="+i+"&identNew="+(e?"true":"false");let r=new l.A;return r.prepare_params(n).handle_response().catch(e=>{throw e})}identity_check(e){let t={action_name:"identity-scan-check",method:"GET",url:(0,a.A)().endpoint_url()+"online/identity-scan-check/?"+s.A.add_token_as_parameter()};t.url+="&serviceToken=veriface&scanGroupName="+e;let i=new l.A;return i.prepare_params(t).handle_response().catch(e=>{throw e})}identity_refresh(){let e={action_name:"id-scan/get-scan-groups",method:"GET",url:(0,a.A)().endpoint_url()+"api/online/id-scan/get-scan-groups/?"+s.A.add_token_as_parameter()},t=new l.A;return t.prepare_params(e).handle_response().catch(e=>{throw e})}identity_flow_scan(e,t,i,s){let n={action_name:"identity-scan",method:"GET",url:(0,a.A)().endpoint_url()+"osmapi/identity-scan/"+(0,a.A)().get_session_token()+"/?"};n.url+="serviceToken=veriface&identToken="+t+"&identType="+i+"&action-id="+s+"&identNew="+(e?"true":"false");let r=new l.A;return r.prepare_params(n).handle_response().catch(e=>{throw e})}identity_flow_check(e,t){let i={action_name:"identity-scan-check",method:"GET",url:(0,a.A)().endpoint_url()+"osmapi/identity-scan-check/"+(0,a.A)().get_session_token()+"/?"};i.url+="serviceToken=veriface&identToken="+e+"&action-id="+t;let s=new l.A;return s.prepare_params(i).handle_response().catch(e=>{throw e})}identity_flow_refresh(){let e={action_name:"identity-scan-check",method:"GET",url:(0,a.A)().endpoint_url()+"osmapi/identity-scan-check/"+(0,a.A)().get_session_token()+"/?"};e.url+="serviceToken=veriface";let t=new l.A;return t.prepare_params(e).handle_response().catch(e=>{throw e})}}t.A=new n},7618:function(e,t,i){i(4114);var a=i(6343),s=i(9452),l=i(6460),n=i(3177),r=i(6884),d=i(2310);class o{check_scan_promise(){return new Promise((e,t)=>{let i=this.displayed_scan_inputs_in_current_tab();if(0!==i.length){for(let e=0;e<i.length;e++){let a=this.client_presence_type_check(i[e]);if(null===a)return void t("client presence_type is missing")}Promise.resolve().then(()=>r.A.identity_refresh()).then(e=>{if(200===e.status)return s.A.session_info();t("get-scan-groups failed")}).then(s=>{if(200!==s.status)return void t("sessioninfo failed");let n=s.result.scan_id_status,r=!1;if(!0===n.required&&!1===n.succeeded){for(let e=0;e<i.length;e++){if(e+1>n.count)break;let t=i[e];!0!==n.names[t]&&((0,l.A)().set_one_error(t,"Overenie totožnosti je povinné."),r=!0)}r?(a.A.adjust_view(!0),t("scan required, reject validate")):e()}else e()})}else e()})}displayed_scan_inputs_in_current_tab(){let e=[],t=a.A.active_tab();for(let i in t){let s=a.A.first_value(t[i]),l=a.A.first_key(t[i]);"scan_modal"!==s.type_settings?.upload&&"veriface_modal"!==s.type_settings?.upload||e.push(l)}return e}client_presence_type_check(e){let t=(0,l.A)().find_input_data(e)?.input_settings?.user_presence?.input_token,i=(0,l.A)().find_input_data(e)?.input_settings?.user_presence?.input_values,s=(0,n.A)().get_form_value(t)+"",r="abc";if("string"===typeof t&&"object"===typeof i&&null!==i){if(!Object.keys(i).includes(s))return(0,l.A)().set_one_error(t,"Výber typu klientovej prítomnosti je povinné."),a.A.adjust_view(!0),null;r=i[s]}return r}check_flow_scan_promise(){return new Promise((e,t)=>{let i=this.displayed_scan_inputs_in_current_tab();if(0!==i.length){for(let e=0;e<i.length;e++){let a=this.client_presence_type_check(i[e]);if(null===a)return void t("client presence_type is missing")}Promise.resolve().then(()=>r.A.identity_flow_refresh()).then(e=>{if(200===e.status)return d.A.flow_status();t("osmapi/identity-scan-check failed")}).then(i=>{if(200!==i.status)return void t("status failed");let s=i.result?.data?.workflowStatus?.actions,n=!1;for(let e in s){if("identityScan"!==s[e].function)continue;let t=s[e]?.functionParams?.identToken;"success"!==s[e].state&&((0,l.A)().set_one_error(t,"Overenie totožnosti je povinné."),n=!0)}n?(a.A.adjust_view(!0),t("scan required, reject validate")):e()})}else e()})}}t.A=new o},7928:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4114),core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0__),_store_STATE_params_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3177);class Validator_service{revalidation(e){let t=this.splitter(e);return!this.compare(t)}splitter(e){let t=e.match(/(.*?)\((.*)\)/);if(null===t)return!0;let i=t[1].trim(),a=t[2],s=[],l=0,n="";for(let r in a){let e=a[r];"("===e?l++:")"===e&&l--,","!==e||0!==l?(n+=e,r==a.length-1&&s.push(n)):(s.push(n),n="")}for(let r in s)s[r].indexOf("(")>-1&&(s[r]=this.splitter(s[r]));return{[i]:s}}compare(e){for(let t in e){let i=e[t];for(let e in i)"object"===typeof i[e]&&(i[e]=this.compare(i[e])?"true":"false");if("when"===t){let e=this.go_val(i[0]);return e=e?i[1]:i[2],e=this.go_val(e),e}if("in"===t){let e=this.replace_value(i[0]);delete i[0];let t=i.indexOf(e)>-1;return t}if("logic_and"===t){let e=!0;for(let t in i)if(!1===this.go_val(i[t])){e=!1;break}return e}if("logic_or"===t){let e=!1;for(let t in i)if(!0===this.go_val(i[t])){e=!0;break}return e}return console.log(t,"always pass"),!0}}go_val(string){string=this.replace_value(string);try{return eval(string)}catch(error){return console.log("validators error:",string),!1}}replace_value(e){e=e.replace(/=>/g,">="),e=e.replace(/=</g,"<="),e=e.replace(/=/g,"=="),e=e.replace(/>==/g,">="),e=e.replace(/<==/g,"<="),e=e.replace(/<>/g,"!=");let t=e.match(/\$[a-z|_|0-9]*/g);if(null===t)return e;for(let i in t){let a=t[i].replace("$",""),s=(0,_store_STATE_params_js__WEBPACK_IMPORTED_MODULE_1__.A)().get_user_input(a)||"";(isNaN(s)||""===s)&&(s="'"+s+"'"),e=e.replace(t[i],s)}return e}}__webpack_exports__.A=new Validator_service}}]);