"use strict";(self["webpackChunkosmapp_webpack_3x47x"]=self["webpackChunkosmapp_webpack_3x47x"]||[]).push([[9781],{880:function(t,e,a){var l=a(8700),o=a(6343),s=a(3175);class r{session_remap(t){let e={action_name:"session-remap",method:"GET",url:(0,l.A)().endpoint_url()+"online/session-remap/?destGroup="+t+"&"+o.A.add_token_as_parameter()},a=new s.A;return a.prepare_params(e).handle_response().catch(t=>{throw t})}}e.A=new r},4326:function(t,e,a){var l=a(8700),o=a(6343),s=a(3175),r=a(3177);class i{get_calculate(t,e,a){let r={action_name:"calculate_step2",method:"POST",url:(0,l.A)().endpoint_url()+"online/calculate/?id="+t+"&json=1&period="+a+o.A.add_token_as_parameter(),body:e},i=new s.A;return i.prepare_params(r).handle_response().then(e=>408===e.status?(console.log("#"+t+" has 408, going for results request"),this.repeat_results()):e).catch(t=>{throw t})}check_calculate(){let t={action_name:"calculate_step4",method:"POST",url:(0,l.A)().endpoint_url()+"online/calculate/?"+o.A.add_token_as_parameter()+"&json=1",body:null};t.url+="&id="+(0,r.A)().get_selected_product().product_id+"&period="+(0,r.A)().get_selected_product().period;let e=new s.A;return e.prepare_params(t).handle_response().then(async t=>408===t.status?(console.log("calculate has 408 timeout, wait 1 minute and run results api"),await o.A.sleep(60),this.repeat_results()):t).catch(t=>{throw t})}repeat_results(){let t={action_name:"results",method:"GET",url:(0,l.A)().endpoint_url()+"online/results/?"+o.A.add_token_as_parameter()},e=new s.A;return e.prepare_params(t).handle_response().catch(t=>{throw t})}}e.A=new i},8856:function(t,e,a){var l=a(8700),o=a(6343),s=a(3175),r=a(3177);class i{get_it(t){!1===t&&(t=(0,r.A)().get_selected_product().next_contract);let e={action_name:"gethtml",method:"POST",url:(0,l.A)().endpoint_url()+"online/gethtml/?id="+t+o.A.add_token_as_parameter()},a=new s.A;return a.prepare_params(e).handle_response().catch(t=>{throw t})}get_json_api(t){let e={action_name:"getjson",method:"POST",url:(0,l.A)().endpoint_url()+"online/getjson/?id="+t+o.A.add_token_as_parameter()},a=new s.A;return a.prepare_params(e).handle_response().catch(t=>{throw t})}}e.A=new i},9101:function(t,e,a){a.r(e),a.d(e,{default:function(){return Je}});var l=a(641),o=a(3751);const s={"data-cy":"calc_results"},r={class:"results-action-area"},i={class:"row g-2"},_={style:{position:"relative"}},d={key:0,"data-cy":"product_list"};function n(t,e,a,n,c,p){const u=(0,l.g2)("Product_title"),h=(0,l.g2)("Summary"),b=(0,l.g2)("Global_form"),m=(0,l.g2)("Global_tabs"),g=(0,l.g2)("Price_form"),f=(0,l.g2)("Bouncer_loading"),v=(0,l.g2)("Product_template");return(0,l.uX)(),(0,l.CE)("section",s,[(0,l.bF)(u,{loaded:c.loaded,total:c.total,disable_email_pdf:c.disable_email_pdf,disable_offer:c.disable_offer},null,8,["loaded","total","disable_email_pdf","disable_offer"]),(0,l.Lk)("div",r,[(0,l.bF)(h,{user_data:p.user_data},null,8,["user_data"]),(0,l.Lk)("div",i,[(0,l.bF)(b,{global_disabled:c.global_disabled,global_inputs:c.global_inputs,global_errors:c.global_errors,has_tab:c.has_tab,onValidate_global_changed:p.validate_global_changed},null,8,["global_disabled","global_inputs","global_errors","has_tab","onValidate_global_changed"]),c.ready_filters?((0,l.uX)(),(0,l.Wv)(m,{key:0,got_products:c.got_products,nice_filter_label:c.nice_filter_label,filtered_array:p.filtered_array,options_inputs:c.options_inputs,disabled_from_calculate:c.disabled_from_calculate,global_disabled:c.global_disabled,product_rates:c.product_rates,onCalculate_all_products:p.calculate_all_products,onFilters_run_own_validate:p.filters_run_own_validate,onOptions_value_changed:p.options_value_changed,onShorten_global:e[0]||(e[0]=t=>c.has_tab=!0)},null,8,["got_products","nice_filter_label","filtered_array","options_inputs","disabled_from_calculate","global_disabled","product_rates","onCalculate_all_products","onFilters_run_own_validate","onOptions_value_changed"])):(0,l.Q3)("",!0)]),c.ready_price?((0,l.uX)(),(0,l.Wv)(g,{key:0,global_disabled:c.global_disabled,price_inputs:c.price_inputs,global_errors:c.global_errors,onValidate_global_changed:p.validate_global_changed},null,8,["global_disabled","price_inputs","global_errors","onValidate_global_changed"])):(0,l.Q3)("",!0)]),(0,l.bo)((0,l.Lk)("div",_,[(0,l.bF)(f,{size:"small",style:{position:"absolute",top:"-28px",left:"50%",transform:"translateX(-50%)"}})],512),[[o.aG,c.global_disabled]]),e[1]||(e[1]=(0,l.Lk)("span",{class:"product_list_scroll_anchor"},null,-1)),c.valid_global_show_products?((0,l.uX)(),(0,l.CE)("div",d,[(0,l.bF)(o.F,{name:"product_shuffle"},{default:(0,l.k6)(()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(p.only_displayed_products,t=>((0,l.uX)(),(0,l.Wv)(v,{key:t,product_id:t,product_name:c.got_products[t],response:c.raw_responses[t],being_calculated:c.being_calculated,being_selected:c.being_selected,delegate_product_select:c.delegate_product_select,solid_product_parts:c.solid_product_parts,onRecalculate_product:p.recalculate_product,onSelect_running:p.select_running},null,8,["product_id","product_name","response","being_calculated","being_selected","delegate_product_select","solid_product_parts","onRecalculate_product","onSelect_running"]))),128))]),_:1})])):(0,l.Q3)("",!0)])}a(4114),a(4979),a(1678);var c=a(33);const p=["id"],u={class:"col-lg-10 pr_area_info pb-2 pb-lg-1 position-relative"},h={class:"pr_ribbon"},b={class:"pr_top"},m={class:"row g-0"},g={class:"col-lg-2"},f={class:"pr_box_logo text-center mb-2 mb-lg-0"},v=["src"],k={class:"col-lg-4"},y={class:"pr_box_name text-center text-lg-start"},x=["id"],A={key:0,class:"pr_rating"},w={class:"pr_select"},C={key:0},L={class:"detail-compare text-nowrap"},X={class:"pr_detail"},E={class:"col-lg-6"},j={class:"pr_box_overview"},O=["innerHTML"],F={class:"pr_bottom"},P={class:"row g-0"},G={class:"col-lg-6"},W={class:"pr_box_included"},T={class:"col-lg-6"},I={class:"pr_box_options"},Q={key:5},$={class:"text-center my-3"},S=["id"],z={class:"col-lg-2"},B={class:"pr_area_price d-flex flex-column flex-sm-row flex-lg-column text-center h-100"},V={class:"pr_discount"},N={key:0,class:"before_discount"},K={key:1,class:"discount_tag"},R={class:"amount"},q={class:"text-default"},U={class:"period"},H={class:"pr_price"},M={class:"pr_cta"},D={key:0,class:"btn btn-inactive w-100"},Z={key:1,class:"btn btn-inactive w-100"},J={key:2,class:"btn btn-inactive w-100"},Y=["disabled"],tt=["disabled"],et=["disabled"],at=["disabled"],lt={key:7,class:"btn btn-inactive w-100"},ot=["disabled"],st={key:9};function rt(t,e,a,s,r,i){const _=(0,l.g2)("Select"),d=(0,l.g2)("Tooltip"),n=(0,l.g2)("Checkbox"),rt=(0,l.g2)("Multiple"),it=(0,l.g2)("Datepicker"),_t=(0,l.g2)("Plaintext"),dt=(0,l.g2)("Bouncer_loading");return(0,l.uX)(),(0,l.CE)("div",{id:"product_"+a.product_id,class:(0,c.C4)([i.show_loading_animation?"the_form_is_disabled":"","row product g-0"]),"data-cy":"product"},[(0,l.Lk)("div",u,[(0,l.bo)((0,l.Lk)("div",h,[...e[9]||(e[9]=[(0,l.Lk)("span",null,"NÁŠ TIP",-1)])],512),[[o.aG,"1"===r.p_data.product.promo&&"2"===r.p_data.product.promo]]),(0,l.Lk)("div",b,[(0,l.Lk)("div",m,[(0,l.Lk)("div",g,[(0,l.Lk)("div",f,[(0,l.Lk)("img",{src:r.p_data.logo},null,8,v)])]),(0,l.Lk)("div",k,[(0,l.Lk)("div",y,[(0,l.Lk)("h4",{id:"#"+a.product_id},(0,c.v_)(a.product_name),9,x),i.not_zeteo_product?(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",A,[((0,l.uX)(),(0,l.CE)(l.FK,null,(0,l.pI)(5,t=>(0,l.Lk)("span",{class:(0,c.C4)([t>r.p_data.product.stars?"i_star_empty":"i_star"])},null,2)),64))],512)),[[o.aG,r.p_data.product.stars>0]]):(0,l.Q3)("",!0),(0,l.bo)((0,l.Lk)("div",w,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(r.p_data.spoluucast_krytie,(t,e)=>((0,l.uX)(),(0,l.Wv)(_,{field_id:e,field_data:t,emit_name:"recalculate_product",onRecalculate_product:i.recalculate_product},null,8,["field_id","field_data","onRecalculate_product"]))),256)),r.p_data.product.spoluucast_text&&!r.p_data.spoluucast_krytie?((0,l.uX)(),(0,l.CE)("p",C,(0,c.v_)(r.p_data.product.spoluucast_text),1)):(0,l.Q3)("",!0)],512),[[o.aG,r.p_data.spoluucast_krytie||r.p_data.product.spoluucast_text]]),(0,l.Lk)("div",L,[(0,l.bo)((0,l.Lk)("span",X,[(0,l.bo)((0,l.Lk)("button",{onClick:e[0]||(e[0]=(...t)=>i.open_product_detail&&i.open_product_detail(...t)),class:"btn-text i_anchor"},[...e[10]||(e[10]=[(0,l.Lk)("span",{class:"i_detail"},null,-1),(0,l.eW)(" info o produkte ",-1)])],512),[[o.aG,"2"===r.p_data.product.detail_pdf]])],512),[[o.aG,a.solid_product_parts]])])])]),e[11]||(e[11]=(0,l.Lk)("hr",{class:"pr_divider d-block d-lg-none"},null,-1)),(0,l.Lk)("div",E,[(0,l.bo)((0,l.Lk)("div",j,[(0,l.Lk)("ul",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(r.p_data.icons,t=>((0,l.uX)(),(0,l.CE)("li",{class:(0,c.C4)(t.class)},[(0,l.Lk)("span",{innerHTML:t.title,class:"bold_move_to_side"},null,8,O),(0,l.bF)(d,{tooltip_text:t.tooltip,tooltip_type:"1"===t.ttype?"cost_info":"cost"},null,8,["tooltip_text","tooltip_type"])],2))),256))])],512),[[o.aG,a.solid_product_parts]])])])]),e[15]||(e[15]=(0,l.Lk)("hr",{class:"pr_divider"},null,-1)),(0,l.Lk)("div",F,[(0,l.Lk)("div",P,[(0,l.Lk)("div",G,[(0,l.Lk)("div",W,[(0,l.Lk)("ul",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(r.p_data.benefits,t=>((0,l.uX)(),(0,l.CE)("li",{class:(0,c.C4)(t.class)},(0,c.v_)(t.title),3))),256))])])]),e[13]||(e[13]=(0,l.Lk)("hr",{class:"pr_divider d-block d-lg-none"},null,-1)),(0,l.Lk)("div",T,[(0,l.Lk)("div",I,[(0,l.Lk)("ul",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(r.p_data.card_inputs,(t,a)=>((0,l.uX)(),(0,l.CE)("li",null,[(0,l.Lk)("div",{class:(0,c.C4)(r.validation_highlight.error&&r.validation_highlight.input_name===a?"product_highlight":"")},["checkbox"===t.type?((0,l.uX)(),(0,l.Wv)(n,{key:0,field_id:a,field_data:t,emit_name:"recalculate_product",onRecalculate_product:i.recalculate_product},null,8,["field_id","field_data","onRecalculate_product"])):"select"===t.type&&"multiple"!==t.type_settings?.select_type?((0,l.uX)(),(0,l.Wv)(_,{key:1,field_id:a,field_data:t,emit_name:"recalculate_product",onRecalculate_product:i.recalculate_product},null,8,["field_id","field_data","onRecalculate_product"])):"select"===t.type&&"multiple"===t.type_settings?.select_type?((0,l.uX)(),(0,l.Wv)(rt,{key:2,field_id:a,field_data:t,emit_name:"recalculate_product",onRecalculate_product:i.recalculate_product},null,8,["field_id","field_data","onRecalculate_product"])):"date"===t.type?((0,l.uX)(),(0,l.Wv)(it,{key:3,field_id:a,field_data:t,emit_name:"recalculate_product",onRecalculate_product:i.recalculate_product},null,8,["field_id","field_data","onRecalculate_product"])):"plaintext"===t.type?((0,l.uX)(),(0,l.Wv)(_t,{key:4,field_id:a,field_data:t,in_product:!0},null,8,["field_id","field_data"])):((0,l.uX)(),(0,l.CE)("p",Q,[(0,l.Lk)("strong",null,(0,c.v_)(a),1),e[12]||(e[12]=(0,l.eW)(" unsupported type",-1))]))],2)]))),256))]),(0,l.Lk)("div",$,[r.p_data.extended_opener?((0,l.uX)(!0),(0,l.CE)(l.FK,{key:0},(0,l.pI)(r.p_data.extended_opener,(t,a)=>((0,l.uX)(),(0,l.CE)("button",{id:a,onClick:e[1]||(e[1]=(...t)=>i.open_extended&&i.open_extended(...t)),class:(0,c.C4)(["btn-text i_anchor",r.p_data.extended_errors?"text-accent":""])},[(0,l.Lk)("span",{class:(0,c.C4)(["i_settings",r.p_data.extended_errors?"i_settings_error":""])},null,2),(0,l.eW)(" "+(0,c.v_)(t.label)+(0,c.v_)(r.p_data.extended_errors?" - CHYBA!":""),1)],10,S))),256)):(0,l.Q3)("",!0)])])])]),r.p_data.product.crossell_text?((0,l.uX)(),(0,l.CE)("div",{key:0,class:(0,c.C4)(["pr_bundle",r.validation_highlight.error?"product_highlight":""])},[e[14]||(e[14]=(0,l.Lk)("span",{class:"bundle_img"},null,-1)),(0,l.Lk)("p",null,(0,c.v_)(r.p_data.product.crossell_text),1),r.p_data.product.crossell_cta&&"2"===r.p_data.product.detail_pdf?((0,l.uX)(),(0,l.CE)("span",{key:0,onClick:e[2]||(e[2]=(...t)=>i.open_product_detail&&i.open_product_detail(...t)),class:"bundle_cta"},(0,c.v_)(r.p_data.product.crossell_cta),1)):(0,l.Q3)("",!0)],2)):(0,l.Q3)("",!0)])]),(0,l.Lk)("div",z,[(0,l.Lk)("div",B,[(0,l.bo)((0,l.Lk)("div",V,[r.p_data.price.base?((0,l.uX)(),(0,l.CE)("span",N,(0,c.v_)(r.p_data.price.base)+"€ ",1)):(0,l.Q3)("",!0),r.p_data.price.discount?((0,l.uX)(),(0,l.CE)("span",K,(0,c.v_)(r.p_data.price.discount),1)):(0,l.Q3)("",!0)],512),[[o.aG,a.solid_product_parts]]),(0,l.bo)((0,l.Lk)("div",{onClick:e[3]||(e[3]=(...t)=>i.get_price_ws_details&&i.get_price_ws_details(...t)),class:(0,c.C4)(["pr_price",i.dont_allow_limity?"":"price_has_details"])},[(0,l.Lk)("span",R,(0,c.v_)(r.p_data.price.for_period),1),(0,l.Lk)("span",q,(0,c.v_)(r.p_data.price.currency),1),(0,l.Lk)("span",U,(0,c.v_)(r.p_data.price.period_label),1)],2),[[o.aG,!i.show_loading_animation&&r.p_data.price.for_period&&a.solid_product_parts]]),(0,l.bo)((0,l.Lk)("div",H,[(0,l.bF)(dt)],512),[[o.aG,i.show_loading_animation]]),(0,l.bo)((0,l.Lk)("div",M,[a.solid_product_parts?r.p_data.error.errors?((0,l.uX)(),(0,l.CE)("span",Z,[(0,l.Lk)("span",{class:(0,c.C4)(r.p_data.error.alt_text?"viacinfo":"")},(0,c.v_)(r.p_data.error.alt_text?"VIAC INFO":"Nedá sa poistiť"),3),(0,l.bF)(d,{tooltip_text:r.p_data.error.errors,tooltip_type:"info"},null,8,["tooltip_text"])])):null!==r.p_data.extended_errors?((0,l.uX)(),(0,l.CE)("span",J,[(0,l.Lk)("span",{class:(0,c.C4)(r.p_data.error.alt_text?"viacinfo":"")}," Treba upraviť ",2),(0,l.bF)(d,{tooltip_text:i.print_ex_errors,tooltip_type:"info"},null,8,["tooltip_text"])])):"6"===r.p_data.button.show?((0,l.uX)(),(0,l.CE)("button",{key:3,onClick:e[4]||(e[4]=(...t)=>i.open_lead_contact&&i.open_lead_contact(...t)),disabled:a.being_selected,class:"btn btn-xlg btn-right btn-accent w-100"}," Vybrať ",8,Y)):"5"===r.p_data.button.show?((0,l.uX)(),(0,l.CE)("button",{key:4,onClick:e[5]||(e[5]=(...t)=>i.open_specify&&i.open_specify(...t)),disabled:a.being_selected,class:"btn btn-xlg btn-right btn-accent w-100"}," Vybrať ",8,tt)):"4"===r.p_data.button.show?((0,l.uX)(),(0,l.CE)("button",{key:5,onClick:e[6]||(e[6]=(...t)=>i.validate_then_select&&i.validate_then_select(...t)),disabled:a.being_selected,class:"btn btn-xlg btn-right btn-accent w-100"},(0,c.v_)(i.not_zeteo_product?"Vybrať":"Uzatvoriť"),9,et)):"3"===r.p_data.button.show?((0,l.uX)(),(0,l.CE)("button",{key:6,onClick:e[7]||(e[7]=(...t)=>i.redirect_to_product&&i.redirect_to_product(...t)),disabled:a.being_selected,class:"btn btn-xlg btn-right btn-accent w-100"},(0,c.v_)(i.not_zeteo_product?"Vybrať":"Uzatvoriť"),9,at)):"2"===r.p_data.button.show?((0,l.uX)(),(0,l.CE)("span",lt,[(0,l.Lk)("span",{class:(0,c.C4)(r.p_data.error.alt_text?"viacinfo":"")},(0,c.v_)(r.p_data.error.alt_text?"VIAC INFO":"Nedá sa poistiť"),3),(0,l.bF)(d,{tooltip_text:r.p_data.error.info,tooltip_type:"info"},null,8,["tooltip_text"])])):"1"===r.p_data.button.show?((0,l.uX)(),(0,l.CE)("button",{key:8,onClick:e[8]||(e[8]=(...t)=>i.select_this_product&&i.select_this_product(...t)),disabled:a.being_selected,class:"btn btn-xlg btn-right btn-accent w-100"},(0,c.v_)(i.not_zeteo_product?"Vybrať":"Uzatvoriť"),9,ot)):(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("span",D,[(0,l.Lk)("span",{class:(0,c.C4)(r.p_data.error.alt_text?"viacinfo":"")}," Treba prepočítať ",2),(0,l.bF)(d,{tooltip_text:"Zmenili sa hodnoty vo formulári 'vlastnosti' produktov. Kliknite na tlačidlo 'Prepočítať zmeny' aby sme získali správne údaje o produktoch.",tooltip_type:"info"})])),"1"===r.p_data.button.show&&r.p_data.product.warning&&null===r.p_data.extended_errors&&!r.p_data.error.errors?((0,l.uX)(),(0,l.CE)("div",st,[(0,l.bF)(d,{tooltip_text:r.p_data.product.warning,tooltip_type:"warning"},null,8,["tooltip_text"])])):(0,l.Q3)("",!0)],512),[[o.aG,!i.show_loading_animation]])])])],10,p)}var it=a(8700),_t=a(6343),dt=a(3175),nt=a(3177);class ct{get_product_list(){let t={action_name:"getproducts",method:"GET",url:(0,it.A)().endpoint_url()+"online/getproducts/"+(0,it.A)().product_group_id()+"/?"+_t.A.add_token_as_parameter()},e=new dt.A;return e.prepare_params(t).handle_response().catch(t=>{throw t})}select_product(){let t={action_name:"productselect",method:"GET",url:(0,it.A)().endpoint_url()+"online/productselect/"+(0,nt.A)().get_selected_product().product_id+"/?"+_t.A.add_token_as_parameter()};t.url+="&"+_t.A.serialize_object((0,nt.A)().get_selected_product());let e=new dt.A;return e.prepare_params(t).handle_response().catch(t=>{throw t})}}var pt=new ct,ut=a(6039),ht=a(1602),bt=a(3358),mt=a(4211),gt=a(43),ft=a(4871),vt=a(2873),kt=a(55),yt=a(9452),xt=(a(8856),a(9841)),At=a(2050),wt=a(3886),Ct={props:{product_id:String,product_name:String,response:Object,being_calculated:Array,being_selected:Boolean,delegate_product_select:Number,solid_product_parts:Boolean},components:{Checkbox:ht.A,Select:bt.A,Multiple:mt.A,Datepicker:gt.A,Plaintext:ft.A,Bouncer_loading:kt.A,Tooltip:xt.A},emits:["recalculate_product","select_running"],data(){return{loading:!0,validation_highlight:{error:!1,input_name:""},p_data:{logo:"",error:{errors:"",alt_text:!1,info:""},button:{show:"0",next_form:"",next_contract:"",next_redirect:"",validation_codition_old:"",validation_codition_new:"",filter_price_inputs:null,blocker_template:"0"},price:{for_period:"",currency:"",period_label:"",base:"",discount:""},product:{promo:"",stars:0,spoluucast_text:"",detail_pdf:"",detail_template:"",crossell_text:"",crossell_cta:"",warning:"",limity:"0"},icons:[],benefits:[{title:"",class:""}],spoluucast_krytie:!1,card_inputs:!1,calc_documents:{},extended_inputs:null,extended_errors:null,extended_opener:!1}}},created(){this.asign_values()},methods:{asign_values(){if("object"!==typeof this.response)return void Object.assign(this.$data,this.$options.data());let t=this.response.result[this.product_id].result,e=ut.A.find_period(this.response);this.p_data={logo:t?.head?.logo?.comment,period:e,error:{errors:ut.A.error_tooltip(t),alt_text:ut.A.check_alt_text(),info:ut.A.info_tooltip(t)},price:{for_period:ut.A.price_for_period(t,e),currency:t?.result?.currency?.result||"€",period_label:ut.A.label_for_period(t,e),base:t?.result?.base?.result,discount:t?.result?.discount?.result},button:{show:t?.next?.next?.result,next_form:t?.next?.next_form?.result,next_contract:t?.next?.next_contract_html?.result,next_redirect:t?.next?.next_redirect?.result,validation_codition_old:t?.next?.next?.comment,validation_codition_new:t?.next?.next_validation?.result,filter_price_inputs:t?.next?.next_global?.result||null,blocker_template:t?.next?.next_form_block?.result||"0"},product:{promo:t?.product?.promo?.result,stars:parseInt(t?.product?.stars?.result,10),spoluucast_text:t?.product?.spoluucast?.formula_name,detail_pdf:t?.product?.detail?.result,detail_template:t?.product?.detail?.comment,crossell_text:ut.A.crossell_text(t?.product?.crossell),crossell_cta:ut.A.crossell_cta(t?.product?.crossell),warning:t?.result?.warning?.result,limity:t?.product?.limity?.result||"0"},icons:ut.A.sort_icons(t?.icon),benefits:ut.A.sort_benefits(t?.benefit),spoluucast_krytie:ut.A.product_form_formatter(t?.results_form?.comment,"spoluucast"),card_inputs:ut.A.product_form_formatter(t?.results_form?.comment,"product"),calc_documents:ut.A.format_calculate_docs(this.response.result[this.product_id].documents),extended_inputs:ut.A.extended_form_formatter(t?.results_form_v2?.comment),extended_errors:ut.A.flatten_extended_errors(this.response,t?.results_form?.comment),extended_opener:ut.A.product_form_formatter(t?.results_form?.comment,"extended")},this.loading=!1,this.check_session_blocker()},select_this_product(){(0,it.A)().is_read_only()?(0,it.A)().change_step(3):(this.loading=!0,this.$emit("select_running",!0),(0,nt.A)().set_selected_product(this.product_id,this.p_data.button.next_form,this.p_data.button.next_contract,this.p_data.period,this.product_name,this.p_data.price.for_period),pt.select_product().then(t=>{if(200!==t.status||"success"!==t.result.response)return this.loading=!1,void this.$emit("select_running",!1);(0,it.A)().change_step(3)}))},redirect_to_product(){this.p_data.button.next_redirect?((0,nt.A)().set_selected_product(this.product_id,this.p_data.button.next_form,this.p_data.button.next_contract,this.p_data.period,this.product_name,this.p_data.price.for_period),At.A.send_event("product_redirect"),window.open(this.p_data.button.next_redirect,"_blank").focus()):console.log(this.product_id+" next_redirect is undefined")},open_product_detail(){(0,nt.A)().set_selected_product(this.product_id,null,null,null,null,null),(0,vt.A)().store_modal_data({product_name:this.product_name,detail_template:this.p_data.product.detail_template}),(0,vt.A)().open_it("Product_detail")},open_extended(){(0,vt.A)().store_modal_data({extended_inputs:this.p_data.extended_inputs,extended_errors:this.p_data.extended_errors,product_name:this.product_name,product_id:this.product_id,period:this.p_data.period}),(0,vt.A)().open_it("Extended_product_settings")},open_specify(){if((0,nt.A)().capable_agent()&&"lukas_local"===(0,it.A)().get_backend_type())return console.log("skips price modal"),void this.select_this_product();(0,vt.A)().store_modal_data({product_id:this.product_id,price_inputs:{},price_errors:{},filter_price_inputs:this.p_data.button.filter_price_inputs}),(0,vt.A)().open_it("Specify_product_price")},open_lead_contact(){(0,vt.A)().open_it("Lead_contact")},recalculate_product(){this.$emit("recalculate_product",this.product_id)},get_price_ws_details(){if(!this.dont_allow_limity)if(this.loading=!0,"1"===this.p_data.product.limity)yt.A.set_data({product_template_identifier:this.product_id}).then(()=>{(0,vt.A)().open_it("Product_ws_details"),this.loading=!1});else if("2"===this.p_data.product.limity)for(let t in this.p_data.calc_documents)wt.A.get_session_document(this.p_data.calc_documents[t].id).then(e=>{200===e.status?(_t.A.downloadBase64(this.p_data.calc_documents[t].name,e.result.content),this.loading=!1):this.loading=!1})},validate_then_select(){let t=structuredClone(this.p_data.button.validation_codition_old);t||(t=structuredClone(this.p_data.button.validation_codition_new)),this.validation_highlight=ut.A.validate_product(t),this.validation_highlight.error||this.select_this_product(),setTimeout(()=>{this.validation_highlight.error=!0},0),setTimeout(()=>{this.validation_highlight.error=!1},500),setTimeout(()=>{this.validation_highlight.error=!0},1e3),setTimeout(()=>{this.validation_highlight.error=!1},1500),setTimeout(()=>{this.validation_highlight.error=!0},2e3),setTimeout(()=>{this.validation_highlight.error=!1},2500)},check_session_blocker(){"string"===typeof this.p_data.button.blocker_template&&"0"!==this.p_data.button.blocker_template&&((0,vt.A)().store_modal_data({blocker_template:this.p_data.button.blocker_template}),(0,vt.A)().open_it("Blocker_modal"))}},computed:{show_loading_animation(){let t=this.being_calculated.indexOf(this.product_id);return this.being_calculated[t]||this.loading},dont_allow_limity(){return this.p_data.error.errors||!["1","2"].includes(this.p_data.product.limity)},not_zeteo_product(){return!(0,it.A)().is_zeteo_skin()},print_ex_errors(){let t="Nastala chyba v Individuálnych nastaveniach. <br> Otvorte prosím Individálne nastavenia a upravte zvýraznené hodnoty <br><br>";for(let e in this.p_data.extended_errors){t+="<br><b>"+e+": </b><br>";for(let a in this.p_data.extended_errors[e])t+=this.p_data.extended_errors[e][a]+"<br>"}return t}},watch:{response(){this.asign_values()},delegate_product_select(){this.delegate_product_select===this.product_id&&this.select_this_product()}}},Lt=a(6262);const Xt=(0,Lt.A)(Ct,[["render",rt]]);var Et=Xt;const jt={class:"calc_title_products flex-column flex-lg-row row-gap-3 column-gap-1 justify-content-center justify-content-lg-between flex-wrap flex-lg-nowrap","data-cy":"title"},Ot={key:0},Ft={key:1},Pt=["title"],Gt={class:"results_deliver flex-wrap flex-sm-nowrap justify-content-center","data-cy":"results_delivery"},Wt={key:1,class:"i_download"},Tt={key:1,class:"i_prejst-na"};function It(t,e,a,o,s,r){const i=(0,l.g2)("Bouncer_loading");return(0,l.uX)(),(0,l.CE)("div",jt,[0===a.loaded?((0,l.uX)(),(0,l.CE)("h2",Ot," Hľadáme produkty... ")):((0,l.uX)(),(0,l.CE)("h2",Ft,[e[3]||(e[3]=(0,l.eW)(" Našli sme ",-1)),(0,l.Lk)("span",{title:"z "+a.total+" prepočítavaných",class:"text-accent"},(0,c.v_)(r.products_found),9,Pt)])),(0,l.Lk)("div",Gt,[r.allow_email_modal&&!a.disable_email_pdf?((0,l.uX)(),(0,l.CE)("button",{key:0,onClick:e[0]||(e[0]=(...t)=>r.open_email_modal&&r.open_email_modal(...t)),class:"btn-text i_anchor"},[...e[4]||(e[4]=[(0,l.Lk)("span",{class:"i_email"},null,-1),(0,l.eW)("poslať e-mailom ",-1)])])):(0,l.Q3)("",!0),a.disable_offer?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("button",{key:1,onClick:e[1]||(e[1]=(...t)=>r.download_pdf&&r.download_pdf(...t)),class:"btn-text i_anchor"},[s.downloading_pdf?((0,l.uX)(),(0,l.Wv)(i,{key:0,size:"small"})):((0,l.uX)(),(0,l.CE)("span",Wt)),e[5]||(e[5]=(0,l.eW)("stiahnuť pdf ",-1))])),r.show_remap?((0,l.uX)(),(0,l.CE)("button",{key:2,onClick:e[2]||(e[2]=(...t)=>r.go_remap&&r.go_remap(...t)),class:"btn-text i_anchor"},[s.remap_loading?((0,l.uX)(),(0,l.Wv)(i,{key:0,size:"small"})):((0,l.uX)(),(0,l.CE)("span",Tt)),(0,l.eW)(" "+(0,c.v_)(r.remap_label),1)])):(0,l.Q3)("",!0)])])}a(3110);var Qt=a(9819);class $t{download_global_pdf(){let t={action_name:"getpdf",method:"POST",url:(0,it.A)().endpoint_url()+"online/getpdf/?&id="+Qt.A.group_offer()+_t.A.add_token_as_parameter()},e=new dt.A;return e.prepare_params(t).handle_response().catch(t=>{throw t})}}var St=new $t,zt=a(880),Bt={props:{loaded:Number,total:Number,disable_email_pdf:Boolean,disable_offer:Boolean},components:{Bouncer_loading:kt.A},data(){return{downloading_pdf:!1,remap_loading:!1,remap_error:""}},created(){},methods:{download_pdf(){this.downloading_pdf||(this.downloading_pdf=!0,St.download_global_pdf().then(t=>{this.downloading_pdf=!1,200===t.status&&_t.A.downloadBase64("Ponuka.pdf",t.result.pdf)}))},open_email_modal(){(0,vt.A)().open_it("Email_offer")},go_remap(){if(this.remap_loading)return;let t=1===this.group?2:2===this.group?1:0;0!==t?(this.remap_loading=!0,zt.A.session_remap(t).then(e=>{if(200!==e.status)return this.remap_error=JSON.stringify(e.result.message),void setTimeout(()=>{this.remap_error="",this.remap_loading=!1},4e3);_t.A.open_remap("new",t,e.result?.new_token),this.remap_loading=!1})):console.log("remap should only work in groups 1 and 2",this.group)}},computed:{products_found(){return 1===this.loaded?this.loaded+" produkt":this.loaded>1&&this.loaded<5?this.loaded+" produkty":this.loaded+" produktov"},allow_email_modal(){return 4!==this.receiver},step(){return(0,it.A)().current_step()},group(){return(0,it.A)().product_group_id()},receiver(){return(0,nt.A)().get_receiver()},show_remap(){return[1,2].includes(this.group)&&[2].includes(this.step)&&[1,2,4,5].includes(this.receiver)},remap_label(){return this.remap_error?this.remap_error:this.remap_loading?"Načítavam poistenie...":1===this.group?"Prejsť na havarijné poistenie":"Prejsť na PZP"}}};const Vt=(0,Lt.A)(Bt,[["render",It]]);var Nt=Vt;const Kt={class:"d-flex align-items-stretch form-summary","data-cy":"summary"},Rt={class:"w-100 data_summary"},qt={class:"d-flex flex-shrink-1 data_edit"};function Ut(t,e,a,o,s,r){return(0,l.uX)(),(0,l.CE)("div",Kt,[(0,l.Lk)("div",Rt,[e[1]||(e[1]=(0,l.Lk)("strong",null,"Vaše údaje:",-1)),(0,l.eW)(" "+(0,c.v_)(a.user_data),1)]),(0,l.Lk)("div",qt,[(0,l.Lk)("button",{onClick:e[0]||(e[0]=(...t)=>r.go_back&&r.go_back(...t)),class:"btn-text i_anchor my-auto"},[...e[2]||(e[2]=[(0,l.Lk)("span",{class:"i_edit"},null,-1),(0,l.Lk)("span",{class:"d-none d-sm-inline"},"upraviť",-1)])])])])}var Ht=a(9614),Mt={props:{user_data:String},components:{},data(){return{}},created(){},methods:{go_back(){(0,it.A)().change_step(1)}},computed:{requested_direction(){return(0,Ht.A)().get_requested_direction()}},watch:{requested_direction(){null!==this.requested_direction&&"backward"===this.requested_direction&&((0,Ht.A)().reset_requested_direction(),this.go_back())}}};const Dt=(0,Lt.A)(Mt,[["render",Ut]]);var Zt=Dt;const Jt={class:"row"},Yt={class:"input-ttip-wrap"},te=["for"],ee={class:"validation-placeholder validation-message"};function ae(t,e,a,o,s,r){const i=(0,l.g2)("Tooltip"),_=(0,l.g2)("Checkbox"),d=(0,l.g2)("Select"),n=(0,l.g2)("Text"),p=(0,l.g2)("Datepicker"),u=(0,l.g2)("Slider");return(0,l.uX)(),(0,l.CE)("div",{class:(0,c.C4)(["col-12",a.has_tab?"col-lg-5":""])},[(0,l.Lk)("div",{class:(0,c.C4)(["global-form h-100",r.is_disabled?"the_form_is_disabled":""]),"data-cy":"global_form"},[(0,l.Lk)("div",Jt,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.global_inputs,(o,s)=>((0,l.uX)(),(0,l.CE)("div",{class:(0,c.C4)(["col-12 col-sm-4",a.has_tab?"col-lg-12":""])},[(0,l.Lk)("div",Yt,["checkbox"!==o.type?((0,l.uX)(),(0,l.CE)("label",{key:0,for:s},(0,c.v_)(o.label),9,te)):(0,l.Q3)("",!0),"checkbox"!==o.type?((0,l.uX)(),(0,l.Wv)(i,{key:1,tooltip_text:r.tooltip(o),tooltip_type:"info"},null,8,["tooltip_text"])):(0,l.Q3)("",!0),"checkbox"===o.type?((0,l.uX)(),(0,l.Wv)(_,{key:2,field_id:s,field_data:o,emit_name:"validate_global_changed",onValidate_global_changed:e[0]||(e[0]=e=>t.$emit("validate_global_changed"))},null,8,["field_id","field_data"])):"select"===o.type?((0,l.uX)(),(0,l.Wv)(d,{key:3,field_id:s,field_data:o,emit_name:"validate_global_changed",onValidate_global_changed:e[1]||(e[1]=e=>t.$emit("validate_global_changed"))},null,8,["field_id","field_data"])):"text"===o.type?((0,l.uX)(),(0,l.Wv)(n,{key:4,field_id:s,field_data:o,emit_name:"validate_global_changed",onValidate_global_changed:e[2]||(e[2]=e=>t.$emit("validate_global_changed"))},null,8,["field_id","field_data"])):"date"===o.type?((0,l.uX)(),(0,l.Wv)(p,{key:5,field_id:s,field_data:o,emit_name:"validate_global_changed",onValidate_global_changed:e[3]||(e[3]=e=>t.$emit("validate_global_changed"))},null,8,["field_id","field_data"])):"slider"===o.type?((0,l.uX)(),(0,l.Wv)(u,{key:6,field_id:s,field_data:o,emit_name:"validate_global_changed",onValidate_global_changed:e[4]||(e[4]=e=>t.$emit("validate_global_changed"))},null,8,["field_id","field_data"])):(0,l.Q3)("",!0),"checkbox"===o.type?((0,l.uX)(),(0,l.Wv)(i,{key:7,tooltip_text:r.tooltip(o),tooltip_type:"info"},null,8,["tooltip_text"])):(0,l.Q3)("",!0),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.global_errors[s],(t,a)=>((0,l.uX)(),(0,l.CE)("div",ee,[e[5]||(e[5]=(0,l.Lk)("span",{class:"mark-circle mark-orange"},"!",-1)),(0,l.eW)(" "+(0,c.v_)(t),1)]))),256))])],2))),256))])],2)],2)}var le=a(3137),oe=a(3327),se={props:{global_disabled:Boolean,global_inputs:Object,global_errors:Object,has_tab:Boolean},components:{Checkbox:ht.A,Select:bt.A,Text:le.A,Datepicker:gt.A,Slider:oe.A,Tooltip:xt.A},emits:["validate_global_changed"],data(){return{}},created(){},methods:{tooltip(t){return t?.description?t.description.replace(/\r\n/g,"<br>").replace(/&quot;/g,'"'):!!t?.block_input_hint&&t.block_input_hint.replace(/\r\n/g,"<br>").replace(/&quot;/g,'"')}},computed:{is_disabled(){return this.global_disabled}}};const re=(0,Lt.A)(se,[["render",ae]]);var ie=re;const _e={class:"d-flex align-items-center flex-column flex-sm-row"};function de(t,e,a,s,r,i){return(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",{class:(0,c.C4)([i.is_disabled?"the_form_is_disabled":"","refine-prices"])},[(0,l.Lk)("div",_e,[e[2]||(e[2]=(0,l.Lk)("p",{class:"d-flex flex-column flex-sm-row flex-grow-1 text-center text-sm-start align-items-center"},[(0,l.Lk)("span",{class:"i_info d-none d-md-inline"}),(0,l.eW)(" Uvedené ceny sú orientačné. Pre presný výpočet na mieru je potrebné doplniť ďalšie údaje. ")],-1)),(0,l.Lk)("button",{onClick:e[0]||(e[0]=(...t)=>i.open_price&&i.open_price(...t)),class:(0,c.C4)([i.is_disabled?"the_form_is_disabled":"","btn btn-outline-primary btn-icon"]),"data-cy":"price_form"},[...e[1]||(e[1]=[(0,l.Lk)("span",{class:"mask-icon mask-icon--calculate"},null,-1),(0,l.eW)(" Upresniť ceny ",-1)])],2)])],2)),[[o.aG,i.any_is_empty_or_invalid]])}var ne={props:{global_disabled:Boolean,price_inputs:Object,global_errors:Object},components:{},emits:["validate_global_changed"],data(){return{}},created(){if(this.any_is_empty_or_invalid){if((0,nt.A)().capable_agent()&&"lukas_local"===(0,it.A)().get_backend_type())return console.log("skips price modal"),void this.$emit("validate_global_changed");this.open_price()}else this.$emit("validate_global_changed")},methods:{open_price(){(0,vt.A)().store_modal_data({price_inputs:this.price_inputs,price_errors:this.global_errors}),(0,vt.A)().open_it("Specify_product_price")}},computed:{is_disabled(){return this.global_disabled},any_is_empty_or_invalid(){let t=!1;for(let e in this.price_inputs)(""===(0,nt.A)().get_user_input(e)||this.global_errors.hasOwnProperty(e))&&(t=!0);return t}},watch:{}};const ce=(0,Lt.A)(ne,[["render",de]]);var pe=ce,ue=a(4326),he=a(9126),be=a(6460);const me={class:"col-12 col-lg-7","data-cy":"global_tabs"},ge={class:"tab-content"},fe={key:0,class:"tab-pane active","data-cy":"product_filters"},ve={key:1,class:"tab-pane active","data-cy":"product_options"},ke={key:2,class:"tab-pane active","data-cy":"product_graph"};function ye(t,e,a,s,r,i){const _=(0,l.g2)("Global_nav"),d=(0,l.g2)("Product_filters"),n=(0,l.g2)("Product_options"),p=(0,l.g2)("Graph");return(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",me,[(0,l.Lk)("div",{class:(0,c.C4)(["results-filter h-100",i.is_disabled?"the_form_is_disabled":""])},[(0,l.bF)(_,{has_filters:i.has_filters,has_options:i.has_options,has_graph:i.has_graph,opened:r.opened,onTab_switched:i.tab_switched},null,8,["has_filters","has_options","has_graph","opened","onTab_switched"]),(0,l.bo)((0,l.Lk)("div",ge,[i.has_filters?(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",fe,[(0,l.bF)(d,{got_products:a.got_products,nice_filter_label:a.nice_filter_label,filtered_array:a.filtered_array,disabled_from_calculate:a.disabled_from_calculate,onFilters_run_own_validate:e[0]||(e[0]=e=>t.$emit("filters_run_own_validate")),onCalculate_all_products:e[1]||(e[1]=e=>t.$emit("calculate_all_products"))},null,8,["got_products","nice_filter_label","filtered_array","disabled_from_calculate"])],512)),[[o.aG,1===r.opened]]):(0,l.Q3)("",!0),i.has_options?(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",ve,[(0,l.bF)(n,{options_inputs:a.options_inputs,submit_attract:r.submit_attract,onFilters_run_own_validate:e[2]||(e[2]=e=>t.$emit("filters_run_own_validate")),onCalculate_all_products:e[3]||(e[3]=e=>{r.inputs_changed=!1,t.$emit("calculate_all_products")}),onOptions_value_changed:e[4]||(e[4]=e=>{r.inputs_changed=!0,t.$emit("options_value_changed")})},null,8,["options_inputs","submit_attract"])],512)),[[o.aG,2===r.opened]]):(0,l.Q3)("",!0),i.has_graph?(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",ke,[(0,l.bF)(p,{product_rates:a.product_rates,global_disabled:a.global_disabled},null,8,["product_rates","global_disabled"])],512)),[[o.aG,3===r.opened]]):(0,l.Q3)("",!0)],512),[[o.aG,r.opened>0]])],2)],512)),[[o.aG,r.has_tab]])}const xe={class:"nav nav-tabs","data-cy":"global_nav"};function Ae(t,e,a,o,s,r){return(0,l.uX)(),(0,l.CE)("ul",xe,[a.has_graph?((0,l.uX)(),(0,l.CE)("li",{key:0,onClick:e[0]||(e[0]=t=>r.switch_tab(3)),class:"nav-item","data-cy":"graph_nav"},[(0,l.Lk)("button",{class:(0,c.C4)(["nav-link",3===a.opened?"active":""])},[...e[4]||(e[4]=[(0,l.Lk)("span",{class:"mask-icon mask-icon--graf"},null,-1),(0,l.Lk)("span",{class:"d-none d-sm-block"},"Graf splátok",-1),(0,l.Lk)("span",{class:"d-block d-sm-none"},"Graf",-1)])],2)])):(0,l.Q3)("",!0),a.has_options?((0,l.uX)(),(0,l.CE)("li",{key:1,onClick:e[1]||(e[1]=t=>r.switch_tab(2)),class:"nav-item","data-cy":"options_nav"},[(0,l.Lk)("button",{class:(0,c.C4)(["nav-link",2===a.opened?"active":""])},[...e[5]||(e[5]=[(0,l.Lk)("span",{class:"mask-icon mask-icon--vlastnosti"},null,-1),(0,l.Lk)("span",{class:"d-none d-sm-block"},"Nastavenia produktov",-1),(0,l.Lk)("span",{class:"d-block d-sm-none"},"Nastavenia",-1)])],2)])):(0,l.Q3)("",!0),a.has_filters?((0,l.uX)(),(0,l.CE)("li",{key:2,onClick:e[2]||(e[2]=t=>r.switch_tab(1)),class:"nav-item","data-cy":"filters_nav"},[(0,l.Lk)("button",{class:(0,c.C4)(["nav-link",1===a.opened?"active":""])},[...e[6]||(e[6]=[(0,l.Lk)("span",{class:"mask-icon mask-icon--poistovna"},null,-1),(0,l.Lk)("span",{class:"d-none d-sm-block"},"Výber Produktov",-1),(0,l.Lk)("span",{class:"d-block d-sm-none"},"Produkty",-1)])],2)])):(0,l.Q3)("",!0),a.has_filters||a.has_options||a.has_graph?((0,l.uX)(),(0,l.CE)("li",{key:3,onClick:e[3]||(e[3]=t=>r.switch_tab(0)),class:"nav-item d-block d-md-none ms-auto","data-cy":"close_nav"},[...e[7]||(e[7]=[(0,l.Lk)("button",{class:"nav-link nav-link--close"},[(0,l.Lk)("span",{class:"mask-icon mask-icon--close"})],-1)])])):(0,l.Q3)("",!0)])}var we={props:{has_filters:Boolean,has_options:Boolean,has_graph:Boolean,opened:Number},components:{},emits:["tab_switched"],data(){return{}},created(){},methods:{switch_tab(t){this.$emit("tab_switched",t)}},computed:{},watch:{}};const Ce=(0,Lt.A)(we,[["render",Ae]]);var Le=Ce;const Xe={class:"row mb-5"},Ee={class:"col-sm-6 col-md-4"},je={class:"form-check"},Oe=["id","name","onUpdate:modelValue","disabled"],Fe=["for"],Pe={class:"text-center"};function Ge(t,e,a,s,r,i){return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("div",Xe,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(i.products_alphabetical_array,([t,e],s)=>((0,l.uX)(),(0,l.CE)("div",Ee,[(0,l.Lk)("div",je,[(0,l.bo)((0,l.Lk)("input",{id:t,name:t,"onUpdate:modelValue":e=>r.values[t]=e,disabled:i.disable_in_filter(t),"true-value":"1","false-value":"0",type:"checkbox",class:"form-check-input"},null,8,Oe),[[o.lH,r.values[t]]]),(0,l.Lk)("label",{for:t,class:"form-check-label"},(0,c.v_)(a.nice_filter_label[t]?a.nice_filter_label[t]:e),9,Fe)])]))),256))]),(0,l.Lk)("button",{onClick:e[0]||(e[0]=(...t)=>i.filter_submit&&i.filter_submit(...t)),class:"btn btn-primary btn-m btn-filter-submit"}," Vybrať produkty "),(0,l.bo)((0,l.Lk)("div",Pe,[...e[1]||(e[1]=[(0,l.Lk)("p",{class:"mt-2 mb-0 text-warning"},"Minimálne jeden z produktov musí byť vybraný.",-1)])],512),[[o.aG,r.error]])],64)}var We={props:{got_products:Object,nice_filter_label:Object,filtered_array:Array,disabled_from_calculate:Array},components:{},emits:["filters_run_own_validate","calculate_all_products"],data(){return{values:{},error:!1}},created(){this.prepare_filter_values()},methods:{disable_in_filter(t){return t=parseInt(t,10),this.disabled_from_calculate.indexOf(t)>-1},prepare_filter_values(){for(let t in this.got_products){let e=parseInt(t,10);if(this.disabled_from_calculate.includes(e))return void(this.values[t]="0");0===this.filtered_array.length||this.filtered_array.includes(e)?this.values[t]="1":this.values[t]="0"}},filter_submit(){let t=[];for(let a in this.values)"1"===this.values[a]&&t.push(a);if(0===t.length)return void(this.error=!0);this.error=!1,t.length===Object.keys(this.got_products).length&&(t=[]),this.$emit("filters_run_own_validate");let e="filtered_products="+t.join(",");he.A.validate_global_form(e).then(e=>{200===e.status&&((0,nt.A)().set_filtered_products(t.join(",")),this.$emit("calculate_all_products"))})}},computed:{products_alphabetical_array(){let t=Object.entries(this.got_products);return t.sort((t,e)=>t[1].localeCompare(e[1])),t}},watch:{disabled_from_calculate(){for(let t=0;t<this.disabled_from_calculate.length;t++)this.values[this.disabled_from_calculate[t]]="0"}}};const Te=(0,Lt.A)(We,[["render",Ge]]);var Ie=Te;const Qe={class:"row mb-5"},$e=["for"],Se=["disabled"];function ze(t,e,a,o,s,r){const i=(0,l.g2)("Checkbox"),_=(0,l.g2)("Radio"),d=(0,l.g2)("Select");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("div",Qe,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(r.options_hide_filter,(t,e)=>((0,l.uX)(),(0,l.CE)("div",{class:(0,c.C4)("checkbox"===t.type?"col-12 col-md-4":"col-12")},["checkbox"!==t.type?((0,l.uX)(),(0,l.CE)("label",{key:0,for:e,class:"input-label"},(0,c.v_)(t.label),9,$e)):(0,l.Q3)("",!0),(0,l.Lk)("div",{class:(0,c.C4)("radio"===t.type?"input-area":"")},["checkbox"===t.type?((0,l.uX)(),(0,l.Wv)(i,{key:0,field_id:e,field_data:t,emit_name:"options_value_changed",onOptions_value_changed:r.options_value_changed},null,8,["field_id","field_data","onOptions_value_changed"])):"radio"===t.type?((0,l.uX)(),(0,l.Wv)(_,{key:1,field_id:e,field_data:t,emit_name:"options_value_changed",onOptions_value_changed:r.options_value_changed},null,8,["field_id","field_data","onOptions_value_changed"])):"select"===t.type?((0,l.uX)(),(0,l.Wv)(d,{key:2,field_id:e,field_data:t,emit_name:"options_value_changed",onOptions_value_changed:r.options_value_changed},null,8,["field_id","field_data","onOptions_value_changed"])):(0,l.Q3)("",!0)],2)],2))),256))]),(0,l.Lk)("button",{onClick:e[0]||(e[0]=(...t)=>r.options_submit&&r.options_submit(...t)),class:(0,c.C4)(["btn btn-m btn-filter-submit",[s.inputs_changed?"btn-accent":"btn-primary",a.submit_attract?"submit_attract":""]]),disabled:!s.inputs_changed}," Prepočítať produkty ",10,Se)],64)}var Be=a(6488),Ve=a(5683),Ne={props:{options_inputs:Object,submit_attract:Boolean},components:{Checkbox:ht.A,Radio:Ve.A,Select:bt.A},emits:["calculate_all_products","filters_run_own_validate","options_value_changed"],data(){return{inputs_changed:!1}},created(){},methods:{options_submit(){let t=_t.A.serialize_user_input();this.$emit("filters_run_own_validate"),he.A.validate_global_form(t).then(t=>{200===t.status&&(this.$emit("calculate_all_products"),this.inputs_changed=!1)})},options_value_changed(){this.inputs_changed=!0,this.$emit("options_value_changed")}},computed:{options_hide_filter(){let t={};for(let e in this.options_inputs)Be.A.visibility_boolean({[e]:this.options_inputs[e]})&&(t[e]=this.options_inputs[e]);return t}},watch:{}};const Ke=(0,Lt.A)(Ne,[["render",ze]]);var Re=Ke;const qe=(0,l.$V)(()=>a.e(3254).then(a.bind(a,3254)));var Ue={props:{got_products:Object,nice_filter_label:Object,filtered_array:Array,options_inputs:Object,disabled_from_calculate:Array,global_disabled:Boolean,product_rates:Object},components:{Global_nav:Le,Product_filters:Ie,Product_options:Re,Graph:qe},emits:["calculate_all_products","filters_run_own_validate","options_value_changed","shorten_global"],data(){return{opened:0,debug_all_tabs:!1,has_tab:!1,inputs_changed:!1,submit_attract:!1}},created(){this.default_open_tab(),this.widen_global_without_tabs()},methods:{default_open_tab(){window.innerWidth<700?this.opened=0:this.has_graph?this.opened=3:this.has_options?this.opened=2:this.has_filters?this.opened=1:this.opened=0},widen_global_without_tabs(){(this.has_options||this.has_filters||this.has_graph)&&(this.has_tab=!0,this.$emit("shorten_global"))},tab_switched(t){if(this.inputs_changed)return this.submit_attract=!0,void setTimeout(()=>{this.submit_attract=!1},400);this.opened=t}},computed:{group(){return(0,it.A)().product_group_id()},is_disabled(){return this.global_disabled},has_options(){return this.debug_all_tabs||_t.A.object_length(this.options_inputs)>0},has_filters(){return!!this.debug_all_tabs||!(_t.A.object_length(this.got_products)<2)&&!(0,nt.A)().direct_user()},has_graph(){return this.debug_all_tabs||3===this.group}},watch:{}};const He=(0,Lt.A)(Ue,[["render",ye]]);var Me=He,De={props:{},components:{Product_template:Et,Product_title:Nt,Summary:Zt,Bouncer_loading:kt.A,Global_form:ie,Price_form:pe,Global_tabs:Me},data(){return{loaded:0,total:0,got_products:{},product_order:[],update_order:[],found_with_error:[],disabled_from_calculate:[],raw_responses:{},being_calculated:[],nice_filter_label:{},product_form_tokens:{},product_rates:[],udaje:"",period:0,disable_email_pdf:!0,disable_offer:!0,ready_filters:!1,ready_price:!1,has_tab:!1,global_inputs:{},options_inputs:{},price_inputs:!1,global_errors:{},global_disabled:!0,valid_global_show_products:!0,solid_product_parts:!0,being_selected:!1,delegate_product_select:0}},created(){Promise.resolve().then(()=>yt.A.session_info()).then(t=>t.result?.state>=100?((0,it.A)().change_step(5),Promise.reject("session already confirmed")):(1===t.result.read_only&&(0,it.A)().set_read_only(),_t.A.expiration_check(t)?Promise.reject("session expired"):void 0)).then(()=>pt.get_product_list()).then(t=>(this.got_products=t.result.products,(0,nt.A)().set_filtered_products(t.result.filtered_products),he.A.get_global_form())).then(t=>{if(200!==t.status)return Promise.reject("get_global_form api failed");(0,be.A)().set_global_form(t.result.form),this.global_inputs=ut.A.product_form_formatter(t.result.form,"global"),this.options_inputs=ut.A.product_form_formatter(t.result.form,"options"),(0,nt.A)().store_call_params(t.result.call_params),this.price_inputs=ut.A.product_form_formatter(t.result.form,"price"),this.validate_global_changed()}).catch(t=>{console.log(t)})},methods:{calculate_all_products(){this.solid_product_parts=!0,this.loaded=0;let t=this.reduce_products_by_filtered();if(this.total=Object.keys(t).length,this.found_with_error=[],this.product_rates=[],0===this.product_order.length)for(let e in this.got_products)this.product_order.push(parseInt(e,10));this.being_calculated=structuredClone(this.product_order),yt.A.get_data().then(e=>{if(this.period=ut.A.find_period(e),0!==t.length)for(let a in t)this.calculate_product(parseInt(a,10),!0);else this.count_loaded()})},calculate_product(t,e){let a=null;void 0!==this.product_form_tokens[t]&&(a=_t.A.serialize_specific_inputs(this.product_form_tokens[t])),ue.A.get_calculate(t,a,this.period).then(a=>{if(this.raw_responses[t]=a,void 0===a.result||void 0!==a.result.error||void 0===a.result[t]||"1"===a.result[t].result?.result?.disable_product?.result)return"1"===a.result?.[t]?.result?.result?.disable_product?.result?this.disabled_from_calculate.push(t):!1===a.result.validform?((0,vt.A)().store_modal_data({type:"calculate_step2_form_isnt_valid",errors:a.result?.form_validation_error_elements,is_client_role:!1}),(0,vt.A)().open_it("Ordinary_error_modal")):console.log("#"+t+" had error",a),this.found_with_error.push(t),this.total--,void this.count_loaded();this.udaje=ut.A.search_for_udaje(a),this.disable_email_pdf="1"===a.result[t].result?.product?.disable_email_pdf?.result,this.disable_offer="1"===a.result[t].result?.product?.disable_offer?.result,this.nice_filter_label[t]=a.result[t].result?.head?.provider_name?.formula_name||void 0,this.product_rates.push({product_id:t,product_name:this.got_products[t],rate_number:a.result[t].result?.calculation?.uver_urok_graf?.result,rate_text:a.result[t].result?.result?.discount?.result});let l=ut.A.product_form_formatter(a.result[t].result?.results_form?.comment,"calculate");this.product_form_tokens[t]=Object.keys(l),(0,nt.A)().store_call_params(a.result.call_params),e&&(this.update_order=ut.A.find_order(a,null,t)),this.loaded++,this.count_loaded();let o=this.being_calculated.indexOf(t);o>-1&&delete this.being_calculated[o]})},recalculate_product(t){this.loaded--,this.count_loaded(),this.being_calculated.push(t),this.calculate_product(t,!1)},count_loaded(){this.loaded===this.total?(this.global_disabled=!1,this.ready_filters=!0,this.product_order=this.update_order):this.global_disabled=!0},reduce_products_by_filtered(){if(0===this.filtered_array.length)return this.got_products;let t=[];for(let e in this.got_products)-1!==this.filtered_array.indexOf(parseInt(e,10))&&(t[e]=this.got_products[e]);return t},validate_global_changed(){this.global_disabled=!0,this.global_errors={};let t=_t.A.serialize_specific_inputs(Object.keys(this.global_inputs));he.A.validate_global_form(t).then(t=>{if(!0!==t.result.validform)return this.global_errors=t.result.form_validation_error_elements,this.valid_global_show_products=!1,this.global_disabled=!1,void(this.ready_price=!0);!this.price_inputs||this.ready_price?(this.valid_global_show_products=!0,this.calculate_all_products()):this.ready_price=!0})},filters_run_own_validate(){this.global_disabled=!0},select_running(t){this.being_selected=t,this.global_disabled=t},options_value_changed(){this.solid_product_parts=!1}},computed:{user_data(){return this.udaje},only_displayed_products(){let t,e=[],a=this.product_order.length;for(t=0;t<a;t++){let a=parseInt(this.product_order[t],10);-1!==this.found_with_error.indexOf(a)||0!==this.filtered_array.length&&-1===this.filtered_array.indexOf(a)||e.push(a)}return e},filtered_array(){let t,e=(0,nt.A)().get_filtered_products()?.split(","),a=[],l=e.length;for(t=0;t<l;t++)""!==e[t]&&a.push(parseInt(e[t],10));return a},closing_modal(){return(0,vt.A)().get_modal_event_data()}},watch:{closing_modal(){if(null!==this.closing_modal){if("specify_recalculate"===this.closing_modal)this.validate_global_changed();else if(_t.A.starts_with(this.closing_modal,"indicative_price_")){let t=this.closing_modal.replace("indicative_price_","");t=parseInt(t,10),this.delegate_product_select=t}else{let t=this.closing_modal;this.recalculate_product(t)}(0,vt.A)().del_modal_event_data()}}}};const Ze=(0,Lt.A)(De,[["render",n],["__scopeId","data-v-187b0bd8"]]);var Je=Ze}}]);