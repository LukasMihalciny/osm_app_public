"use strict";(self["webpackChunkosmapp_webpack_3xx"]=self["webpackChunkosmapp_webpack_3xx"]||[]).push([[813],{5162:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4114),core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_set_difference_v2_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7642),core_js_modules_es_set_difference_v2_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_set_difference_v2_js__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_set_intersection_v2_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8004),core_js_modules_es_set_intersection_v2_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_set_intersection_v2_js__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_set_is_disjoint_from_v2_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3853),core_js_modules_es_set_is_disjoint_from_v2_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_set_is_disjoint_from_v2_js__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_set_is_subset_of_v2_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(5876),core_js_modules_es_set_is_subset_of_v2_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_set_is_subset_of_v2_js__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_set_is_superset_of_v2_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(2475),core_js_modules_es_set_is_superset_of_v2_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_set_is_superset_of_v2_js__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_set_symmetric_difference_v2_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(5024),core_js_modules_es_set_symmetric_difference_v2_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_set_symmetric_difference_v2_js__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_set_union_v2_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(1698),core_js_modules_es_set_union_v2_js__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_set_union_v2_js__WEBPACK_IMPORTED_MODULE_7__),_logic_Functions_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(6343),_store_STATE_core_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(8700),_logic_Show_hide_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(6488),_store_STATE_params_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(3177);class Product_helpers{sort_icons(e){let t=[],r=[];for(let a in e){if(!e.hasOwnProperty(a))continue;if("_isGroup"===a||-1!==a.indexOf("_detail")||-1!==a.indexOf("_text")||"1"===e[a].hide_in_result||"0"===e[a].result)continue;let r=a.replace("_full",""),_={title:e[a].formula_name+(e[r+"_text"]?.result?"<b>"+e[r+"_text"]?.result+"</b>":""),tooltip:e[r+"_detail"]?.result,order:parseInt(e[a].order,10),class:r+("1"===e[a].result?"-ano":"-nie")+(a.indexOf("_full")>-1?" full":"")};t.push(_)}while(t.length>0){var _=this.find_key_with_lowest_order(t);r.push(t[_]),t.splice(_,1)}return r}find_key_with_lowest_order(e){var t=0,r=0,_=e.length;while(r<_)e[t].order>e[r].order?(t=r,r=0):r++;return t}sort_benefits(e){let t=[];for(let r in e){if(!e.hasOwnProperty(r))continue;if("_isGroup"===r)continue;let _="";switch(e[r].result){case"0":_="incl_no";break;case"1":_="incl_yes";break;case"2":_="incl_special";break;default:_="incl_hide"}t.push({title:e[r].formula_name,class:_})}return t}price_for_period(e,t){return 1===t?e?.result?.rocne?.result:2===t?e?.result?.polrocne?.result:4===t?e?.result?.stvrtrocne?.result:12===t?e?.result?.mesacne?.result:""}label_for_period(e,t){return void 0!==e?.result?.price_label?.result?e.result.price_label.result:1===t?7===(0,_store_STATE_core_js__WEBPACK_IMPORTED_MODULE_9__.A)().product_group_id()?"":"ročne":2===t?"polročne":4===t?"štvrťročne":12===t?"mesačne":""}error_tooltip(e){return void 0!==e?.errors?e?.errors?.join("<br><br>"):""}info_tooltip(e){return e?.next?.next_comment?.result||""}check_alt_text(){let e=(0,_store_STATE_core_js__WEBPACK_IMPORTED_MODULE_9__.A)().product_group_id();return 3===e||6===e||85===e||86===e}find_period(e){let t=e.result.call_params;for(let _ in t)if(t.hasOwnProperty(_)&&_logic_Functions_js__WEBPACK_IMPORTED_MODULE_8__.A.ends_with(_,"frekvenciaNP")&&!_logic_Functions_js__WEBPACK_IMPORTED_MODULE_8__.A.starts_with(_,"__"))return parseInt(t[_],10);let r=(0,_store_STATE_core_js__WEBPACK_IMPORTED_MODULE_9__.A)().product_group_id();return 4===r||3===r||6===r||85===r||86===r||88===r?12:1}search_for_udaje(e){let t=e.result?.call_params;for(var r in t)if(t.hasOwnProperty(r)&&-1!==r.indexOf("udaje"))return t[r];return""}find_order(e,t,r){let _=this.find_period(e),a=[],o=7===(0,_store_STATE_core_js__WEBPACK_IMPORTED_MODULE_9__.A)().product_group_id();return 1===_?a=o?e.result.order?.["rocne_prefer"]:e.result.order?.["rocne"]:2===_?a=o?e.result.order?.["polrocne_prefer"]:e.result.order?.["polrocne"]:4===_?a=o?e.result.order?.["stvrtrocne_prefer"]:e.result.order?.["stvrtrocne"]:12===_&&(a=o?e.result.order?.["mesacne_prefer"]:e.result.order?.["mesacne"]),"desc"===e.result[r]?.result?.result?.order_sort?.result&&a.reverse(),null!==t&&(a=a.concat(t)),a=[...new Set(a)],a}product_form_formatter(e,t){if(void 0===e)return!1;"string"===typeof e&&(e=JSON.parse(e));let r={},_={},a={};for(let o in e)if(!(parseInt(o,10)>100))for(let t in e[o])for(let l in e[o][t]){let s=e[o][t][l];_logic_Functions_js__WEBPACK_IMPORTED_MODULE_8__.A.ends_with(l,"udaje")||(_logic_Functions_js__WEBPACK_IMPORTED_MODULE_8__.A.ends_with(l,"_spoluucast")||_logic_Functions_js__WEBPACK_IMPORTED_MODULE_8__.A.ends_with(l,"_krytie")?_[l]=s:!0!==s.input_settings?.price_specific_input?_logic_Show_hide_js__WEBPACK_IMPORTED_MODULE_10__.A.visibility_boolean(e[o][t])&&(r[l]=s):a[l]=s)}return"spoluucast"===t?Object.keys(_).length>0&&_:"price"===t?Object.keys(a).length>0&&a:"global"===t||"product"===t?Object.keys(r).length>0&&r:(console.log("error: wrong filter",t),!1)}extended_form_formatter(e){let t=JSON.parse(e||"{}");for(let r in t)parseInt(r,10)<=100&&delete t[r];return Object.keys(t).length<1?null:t}flatten_extended_errors(e,t){let r=this.extended_form_formatter(t);if(!1!==e.result?.validform_with_global_0||null===r)return null;let _=e.result?.form_validation_error_tab_elements_0;console.log("extended errors:",_);let a={};for(let o in _)for(let e in _[o])for(let t in r)for(let l in r[t])_logic_Functions_js__WEBPACK_IMPORTED_MODULE_8__.A.first_key(r[t][l])===e&&(a[e]=_[o][e]);return Object.keys(a)<1?null:a}validate_product(condition_string){let target=condition_string.match(/\$(.*?) /);return null===target?(console.log("condition in bad format",condition_string),{error:!1,input_name:""}):(condition_string=condition_string.replace(target[0],(0,_store_STATE_params_js__WEBPACK_IMPORTED_MODULE_11__.A)().get_user_input(target[1])+" "),eval(condition_string)?{error:!1,input_name:""}:{error:!0,input_name:target[1]})}format_calculate_docs(e){let t={};if("object"!==typeof e)return t;for(let r in e)t[r]={id:e[r].id,name:e[r].name};return t}}__webpack_exports__.A=new Product_helpers},4326:function(e,t,r){var _=r(8700),a=r(6343),o=r(3175),l=r(3177);class s{get_calculate(e,t,r){let l={action_name:"calculate_step2",method:"POST",url:(0,_.A)().endpoint_url()+"online/calculate/?id="+e+"&json=1&period="+r+a.A.add_token_as_parameter(),body:t},s=new o.A;return s.prepare_params(l).handle_response().then((t=>408===t.status?(console.log("#"+e+" has 408, going for results request"),this.repeat_results()):t)).catch((e=>{throw e}))}check_calculate(){let e={action_name:"calculate_step4",method:"POST",url:(0,_.A)().endpoint_url()+"online/calculate/?"+a.A.add_token_as_parameter(),body:null};e.url+="&id="+(0,l.A)().get_selected_product().product_id+"&period="+(0,l.A)().get_selected_product().period;let t=new o.A;return t.prepare_params(e).handle_response().then((async e=>408===e.status?(console.log("calculate has 408 timeout, wait 1 minute and run results api"),await a.A.sleep(60),this.repeat_results()):e)).catch((e=>{throw e}))}repeat_results(){let e={action_name:"results",method:"GET",url:(0,_.A)().endpoint_url()+"online/results/?"+a.A.add_token_as_parameter()},t=new o.A;return t.prepare_params(e).handle_response().catch((e=>{throw e}))}}t.A=new s},9126:function(e,t,r){var _=r(8700),a=r(6343),o=r(3175);class l{get_global_form(){let e={action_name:"getgroupform",method:"GET",url:(0,_.A)().endpoint_url()+"online/getgroupform/"+(0,_.A)().product_group_id()+"/?global=1&json=1"};e.url+=a.A.add_token_as_parameter();let t=new o.A;return t.prepare_params(e).handle_response().catch((e=>{throw e}))}validate_global_form(e){let t={action_name:"validategroupform",method:"POST",body:e,url:(0,_.A)().endpoint_url()+"online/validategroupform/"+(0,_.A)().product_group_id()+"/?global=1&without_form=1"};t.url+=a.A.add_token_as_parameter();let r=new o.A;return r.prepare_params(t).handle_response().catch((e=>{throw e}))}}t.A=new l},8856:function(e,t,r){var _=r(8700),a=r(6343),o=r(3175),l=r(3177);class s{get_it(e){!1===e&&(e=(0,l.A)().get_selected_product().next_contract);let t={action_name:"gethtml",method:"POST",url:(0,_.A)().endpoint_url()+"online/gethtml/?id="+e+a.A.add_token_as_parameter()},r=new o.A;return r.prepare_params(t).handle_response().catch((e=>{throw e}))}get_json_api(e){let t={action_name:"getjson",method:"POST",url:(0,_.A)().endpoint_url()+"online/getjson/?id="+e+a.A.add_token_as_parameter()},r=new o.A;return r.prepare_params(t).handle_response().catch((e=>{throw e}))}}t.A=new s},9452:function(e,t,r){var _=r(8700),a=r(6343),o=r(3175);class l{session_info(){let e={action_name:"getsessioninfo",method:"GET",url:(0,_.A)().endpoint_url()+"online/getsessioninfo/?"+a.A.add_token_as_parameter()},t=new o.A;return t.prepare_params(e).handle_response().catch((e=>{throw e}))}get_data(){let e={action_name:"getdata",method:"GET",url:(0,_.A)().endpoint_url()+"online/getdata/?"+a.A.add_token_as_parameter()},t=new o.A;return t.prepare_params(e).handle_response().catch((e=>{throw e}))}set_data(e){let t={action_name:"setdata",method:"POST",url:(0,_.A)().endpoint_url()+"online/setdata/?"+a.A.serialize_object(e)+a.A.add_token_as_parameter()},r=new o.A;return r.prepare_params(t).handle_response().catch((e=>{throw e}))}}t.A=new l},5469:function(e,t,r){r.r(t),r.d(t,{default:function(){return wt}});var _=r(641),a=r(3751);const o={"data-cy":"calc_results"},l={class:"results_action_area"},s={style:{position:"relative"}},i={key:1,"data-cy":"product_list"};function n(e,t,r,n,d,c){const u=(0,_.g2)("Step_title"),p=(0,_.g2)("Summary"),h=(0,_.g2)("Global_form"),f=(0,_.g2)("Filters"),m=(0,_.g2)("Product_delivery"),g=(0,_.g2)("Price_form"),b=(0,_.g2)("Bouncer_loading"),v=(0,_.g2)("Product_template");return(0,_.uX)(),(0,_.CE)("section",o,[c.classic_np_nav?((0,_.uX)(),(0,_.Wv)(u,{key:0,loaded:d.loaded,total:d.total},null,8,["loaded","total"])):(0,_.Q3)("",!0),(0,_.Lk)("div",l,[(0,_.bF)(p,{user_data:c.user_data},null,8,["user_data"]),(0,_.bF)(h,{global_disabled:d.global_disabled,global_inputs:d.global_inputs,global_errors:d.global_errors,onValidate_global_changed:c.validate_global_changed},null,8,["global_disabled","global_inputs","global_errors","onValidate_global_changed"]),c.display_filters?((0,_.uX)(),(0,_.Wv)(f,{key:0,got_products:d.got_products,filtered_array:c.filtered_array,disabled_from_calculate:d.disabled_from_calculate,global_disabled:d.global_disabled,onCalculate_all_products:c.calculate_all_products,onFilters_run_own_validate:c.filters_run_own_validate},null,8,["got_products","filtered_array","disabled_from_calculate","global_disabled","onCalculate_all_products","onFilters_run_own_validate"])):(0,_.Q3)("",!0),c.classic_np_nav?(0,_.Q3)("",!0):((0,_.uX)(),(0,_.Wv)(m,{key:1})),d.ready_price?((0,_.uX)(),(0,_.Wv)(g,{key:2,global_disabled:d.global_disabled,price_inputs:d.price_inputs,global_errors:d.global_errors,onValidate_global_changed:c.validate_global_changed},null,8,["global_disabled","price_inputs","global_errors","onValidate_global_changed"])):(0,_.Q3)("",!0)]),(0,_.bo)((0,_.Lk)("div",s,[(0,_.bF)(b,{size:"small",style:{position:"absolute",top:"-28px",left:"50%",transform:"translateX(-50%)"}})],512),[[a.aG,d.global_disabled]]),t[0]||(t[0]=(0,_.Lk)("span",{class:"product_list_scroll_anchor"},null,-1)),d.valid_global_show_products?((0,_.uX)(),(0,_.CE)("div",i,[(0,_.bF)(a.F,{name:"product_shuffle"},{default:(0,_.k6)((()=>[((0,_.uX)(!0),(0,_.CE)(_.FK,null,(0,_.pI)(c.only_displayed_products,(e=>((0,_.uX)(),(0,_.Wv)(v,{key:e,product_id:e,product_name:d.got_products[e],response:d.raw_responses[e],being_calculated:d.being_calculated,being_selected:d.being_selected,onRecalculate_product:c.recalculate_product,onSelect_running:c.select_running},null,8,["product_id","product_name","response","being_calculated","being_selected","onRecalculate_product","onSelect_running"])))),128))])),_:1})])):(0,_.Q3)("",!0)])}r(4114),r(4979),r(1678);const d={class:"results_deliver"},c={key:1,class:"i_download"};function u(e,t,r,a,o,l){const s=(0,_.g2)("Bouncer_loading");return(0,_.uX)(),(0,_.CE)("div",d,[l.allow_email_modal?((0,_.uX)(),(0,_.CE)("button",{key:0,onClick:t[0]||(t[0]=(...e)=>l.open_email_modal&&l.open_email_modal(...e)),class:"btn-text i_anchor"},t[2]||(t[2]=[(0,_.Lk)("span",{class:"i_email"},null,-1),(0,_.eW)(" poslať e-mailom ")]))):(0,_.Q3)("",!0),(0,_.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>l.download_pdf&&l.download_pdf(...e)),class:"btn-text i_anchor"},[o.downloading_pdf?((0,_.uX)(),(0,_.Wv)(s,{key:0,size:"small"})):((0,_.uX)(),(0,_.CE)("span",c)),t[3]||(t[3]=(0,_.eW)(" stiahnuť pdf "))])])}var p=r(8700),h=r(6343),f=r(3175);class m{download_global_pdf(){let e={action_name:"getpdf",method:"POST",url:(0,p.A)().endpoint_url()+"online/getpdf/?&id="+h.A.group_offer()+h.A.add_token_as_parameter()},t=new f.A;return t.prepare_params(e).handle_response().catch((e=>{throw e}))}}var g=new m,b=r(55),v=r(2873),k=r(3177),A={props:{},components:{Bouncer_loading:b.A},emits:[],data(){return{downloading_pdf:!1}},created(){},methods:{download_pdf(){this.downloading_pdf||(this.downloading_pdf=!0,g.download_global_pdf().then((e=>{this.downloading_pdf=!1,200===e.status&&h.A.downloadBase64("Ponuka.pdf",e.result.pdf)})))},open_email_modal(){(0,v.A)().open_it("Email")}},computed:{allow_email_modal(){let e=(0,k.A)().get_receiver();return 4!==e}},watch:{}},y=r(6262);const w=(0,y.A)(A,[["render",u]]);var E=w,x=r(33);const O=["id"],C={class:"col-lg-10 pr_area_info pb-2 pb-lg-1 position-relative"},L={class:"pr_ribbon"},P={class:"pr_top"},j={class:"row g-0"},D={class:"col-lg-2"},M={class:"pr_box_logo text-center mb-2 mb-lg-0"},T=["src"],I={class:"col-lg-4"},W={class:"pr_box_name text-center text-lg-start"},X=["id"],R={key:0,class:"pr_rating"},S={class:"pr_select"},B={key:0},K={class:"detail-compare text-nowrap"},U={class:"pr_detail"},z={class:"col-lg-6"},F={class:"pr_box_overview"},q=["innerHTML"],G={class:"pr_bottom"},V={class:"row g-0"},Q={class:"col-lg-6"},$={class:"pr_box_included"},N={class:"col-lg-6"},H={class:"pr_box_options"},J={key:5},Z={class:"col-lg-2"},Y={class:"pr_area_price d-flex flex-column flex-sm-row flex-lg-column text-center h-100"},ee={class:"pr_discount"},te={key:0,title:"Základná cena pred zľavami",class:"before_discount"},re={key:1,title:"Celková zľava",class:"discount_tag"},_e={class:"amount"},ae={class:"text-default"},oe={class:"period"},le={class:"pr_price"},se={class:"pr_cta"},ie={key:0,class:"btn btn-inactive w-100"},ne={key:1,class:"btn btn-inactive w-100"},de=["disabled"],ce=["disabled"],ue={key:4,class:"btn btn-inactive w-100"},pe=["disabled"],he={key:6};function fe(e,t,r,o,l,s){const i=(0,_.g2)("Select"),n=(0,_.g2)("Tooltip"),d=(0,_.g2)("Checkbox"),c=(0,_.g2)("Multiple"),u=(0,_.g2)("Datepicker"),p=(0,_.g2)("Plaintext"),h=(0,_.g2)("Bouncer_loading");return(0,_.uX)(),(0,_.CE)("div",{id:"product_"+r.product_id,class:(0,x.C4)([s.show_loading_animation?"the_form_is_disabled":"","row product g-0"]),"data-cy":"product"},[(0,_.Lk)("div",C,[(0,_.bo)((0,_.Lk)("div",L,t[6]||(t[6]=[(0,_.Lk)("span",null,"NÁŠ TIP",-1)]),512),[[a.aG,"1"===l.p_data.product.promo&&"2"===l.p_data.product.promo]]),(0,_.Lk)("div",P,[(0,_.Lk)("div",j,[(0,_.Lk)("div",D,[(0,_.Lk)("div",M,[(0,_.Lk)("img",{src:l.p_data.logo},null,8,T)])]),(0,_.Lk)("div",I,[(0,_.Lk)("div",W,[(0,_.Lk)("h4",{id:"#"+r.product_id},(0,x.v_)(r.product_name),9,X),s.not_zeteo_product?(0,_.bo)(((0,_.uX)(),(0,_.CE)("div",R,[((0,_.uX)(),(0,_.CE)(_.FK,null,(0,_.pI)(5,(e=>(0,_.Lk)("span",{class:(0,x.C4)([e>l.p_data.product.stars?"i_star_empty":"i_star"])},null,2))),64))],512)),[[a.aG,l.p_data.product.stars>0]]):(0,_.Q3)("",!0),(0,_.bo)((0,_.Lk)("div",S,[((0,_.uX)(!0),(0,_.CE)(_.FK,null,(0,_.pI)(l.p_data.spoluucast_krytie,((e,t)=>((0,_.uX)(),(0,_.Wv)(i,{field_id:t,field_data:e,emit_name:"recalculate_product",onRecalculate_product:s.recalculate_product},null,8,["field_id","field_data","onRecalculate_product"])))),256)),l.p_data.product.spoluucast_text&&!l.p_data.spoluucast_krytie?((0,_.uX)(),(0,_.CE)("p",B,(0,x.v_)(l.p_data.product.spoluucast_text),1)):(0,_.Q3)("",!0)],512),[[a.aG,l.p_data.spoluucast_krytie||l.p_data.product.spoluucast_text]]),(0,_.Lk)("div",K,[(0,_.Lk)("span",U,[(0,_.bo)((0,_.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>s.open_product_detail&&s.open_product_detail(...e)),class:"btn-text i_anchor"},t[7]||(t[7]=[(0,_.Lk)("span",{class:"i_detail"},null,-1),(0,_.eW)(" info o produkte ")]),512),[[a.aG,"2"===l.p_data.product.detail]])])])])]),t[8]||(t[8]=(0,_.Lk)("hr",{class:"pr_divider d-block d-lg-none"},null,-1)),(0,_.Lk)("div",z,[(0,_.Lk)("div",F,[(0,_.Lk)("ul",null,[((0,_.uX)(!0),(0,_.CE)(_.FK,null,(0,_.pI)(l.p_data.icons,(e=>((0,_.uX)(),(0,_.CE)("li",{class:(0,x.C4)(e.class)},[(0,_.Lk)("span",{innerHTML:e.title,class:"bold_move_to_side"},null,8,q),(0,_.bF)(n,{tooltip_text:e.tooltip,tooltip_type:"cost"},null,8,["tooltip_text"])],2)))),256))])])])])]),t[12]||(t[12]=(0,_.Lk)("hr",{class:"pr_divider"},null,-1)),(0,_.Lk)("div",G,[(0,_.Lk)("div",V,[(0,_.Lk)("div",Q,[(0,_.Lk)("div",$,[(0,_.Lk)("ul",null,[((0,_.uX)(!0),(0,_.CE)(_.FK,null,(0,_.pI)(l.p_data.benefits,(e=>((0,_.uX)(),(0,_.CE)("li",{class:(0,x.C4)(e.class)},(0,x.v_)(e.title),3)))),256))])])]),t[10]||(t[10]=(0,_.Lk)("hr",{class:"pr_divider d-block d-lg-none"},null,-1)),(0,_.Lk)("div",N,[(0,_.Lk)("div",H,[(0,_.Lk)("ul",null,[((0,_.uX)(!0),(0,_.CE)(_.FK,null,(0,_.pI)(l.p_data.card_inputs,((e,r)=>((0,_.uX)(),(0,_.CE)("li",null,[(0,_.Lk)("div",{class:(0,x.C4)(l.validation_highlight.error&&l.validation_highlight.input_name===r?"product_highlight":"")},["checkbox"===e.type?((0,_.uX)(),(0,_.Wv)(d,{key:0,field_id:r,field_data:e,emit_name:"recalculate_product",onRecalculate_product:s.recalculate_product},null,8,["field_id","field_data","onRecalculate_product"])):"select"===e.type&&"multiple"!==e.type_settings?.select_type?((0,_.uX)(),(0,_.Wv)(i,{key:1,field_id:r,field_data:e,emit_name:"recalculate_product",onRecalculate_product:s.recalculate_product},null,8,["field_id","field_data","onRecalculate_product"])):"select"===e.type&&"multiple"===e.type_settings?.select_type?((0,_.uX)(),(0,_.Wv)(c,{key:2,field_id:r,field_data:e,emit_name:"recalculate_product",onRecalculate_product:s.recalculate_product},null,8,["field_id","field_data","onRecalculate_product"])):"date"===e.type?((0,_.uX)(),(0,_.Wv)(u,{key:3,field_id:r,field_data:e,emit_name:"recalculate_product",onRecalculate_product:s.recalculate_product},null,8,["field_id","field_data","onRecalculate_product"])):"plaintext"===e.type?((0,_.uX)(),(0,_.Wv)(p,{key:4,field_id:r,field_data:e,in_product:!0},null,8,["field_id","field_data"])):((0,_.uX)(),(0,_.CE)("p",J,[(0,_.Lk)("strong",null,(0,x.v_)(r),1),t[9]||(t[9]=(0,_.eW)(" unsupported type"))]))],2)])))),256))]),null!==l.p_data.extended_inputs?((0,_.uX)(),(0,_.CE)("button",{key:0,onClick:t[1]||(t[1]=(...e)=>s.open_extended&&s.open_extended(...e)),class:(0,x.C4)(["btn w-100 mt-2",l.p_data.extended_errors?"btn-accent":"btn-primary"])}," Rozšírené nastavenia"+(0,x.v_)(l.p_data.extended_errors?" - ERROR!":""),3)):(0,_.Q3)("",!0)])])]),l.p_data.product.crossell?((0,_.uX)(),(0,_.CE)("div",{key:0,class:(0,x.C4)(["pr_bundle",l.validation_highlight.error?"product_highlight":""])},[t[11]||(t[11]=(0,_.Lk)("span",{class:"bundle_img"},null,-1)),(0,_.Lk)("p",null,(0,x.v_)(l.p_data.product.crossell),1)],2)):(0,_.Q3)("",!0)])]),(0,_.Lk)("div",Z,[(0,_.Lk)("div",Y,[(0,_.Lk)("div",ee,[l.p_data.price.base>0?((0,_.uX)(),(0,_.CE)("span",te,(0,x.v_)(l.p_data.price.base)+"€ ",1)):(0,_.Q3)("",!0),l.p_data.price.discount>0?((0,_.uX)(),(0,_.CE)("span",re,(0,x.v_)(l.p_data.price.discount)+"% ",1)):(0,_.Q3)("",!0)]),(0,_.bo)((0,_.Lk)("div",{onClick:t[2]||(t[2]=(...e)=>s.get_price_ws_details&&s.get_price_ws_details(...e)),class:(0,x.C4)(["pr_price",s.dont_allow_limity?"":"price_has_details"])},[(0,_.Lk)("span",_e,(0,x.v_)(l.p_data.price.for_period),1),(0,_.Lk)("span",ae,(0,x.v_)(l.p_data.price.currency),1),(0,_.Lk)("span",oe,(0,x.v_)(l.p_data.price.period_label),1)],2),[[a.aG,!s.show_loading_animation&&l.p_data.price.for_period]]),(0,_.bo)((0,_.Lk)("div",le,[(0,_.bF)(h)],512),[[a.aG,s.show_loading_animation]]),(0,_.bo)((0,_.Lk)("div",se,[l.p_data.error.errors?((0,_.uX)(),(0,_.CE)("span",ie,[(0,_.Lk)("span",{class:(0,x.C4)(l.p_data.error.alt_text?"viacinfo":"")},(0,x.v_)(l.p_data.error.alt_text?"VIAC INFO":"Nedá sa poistiť"),3),(0,_.bF)(n,{tooltip_text:l.p_data.error.errors,tooltip_type:"info"},null,8,["tooltip_text"])])):null!==l.p_data.extended_errors?((0,_.uX)(),(0,_.CE)("span",ne,[(0,_.Lk)("span",{class:(0,x.C4)(l.p_data.error.alt_text?"viacinfo":"")}," Rozšír. ERR ",2),(0,_.bF)(n,{tooltip_text:JSON.stringify(this.p_data.extended_errors),tooltip_type:"info"},null,8,["tooltip_text"])])):"4"===l.p_data.button.show?((0,_.uX)(),(0,_.CE)("button",{key:2,onClick:t[3]||(t[3]=(...e)=>s.validate_then_select&&s.validate_then_select(...e)),disabled:r.being_selected,class:"btn btn-xlg btn-right btn-accent w-100"},(0,x.v_)(s.not_zeteo_product?"Vybrať":"Uzatvoriť"),9,de)):"3"===l.p_data.button.show?((0,_.uX)(),(0,_.CE)("button",{key:3,onClick:t[4]||(t[4]=(...e)=>s.redirect_to_product&&s.redirect_to_product(...e)),disabled:r.being_selected,class:"btn btn-xlg btn-right btn-accent w-100"},(0,x.v_)(s.not_zeteo_product?"Vybrať":"Uzatvoriť"),9,ce)):"2"===l.p_data.button.show?((0,_.uX)(),(0,_.CE)("span",ue,[(0,_.Lk)("span",{class:(0,x.C4)(l.p_data.error.alt_text?"viacinfo":"")},(0,x.v_)(l.p_data.error.alt_text?"VIAC INFO":"Nedá sa poistiť"),3),(0,_.bF)(n,{tooltip_text:l.p_data.error.info,tooltip_type:"info"},null,8,["tooltip_text"])])):"1"===l.p_data.button.show||"5"===l.p_data.button.show?((0,_.uX)(),(0,_.CE)("button",{key:5,onClick:t[5]||(t[5]=(...e)=>s.select_this_product&&s.select_this_product(...e)),disabled:r.being_selected,class:"btn btn-xlg btn-right btn-accent w-100"},(0,x.v_)(s.not_zeteo_product?"Vybrať":"Uzatvoriť"),9,pe)):(0,_.Q3)("",!0),"1"===l.p_data.button.show&&l.p_data.product.warning&&null===l.p_data.extended_errors&&!l.p_data.error.errors?((0,_.uX)(),(0,_.CE)("div",he,[(0,_.bF)(n,{tooltip_text:l.p_data.product.warning,tooltip_type:"warning"},null,8,["tooltip_text"])])):(0,_.Q3)("",!0)],512),[[a.aG,!s.show_loading_animation]])])])],10,O)}class me{get_product_list(){let e={action_name:"getproducts",method:"GET",url:(0,p.A)().endpoint_url()+"online/getproducts/"+(0,p.A)().product_group_id()+"/?"+h.A.add_token_as_parameter()},t=new f.A;return t.prepare_params(e).handle_response().catch((e=>{throw e}))}select_product(){let e={action_name:"productselect",method:"GET",url:(0,p.A)().endpoint_url()+"online/productselect/"+(0,k.A)().get_selected_product().product_id+"/?"+h.A.add_token_as_parameter()};e.url+="&"+h.A.serialize_object((0,k.A)().get_selected_product());let t=new f.A;return t.prepare_params(e).handle_response().catch((e=>{throw e}))}}var ge=new me,be=r(5162),ve=r(1602),ke=r(6104),Ae=r(4211),ye=r(6451),we=r(4871),Ee=r(9452),xe=(r(8856),r(2095)),Oe=r(2050),Ce=r(3886),Le={props:{product_id:String,product_name:String,response:Object,being_calculated:Array,being_selected:Boolean},components:{Checkbox:ve.A,Select:ke.A,Multiple:Ae.A,Datepicker:ye.A,Plaintext:we.A,Bouncer_loading:b.A,Tooltip:xe.A},emits:["recalculate_product","select_running"],data(){return{loading:!0,validation_highlight:{error:!1,input_name:""},p_data:{logo:"",error:{errors:"",alt_text:!1,info:""},button:{show:"0",next_form:"",next_contract:"",next_redirect:"",validation_codition_old:"",validation_codition_new:"",filter_price_inputs:null},price:{for_period:"",currency:"",period_label:"",base:"",discount:""},product:{promo:"",stars:0,spoluucast_text:"",detail:"",detail_template:"",crossell:"",warning:"",limity:"0"},icons:[],benefits:[{title:"",class:""}],spoluucast_krytie:!1,card_inputs:!1,calc_documents:{},extended_inputs:null,extended_errors:null}}},created(){this.asign_values()},methods:{asign_values(){if("object"!==typeof this.response)return void Object.assign(this.$data,this.$options.data());let e=this.response.result[this.product_id].result,t=be.A.find_period(this.response);this.p_data={logo:e?.head?.logo?.comment,period:t,error:{errors:be.A.error_tooltip(e),alt_text:be.A.check_alt_text(),info:be.A.info_tooltip(e)},price:{for_period:be.A.price_for_period(e,t),currency:e?.result?.currency?.result||"€",period_label:be.A.label_for_period(e,t),base:e?.result?.base?.result,discount:e?.result?.discount?.result},button:{show:e?.next?.next?.result,next_form:e?.next?.next_form?.result,next_contract:e?.next?.next_contract_html?.result,next_redirect:e?.next?.next_redirect?.result,validation_codition_old:e?.next?.next?.comment,validation_codition_new:e?.next?.next_validation?.result,filter_price_inputs:e?.next?.next_global?.result||null},product:{promo:e?.product?.promo?.result,stars:parseInt(e?.product?.stars?.result,10),spoluucast_text:e?.product?.spoluucast?.formula_name,detail:e?.product?.detail?.result,detail_template:e?.product?.detail?.comment,crossell:"1"===e?.product?.crossell?.result?e?.product?.crossell?.comment:"",warning:e?.result?.warning?.result,limity:e?.product?.limity?.result||"0"},icons:be.A.sort_icons(e?.icon),benefits:be.A.sort_benefits(e?.benefit),spoluucast_krytie:be.A.product_form_formatter(e?.results_form?.comment,"spoluucast"),card_inputs:be.A.product_form_formatter(e?.results_form?.comment,"product"),calc_documents:be.A.format_calculate_docs(this.response.result[this.product_id].documents),extended_inputs:be.A.extended_form_formatter(e?.results_form?.comment),extended_errors:be.A.flatten_extended_errors(this.response,e?.results_form?.comment)},this.loading=!1},select_this_product(){(0,p.A)().is_read_only()?(0,p.A)().change_step(3):(this.loading=!0,this.$emit("select_running",!0),(0,k.A)().set_selected_product(this.product_id,this.p_data.button.next_form,this.p_data.button.next_contract,this.p_data.period,this.product_name,this.p_data.price.for_period),ge.select_product().then((e=>{if(200!==e.status||"success"!==e.result.response)return this.loading=!1,void this.$emit("select_running",!1);(0,p.A)().change_step(3)})))},redirect_to_product(){this.p_data.button.next_redirect?((0,k.A)().set_selected_product(this.product_id,this.p_data.button.next_form,this.p_data.button.next_contract,this.p_data.period,this.product_name,this.p_data.price.for_period),Oe.A.send_event("product_redirect"),window.open(this.p_data.button.next_redirect,"_blank").focus()):console.log(this.product_id+" next_redirect is undefined")},open_product_detail(){(0,k.A)().set_selected_product(this.product_id,null,null,null,null,null),(0,v.A)().store_modal_data({product_name:this.product_name,detail_template:this.p_data.product.detail_template}),(0,v.A)().open_it("Product_detail")},open_extended(){(0,v.A)().store_modal_data({extended_inputs:this.p_data.extended_inputs,extended_errors:this.p_data.extended_errors,product_name:this.product_name,product_id:this.product_id,period:this.p_data.period}),(0,v.A)().open_it("Extended_product_settings")},recalculate_product(){let e=Object.keys(this.p_data.card_inputs).concat(Object.keys(this.p_data.spoluucast_krytie)),t=h.A.serialize_specific_inputs(e);this.$emit("recalculate_product",this.product_id,t)},get_price_ws_details(){if(!this.dont_allow_limity)if(this.loading=!0,"1"===this.p_data.product.limity)Ee.A.set_data({product_template_identifier:this.product_id}).then((()=>{(0,v.A)().open_it("Product_ws_details"),this.loading=!1}));else if("2"===this.p_data.product.limity)for(let e in this.p_data.calc_documents)Ce.A.get_session_document(this.p_data.calc_documents[e].id).then((t=>{200===t.status?(h.A.downloadBase64(this.p_data.calc_documents[e].name,t.result.content),this.loading=!1):this.loading=!1}))},validate_then_select(){let e=structuredClone(this.p_data.button.validation_codition_old);e||(e=structuredClone(this.p_data.button.validation_codition_new)),this.validation_highlight=be.A.validate_product(e),this.validation_highlight.error||this.select_this_product(),setTimeout((()=>{this.validation_highlight.error=!0}),0),setTimeout((()=>{this.validation_highlight.error=!1}),500),setTimeout((()=>{this.validation_highlight.error=!0}),1e3),setTimeout((()=>{this.validation_highlight.error=!1}),1500),setTimeout((()=>{this.validation_highlight.error=!0}),2e3),setTimeout((()=>{this.validation_highlight.error=!1}),2500)}},computed:{show_loading_animation(){let e=this.being_calculated.indexOf(this.product_id);return this.being_calculated[e]||this.loading},dont_allow_limity(){return this.p_data.error.errors||!["1","2"].includes(this.p_data.product.limity)},not_zeteo_product(){return!(0,p.A)().is_zeteo_skin()}},watch:{response(){this.asign_values()}}};const Pe=(0,y.A)(Le,[["render",fe]]);var je=Pe;const De={class:"calc_title_area","data-cy":"title"},Me={key:0},Te={key:1},Ie=["title"];function We(e,t,r,a,o,l){const s=(0,_.g2)("Product_delivery");return(0,_.uX)(),(0,_.CE)("div",De,[0===r.loaded?((0,_.uX)(),(0,_.CE)("h2",Me," Hľadáme produkty... ")):((0,_.uX)(),(0,_.CE)("h2",Te,[t[0]||(t[0]=(0,_.eW)(" Našli sme ")),(0,_.Lk)("span",{title:"z "+r.total+" prepočítavaných",class:"text-accent"},(0,x.v_)(l.products_found),9,Ie)])),(0,_.bF)(s)])}var Xe={props:{loaded:Number,total:Number},components:{Product_delivery:E},data(){return{}},created(){},methods:{},computed:{products_found(){return 1===this.loaded?this.loaded+" produkt":this.loaded>1&&this.loaded<5?this.loaded+" produkty":this.loaded+" produktov"}}};const Re=(0,y.A)(Xe,[["render",We]]);var Se=Re;const Be={class:"d-flex align-items-stretch form_summary","data-cy":"summary"},Ke={class:"w-100 data_summary"},Ue={class:"d-flex flex-shrink-1 data_edit"};function ze(e,t,r,a,o,l){return(0,_.uX)(),(0,_.CE)("div",Be,[(0,_.Lk)("div",Ke,[t[1]||(t[1]=(0,_.Lk)("strong",null,"Vaše údaje:",-1)),(0,_.eW)(" "+(0,x.v_)(r.user_data),1)]),(0,_.Lk)("div",Ue,[(0,_.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>l.go_back&&l.go_back(...e)),class:"btn-text i_anchor my-auto"},t[2]||(t[2]=[(0,_.Lk)("span",{class:"i_edit"},null,-1),(0,_.Lk)("span",{class:"d-none d-sm-inline"},"upraviť",-1)]))])])}var Fe=r(9614),qe={props:{user_data:String},components:{},data(){return{}},created(){},methods:{go_back(){(0,p.A)().change_step(1)}},computed:{requested_direction(){return(0,Fe.A)().get_requested_direction()}},watch:{requested_direction(){null!==this.requested_direction&&"backward"===this.requested_direction&&((0,Fe.A)().reset_requested_direction(),this.go_back())}}};const Ge=(0,y.A)(qe,[["render",ze]]);var Ve=Ge;const Qe={class:"product_selection"},$e={class:"row"},Ne={class:"col-sm-6 col-md-4"},He={class:"form-check"},Je=["id","name","onUpdate:modelValue","disabled"],Ze=["for"],Ye={class:"text-center"},et={class:"text-center"};function tt(e,t,r,o,l,s){return(0,_.uX)(),(0,_.CE)("div",{class:(0,x.C4)(s.is_disabled?"the_form_is_disabled":""),id:"filters_form","data-cy":"filters"},[(0,_.Lk)("div",{onClick:t[0]||(t[0]=(...e)=>s.toggle&&s.toggle(...e)),class:"filter_head text-center"},t[2]||(t[2]=[(0,_.Lk)("p",{class:"filter_toggle"},[(0,_.Lk)("span",{class:"i_adjust"}),(0,_.eW)(" filter ")],-1)])),(0,_.bo)((0,_.Lk)("div",Qe,[(0,_.Lk)("div",$e,[((0,_.uX)(!0),(0,_.CE)(_.FK,null,(0,_.pI)(r.got_products,((e,t)=>((0,_.uX)(),(0,_.CE)("div",Ne,[(0,_.Lk)("div",He,[(0,_.bo)((0,_.Lk)("input",{id:t,name:t,"onUpdate:modelValue":e=>l.values[t]=e,disabled:s.disable_in_filter(t),"true-value":"1","false-value":"0",type:"checkbox",class:"form-check-input"},null,8,Je),[[a.lH,l.values[t]]]),(0,_.Lk)("label",{for:t,class:"form-check-label"},(0,x.v_)(e),9,Ze)])])))),256))]),(0,_.Lk)("div",Ye,[(0,_.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>s.filter_submit&&s.filter_submit(...e)),class:"btn btn-primary btn-m mt-3"}," Vyber produkty ")]),(0,_.bo)((0,_.Lk)("div",et,t[3]||(t[3]=[(0,_.Lk)("p",{class:"mt-2 mb-0 text-warning"},"Minimálne jeden z produktov musí byť vybraný.",-1)]),512),[[a.aG,l.error]])],512),[[a.aG,l.opened]])],2)}var rt=r(9126),_t={props:{got_products:Object,filtered_array:Array,disabled_from_calculate:Array,global_disabled:Boolean},components:{},emits:["calculate_all_products","filters_run_own_validate"],data(){return{opened:!1,values:{},error:!1}},created(){for(let e in this.got_products)this.got_products.hasOwnProperty(e)&&(0===this.filtered_array.length||this.filtered_array.indexOf(parseInt(e,10))>-1?this.values[e]="1":this.values[e]="0")},methods:{toggle(){this.opened=!this.opened},disable_in_filter(e){return e=parseInt(e,10),this.disabled_from_calculate.indexOf(e)>-1},filter_submit(){let e=[];for(let r in this.values)this.values.hasOwnProperty(r)&&"1"===this.values[r]&&e.push(r);if(0===e.length)return void(this.error=!0);this.error=!1,e.length===Object.keys(this.got_products).length&&(e=[]),this.$emit("filters_run_own_validate");let t="filtered_products="+e.join(",");rt.A.validate_global_form(t).then((t=>{200===t.status&&((0,k.A)().set_filtered_products(e.join(",")),this.$emit("calculate_all_products"))}))}},computed:{is_disabled(){return this.global_disabled}},watch:{}};const at=(0,y.A)(_t,[["render",tt],["__scopeId","data-v-35841e0b"]]);var ot=at;const lt={class:"col-sm-4"},st=["for"],it={class:"validation-placeholder validation-message"};function nt(e,t,r,a,o,l){const s=(0,_.g2)("Checkbox"),i=(0,_.g2)("Select"),n=(0,_.g2)("Text"),d=(0,_.g2)("Datepicker"),c=(0,_.g2)("Slider");return(0,_.uX)(),(0,_.CE)("div",{class:(0,x.C4)([l.is_disabled?"the_form_is_disabled":"","row g-0 global_form"]),"data-cy":"global_form"},[((0,_.uX)(!0),(0,_.CE)(_.FK,null,(0,_.pI)(r.global_inputs,((a,o)=>((0,_.uX)(),(0,_.CE)("div",lt,["checkbox"!==a.type?((0,_.uX)(),(0,_.CE)("label",{key:0,for:o},(0,x.v_)(a.label),9,st)):(0,_.Q3)("",!0),"checkbox"===a.type?((0,_.uX)(),(0,_.Wv)(s,{key:1,field_id:o,field_data:a,emit_name:"validate_global_changed",onValidate_global_changed:t[0]||(t[0]=t=>e.$emit("validate_global_changed"))},null,8,["field_id","field_data"])):"select"===a.type?((0,_.uX)(),(0,_.Wv)(i,{key:2,field_id:o,field_data:a,emit_name:"validate_global_changed",onValidate_global_changed:t[1]||(t[1]=t=>e.$emit("validate_global_changed"))},null,8,["field_id","field_data"])):"text"===a.type?((0,_.uX)(),(0,_.Wv)(n,{key:3,field_id:o,field_data:a,emit_name:"validate_global_changed",onValidate_global_changed:t[2]||(t[2]=t=>e.$emit("validate_global_changed"))},null,8,["field_id","field_data"])):"date"===a.type?((0,_.uX)(),(0,_.Wv)(d,{key:4,field_id:o,field_data:a,emit_name:"validate_global_changed",onValidate_global_changed:t[3]||(t[3]=t=>e.$emit("validate_global_changed"))},null,8,["field_id","field_data"])):"slider"===a.type?((0,_.uX)(),(0,_.Wv)(c,{key:5,field_id:o,field_data:a,emit_name:"validate_global_changed",onValidate_global_changed:t[4]||(t[4]=t=>e.$emit("validate_global_changed"))},null,8,["field_id","field_data"])):(0,_.Q3)("",!0),((0,_.uX)(!0),(0,_.CE)(_.FK,null,(0,_.pI)(r.global_errors[o],((e,r)=>((0,_.uX)(),(0,_.CE)("div",it,[t[5]||(t[5]=(0,_.Lk)("span",{class:"mark-circle mark-orange"},"!",-1)),(0,_.eW)(" "+(0,x.v_)(e),1)])))),256))])))),256))],2)}var dt=r(6710),ct=r(3327),ut={props:{global_disabled:Boolean,global_inputs:Object,global_errors:Object},components:{Checkbox:ve.A,Select:ke.A,Text:dt.A,Datepicker:ye.A,Slider:ct.A},emits:["validate_global_changed"],data(){return{}},created(){},methods:{},computed:{is_disabled(){return this.global_disabled}}};const pt=(0,y.A)(ut,[["render",nt],["__scopeId","data-v-1aaca802"]]);var ht=pt;const ft={class:"d-flex align-items-center flex-column flex-sm-row"};function mt(e,t,r,o,l,s){return(0,_.bo)(((0,_.uX)(),(0,_.CE)("div",{class:(0,x.C4)([s.is_disabled?"the_form_is_disabled":"","refine-prices"])},[(0,_.Lk)("div",ft,[t[1]||(t[1]=(0,_.Lk)("p",{class:"d-flex flex-column flex-sm-row text-center text-sm-start align-items-center"},[(0,_.Lk)("span",{class:"i_info mr-3"}),(0,_.eW)(" Uvedené ceny sú orientačné. Pre presný výpočet na mieru je potrebné doplniť ďalšie údaje. ")],-1)),(0,_.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>s.open_price&&s.open_price(...e)),class:(0,x.C4)([s.is_disabled?"the_form_is_disabled":"","btn btn-outline-primary btn-calculate"]),"data-cy":"price_form"}," Upresniť ceny ",2)])],2)),[[a.aG,s.any_is_empty_or_invalid]])}var gt={props:{global_disabled:Boolean,price_inputs:Object,global_errors:Object},components:{},emits:["validate_global_changed"],data(){return{}},created(){this.any_is_empty_or_invalid?this.open_price():this.$emit("validate_global_changed")},methods:{open_price(){(0,v.A)().store_modal_data({price_inputs:this.price_inputs,price_errors:this.global_errors}),(0,v.A)().open_it("Specify_product_price")}},computed:{is_disabled(){return this.global_disabled},any_is_empty_or_invalid(){let e=!1;for(let t in this.price_inputs)(""===(0,k.A)().get_user_input(t)||this.global_errors.hasOwnProperty(t))&&(e=!0);return e}},watch:{}};const bt=(0,y.A)(gt,[["render",mt],["__scopeId","data-v-11f93ef3"]]);var vt=bt,kt=r(4326),At={props:{},components:{Product_delivery:E,Product_template:je,Step_title:Se,Summary:Ve,Filters:ot,Bouncer_loading:b.A,Global_form:ht,Price_form:vt},data(){return{loaded:0,total:0,got_products:{},product_order:[],update_order:[],found_with_error:[],disabled_from_calculate:[],raw_responses:{},being_calculated:[],udaje:"",period:0,ready_filters:!1,ready_price:!1,global_inputs:{},price_inputs:!1,global_errors:{},global_disabled:!0,valid_global_show_products:!0,being_selected:!1}},created(){Promise.resolve().then((()=>Ee.A.session_info())).then((e=>{if(e.result?.state>=100)return(0,p.A)().change_step(5),Promise.reject("session already confirmed");1===e.result.read_only&&(0,p.A)().set_read_only()})).then((()=>ge.get_product_list())).then((e=>(this.got_products=e.result.products,(0,k.A)().set_filtered_products(e.result.filtered_products),rt.A.get_global_form()))).then((e=>{if(200!==e.status)return Promise.reject("get_global_form api failed");this.global_inputs=be.A.product_form_formatter(e.result.form,"global"),(0,k.A)().store_call_params(e.result.call_params),this.price_inputs=be.A.product_form_formatter(e.result.form,"price"),this.validate_global_changed()})).catch((e=>{console.log(e)}))},methods:{calculate_all_products(){this.loaded=0;let e=this.reduce_products_by_filtered();if(this.total=Object.keys(e).length,this.found_with_error=[],0===this.product_order.length)for(let t in this.got_products)this.product_order.push(parseInt(t,10));this.being_calculated=structuredClone(this.product_order),Ee.A.get_data().then((t=>{this.period=be.A.find_period(t);for(let r in e)this.calculate_product(parseInt(r,10),null)}))},calculate_product(e,t){kt.A.get_calculate(e,t,this.period).then((r=>{if(this.raw_responses[e]=r,void 0===r.result||void 0!==r.result.error||void 0===r.result[e]||"1"===r.result[e].result?.result?.disable_product?.result)return"1"===r.result?.[e]?.result?.result?.disable_product?.result?this.disabled_from_calculate.push(e):!1===r.result.validform?((0,v.A)().store_modal_data({type:"calculate_step2_form_isnt_valid",errors:r.result?.form_validation_error_elements,is_client_role:!1}),(0,v.A)().open_it("Ordinary_error_modal")):console.log("#"+e+" had error",r),this.found_with_error.push(e),this.total--,void this.count_loaded();this.udaje=be.A.search_for_udaje(r),(0,k.A)().store_call_params(r.result.call_params),null===t&&(this.update_order=be.A.find_order(r,null,e)),this.loaded++,this.count_loaded();let _=this.being_calculated.indexOf(e);_>-1&&delete this.being_calculated[_]}))},recalculate_product(e,t){this.loaded--,this.count_loaded(),this.being_calculated.push(e),this.calculate_product(e,t)},count_loaded(){this.loaded===this.total?(this.global_disabled=!1,this.ready_filters=!0,this.product_order=this.update_order):this.global_disabled=!0},reduce_products_by_filtered(){if(0===this.filtered_array.length)return this.got_products;let e=[];for(let t in this.got_products)-1!==this.filtered_array.indexOf(parseInt(t,10))&&(e[t]=this.got_products[t]);return e},validate_global_changed(){this.global_disabled=!0,this.global_errors={};let e=h.A.serialize_specific_inputs(Object.keys(this.global_inputs));rt.A.validate_global_form(e).then((e=>{if(!0!==e.result.validform)return this.global_errors=e.result.form_validation_error_elements,this.valid_global_show_products=!1,this.global_disabled=!1,void(this.ready_price=!0);!this.price_inputs||this.ready_price?(this.valid_global_show_products=!0,this.calculate_all_products()):this.ready_price=!0}))},filters_run_own_validate(){this.global_disabled=!0},select_running(e){this.being_selected=e,this.global_disabled=e}},computed:{user_data(){return this.udaje},only_displayed_products(){let e,t=[],r=this.product_order.length;for(e=0;e<r;e++){let r=parseInt(this.product_order[e],10);-1!==this.found_with_error.indexOf(r)||0!==this.filtered_array.length&&-1===this.filtered_array.indexOf(r)||t.push(r)}return t},filtered_array(){let e,t=(0,k.A)().get_filtered_products()?.split(","),r=[],_=t.length;for(e=0;e<_;e++)""!==t[e]&&r.push(parseInt(t[e],10));return r},display_filters(){return!!this.ready_filters&&(!(0,k.A)().direct_user_no_agent()||1!==(0,k.A)().get_receiver()&&2!==(0,k.A)().get_receiver())},classic_np_nav(){return!(0,p.A)().is_zeteo_skin()},closing_modal(){return(0,v.A)().get_modal_event_data()}},watch:{closing_modal(){if(null!==this.closing_modal){if("specify_recalculate"===this.closing_modal)this.validate_global_changed();else{let e=this.closing_modal;this.recalculate_product(e,null)}(0,v.A)().del_modal_event_data()}}}};const yt=(0,y.A)(At,[["render",n],["__scopeId","data-v-49552dd4"]]);var wt=yt},7080:function(e,t,r){var _=r(4402).has;e.exports=function(e){return _(e),e}},1767:function(e){e.exports=function(e){return{iterator:e,next:e.next,done:!1}}},3789:function(e,t,r){var _=r(9306),a=r(8551),o=r(9565),l=r(1291),s=r(1767),i="Invalid size",n=RangeError,d=TypeError,c=Math.max,u=function(e,t){this.set=e,this.size=c(t,0),this.has=_(e.has),this.keys=_(e.keys)};u.prototype={getIterator:function(){return s(a(o(this.keys,this.set)))},includes:function(e){return o(this.has,this.set,e)}},e.exports=function(e){a(e);var t=+e.size;if(t!==t)throw new d(i);var r=l(t);if(r<0)throw new n(i);return new u(e,r)}},9286:function(e,t,r){var _=r(4402),a=r(8469),o=_.Set,l=_.add;e.exports=function(e){var t=new o;return a(e,(function(e){l(t,e)})),t}},3440:function(e,t,r){var _=r(7080),a=r(4402),o=r(9286),l=r(5170),s=r(3789),i=r(8469),n=r(507),d=a.has,c=a.remove;e.exports=function(e){var t=_(this),r=s(e),a=o(t);return l(t)<=r.size?i(t,(function(e){r.includes(e)&&c(a,e)})):n(r.getIterator(),(function(e){d(t,e)&&c(a,e)})),a}},8750:function(e,t,r){var _=r(7080),a=r(4402),o=r(5170),l=r(3789),s=r(8469),i=r(507),n=a.Set,d=a.add,c=a.has;e.exports=function(e){var t=_(this),r=l(e),a=new n;return o(t)>r.size?i(r.getIterator(),(function(e){c(t,e)&&d(a,e)})):s(t,(function(e){r.includes(e)&&d(a,e)})),a}},4449:function(e,t,r){var _=r(7080),a=r(4402).has,o=r(5170),l=r(3789),s=r(8469),i=r(507),n=r(9539);e.exports=function(e){var t=_(this),r=l(e);if(o(t)<=r.size)return!1!==s(t,(function(e){if(r.includes(e))return!1}),!0);var d=r.getIterator();return!1!==i(d,(function(e){if(a(t,e))return n(d,"normal",!1)}))}},3838:function(e,t,r){var _=r(7080),a=r(5170),o=r(8469),l=r(3789);e.exports=function(e){var t=_(this),r=l(e);return!(a(t)>r.size)&&!1!==o(t,(function(e){if(!r.includes(e))return!1}),!0)}},8527:function(e,t,r){var _=r(7080),a=r(4402).has,o=r(5170),l=r(3789),s=r(507),i=r(9539);e.exports=function(e){var t=_(this),r=l(e);if(o(t)<r.size)return!1;var n=r.getIterator();return!1!==s(n,(function(e){if(!a(t,e))return i(n,"normal",!1)}))}},4916:function(e,t,r){var _=r(7751),a=function(e){return{size:e,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}},o=function(e){return{size:e,has:function(){return!0},keys:function(){throw new Error("e")}}};e.exports=function(e,t){var r=_("Set");try{(new r)[e](a(0));try{return(new r)[e](a(-1)),!1}catch(s){if(!t)return!0;try{return(new r)[e](o(-1/0)),!1}catch(i){var l=new r;return l.add(1),l.add(2),t(l[e](o(1/0)))}}}catch(i){return!1}}},5170:function(e,t,r){var _=r(6706),a=r(4402);e.exports=_(a.proto,"size","get")||function(e){return e.size}},3650:function(e,t,r){var _=r(7080),a=r(4402),o=r(9286),l=r(3789),s=r(507),i=a.add,n=a.has,d=a.remove;e.exports=function(e){var t=_(this),r=l(e).getIterator(),a=o(t);return s(r,(function(e){n(t,e)?d(a,e):i(a,e)})),a}},4204:function(e,t,r){var _=r(7080),a=r(4402).add,o=r(9286),l=r(3789),s=r(507);e.exports=function(e){var t=_(this),r=l(e).getIterator(),i=o(t);return s(r,(function(e){a(i,e)})),i}},7642:function(e,t,r){var _=r(6518),a=r(3440),o=r(4916),l=!o("difference",(function(e){return 0===e.size}));_({target:"Set",proto:!0,real:!0,forced:l},{difference:a})},8004:function(e,t,r){var _=r(6518),a=r(9039),o=r(8750),l=r(4916),s=!l("intersection",(function(e){return 2===e.size&&e.has(1)&&e.has(2)}))||a((function(){return"3,2"!==String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))}));_({target:"Set",proto:!0,real:!0,forced:s},{intersection:o})},3853:function(e,t,r){var _=r(6518),a=r(4449),o=r(4916),l=!o("isDisjointFrom",(function(e){return!e}));_({target:"Set",proto:!0,real:!0,forced:l},{isDisjointFrom:a})},5876:function(e,t,r){var _=r(6518),a=r(3838),o=r(4916),l=!o("isSubsetOf",(function(e){return e}));_({target:"Set",proto:!0,real:!0,forced:l},{isSubsetOf:a})},2475:function(e,t,r){var _=r(6518),a=r(8527),o=r(4916),l=!o("isSupersetOf",(function(e){return!e}));_({target:"Set",proto:!0,real:!0,forced:l},{isSupersetOf:a})},5024:function(e,t,r){var _=r(6518),a=r(3650),o=r(4916);_({target:"Set",proto:!0,real:!0,forced:!o("symmetricDifference")},{symmetricDifference:a})},1698:function(e,t,r){var _=r(6518),a=r(4204),o=r(4916);_({target:"Set",proto:!0,real:!0,forced:!o("union")},{union:a})}}]);