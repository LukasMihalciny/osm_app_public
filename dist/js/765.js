"use strict";(self["webpackChunkosmapp_webpack_2107x"]=self["webpackChunkosmapp_webpack_2107x"]||[]).push([[765],{7765:function(e,t,i){i.r(t),i.d(t,{default:function(){return w}});var o=i(641),l=i(3751),n=i(33);const s={class:"text-center text-warning fw-bold"},r={class:"col-sm-12 mb-3"},a=["for"],c={key:1},d={class:"validation-placeholder validation-message"},u={class:"text-center"},p=["disabled"],_=["disabled"];function m(e,t,i,m,k,v){const f=(0,o.g2)("Text"),h=(0,o.g2)("Bouncer_loading"),b=(0,o.g2)("Modal_body");return(0,o.uX)(),(0,o.Wv)(b,{close:!0,title:"Upresniť cenu",class:"modal-signature"},{default:(0,o.k6)((()=>[t[5]||(t[5]=(0,o.Lk)("p",{class:"mb-3"},[(0,o.eW)(" Cena je predbežne orientačná. "),(0,o.Lk)("br"),(0,o.eW)(" Aby sme Vám vedeli zobraziť presnú cenu, potrebujeme od Vás dodatočné údaje. ")],-1)),t[6]||(t[6]=(0,o.Lk)("p",null,[(0,o.eW)(" Ak Vám postačuje orientačná cena, možte pokračovať bez doplnenia údajov. "),(0,o.Lk)("br"),(0,o.eW)(" Presná cena Vám bude dopočítaná pred uzatvorením zmluvy. ")],-1)),t[7]||(t[7]=(0,o.Lk)("p",null," Poskytovateľ produktu potrebuje na upresnenie ceny nasledovné údaje: ",-1)),(0,o.bo)((0,o.Lk)("p",s," Všetky údaje sú potrebné pre upresnenie ceny. ",512),[[l.aG,k.invalid]]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(k.price_inputs,((e,i)=>((0,o.uX)(),(0,o.CE)("div",r,[(0,o.Lk)("label",{for:i,class:"input-label"},(0,n.v_)(e?.label),9,a),"text"===e?.type?((0,o.uX)(),(0,o.Wv)(f,{key:0,onKeyup:(0,l.jR)(v.specify_submit,["enter"]),emit_name:"fake_emit",field_id:i,field_data:e},null,8,["onKeyup","field_id","field_data"])):((0,o.uX)(),(0,o.CE)("p",c,[(0,o.Lk)("strong",null,(0,n.v_)(i),1),t[2]||(t[2]=(0,o.Lk)("br",null,null,-1)),t[3]||(t[3]=(0,o.eW)(" Specify_product_price modal currently supports 'text' input type only. "))])),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(k.price_errors[i],((e,i)=>((0,o.uX)(),(0,o.CE)("div",d,[t[4]||(t[4]=(0,o.Lk)("span",{class:"mark-circle mark-orange"},"!",-1)),(0,o.eW)(" "+(0,n.v_)(e),1)])))),256))])))),256)),(0,o.Lk)("div",u,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>v.specify_submit&&v.specify_submit(...e)),disabled:k.loading,class:"btn btn-primary w-100 mt-3 mb-2",title:"Na základe Vami doplnených údajov vieme zistiť finálnu presnú cenu."}," Upresniť cenu ",8,p),v.allow_skip?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[1]||(t[1]=(...e)=>v.skip_specify&&v.skip_specify(...e)),disabled:k.loading,class:"btn btn-secondary w-100",title:"Možte pokračovať s orientačnou cenou. Finálnu cenu prepočítame tesne pred uzatvorením zmluvy."}," Pokračovať s orientačnou ",8,_)):(0,o.Q3)("",!0),(0,o.bo)((0,o.bF)(h,{size:"large"},null,512),[[l.aG,k.loading]])])])),_:1})}var k=i(8384),v=i(55),f=i(2873),h=i(3177),b=i(6343),y=i(9126),g=i(5162),A=i(3567),L={props:{},components:{Modal_body:k.A,Bouncer_loading:v.A,Text:A.A},emits:[],data(){return{launched_from:null,product_id:null,price_inputs:{},price_errors:{},loading:!1,invalid:!1}},created(){this.launched_from=(0,f.A)().retrieve_modal_data().launched_from,"from_global"===this.launched_from?(this.price_inputs=(0,f.A)().retrieve_modal_data().price_inputs,this.price_errors=(0,f.A)().retrieve_modal_data().price_errors):"from_product"===this.launched_from?(this.product_id=(0,f.A)().retrieve_modal_data().product_id,this.loading=!0,y.A.get_global_form().then((e=>{this.loading=!1;let t=g.A.product_form_formatter(e.result.form,"price"),i=(0,f.A)().retrieve_modal_data().filter_price_inputs;if(null!==i){i=i.split(",");for(let e=0;e<i.length;e++)void 0!==t?.[i[e]]&&(this.price_inputs[i[e]]=t[i[e]])}else this.price_inputs=t}))):console.log("unexpected launched_from",this.launched_from)},methods:{skip_specify(){Object.keys(this.price_inputs);(0,h.A)().reset_form_values(),(0,f.A)().set_modal_event_data("indicative_price_"+this.product_id),(0,f.A)().close_them_all()},specify_submit(){if(this.empty_inputs)return void(this.invalid=!0);this.loading=!0;let e=b.A.serialize_specific_inputs(Object.keys(this.price_inputs));y.A.validate_global_form(e).then((e=>{this.loading=!1,!0===e.result.validform?((0,f.A)().set_modal_event_data("specify_recalculate"),(0,f.A)().close_them_all()):(console.log(e.result?.form_validation_error_elements),this.price_errors=e.result.form_validation_error_elements)}))}},computed:{allow_skip(){return"from_product"===this.launched_from&&0===Object.keys(this.price_errors).length},empty_inputs(){for(let e in this.price_inputs){let t=(0,h.A)().get_user_input(e);if(""===t)return!0}return this.invalid=!1,!1}},watch:{}},C=i(6262);const j=(0,C.A)(L,[["render",m]]);var w=j},8384:function(e,t,i){i.d(t,{A:function(){return _}});var o=i(641),l=i(33);const n={class:"modal-content"},s={class:"modal-header"},r={class:"modal-body"};function a(e,t,i,a,c,d){return(0,o.uX)(),(0,o.CE)("div",{onClick:t[1]||(t[1]=(...e)=>d.did_click_outside&&d.did_click_outside(...e)),class:(0,l.C4)(["vue_modal",i.huge?"huge":""]),"data-cy":"modal"},[(0,o.Lk)("div",n,[(0,o.Lk)("div",s,[(0,o.Lk)("h4",null,(0,l.v_)(i.title),1),i.close?((0,o.uX)(),(0,o.CE)("span",{key:0,onClick:t[0]||(t[0]=(...e)=>d.close_me&&d.close_me(...e)),class:"i_close"})):(0,o.Q3)("",!0)]),(0,o.Lk)("div",r,[(0,o.RG)(e.$slots,"default")])])],2)}var c=i(2873),d={props:{close:Boolean,title:String,huge:Boolean},components:{},emits:[],data(){return{}},created(){document.addEventListener("keyup",this.close_me)},beforeUnmount(){document.removeEventListener("keyup",this.close_me)},methods:{close_me(e){this.close&&("click"===e?.type||"keyup"===e?.type&&27===e?.keyCode)&&(0,c.A)().close_them_all()},did_click_outside(e){e.target.classList.contains("vue_modal")&&this.close_me(e)}},computed:{},watch:{}},u=i(6262);const p=(0,u.A)(d,[["render",a]]);var _=p}}]);