"use strict";(self["webpackChunkosmapp_webpack_3x25x"]=self["webpackChunkosmapp_webpack_3x25x"]||[]).push([[924],{55:function(e,t,a){a.d(t,{A:function(){return _}});var i=a(641),n=a(33);const r={class:"spinner"};function s(e,t,a,s,l,o){return(0,i.uX)(),(0,i.CE)("div",r,[(0,i.Lk)("div",{class:(0,n.C4)(["bounce1",a.size])},null,2),(0,i.Lk)("div",{class:(0,n.C4)(["bounce2",a.size])},null,2),(0,i.Lk)("div",{class:(0,n.C4)(["bounce3",a.size])},null,2)])}var l={props:{size:String},components:{},data(){return{}},created(){},methods:{},computed:{}},o=a(6262);const d=(0,o.A)(l,[["render",s]]);var _=d},2563:function(e,t,a){a.d(t,{A:function(){return p}});var i=a(641),n=a(33);const r={class:"modal-content","data-cy":"modal_content"},s={class:"modal-header"},l={class:"modal-body","data-cy":"modal_body"};function o(e,t,a,o,d,_){return(0,i.uX)(),(0,i.CE)("div",{onClick:t[1]||(t[1]=(...e)=>_.did_click_outside&&_.did_click_outside(...e)),class:(0,n.C4)(["vue_modal",a.modal_size]),"data-cy":"modal"},[(0,i.Lk)("div",r,[(0,i.Lk)("div",s,[a.icon?((0,i.uX)(),(0,i.CE)("span",{key:0,class:(0,n.C4)(["modal-icon",a.icon])},null,2)):(0,i.Q3)("",!0),(0,i.Lk)("h4",null,(0,n.v_)(a.title),1),a.close?((0,i.uX)(),(0,i.CE)("span",{key:1,onClick:t[0]||(t[0]=(...e)=>_.close_me&&_.close_me(...e)),class:"i_close"})):(0,i.Q3)("",!0)]),(0,i.Lk)("div",l,[(0,i.RG)(e.$slots,"default")])])],2)}var d=a(2873),_={props:{close:Boolean,title:String,modal_size:String,icon:{type:String}},components:{},emits:[],data(){return{}},created(){document.addEventListener("keyup",this.close_me)},beforeUnmount(){document.removeEventListener("keyup",this.close_me)},methods:{close_me(e){this.close&&("click"===e?.type||"keyup"===e?.type&&27===e?.keyCode)&&(0,d.A)().close_them_all()},did_click_outside(e){e.target.classList.contains("vue_modal")&&this.close_me(e)}},computed:{},watch:{}},c=a(6262);const u=(0,c.A)(_,[["render",o]]);var p=u},5254:function(e,t,a){var i=a(8700),n=a(3175);class r{car_data_search(e,t){let a={action_name:"car-data-search",method:"GET",url:(0,i.A)().endpoint_url()+"api/car-data-search/?"+e+"="+t},r=new n.A;return r.prepare_params(a).handle_response().catch(e=>{throw e})}ico_info(e){let t="node_red"===(0,i.A)().get_run_mode()?(0,i.A)().get_flow_id():(0,i.A)().product_group_id(),a={action_name:"ico-info",method:"GET",url:(0,i.A)().endpoint_url()+"online/ico-info/"+e+"/?type="+t},r=new n.A;return r.prepare_params(a).handle_response().catch(e=>{throw e})}car_valuation_options(e){let t={action_name:"car-valuation-options",method:"GET",url:(0,i.A)().endpoint_url()+"api/car-valuation-options/?"+e},a=new n.A;return a.prepare_params(t).handle_response().catch(e=>{throw e})}car_valuation_price(e){let t={action_name:"car-valuation-price",method:"GET",url:(0,i.A)().endpoint_url()+"api/car-valuation-price/?"+e},a=new n.A;return a.prepare_params(t).handle_response().catch(e=>{throw e})}}t.A=new r},6710:function(e,t,a){a.d(t,{A:function(){return g}});var i=a(641),n=a(33),r=a(3751);const s={key:0,class:"cloud_info"},l=["id","name","placeholder","disabled","maxlength","minlength"];function o(e,t,a,o,d,_){return(0,i.uX)(),(0,i.CE)(i.FK,null,[d.cloud_info?((0,i.uX)(),(0,i.CE)("div",s,t[3]||(t[3]=[(0,i.Lk)("span",null," Boli odstránené nežiaduce znaky. ",-1)]))):(0,i.Q3)("",!0),(0,i.bo)((0,i.Lk)("input",{id:a.field_id,name:a.field_id,"onUpdate:modelValue":t[0]||(t[0]=e=>_.value=e),placeholder:a.field_data.placeholder,disabled:_.is_disabled,onBlur:t[1]||(t[1]=(...e)=>_.transform_value&&_.transform_value(...e)),onKeydown:t[2]||(t[2]=(...e)=>_.prevent_letters_in_float&&_.prevent_letters_in_float(...e)),maxlength:_.html_attributes(!0),minlength:_.html_attributes(!1),type:"text",class:(0,n.C4)(["form-control",_.transform_class])},null,42,l),[[r.Jo,_.value,void 0,{lazy:!0}]])],64)}var d=a(3177),_=a(8700),c=a(6343);let u={props:{},components:{},emits:[],data(){return{dynamic:{majetok_podlazie:"majetok_poschodie"}}},created(){},methods:{},computed:{dynamic_parent(){return this.dynamic.hasOwnProperty(this.field_id)?(0,d.A)().get_form_value(this.dynamic[this.field_id]):null}},watch:{dynamic_parent(){isNaN(this.dynamic_parent)||""===this.dynamic_parent?this.value="":this.value=parseInt(this.dynamic_parent,10)+1}}};var p=u,h=(a(4979),a(1678),a(5254));let m={props:{},components:{},emits:[],data(){return{watched_id:"havarijne_auto_vybava",cena_id:"havarijne_auto_cena",vyroba_id:"havarijne_rokvyroby",cena_date:"havarijne_auto_registracia",cena_required:["havarijne_auto_znacka","havarijne_auto_model","havarijne_vykon","havarijne_auto_vin","havarijne_palivo"],cena_optional:["havarijne_objem","havarijne_hmotnost","havarijne_rokvyroby","havarijne_auto_prevodovka","havarijne_auto_registracia","havarijne_auto_pocet_sedadiel","havarijne_auto_karoseria"],stanovenie_id:"havarijne_auto_cena_stanovenie"}},created(){this.cena_request()},methods:{cena_request(){if(null===this.cached_listener)return;let e=structuredClone(this.cached_listener),t=(0,d.A)().get_form_value(this.vyroba_id);if(""===e||""===t)return void(this.cena_disable=!1);this.cena_disable=!0;let a,i={},n=this.cena_required.length;for(a=0;a<n;a++)if(i[this.cena_required[a]]=(0,d.A)().get_form_value(this.cena_required[a]),""===i[this.cena_required[a]])return;for(n=this.cena_optional.length,a=0;a<n;a++){let e=(0,d.A)().get_form_value(this.cena_optional[a]);""!==e&&void 0!==e&&(this.cena_optional[a]===this.cena_date&&(e=c.A.format_car_request_date(e)),i[this.cena_optional[a]]=e)}i[this.watched_id]=e,i=c.A.serialize_object(i),h.A.car_valuation_price(i).then(e=>{200===e.status&&(this.value=e.result.data?.[0]?.[this.cena_id])})}},computed:{cached_listener(){return this.field_id!==this.cena_id?null:(0,d.A)().get_form_value(this.watched_id)},cached_stanovenie(){return this.field_id!==this.cena_id?null:(0,d.A)().get_form_value(this.stanovenie_id)}},watch:{cached_listener(){this.cena_request()},cached_stanovenie(){"2"===this.cached_stanovenie&&(this.cena_disable=!1,(0,d.A)().delete_form_value(this.watched_id))}}};var v=m,f={props:{field_id:String,field_data:Object,emit_name:String},components:{},emits:["validate_global_changed"],mixins:[p,v],data(){return{cena_disable:!1,cloud_info:!1}},created(){},methods:{transform_value(){if("string"===typeof this.value&&this.value!==this.value.trim()){let e=this.value.trim();this.value!==e&&(this.value=e)}if("uppercase"===this.field_data.type_settings?.transform){let e=this.value.toUpperCase();this.value!==e&&(this.value=e)}else if("capitalize"===this.field_data.type_settings?.transform){let e=this.value.charAt(0).toUpperCase()+this.value.slice(1);this.value!==e&&(this.value=e)}if("digits_only"===this.field_data.input_settings?.sanitize_value){let e=c.A.keep_only_numbers(this.value);this.value!==e&&(this.value=e,this.cloud_info=!0,setTimeout(()=>{this.cloud_info=!1},4e3))}if("dec"===this.field_data.value_type){let e=this.value.replace(/,/g,".");e=e.replace(/[^\d.]/g,""),e=e.replace(/^0+/,"");let t=e.indexOf(".");-1===t&&(e+="."),t=e.indexOf("."),0===t&&(e="0."+e),t=e.indexOf(".");let a=e.slice(t);a=a.replace(/\./g,"");let i=this.field_data.type_settings?.decimal_digits||2;i=parseInt(i,10),a.length>i?a=a.slice(0,i):a.length<i&&(a=a.padEnd(i,"0")),this.value=e.slice(0,t+1)+a}void 0!==this.emit_name&&this.$emit(this.emit_name)},prevent_letters_in_float(e){if("dec"!==this.field_data.value_type)return;let t=[",",".","Backspace","Delete","Escape","Enter","Tab","ArrowRight","ArrowLeft","ArrowUp","ArrowDown"];!1===e.ctrlKey&&isNaN(parseInt(e.key,10))&&-1===t.indexOf(e.key)&&e.preventDefault();let a=this.value.match(/,|\./)?.index,i=this.value.slice(a),n=this.field_data.type_settings?.decimal_digits||2;void 0!==a&&i.length>n&&!1===e.ctrlKey&&-1===t.indexOf(e.key)&&e.target.selectionStart>a&&e.preventDefault()},html_attributes(e){if(e){let e=this.field_id.includes("email")?60:50;return this.field_data.attributes?.maxlength||e}return this.field_data.attributes?.minlength||0}},computed:{transform_class(){return"uppercase"===this.field_data.type_settings?.transform?"text_uppercase":"capitalize"===this.field_data.type_settings?.transform?"text_capitalize":""},is_disabled(){return(0,_.A)().is_read_only()||this.field_data.type_settings?.disabled||this.cena_disable},value:{get(){return void 0!==this.emit_name?(0,d.A)().get_user_input(this.field_id):(0,d.A)().get_form_value(this.field_id)},set(e){(0,d.A)().set_form_value(this.field_id,e)}}},watch:{}},y=a(6262);const b=(0,y.A)(f,[["render",o]]);var g=b},9924:function(e,t,a){a.r(t),a.d(t,{default:function(){return C}});var i=a(641),n=a(33),r=a(3751);const s={class:"col-sm-12 mb-3"},l=["for"],o={key:1},d={class:"validation-placeholder validation-message"},_={class:"text-center"},c=["disabled"],u=["disabled"];function p(e,t,a,p,h,m){const v=(0,i.g2)("Text"),f=(0,i.g2)("Bouncer_loading"),y=(0,i.g2)("Modal_body");return(0,i.uX)(),(0,i.Wv)(y,{close:!1,title:"Upresniť cenu",class:"modal-calculate",icon:"i_calculate"},{default:(0,i.k6)(()=>[t[5]||(t[5]=(0,i.Lk)("p",{class:"mb-3"},[(0,i.eW)(" Cena je predbežne orientačná. "),(0,i.Lk)("br"),(0,i.eW)(" Aby sme Vám mohli zobraziť presnú cenu, potrebujeme od Vás doplniť niektoré údaje. ")],-1)),t[6]||(t[6]=(0,i.Lk)("p",null,[(0,i.eW)(" Ak Vám postačuje orientačná cena, môžete pokračovať aj bez ich doplnenia. "),(0,i.Lk)("br"),(0,i.eW)(" Presná cena Vám bude dopočítaná pred uzatvorením zmluvy. ")],-1)),t[7]||(t[7]=(0,i.Lk)("p",null," Poskytovateľ produktu potrebuje na upresnenie ceny nasledovné údaje: ",-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(h.price_inputs,(e,a)=>((0,i.uX)(),(0,i.CE)("div",s,[(0,i.Lk)("label",{for:a,class:"input-label"},(0,n.v_)(e?.label),9,l),"text"===e?.type?((0,i.uX)(),(0,i.Wv)(v,{key:0,emit_name:"fake_emit",field_id:a,field_data:e},null,8,["field_id","field_data"])):((0,i.uX)(),(0,i.CE)("p",o,[(0,i.Lk)("strong",null,(0,n.v_)(a),1),t[2]||(t[2]=(0,i.Lk)("br",null,null,-1)),t[3]||(t[3]=(0,i.eW)(" Specify_product_price modal currently supports 'text' input type only. "))])),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(h.price_errors[a],(e,a)=>((0,i.uX)(),(0,i.CE)("div",d,[t[4]||(t[4]=(0,i.Lk)("span",{class:"mark-circle mark-orange"},"!",-1)),(0,i.eW)(" "+(0,n.v_)(e),1)]))),256))]))),256)),(0,i.Lk)("div",_,[(0,i.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>m.specify_submit&&m.specify_submit(...e)),disabled:h.loading,class:"btn btn-primary w-100 mt-3 mb-2","data-cy":"specify_product_price_submit"}," Pokračovať ",8,c),(0,i.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>m.specify_skip&&m.specify_skip(...e)),disabled:h.loading,class:"btn btn-outline-primary w-100 mb-2","data-cy":"specify_product_price_cancel"}," Pokračovať bez upresnenia ",8,u),(0,i.bo)((0,i.bF)(f,{size:"large",class:"mt-3"},null,512),[[r.aG,h.loading]])])]),_:1,__:[5,6,7]})}var h=a(2563),m=a(55),v=a(2873),f=a(3177),y=a(6343),b=a(9126),g=a(6710),k=a(5162),A={props:{},components:{Modal_body:h.A,Bouncer_loading:m.A,Text:g.A},emits:[],data(){return{price_inputs:{},price_errors:{},loading:!1,repeat_invalid:!1,product_id:void 0}},created(){this.product_id=(0,v.A)().retrieve_modal_data().product_id||void 0,this.price_inputs=(0,v.A)().retrieve_modal_data().price_inputs,this.price_errors=(0,v.A)().retrieve_modal_data().price_errors,this.product_id&&(this.loading=!0,b.A.get_global_form().then(e=>{this.loading=!1;let t=k.A.product_form_formatter(e.result.form,"price"),a=(0,v.A)().retrieve_modal_data().filter_price_inputs;if(null!==a){a=a.split(",");for(let e=0;e<a.length;e++)void 0!==t?.[a[e]]&&(this.price_inputs[a[e]]=t[a[e]])}else this.price_inputs=t}))},methods:{specify_submit(){this.loading=!0;let e=y.A.serialize_specific_inputs(Object.keys(this.price_inputs));b.A.validate_global_form(e).then(e=>{this.loading=!1;let t=Object.keys(this.price_inputs),a=!1,i=e.result?.form_validation_error_elements||{};for(let n=0;n<t.length;n++)t[n]in i&&(a=!0);!0!==e.result.validform&&a?(console.log(i),this.price_errors=i,this.remove_errors_try_again()):((0,v.A)().set_modal_event_data("specify_recalculate"),(0,v.A)().close_them_all())})},specify_skip(){void 0===this.product_id?(this.repeat_invalid=!0,this.specify_submit()):((0,v.A)().set_modal_event_data("indicative_price_"+this.product_id),(0,v.A)().close_them_all())},remove_errors_try_again(){if(this.repeat_invalid){this.repeat_invalid=!1;for(let e in this.price_inputs)this.price_errors.hasOwnProperty(e)&&(0,f.A)().delete_form_value(e);this.specify_submit()}}},computed:{},watch:{}},w=a(6262);const j=(0,w.A)(A,[["render",p]]);var C=j}}]);