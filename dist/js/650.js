"use strict";(self["webpackChunkosmapp_webpack_3x25x"]=self["webpackChunkosmapp_webpack_3x25x"]||[]).push([[650],{55:function(e,o,t){t.d(o,{A:function(){return d}});var n=t(641),a=t(33);const s={class:"spinner"};function l(e,o,t,l,i,r){return(0,n.uX)(),(0,n.CE)("div",s,[(0,n.Lk)("div",{class:(0,a.C4)(["bounce1",t.size])},null,2),(0,n.Lk)("div",{class:(0,a.C4)(["bounce2",t.size])},null,2),(0,n.Lk)("div",{class:(0,a.C4)(["bounce3",t.size])},null,2)])}var i={props:{size:String},components:{},data(){return{}},created(){},methods:{},computed:{}},r=t(6262);const c=(0,r.A)(i,[["render",l]]);var d=c},2563:function(e,o,t){t.d(o,{A:function(){return p}});var n=t(641),a=t(33);const s={class:"modal-content","data-cy":"modal_content"},l={class:"modal-header"},i={class:"modal-body","data-cy":"modal_body"};function r(e,o,t,r,c,d){return(0,n.uX)(),(0,n.CE)("div",{onClick:o[1]||(o[1]=(...e)=>d.did_click_outside&&d.did_click_outside(...e)),class:(0,a.C4)(["vue_modal",t.modal_size]),"data-cy":"modal"},[(0,n.Lk)("div",s,[(0,n.Lk)("div",l,[t.icon?((0,n.uX)(),(0,n.CE)("span",{key:0,class:(0,a.C4)(["modal-icon",t.icon])},null,2)):(0,n.Q3)("",!0),(0,n.Lk)("h4",null,(0,a.v_)(t.title),1),t.close?((0,n.uX)(),(0,n.CE)("span",{key:1,onClick:o[0]||(o[0]=(...e)=>d.close_me&&d.close_me(...e)),class:"i_close"})):(0,n.Q3)("",!0)]),(0,n.Lk)("div",i,[(0,n.RG)(e.$slots,"default")])])],2)}var c=t(2873),d={props:{close:Boolean,title:String,modal_size:String,icon:{type:String}},components:{},emits:[],data(){return{}},created(){document.addEventListener("keyup",this.close_me)},beforeUnmount(){document.removeEventListener("keyup",this.close_me)},methods:{close_me(e){this.close&&("click"===e?.type||"keyup"===e?.type&&27===e?.keyCode)&&(0,c.A)().close_them_all()},did_click_outside(e){e.target.classList.contains("vue_modal")&&this.close_me(e)}},computed:{},watch:{}},u=t(6262);const m=(0,u.A)(d,[["render",r]]);var p=m},4650:function(e,o,t){t.r(o),t.d(o,{default:function(){return L}});var n=t(641),a=t(3751),s=t(33);const l={key:0},i=["disabled"],r={class:"text-center mt-3"},c={key:1};function d(e,o,t,d,u,m){const p=(0,n.g2)("Bouncer_loading"),_=(0,n.g2)("Modal_body");return(0,n.uX)(),(0,n.Wv)(_,{close:!0,title:"Poslať ponuku e-mailom?",class:"modal-email",icon:"i_email"},{default:(0,n.k6)(()=>[u.success?((0,n.uX)(),(0,n.CE)("div",c,o[4]||(o[4]=[(0,n.Lk)("p",null,[(0,n.Lk)("span",{class:"i_success"}),(0,n.Lk)("strong",null,"Ponuka bola odoslaná na Váš email!")],-1)]))):((0,n.uX)(),(0,n.CE)("div",l,[o[3]||(o[3]=(0,n.Lk)("p",{class:"mb-4"}," na Váš e-mail Vám pošleme odkaz, cez ktorý sa môžete kedykoľvek vrátiť naspäť a všetky vyplnené údaje budete mať uložené u nás ",-1)),(0,n.Lk)("form",{onSubmit:o[2]||(o[2]=(...e)=>m.email_submited&&m.email_submited(...e))},[(0,n.bo)((0,n.Lk)("input",{name:"email",class:"form-control mb-2",type:"email",placeholder:"Vaša e-mailová adresa","onUpdate:modelValue":o[0]||(o[0]=e=>u.email=e)},null,512),[[a.Jo,u.email]]),(0,n.bo)((0,n.Lk)("input",{name:"subject",id:"email_subject",class:"form-control mb-3",type:"text",placeholder:"Názov ponuky","onUpdate:modelValue":o[1]||(o[1]=e=>u.subject=e)},null,512),[[a.Jo,u.subject]]),(0,n.Lk)("button",{class:"btn btn-primary w-100",type:"submit",disabled:u.loading},"Odoslať",8,i),(0,n.Lk)("div",r,[(0,n.bo)((0,n.Lk)("p",null,(0,s.v_)(u.error),513),[[a.aG,u.error]]),(0,n.bo)((0,n.bF)(p,{size:"large"},null,512),[[a.aG,u.loading]])])],32)]))]),_:1})}var u=t(2563),m=t(6343),p=t(8700),_=t(3175);class k{email_save(e){let o={action_name:"email",method:"POST",body:e,url:(0,p.A)().endpoint_url()+"online/email/?"+m.A.add_token_as_parameter()},t=new _.A;return t.prepare_params(o).handle_response().catch(e=>{throw e})}offer_notify(e){let o={action_name:"offer-notify",method:"GET",url:(0,p.A)().endpoint_url()+"online/offer-notify/?"+m.A.add_token_as_parameter()};e=""===e?" poistenie":e,o.url+="&email_subject="+encodeURIComponent(e);let t=new _.A;return t.prepare_params(o).handle_response().catch(e=>{throw e})}}var v=new k,b=t(55),h={props:{},components:{Modal_body:u.A,Bouncer_loading:b.A},data(){return{email:"",subject:"",error:null,loading:!1,success:!1}},created(){},methods:{email_submited(e){e.preventDefault(),""!==this.email?(this.loading=!0,Promise.resolve().then(()=>{let o=m.A.custom_serialize_form_elements(e);return v.email_save(o)}).then(()=>v.offer_notify(this.subject)).then(e=>{if(200===e.status)return this.loading=!1,void(this.success=!0);this.show_error(e.result?.error),this.loading=!1})):this.show_error(null)},show_error(e){this.error=null===e||void 0===e?"Emailová adresa je povinná.":e.join(" "),setTimeout(()=>{this.error=null},3500)}},computed:{}},f=t(6262);const y=(0,f.A)(h,[["render",d]]);var L=y}}]);