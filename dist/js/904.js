"use strict";(self["webpackChunkosmapp_webpack_3xx"]=self["webpackChunkosmapp_webpack_3xx"]||[]).push([[904],{7928:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4114),core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0__),_store_STATE_params_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3177);class Validator_service{revalidation(e){let t=this.splitter(e);return!this.compare(t)}splitter(e){let t=e.match(/(.*?)\((.*)\)/);if(null===t)return!0;let i=t[1].trim(),a=t[2],s=[],l=0,n="";for(let d in a){let e=a[d];"("===e?l++:")"===e&&l--,","!==e||0!==l?(n+=e,d==a.length-1&&s.push(n)):(s.push(n),n="")}for(let d in s)s[d].indexOf("(")>-1&&(s[d]=this.splitter(s[d]));return{[i]:s}}compare(e){for(let t in e){let i=e[t];for(let e in i)"object"===typeof i[e]&&(i[e]=this.compare(i[e])?"true":"false");if("when"===t){let e=this.go_val(i[0]);return e=e?i[1]:i[2],e=this.go_val(e),e}if("in"===t){let e=this.replace_value(i[0]);delete i[0];let t=i.indexOf(e)>-1;return t}if("logic_and"===t){let e=!0;for(let t in i)if(!1===this.go_val(i[t])){e=!1;break}return e}if("logic_or"===t){let e=!1;for(let t in i)if(!0===this.go_val(i[t])){e=!0;break}return e}return console.log(t,"always pass"),!0}}go_val(string){string=this.replace_value(string);try{return eval(string)}catch(error){return console.log("validators error:",string),!1}}replace_value(e){e=e.replace(/=>/g,">="),e=e.replace(/=</g,"<="),e=e.replace(/=/g,"=="),e=e.replace(/>==/g,">="),e=e.replace(/<==/g,"<="),e=e.replace(/<>/g,"!=");let t=e.match(/\$[a-z|_|0-9]*/g);if(null===t)return e;for(let i in t){let a=t[i].replace("$",""),s=(0,_store_STATE_params_js__WEBPACK_IMPORTED_MODULE_1__.A)().get_user_input(a)||"";(isNaN(s)||""===s)&&(s="'"+s+"'"),e=e.replace(t[i],s)}return e}}__webpack_exports__.A=new Validator_service},8904:function(e,t,i){i.d(t,{A:function(){return Dt}});var a=i(641);const s={class:"row input_tab","data-cy":"input_tab"};function l(e,t,i,l,n,d){const r=(0,a.g2)("Wrap");return(0,a.uX)(),(0,a.CE)("div",s,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(d.compute_active_tab,((e,t)=>((0,a.uX)(),(0,a.Wv)(r,{field_data:d.field_data(e),field_id:d.field_id(e)},null,8,["field_data","field_id"])))),256))])}var n=i(33);const d=["data-hide","data-cy"],r=["data-cy"];function o(e,t,i,s,l,o){const _=(0,a.g2)("Errors"),u=(0,a.g2)("Tooltip"),h=(0,a.g2)("Input_switcher"),c=(0,a.g2)("Frontend_validators");return(0,a.uX)(),(0,a.CE)("div",{class:(0,n.C4)(o.columns),"data-hide":o.hide,"data-cy":"input_wrap-"+i.field_id},[o.zeteo_wrap||o.internal_error_space?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(_,{key:0,has_error:o.has_error},null,8,["has_error"])),(0,a.Lk)("div",{class:(0,n.C4)([[o.required,o.blank,o.label_size,o.error_class,o.bootstrap_classes],"input-block"])},[o.label?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,n.C4)(["input-label",o.label_style])},(0,n.v_)(o.label),3)):(0,a.Q3)("",!0),o.zeteo_wrap?((0,a.uX)(),(0,a.Wv)(u,{key:1,tooltip_text:o.tooltip,tooltip_type:"info"},null,8,["tooltip_text"])):(0,a.Q3)("",!0),(0,a.Lk)("div",{class:(0,n.C4)([o.input_block_class,"input-area"]),"data-cy":"input-"+i.field_id},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.inputs,((e,t)=>((0,a.uX)(),(0,a.Wv)(h,{key:t,field_data:e,field_id:t},null,8,["field_data","field_id"])))),128))],10,r),o.zeteo_wrap&&!o.internal_error_space?((0,a.uX)(),(0,a.Wv)(_,{key:2,has_error:o.has_error},null,8,["has_error"])):(0,a.Q3)("",!0),o.zeteo_wrap?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(u,{key:3,tooltip_text:o.tooltip,tooltip_type:"info"},null,8,["tooltip_text"]))],2),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.inputs,((e,t)=>((0,a.uX)(),(0,a.Wv)(c,{key:t,field_data:e,field_id:t},null,8,["field_data","field_id"])))),128))],10,d)}i(4114);var _=i(8700);function u(e,t,i,s,l,n){const d=(0,a.g2)("Checkbox"),r=(0,a.g2)("File"),o=(0,a.g2)("Plaintext"),_=(0,a.g2)("Radio"),u=(0,a.g2)("Select"),h=(0,a.g2)("Text"),c=(0,a.g2)("Textarea"),p=(0,a.g2)("Acceptance"),f=(0,a.g2)("Checkbox_icon"),v=(0,a.g2)("Coverage"),m=(0,a.g2)("Datepicker"),g=(0,a.g2)("Iban"),b=(0,a.g2)("Multiple"),y=(0,a.g2)("Plus_minus"),k=(0,a.g2)("Psc"),A=(0,a.g2)("Scan_modal"),w=(0,a.g2)("Search"),x=(0,a.g2)("Select_searchable"),j=(0,a.g2)("Slider"),z=(0,a.g2)("Spz");return"checkbox"===l.type?((0,a.uX)(),(0,a.Wv)(d,{key:0,field_id:i.field_id,field_data:i.field_data},null,8,["field_id","field_data"])):"file"===l.type?((0,a.uX)(),(0,a.Wv)(r,{key:1,field_id:i.field_id,field_data:i.field_data},null,8,["field_id","field_data"])):"plaintext"===l.type?((0,a.uX)(),(0,a.Wv)(o,{key:2,field_id:i.field_id,field_data:i.field_data},null,8,["field_id","field_data"])):"radio"===l.type?((0,a.uX)(),(0,a.Wv)(_,{key:3,field_id:i.field_id,field_data:i.field_data},null,8,["field_id","field_data"])):"select"===l.type?((0,a.uX)(),(0,a.Wv)(u,{key:4,field_id:i.field_id,field_data:i.field_data},null,8,["field_id","field_data"])):"text"===l.type?((0,a.uX)(),(0,a.Wv)(h,{key:5,field_id:i.field_id,field_data:i.field_data},null,8,["field_id","field_data"])):"textarea"===l.type?((0,a.uX)(),(0,a.Wv)(c,{key:6,field_id:i.field_id,field_data:i.field_data},null,8,["field_id","field_data"])):"acceptance"===l.type?((0,a.uX)(),(0,a.Wv)(p,{key:7,field_id:i.field_id,field_data:i.field_data},null,8,["field_id","field_data"])):"checkbox_icon"===l.type?((0,a.uX)(),(0,a.Wv)(f,{key:8,field_id:i.field_id,field_data:i.field_data},null,8,["field_id","field_data"])):"coverage"===l.type?((0,a.uX)(),(0,a.Wv)(v,{key:9,field_id:i.field_id,field_data:i.field_data},null,8,["field_id","field_data"])):"date"===l.type?((0,a.uX)(),(0,a.Wv)(m,{key:10,field_id:i.field_id,field_data:i.field_data},null,8,["field_id","field_data"])):"iban"===l.type?((0,a.uX)(),(0,a.Wv)(g,{key:11,field_id:i.field_id,field_data:i.field_data},null,8,["field_id","field_data"])):"multiple"===l.type?((0,a.uX)(),(0,a.Wv)(b,{key:12,field_id:i.field_id,field_data:i.field_data},null,8,["field_id","field_data"])):"plus_minus"===l.type?((0,a.uX)(),(0,a.Wv)(y,{key:13,field_id:i.field_id,field_data:i.field_data},null,8,["field_id","field_data"])):"psc_input"===l.type?((0,a.uX)(),(0,a.Wv)(k,{key:14,field_id:i.field_id,field_data:i.field_data},null,8,["field_id","field_data"])):"scan_modal"===l.type?((0,a.uX)(),(0,a.Wv)(A,{key:15,field_id:i.field_id,field_data:i.field_data},null,8,["field_id","field_data"])):"search"===l.type?((0,a.uX)(),(0,a.Wv)(w,{key:16,field_id:i.field_id,field_data:i.field_data},null,8,["field_id","field_data"])):"select_searchable"===l.type?((0,a.uX)(),(0,a.Wv)(x,{key:17,field_id:i.field_id,field_data:i.field_data},null,8,["field_id","field_data"])):"slider"===l.type?((0,a.uX)(),(0,a.Wv)(j,{key:18,field_id:i.field_id,field_data:i.field_data},null,8,["field_id","field_data"])):"spz"===l.type?((0,a.uX)(),(0,a.Wv)(z,{key:19,field_id:i.field_id,field_data:i.field_data},null,8,["field_id","field_data"])):(0,a.Q3)("",!0)}var h=i(1602);const c={class:"input-group input-modal-trigger file_upload_input"},p=["id","name"],f={class:"input-group-append"},v=["id","name"];function m(e,t,i,s,l,d){const r=(0,a.g2)("Bouncer_loading");return(0,a.uX)(),(0,a.CE)("div",c,[(0,a.Lk)("p",{id:i.field_id,name:i.field_id,class:"form-control",style:(0,n.Tr)({background:d.gradient})},[(0,a.eW)((0,n.v_)(d.upload_info)+" ",1),d.loading?((0,a.uX)(),(0,a.Wv)(r,{key:0,size:"small",class:"ps-3"})):l.filename?((0,a.uX)(),(0,a.CE)("em",{key:1,onClick:t[0]||(t[0]=(...e)=>d.download_file&&d.download_file(...e)),class:"d-none d-sm-inline text-primary ps-1",title:"Stiahnuť súbor"},(0,n.v_)(l.filename),1)):(0,a.Q3)("",!0)],12,p),(0,a.Lk)("div",f,[(0,a.Lk)("span",{onClick:t[1]||(t[1]=(...e)=>d.open_file_selection&&d.open_file_selection(...e)),class:(0,n.C4)(["input-upload-icon",d.is_disabled?"input-upload-disabled":""]),title:"Nahrať súbor"},null,2)]),(0,a.Lk)("input",{id:i.field_id,name:i.field_id,ref:"input_reference",onChange:t[2]||(t[2]=(...e)=>d.file_was_picked&&d.file_was_picked(...e)),type:"file",style:{display:"none"}},null,40,v)])}var g=i(55),b=i(3886),y=i(3177),k=i(6343),A={props:{field_id:String,field_data:Object},components:{Bouncer_loading:g.A},emits:[],data(){return{filename:"",status:"checking",error_message:"",docs:{},progress:-10}},created(){this.ask_for_status()},methods:{ask_for_status(){return b.A.session_documents(!0).then((e=>{if(200!==e.status||"object"!==typeof e.result.data?.documents)return this.error_message="Získavanie dokumentov zlyhalo",void(this.status="error");this.docs=e.result.data?.documents;let t=!1;for(let i in this.docs)this.docs[i].tags.includes(this.field_id)&&(t=!0,this.filename=this.docs[i].name);t?(this.status="success",(0,y.A)().set_form_value(this.field_id,"1")):this.status="empty"}))},open_file_selection(){this.loading||this.is_disabled||this.$refs.input_reference.click()},file_was_picked(e){this.status="sending";let t=e.target.files[0],i=this.validate_file(t);if(i)return void(this.status="error");let a=this.prepare_upload_payload(t);this.upload_file(a)},validate_file(e){let t=5,i=1048576;return e.size>t*i&&(this.error_message="Presiahnutá povolená veľkosť súboru "+Math.round(e.size/i*100)/100+"mb, max: "+t+"mb",!0)},prepare_upload_payload(e){this.filename=k.A.slugify_keep_extension_add_tag(e.name,this.field_id);let t=new FormData;return t.append("file",e,this.filename),t.append("title",this.filename),t.append("description","uploaded by osmapp"),t.append("type",e.type),t.append("tags",this.field_id),t},upload_file(e){b.A.upload_session_document(e).then((e=>{200!==e.status?(this.error_message=e?.result?.message||e?.result?.error||"Nahrávanie zlyhalo",this.status="error"):this.ask_for_status()}))},download_file(){this.status="downloading";let e=0,t="";for(let i in this.docs)this.docs[i].tags.includes(this.field_id)&&(e=this.docs[i].id,t=this.docs[i].documentType);if(0===e)return this.error_message="Získavanie doukumentu zlyhalo",void(this.status="error");b.A.get_session_document(e).then((e=>{if(200===e.status)return k.A.downloadBase64(this.filename,e.result.content,null,t),void(this.status="success");this.error_message=e?.result?.message||e?.result?.error||"Sťahovanie zlyhalo",this.status="error"}))}},computed:{upload_info(){let e={checking:"Načítavam...",empty:"Nahrajte prosím prílohu",sending:"Odosielam...",downloading:"Sťahujem...",success:"Súbor nahratý",error:this.error_message};return e[this.status]},loading(){return["checking","sending","downloading"].includes(this.status)},gradient(){return"linear-gradient( 120deg, rgba(255,255,255,1) 0%, rgba(255,255,255,1) "+this.progress+"%, rgba(0,0,0,0.1) "+(this.progress+.5)+"%, rgba(0,0,0,0.1) "+(this.progress+1)+"%, rgba(255,255,255,1) "+(this.progress+1.5)+"%, rgba(255,255,255,1) 100% )"},is_disabled(){return(0,_.A)().is_read_only()}},watch:{loading(){if(!this.loading)return;let e=.8,t=.1,i=.004,a=setInterval((()=>{this.progress=this.progress+e,this.loading&&e>t?e-=i:this.loading||(e=.8),this.progress>100&&(this.progress=-10,this.loading||clearInterval(a))}),10)}}},w=i(6262);const x=(0,w.A)(A,[["render",m],["__scopeId","data-v-582b02c7"]]);var j=x,z=i(4871),C=i(3751);const E=["name","id","value","disabled"],O=["for"];function X(e,t,i,s,l,d){return(0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(this.field_data.enum,((e,s)=>((0,a.uX)(),(0,a.CE)("div",{class:(0,n.C4)(["form-check",d.radio_layout])},[(0,a.bo)((0,a.Lk)("input",{name:i.field_id,id:d.radio_id(e),"onUpdate:modelValue":t[0]||(t[0]=e=>d.value=e),value:d.radio_value(e),disabled:d.is_disabled,type:"radio",class:"form-check-input"},null,8,E),[[C.XL,d.value]]),(0,a.Lk)("label",{for:d.radio_id(e),class:"form-check-label"},(0,n.v_)(d.radio_label(e)),9,O)],2)))),256)}let L={props:{},components:{},emits:[],data(){return{combined:{auto_typ_2:"auto_typ",havarijne_auto_typ2:"havarijne_auto_typ",cestovne_uzemna_platnost:"cestovne_krajina"}}},created(){this.change_combined_input()},methods:{change_combined_input(){let e={1:{1:"1",20:"2",33:"3",35:"4"},2:{1:"1",2:"2",20:"3"},7:{51:"1",210:"2",1001:"3"}},t=(0,_.A)().product_group_id();e[t]?.[this.cached_dynamic_combo]!==this.value&&""!==this.cached_dynamic_combo&&(this.value=e[t]?.[this.cached_dynamic_combo]||"")}},computed:{cached_dynamic_combo(){return this.combined.hasOwnProperty(this.field_id)?(0,y.A)().get_form_value(this.combined[this.field_id]):""}},watch:{cached_dynamic_combo(){this.change_combined_input()}}};var T=L,P={props:{field_id:String,field_data:Object},components:{},emits:[],mixins:[T],data(){return{}},created(){},methods:{radio_id(e){return this.field_id+"-"+this.radio_value(e)},radio_value(e){return k.A.enum_value(e)},radio_label(e){return k.A.enum_label(e)}},computed:{radio_layout(){return null===this.field_data.type_settings||void 0===this.field_data.type_settings||"horizontal"===this.field_data.type_settings.radio_layout?"form-check-inline":"icons"===this.field_data.type_settings.radio_layout?"input-button-icon":"vertical"===this.field_data.type_settings.radio_layout?"":"blank"===this.field_data.type_settings.radio_layout?"input-button-blank":"form-check-inline"},is_disabled(){return(0,_.A)().is_read_only()||this.field_data.type_settings?.disabled},value:{get(){return(0,y.A)().get_form_value(this.field_id)},set(e){(0,y.A)().set_form_value(this.field_id,e)}}},watch:{}};const S=(0,w.A)(P,[["render",X]]);var W=S,V=i(6104),I=i(6710);const K=["id","name","placeholder","disabled","rows"];function M(e,t,i,s,l,n){return(0,a.bo)(((0,a.uX)(),(0,a.CE)("textarea",{id:i.field_id,name:i.field_id,"onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),placeholder:i.field_data.placeholder,disabled:n.is_disabled,rows:n.area_rows,class:"form-control",ref:"textarea_reference"},null,8,K)),[[C.Jo,n.value,void 0,{lazy:!0}]])}var F={props:{field_id:String,field_data:Object},components:{},emits:[],data(){return{area_rows:3}},created(){this.$nextTick((()=>{let e=3,t=this.field_data.input_settings?.textarea_rows,i=this.field_data.wrapper_attrs.match(/rows="(.*?)"/)?.[1];if("auto"!==t)return void(this.area_rows=t||(i||e));let a=3,s=80,l=20,n=this.$refs.textarea_reference.scrollHeight,d=Math.floor(n/l);d=d<a?a:d>s?s:d,this.area_rows=d}))},methods:{},computed:{area_rows(){let e=this.field_data.wrapper_attrs.match(/rows="(.*?)"/)?.[0].replace('rows="',"").replace('"',"");return void 0===e?3:e},is_disabled(){return(0,_.A)().is_read_only()||this.field_data.type_settings?.disabled},value:{get(){return(0,y.A)().get_form_value(this.field_id).replace(/\t/g,"").replace(/&#10;/g,"\n")},set(e){(0,y.A)().set_form_value(this.field_id,e)}}},watch:{}};const R=(0,w.A)(F,[["render",M]]);var $=R;const D={class:"form-check acceptance_input"},U=["id","name","disabled"],q=["for"],B=["innerHTML"];function N(e,t,i,s,l,n){return(0,a.uX)(),(0,a.CE)("div",D,[(0,a.bo)((0,a.Lk)("input",{id:i.field_id,name:i.field_id,"onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),"true-value":"1","false-value":"0",disabled:n.is_disabled,type:"checkbox",class:"form-check-input"},null,8,U),[[C.lH,n.value]]),(0,a.Lk)("label",{for:i.field_id,ref:"label_reference",class:"form-check-label"},[(0,a.Lk)("p",{innerHTML:i.field_data?.input_settings?.acceptance?.text},null,8,B)],8,q)])}var Z=i(2873),H={props:{field_id:String,field_data:Object},components:{},emits:[],data(){return{}},created(){this.$nextTick((()=>{let e=this.$refs.label_reference.querySelectorAll("span");for(let t=0;t<e.length;t++)e[t].addEventListener("click",(e=>{this.open_acceptance_modal(e,t)}))}))},methods:{open_acceptance_modal(e,t){(0,Z.A)().store_modal_data({title:this.field_data.input_settings?.acceptance?.modals?.[t]?.title,content:this.field_data.input_settings?.acceptance?.modals?.[t]?.content}),(0,Z.A)().open_it("Acceptance_modal")}},computed:{is_disabled(){return(0,_.A)().is_read_only()||this.field_data.type_settings?.disabled},value:{get(){return(0,y.A)().get_form_value(this.field_id)},set(e){(0,y.A)().set_form_value(this.field_id,e)}}},watch:{}};const Q=(0,w.A)(H,[["render",N]]);var J=Q;const G={class:"form-check input-button-icon"},Y=["id","name","disabled"],ee=["for"];function te(e,t,i,s,l,d){return(0,a.uX)(),(0,a.CE)("div",G,[(0,a.bo)((0,a.Lk)("input",{class:(0,n.C4)(d.icon_class),id:i.field_id,name:i.field_id,"onUpdate:modelValue":t[0]||(t[0]=e=>d.value=e),"true-value":"1","false-value":"0",disabled:d.is_disabled,type:"checkbox"},null,10,Y),[[C.lH,d.value]]),(0,a.Lk)("label",{for:i.field_id},(0,n.v_)(d.checkbox_label),9,ee)])}var ie={props:{field_id:String,field_data:Object},components:{},emits:[],data(){return{}},created(){},methods:{},computed:{checkbox_label(){return this.field_data.label},icon_class(){return this.field_data.wrapper_attrs},is_disabled(){return(0,_.A)().is_read_only()},value:{get(){return(0,y.A)().get_form_value(this.field_id)},set(e){(0,y.A)().set_form_value(this.field_id,e)}}},watch:{}};const ae=(0,w.A)(ie,[["render",te]]);var se=ae;const le=["id","name","disabled"],ne=["value"];function de(e,t,i,s,l,d){return(0,a.bo)(((0,a.uX)(),(0,a.CE)("select",{id:i.field_id,name:i.field_id,"onUpdate:modelValue":t[0]||(t[0]=e=>d.value=e),disabled:d.is_disabled,class:"form-control"},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.options,((e,t)=>((0,a.uX)(),(0,a.CE)("option",{value:t},(0,n.v_)(e),9,ne)))),256))],8,le)),[[C.u1,d.value]])}i(4979),i(1678);var re={props:{field_id:String,field_data:Object},components:{},emits:[],data(){return{options:{}}},created(){this.populate_cover_options()},methods:{populate_cover_options(){let e=this.field_data.input_settings?.min,t=this.field_data.input_settings?.max,i=this.field_data.input_settings?.birth_token,a=this.field_data.input_settings?.insurace_token;if("number"!==typeof e||"number"!==typeof t||"string"!==typeof i||"string"!==typeof a)return void console.log("bad input_settings",structuredClone(this.field_id),structuredClone(this.field_data.input_settings));this.options={0:"Vyberte zo zoznamu"};let s=(0,y.A)().get_form_value(i),l=(0,y.A)().get_form_value(a),n=-1;if(s&&l){let e=k.A.format_string_to_date(s),t=k.A.format_string_to_date(l);n=t.getFullYear()-e.getFullYear()}for(let d=e;d<t+1;d++){if(n>-1&&d+n>t){parseInt(this.value,10)>d&&(this.value=d-1);break}let e="";n>-1&&(e=" (do "+(d+n)+". roku)");let i=1===d?" rok":d>1&&d<5?" roky":" rokov";this.options[d]=d+i+e}}},computed:{is_disabled(){return(0,_.A)().is_read_only()||this.field_data.type_settings?.disabled},value:{get(){return(0,y.A)().get_form_value(this.field_id)},set(e){(0,y.A)().set_form_value(this.field_id,e)}},watch_date_inputs(){return[(0,y.A)().get_form_value(this.field_data.input_settings?.birth_token),(0,y.A)().get_form_value(this.field_data.input_settings?.insurace_token)]}},watch:{watch_date_inputs(){this.populate_cover_options()}}};const oe=(0,w.A)(re,[["render",de]]);var _e=oe,ue=i(6451);const he=["id","name","placeholder","disabled","maxlength"];function ce(e,t,i,s,l,n){return(0,a.bo)(((0,a.uX)(),(0,a.CE)("input",{id:i.field_id,name:i.field_id,"onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),ref:"iban_reference",onKeypress:t[1]||(t[1]=(...e)=>n.prevent_bad_input&&n.prevent_bad_input(...e)),placeholder:i.field_data.placeholder,disabled:n.is_disabled,maxlength:l.max_length+l.max_spaces,type:"text",class:"form-control"},null,40,he)),[[C.Jo,n.value]])}var pe={props:{field_id:String,field_data:Object},components:{},emits:[],data(){return{max_length:24,max_spaces:5,spaces_before_cursor:0}},created(){},methods:{prevent_bad_input(e){/[a-z0-9]/gi.test(e.key)||e.preventDefault()},transform_iban(e){e+="";let t=e.match(/[a-z0-9]/gi);t=null===t?[]:t,e=t.join(""),e=e.toUpperCase(),e=e.slice(0,this.max_length);let i=e.match(/.{1,4}/g);return i=null===i?[]:i,e=i.join(" "),e},cursor_iban(e){let t=this.$refs.iban_reference?.selectionEnd;this.$nextTick((()=>{let i=(e.slice(0,t).match(/\s/g)||[]).length;t+=i-this.spaces_before_cursor,this.$refs.iban_reference.setSelectionRange(t,t)}))}},computed:{is_disabled(){return(0,_.A)().is_read_only()||this.field_data.type_settings?.disabled},value:{get(){let e=(0,y.A)().get_form_value(this.field_id);return e=this.transform_iban(e),this.cursor_iban(e),e},set(e){let t=this.$refs.iban_reference?.selectionEnd;this.spaces_before_cursor=(e.slice(0,t).match(/\s/g)||[]).length,(0,y.A)().set_form_value(this.field_id,e.replace(/\s/g,""))}}},watch:{}};const fe=(0,w.A)(pe,[["render",ce]]);var ve=fe,me=i(4211);const ge={class:"input-group input-counter"},be={class:"input-group-prepend"},ye=["id","name","disabled"],ke={class:"input-group-append"};function Ae(e,t,i,s,l,n){return(0,a.uX)(),(0,a.CE)("div",ge,[(0,a.Lk)("div",be,[(0,a.Lk)("a",{onClick:t[0]||(t[0]=e=>n.substract()),class:"input-group-btn btn-minus"})]),(0,a.bo)((0,a.Lk)("input",{id:i.field_id,name:i.field_id,"onUpdate:modelValue":t[1]||(t[1]=e=>n.value=e),disabled:n.is_disabled,maxlength:"3",type:"text",class:"form-control"},null,8,ye),[[C.Jo,n.value]]),(0,a.Lk)("div",ke,[(0,a.Lk)("a",{onClick:t[2]||(t[2]=e=>n.add()),class:"input-group-btn btn-plus"})])])}var we={props:{field_id:String,field_data:Object},components:{},data(){return{min:0,max:9}},created(){this.min=this.field_data.type_settings?.plus_minus_min||0,this.max=this.field_data.type_settings?.plus_minus_max||1e3},methods:{add(){this.is_disabled||this.value>=this.max||(this.value++,(0,y.A)().set_form_value(this.field_id,this.value))},substract(){this.is_disabled||this.value<=this.min||(this.value--,(0,y.A)().set_form_value(this.field_id,this.value))}},computed:{is_disabled(){return(0,_.A)().is_read_only()},value:{get(){return(0,y.A)().get_form_value(this.field_id)},set(e){(0,y.A)().set_form_value(this.field_id,e)}}},watch:{}};const xe=(0,w.A)(we,[["render",Ae]]);var je=xe;const ze={class:"input-autocomplete"},Ce=["id","name","placeholder","disabled"],Ee={key:0},Oe=["onClick"];function Xe(e,t,i,s,l,d){return(0,a.uX)(),(0,a.CE)("div",ze,[(0,a.bo)((0,a.Lk)("input",{id:i.field_id,name:i.field_id,placeholder:i.field_data.placeholder,disabled:d.is_disabled,"onUpdate:modelValue":t[0]||(t[0]=e=>l.value=e),onKeyup:t[1]||(t[1]=(...e)=>d.psc_user_worker&&d.psc_user_worker(...e)),onKeydown:[t[2]||(t[2]=(0,C.jR)(((...e)=>d.move_down&&d.move_down(...e)),["down"])),t[3]||(t[3]=(0,C.jR)(((...e)=>d.move_up&&d.move_up(...e)),["up"])),t[4]||(t[4]=(0,C.jR)(((...e)=>d.enter_selection&&d.enter_selection(...e)),["enter"]))],onChange:t[5]||(t[5]=(...e)=>d.store_changed_psc&&d.store_changed_psc(...e)),ref:"psc_input",type:"text",class:"form-control",maxlength:"50"},null,40,Ce),[[C.Jo,l.value]]),(0,a.bo)((0,a.Lk)("ul",null,[l.loading?((0,a.uX)(),(0,a.CE)("li",Ee," Načítavam... ")):((0,a.uX)(!0),(0,a.CE)(a.FK,{key:1},(0,a.pI)(d.filtered_options,((e,t)=>((0,a.uX)(),(0,a.CE)("li",{class:(0,n.C4)(t===l.selected?"active_autocomplete":""),onClick:t=>d.click_selection(e)},(0,n.v_)(e),11,Oe)))),256))],512),[[C.aG,l.shown]])])}var Le=i(6460),Te=i(3175);class Pe{auto_model_table(e,t){let i=(0,Le.A)().get_form(),a={};for(let n in i)if(i.hasOwnProperty(n))for(let t in i[n]){if(!i[n].hasOwnProperty(t))continue;let s=Object.keys(i[n][t])[0];if(s!==e)continue;let l=i[n][t][s].enum;for(let e in l){if(!l.hasOwnProperty(e))continue;let t=Object.keys(l[e])[0],i=l[e][t];"object"===typeof i&&(i=i.label),a[t]=i}}let s={action_name:"reference_table_get",method:"GET",url:(0,_.A)().endpoint_url()+"online/reference_table_get/?table_token=c_test_auto_model&ematch="+a[t]},l=new Te.A;return l.prepare_params(s).handle_response().catch((e=>{throw e}))}psc_table(e){let t={action_name:"reference_table_get",method:"GET",url:(0,_.A)().endpoint_url()+"online/reference_table_get/?table_token=c_test_psc&filter="+e},i=new Te.A;return i.prepare_params(t).handle_response().catch((e=>{throw e}))}}var Se=new Pe,We={props:{field_id:String,field_data:Object},components:{},emits:[],data(){return{value:"",options_stored:!1,loading:!1,options:[],selected:-1,shown:!1}},created(){this.value=this.get_session_value},methods:{psc_user_worker(e){let t=e?.keyCode;if((t<48||t>106)&&229!==t&&8!==t&&void 0!==t)return;let i=this.value.length;i<3?this.options_stored=!1:(!1===this.options_stored&&(this.options_stored=!0,this.get_psc_options()),this.shown=!0,8!==t&&setTimeout((()=>{1===this.filtered_options.length&&(this.value=this.filtered_options[0],this.shown=!1,(0,y.A)().set_form_value(this.field_id,this.value))}),1e3))},get_psc_options(){this.loading=!0,Se.psc_table(this.value).then((e=>{if(this.loading=!1,200!==e.status)return;let t=e.result.data;this.options=[];for(let i in t)t.hasOwnProperty(i)&&this.options.push(t[i]);this.$nextTick((()=>{this.$refs.psc_input.focus()}))}))},move_down(){this.selected++,this.selected>this.filtered_options.length-1&&(this.selected=0)},move_up(){this.selected--,this.selected<0&&(this.selected=this.filtered_options.length-1)},enter_selection(){-1!==this.selected&&(this.value=this.filtered_options[this.selected],this.shown=!1,(0,y.A)().set_form_value(this.field_id,this.value))},click_selection(e){this.value=e,this.shown=!1,(0,y.A)().set_form_value(this.field_id,this.value)},store_changed_psc(){(0,y.A)().set_form_value(this.field_id,this.value)}},computed:{filtered_options(){let e,t=[],i=this.options.length;for(e=0;e<i;e++){let i=k.A.slugify(this.options[e]),a=k.A.slugify(this.value);-1!==i.indexOf(a)&&t.push(this.options[e])}return t},get_session_value(){return(0,y.A)().get_form_value(this.field_id)},is_disabled(){return(0,_.A)().is_read_only()}},watch:{get_session_value(){this.value!==this.get_session_value&&(this.value=this.get_session_value,this.options_stored=!1,this.psc_user_worker())}}};const Ve=(0,w.A)(We,[["render",Xe]]);var Ie=Ve;const Ke=["id","name","disabled"],Me={class:"veriface-feedback align-self-stretch"};function Fe(e,t,i,s,l,d){return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("button",{id:i.field_id,name:i.field_id,onClick:t[0]||(t[0]=(...e)=>d.open_modal_credentials_scan&&d.open_modal_credentials_scan(...e)),disabled:d.is_disabled||d.is_uploaded,type:"button",class:"btn btn-primary btn-veriface"},[(0,a.Lk)("span",{class:(0,n.C4)(d.is_scan?"i_faceid":"i_veriface")},null,2),(0,a.Lk)("span",null,(0,n.v_)(d.scan_button_label),1)],8,Ke),(0,a.Lk)("div",Me,[(0,a.Lk)("span",{class:(0,n.C4)(d.scan_error?"text-warning":d.is_uploaded?"text-primary":"")},[d.scan_error||d.is_uploaded?((0,a.uX)(),(0,a.CE)("span",{key:0,class:(0,n.C4)(d.scan_error?"i_warning":"i_check")},null,2)):(0,a.Q3)("",!0),(0,a.Lk)("span",{style:(0,n.Tr)({bottom:d.scan_error?"3px":d.is_uploaded?"2px":"0px",position:"relative"})},(0,n.v_)(d.scan_description),5)],2)])],64)}var Re={props:{field_id:String,field_data:Object},components:{},emits:[],data(){return{}},created(){},methods:{open_modal_credentials_scan(){this.is_disabled||this.is_uploaded||((0,Z.A)().store_modal_data({field_id:this.field_id,data_fill:this.field_data.input_settings?.data_fill||{},scan_type:this.is_scan?"op":"person"}),(0,Z.A)().open_it("Facial_recognition"))}},computed:{is_disabled(){return(0,_.A)().is_read_only()},is_uploaded(){return"1"===(0,y.A)().get_form_value(this.field_id)},scan_error(){return(0,Le.A)().input_has_error(this.field_id)},is_scan(){return"scan_modal"===this.field_data.type_settings?.upload},is_nodered(){return"node_red"===(0,_.A)().get_run_mode()},scan_button_label(){return this.field_data.placeholder?this.field_data.placeholder:this.is_scan?this.is_nodered?"Občiansky preukaz a získanie údajov":"Skenovanie dokladu totožnosti":this.is_nodered?"Tvárová biometria a občiansky preukaz":"Overenie totožnosti klienta"},scan_description(){return this.is_uploaded?this.is_scan?"Doklad bol úspešne nahratý a skontrolovaný.":"Identifikácia tváre a porovnanie dokladov bolo úspešné.":this.scan_error?"Overenie totožnosti je povinné.":this.is_scan?"Overenie dokladu totožnosti na diaľku.":"Overenie totožnosti na diaľku pomocou tvárovej biometrie."}},watch:{}};const $e=(0,w.A)(Re,[["render",Fe]]);var De=$e;const Ue={class:"input-group"},qe=["id","name","placeholder","disabled"],Be={class:"input-group-append"},Ne={class:"input-feedback-wrap"},Ze=["innerHTML"];function He(e,t,i,s,l,d){const r=(0,a.g2)("Bouncer_loading");return(0,a.uX)(),(0,a.CE)("div",Ue,[(0,a.bo)((0,a.Lk)("input",{id:i.field_id,name:i.field_id,"onUpdate:modelValue":t[0]||(t[0]=e=>d.value=e),onKeydown:t[1]||(t[1]=(...e)=>d.prevent_letters&&d.prevent_letters(...e)),onKeyup:t[2]||(t[2]=(0,C.jR)(((...e)=>d.run_search&&d.run_search(...e)),["enter"])),placeholder:i.field_data.placeholder,disabled:"loading"===l.status||d.is_disabled,ref:"ico_reference",type:"text",class:"form-control input-search"},null,40,qe),[[C.Jo,d.value]]),(0,a.Lk)("div",Be,[(0,a.Lk)("span",{onClick:t[3]||(t[3]=(...e)=>d.run_search&&d.run_search(...e)),class:"input-search-icon"})]),(0,a.Lk)("div",Ne,[(0,a.Lk)("div",{innerHTML:d.search_feedback,class:(0,n.C4)(["input-feedback",l.status])},null,10,Ze),(0,a.bo)((0,a.bF)(r,{size:"small",class:"ps-3"},null,512),[[C.aG,"loading"===l.status]])])])}var Qe=i(5254),Je={props:{field_id:String,field_data:Object},components:{Bouncer_loading:g.A},emits:[],data(){return{status:"ready",min_length:8,company_name:"",autorun_running:!1,autorun_handle:{},autorun_delay:2e3}},created(){},methods:{prevent_letters(e){if(this.status="ready",/[0-9]/gi.test(e.key))return;if(e.ctrlKey||e.metaKey)return;let t=["Backspace","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Delete","Tab","Enter","Escape","Home","End"];t.includes(e.key)||e.preventDefault()},run_search(){this.is_disabled||"loading"===this.status||(this.value+="",this.value=k.A.keep_only_numbers(this.value),this.size<this.min_length||(this.size>this.min_length&&(this.value=this.value.substring(0,this.min_length)),clearTimeout(this.autorun_handle),this.autorun_running=!1,this.status="loading",Qe.A.ico_info(this.value).then((e=>{if(200!==e.status||"object"!==typeof e.result?.data||0===Object.keys(e.result?.data).length)return this.status="error",void this.$nextTick((()=>{this.$refs.ico_reference.focus()}));(0,y.A)().set_multiple_form_values(e.result.data);for(let t in e.result.data)if(k.A.ends_with(t,"company_name")){this.company_name=e.result.data[t];break}this.status="success"}))))}},computed:{search_feedback(){if("error"===this.status)return"Vyhľadávanie IČO <b>"+this.value+"</b> nebolo úspešné.";if("success"===this.status)return"Predvyplnili sme údaje pre <b>"+this.company_name+"</b>.";if("loading"===this.status)return"Vyhľadávame právnickú alebo fyzickú osobu...";if("ready"===this.status){if(0===this.size)return"Zadajte <strong>IČO</strong> právnickej alebo fyzickej osoby.";if(this.size===this.min_length)return"Pre vyhľadanie osoby s IČO <strong>"+this.value+'</strong><span class="hide_on_mobile"> stlačte Enter alebo</span> kliknite na Lupu.';{let e=1===this.size?"znak":this.size>1&&this.size<5?"znaky":"znakov";return"Zadali ste <strong>"+this.size+"</strong> "+e+". IČO formát požaduje <strong>"+this.min_length+"</strong> čísiel."}}},is_disabled(){return(0,_.A)().is_read_only()},value:{get(){return(0,y.A)().get_form_value(this.field_id)},set(e){(0,y.A)().set_form_value(this.field_id,e)}},size(){return this.value.length}},watch:{size(){if(this.autorun_running||this.size!==this.min_length)return clearTimeout(this.autorun_handle),void(this.autorun_running=!1);this.autorun_running=!0,this.autorun_handle=setTimeout((()=>{this.run_search(),this.autorun_running=!1}),this.autorun_delay)}}};const Ge=(0,w.A)(Je,[["render",He]]);var Ye=Ge;const et={class:"input-autocomplete"},tt=["id","name","disabled"],it=["onClick"];function at(e,t,i,s,l,d){return(0,a.uX)(),(0,a.CE)("div",et,[(0,a.bo)((0,a.Lk)("input",{id:i.field_id,name:i.field_id,placeholder:"-- vyberte --","onUpdate:modelValue":t[0]||(t[0]=e=>l.displayed=e),onFocus:t[1]||(t[1]=(...e)=>d.show_list&&d.show_list(...e)),onBlur:t[2]||(t[2]=(...e)=>d.hide_with_delay&&d.hide_with_delay(...e)),onKeyup:t[3]||(t[3]=(...e)=>d.remove_previous_value&&d.remove_previous_value(...e)),onKeydown:[t[4]||(t[4]=(0,C.jR)(((...e)=>d.move_down&&d.move_down(...e)),["down"])),t[5]||(t[5]=(0,C.jR)(((...e)=>d.move_up&&d.move_up(...e)),["up"])),t[6]||(t[6]=(0,C.jR)(((...e)=>d.enter_selection&&d.enter_selection(...e)),["enter"]))],disabled:d.is_disabled,type:"text",class:"form-control"},null,40,tt),[[C.Jo,l.displayed]]),(0,a.bo)((0,a.Lk)("ul",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(d.filtered_options,((e,t)=>((0,a.uX)(),(0,a.CE)("li",{class:(0,n.C4)(t===l.selected?"active_autocomplete":""),onClick:e=>d.click_selection(t)},(0,n.v_)(e.label),11,it)))),256))],512),[[C.aG,l.shown]])])}let st={props:{},components:{},emits:[],data(){return{dynamic:{auto_model:"auto_znacka",havarijne_auto_model:"havarijne_auto_znacka",gap_auto_model:"gap_auto_znacka",sedadla_auto_model:"sedadla_auto_znacka"},additional_label:"auto_model",label_name:"__input_value_label_auto_model"}},created(){this.request_dynamic_value()},methods:{request_dynamic_value(){null!==this.cached_dynamic_parent&&Se.auto_model_table(this.dynamic[this.field_id],this.cached_dynamic_parent).then((e=>{if(200!==e.status)return;this.options={};let t=e.result.data;for(let a in t)t.hasOwnProperty(a)&&(this.options[a]={value:t[a].id,label:t[a].model},parseInt(this.options[a].value,10)===parseInt((0,y.A)().get_form_value(this.field_id),10)&&(this.displayed=this.options[a].label));let i=!0;for(let a in this.options){if(!this.options.hasOwnProperty(a))continue;let e=this.options[a].label;e===this.displayed+""&&(i=!1)}i&&(this.displayed="")}))}},computed:{cached_dynamic_parent(){return this.dynamic.hasOwnProperty(this.field_id)?(0,y.A)().get_form_value(this.dynamic[this.field_id]):null},cached_additional_label(){return this.field_id!==this.additional_label?null:this.displayed}},watch:{cached_dynamic_parent(){this.request_dynamic_value()},cached_additional_label(){if(null!==this.cached_additional_label)for(let e in this.options){if(!this.options.hasOwnProperty(e))continue;let t=this.options[e].label;if(t===this.displayed){(0,y.A)().insert_form_value_without_interaction(this.label_name,this.options[e].label);break}}}}};var lt=st;let nt={props:{},components:{},emits:[],data(){return{vybava_id:"havarijne_auto_vybava",vybava_watch:["havarijne_auto_znacka","havarijne_auto_model","havarijne_objem","havarijne_vykon","havarijne_palivo","havarijne_hmotnost","havarijne_rokvyroby","havarijne_auto_vin","havarijne_auto_prevodovka","havarijne_auto_registracia","havarijne_auto_pocet_sedadiel","havarijne_auto_karoseria"],vybava_date:"havarijne_auto_registracia",vybava_required:["havarijne_auto_znacka","havarijne_auto_model","havarijne_vykon","havarijne_auto_vin","havarijne_palivo"],vybava_optional:["havarijne_objem","havarijne_hmotnost","havarijne_rokvyroby","havarijne_auto_prevodovka","havarijne_auto_registracia","havarijne_auto_pocet_sedadiel","havarijne_auto_karoseria"],vybava_additional_label:"havarijne_auto_vybava_label",delay:1e3,holding:!1,time:""}},created(){this.request_vybava()},methods:{request_vybava(){if(null===this.cached_vybava)return;let e,t=this.vybava_required.length;for(e=0;e<t;e++)if(""===this.cached_vybava[this.vybava_required[e]])return;let i=structuredClone(this.cached_vybava);for(let a in i)i.hasOwnProperty(a)&&this.vybava_optional.indexOf(a)>-1&&(""===i[a]||void 0===i[a])&&delete i[a];i.hasOwnProperty(this.vybava_date)&&(i[this.vybava_date]=k.A.format_car_request_date(i[this.vybava_date])),i=k.A.serialize_object(i),Qe.A.car_valuation_options(i).then((e=>{this.options={};let t=e.result.data;for(let a in t)t.hasOwnProperty(a)&&(this.options[a]={value:t[a].havarijne_auto_vybava,label:t[a].label_havarijne_auto_vybava},this.options[a].value==(0,y.A)().get_form_value(this.field_id)&&(this.displayed=this.options[a].label));let i=!0;for(let a in this.options){if(!this.options.hasOwnProperty(a))continue;let e=this.options[a].label;e===this.displayed+""&&(i=!1)}i&&(this.displayed="")}))}},computed:{cached_vybava(){if(this.field_id!==this.vybava_id)return null;let e,t={},i=this.vybava_watch.length;for(e=0;e<i;e++){let i=this.vybava_watch[e];t[i]=(0,y.A)().get_form_value(i)}return t}},watch:{cached_vybava(){!0===this.holding&&clearTimeout(this.time),this.holding=!0,this.time=setTimeout((()=>{this.holding=!1,this.request_vybava()}),this.delay)}}};var dt=nt,rt={props:{field_id:String,field_data:Object},components:{},emits:[],mixins:[lt,dt],data(){return{displayed:"",options:{},selected:-1,shown:!1,dont_filter_yet:!0}},created(){if(!this.dynamic.hasOwnProperty(this.field_id)&&this.field_id!==this.vybava_id)for(let e in this.field_data.enum){if(!this.field_data.enum.hasOwnProperty(e))continue;let t=k.A.enum_value(this.field_data.enum[e]),i=k.A.enum_label(this.field_data.enum[e]);""!==t&&(this.options[e]={value:t,label:i},t==(0,y.A)().get_form_value(this.field_id)&&(this.displayed=i))}},methods:{move_down(){this.selected++,this.selected>this.filtered_options.length-1&&(this.selected=0)},move_up(){this.selected--,this.selected<0&&(this.selected=this.filtered_options.length-1)},enter_selection(){if(-1!==this.selected&&void 0!==this.filtered_options[this.selected]&&((0,y.A)().set_form_value(this.field_id,this.filtered_options[this.selected].value),this.displayed=this.filtered_options[this.selected].label,this.shown=!1,this.field_id===this.vybava_id)){let e="";for(let t in this.field_data.enum){if(!this.field_data.enum.hasOwnProperty(t))continue;let i=Object.keys(this.field_data.enum[t])[0];i===event_value&&(e=this.field_data.enum[t][i])}(0,y.A)().insert_form_value_without_interaction(this.vybava_additional_label,e)}},click_selection(e){this.selected=e,this.enter_selection()},remove_previous_value(){this.dont_filter_yet=!1;let e=!1;for(let t in this.options)this.options.hasOwnProperty(t)&&this.displayed===this.options[t].label&&(e=!0);!1===e&&((0,y.A)().delete_form_value(this.field_id),this.shown=!0),setTimeout((()=>{1===Object.keys(this.filtered_options).length&&(this.selected=0,this.enter_selection())}),1e3)},show_list(){this.dont_filter_yet=!0,this.shown=!0},hide_with_delay(){setTimeout((()=>{this.shown=!1}),500)}},computed:{filtered_options(){if(this.dont_filter_yet)return this.options;let e=[];for(let t in this.options){if(!this.options.hasOwnProperty(t))continue;let i=k.A.slugify(this.options[t].label),a=k.A.slugify(this.displayed);-1!==i.indexOf(a)&&e.push(this.options[t])}return e},is_disabled(){return(0,_.A)().is_read_only()},searchable_in_state_changed(){return(0,y.A)().get_form_value(this.field_id)}},watch:{searchable_in_state_changed(){let e=this.searchable_in_state_changed;if(""!==e)for(let t in this.options)if(this.options.hasOwnProperty(t)&&this.options[t].value===e)return void(this.displayed=this.options[t].label)}}};const ot=(0,w.A)(rt,[["render",at]]);var _t=ot,ut=i(3327);const ht={class:"switch-group"},ct=["id","name","placeholder","maxlength","disabled"],pt={class:"input-feedback-wrap"},ft=["innerHTML"];function vt(e,t,i,s,l,d){const r=(0,a.g2)("Bouncer_loading");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",ht,[(0,a.Lk)("div",{onClick:t[0]||(t[0]=e=>l.type=1),class:(0,n.C4)(["switch-label",1===l.type?"active":""])},"EČV",2),(0,a.Lk)("div",{onClick:t[1]||(t[1]=e=>l.type=2),class:(0,n.C4)(["switch-label",2===l.type?"active":""])},"VIN",2)]),(0,a.bo)((0,a.Lk)("input",{id:i.field_id,name:i.field_id,"onUpdate:modelValue":t[2]||(t[2]=e=>d.value=e),onKeydown:t[3]||(t[3]=(...e)=>d.filter_bad_input&&d.filter_bad_input(...e)),onKeyup:t[4]||(t[4]=(0,C.jR)(((...e)=>d.search_car&&d.search_car(...e)),["enter"])),placeholder:1===l.type?"AB  123CD":"ZFA123456789WERTZ",maxlength:l.max_length,disabled:"loading"===l.status||d.is_disabled,ref:"input_reference",type:"text",class:(0,n.C4)(["form-control input-ecv-vin",2===l.type?"vin":""]),autocomplete:"off"},null,42,ct),[[C.Jo,d.value]]),(0,a.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>d.search_car&&d.search_car(...e)),class:"btn btn-search"}),(0,a.Lk)("div",pt,[(0,a.Lk)("div",{innerHTML:d.spz_feedback,class:(0,n.C4)(["input-feedback",l.status])},null,10,ft),(0,a.bo)((0,a.bF)(r,{size:"small",class:"ps-3"},null,512),[[C.aG,"loading"===l.status]])])],64)}var mt={props:{field_id:String,field_data:Object},components:{Bouncer_loading:g.A},emits:[],data(){return{debug:!1,type:1,status:"ready",min_length:5,spz_length:7,max_length:17,had_spaces:!1,autorun_running:!1,autorun_handle:{},autorun_delay:2e3}},created(){},methods:{filter_bad_input(e){/[a-z0-9]/gi.test(e.key)||e.preventDefault()},format_spz(e){if(this.status="ready",e+="",e=k.A.keep_only_letters_and_numbers(e),e=e.toUpperCase(),e.length>this.spz_length?this.type=2:this.type=1,2===this.type||e.length<3)return e;let t=[e.slice(0,2),e.slice(2)];return e=t.join("  "),e},cursor_spz(e){let t=this.$refs.input_reference?.selectionEnd;this.$nextTick((()=>{let i=null!==e.slice(0,t).match(/\s/g);!this.had_spaces&&i?t+=2:this.had_spaces&&!i&&(t-=2),this.$refs.input_reference.setSelectionRange(t,t)}))},search_car(){if(this.spaceless_length<this.min_length||"loading"===this.status)return;clearTimeout(this.autorun_handle),this.autorun_running=!1;let e=this.value.replace(/\s/g,"");if(this.status="loading",this.debug)return console.log("run api:",e,structuredClone(this.type),structuredClone(this.status)),void setTimeout((()=>{this.status=0===Math.round(Math.random())?"error":"success",this.$nextTick((()=>{this.$refs.input_reference.focus()}))}),1e3);Promise.resolve().then((()=>{let t=1===this.type?"spz":"vin";return Qe.A.car_data_search(t,e)})).then((t=>{if(200===t.status&&0===t.result.data?.length){let t=2===this.type?"spz":"vin";return Qe.A.car_data_search(t,e)}return Promise.resolve(t)})).then((e=>{if(200===e.status&&0!==e.result.data?.length){let t={};return t="object"===typeof e.result.data?.[0]?e.result.data[0]:e.result.data,(0,y.A)().set_multiple_form_values(t),void(this.status="success")}this.status="error",this.$nextTick((()=>{this.$refs.input_reference.focus()}))}))}},computed:{is_disabled(){return(0,_.A)().is_read_only()},spz_feedback(){if("error"===this.status)return"Vozidlo sa nenašlo v databáze vozidiel. Zadajte údaje o vozidle nižšie.";if("success"===this.status){let e=1===this.type?"EČV":"VIN";return"Predvyplnené údaje pre vozidlo s "+e+" <strong>"+this.value+"</strong>."}if("loading"===this.status)return"Vyhľadávame vozidlo...";if("ready"===this.status&&1===this.type){if(7===this.spaceless_length)return"Pre vyhľadanie vozidla s EČV <strong>"+this.value+'</strong><span class="hide_on_mobile"> stlačte Enter alebo</span> kliknite na Lupu.';if(0===this.spaceless_length)return"Zadajte EČV alebo VIN číslo vozidla.";let e=1===this.spaceless_length?"znak":this.spaceless_length>1&&this.spaceless_length<5?"znaky":"znakov";return"Zadali ste <strong>"+this.spaceless_length+"</strong> "+e+". EČV má 6 alebo 7 znakov."}return"ready"===this.status&&2===this.type?17===this.spaceless_length?"Pre vyhľadanie vozidla s VIN <strong>"+this.value+'</strong><span class="hide_on_mobile"> stlačte Enter alebo</span> kliknite na Lupu.':"Zadali ste <strong>"+this.spaceless_length+"</strong> znakov. VIN zvykne mať vačšinou 17 znakov.":"Neznáma situácia. "+this.status+" | "+this.type+" | "+this.spaceless_length},value:{get(){let e=(0,y.A)().get_form_value(this.field_id);return e=this.format_spz(e),this.cursor_spz(e),e},set(e){let t=this.$refs.input_reference?.selectionEnd;this.had_spaces=null!==e.slice(0,t).match(/\s/g),(0,y.A)().set_form_value(this.field_id,e.replace(/\s/g,"").toUpperCase())}},spaceless_length(){return this.value.replace(/\s/g,"").length}},watch:{spaceless_length(){if(this.autorun_running||![this.spz_length,this.max_length].includes(this.spaceless_length))return clearTimeout(this.autorun_handle),void(this.autorun_running=!1);this.autorun_running=!0,this.autorun_handle=setTimeout((()=>{this.search_car(),this.autorun_running=!1}),this.autorun_delay)}}};const gt=(0,w.A)(mt,[["render",vt]]);var bt=gt,yt={props:{field_id:String,field_data:Object},components:{Checkbox:h.A,File:j,Option:Option,Plaintext:z.A,Radio:W,Select:V.A,Text:I.A,Textarea:$,Acceptance:J,Checkbox_icon:se,Coverage:_e,Datepicker:ue.A,Iban:ve,Multiple:me.A,Plus_minus:je,Psc:Ie,Scan_modal:De,Search:Ye,Select_searchable:_t,Slider:ut.A,Spz:bt},data(){return{type:""}},created(){"text"===this.field_data.type&&"true"===this.field_data.type_settings?.plus_minus?this.type="plus_minus":"checkbox"===this.field_data.type&&void 0!==this.field_data.type_settings?.checkbox_icon&&""!==this.field_data.type_settings?.checkbox_icon?this.type="checkbox_icon":"text"!==this.field_data.type||"scan_modal"!==this.field_data.type_settings?.upload&&"veriface_modal"!==this.field_data.type_settings?.upload?k.A.ends_with(this.field_id,"psc_mesto")?this.type="psc_input":"select"===this.field_data.type&&"multiple"===this.field_data.type_settings?.select_type?this.type="multiple":"select"===this.field_data.type&&(k.A.ends_with(this.field_id,"auto_znacka")||k.A.ends_with(this.field_id,"auto_model")||k.A.ends_with(this.field_id,"auto_vybava")||"searchable"===this.field_data.type_settings.select_type)?this.type="select_searchable":"text"===this.field_data.type&&"iban"===this.field_data.type_settings?.visual_formatting?this.type="iban":this.type=this.field_data.type:this.type="scan_modal"}};const kt=(0,w.A)(yt,[["render",u]]);var At=kt,wt=i(6488);const xt={class:"validation-placeholder validation-message"};function jt(e,t,i,s,l,d){return(0,a.uX)(),(0,a.CE)("div",xt,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.has_error,(e=>((0,a.uX)(),(0,a.CE)("span",null,[t[0]||(t[0]=(0,a.Lk)("span",{class:"mark-circle mark-orange"},"!",-1)),(0,a.eW)(" "+(0,n.v_)(e),1)])))),256))])}var zt={props:{has_error:Array},components:{},emits:[],data(){return{}},created(){},methods:{},computed:{},watch:{}};const Ct=(0,w.A)(zt,[["render",jt]]);var Et=Ct,Ot=i(2095);const Xt={key:0,class:"fe_validators"},Lt={class:"mb-0"},Tt={class:"mb-0"};function Pt(e,t,i,s,l,d){return d.allow_validators?((0,a.uX)(),(0,a.CE)("div",Xt,[l.debug?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:0},(0,a.pI)(i.field_data.validators,((e,i)=>((0,a.uX)(),(0,a.CE)("span",null,[(0,a.Lk)("strong",null,(0,n.v_)(e.type),1),(0,a.eW)(" "+(0,n.v_)(e.validation)+" ",1),t[0]||(t[0]=(0,a.Lk)("br",null,null,-1))])))),256)):(0,a.Q3)("",!0),(0,a.Lk)("ul",Lt,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.reports,((e,i)=>((0,a.uX)(),(0,a.CE)("li",Tt,[(0,a.eW)((0,n.v_)(e),1),t[1]||(t[1]=(0,a.Lk)("br",null,null,-1))])))),256))])])):(0,a.Q3)("",!0)}var St=i(7928),Wt={props:{field_id:String,field_data:Object},components:{},emits:[],data(){return{debug:!1,reports:[]}},created(){},methods:{},computed:{allow_validators(){return!0===this.field_data.input_settings?.fe_validators},input_changed(){return this.allow_validators?(0,y.A)().get_form_value(this.field_id):null}},watch:{input_changed(){this.debug&&console.log("running validators for:",structuredClone(this.field_id)),this.reports=[];for(let e in this.field_data.validators){let t=this.field_data.validators[e].type,i=this.field_data.validators[e].validation,a=this.field_data.validators[e].messages;if("Application_Model_Validators_Integer"===t)isNaN(this.input_changed)&&(this.debug&&console.log("didnt pass:","Application_Model_Validators_Integer"),this.reports.push(a));else if("Zend_Validate_Regex"===t){let e=new RegExp(i.substring(1,i.length-1));e.test(this.input_changed)||(this.debug&&console.log("didnt pass:","Zend_Validate_Regex"),this.reports.push(a))}else if("Application_Model_Validators_ValueRevalidation"===t)St.A.revalidation(i)&&(this.debug&&console.log("didnt pass:","Application_Model_Validators_ValueRevalidation"),this.reports.push(a));else if("Application_Model_Validators_FullString"===t){let e=new RegExp(/[^a-zA-Z0-9ľĺĹščćťžýáíéňäúďřŕŔóÓôěĚöÖüÜĽŠČŤŽÝÁÍÉŇÄÚĎŘŮůőŐűŰ+--–\\)(&@§€#\/%?=!:_,.; \r\n\t\s]/u);e.test(this.input_changed)&&(this.debug&&console.log("didnt pass:","Application_Model_Validators_FullString"),this.reports.push(a))}}}}};const Vt=(0,w.A)(Wt,[["render",Pt]]);var It=Vt,Kt={props:{field_id:String,field_data:Object},components:{Input_switcher:At,Errors:Et,Tooltip:Ot.A,Frontend_validators:It},emits:[],data(){return{}},created(){},methods:{},computed:{inputs(){let e={};if(void 0===this.field_data.elements)e[this.field_id]=this.field_data;else for(let t in this.field_data.elements){if(!this.field_data.elements.hasOwnProperty(t))continue;let i,a;k.A.contains_only_digits(t)?(a=k.A.first_key(this.field_data.elements[t]),i=this.field_data.elements[t][a]):(a=t,i=this.field_data.elements[a]);let s={[a]:i};wt.A.visibility_boolean(s)&&(e[a]=i)}return e},has_error(){let e=(0,Le.A)().get_errors(),t=[];for(let i in this.inputs)if(this.inputs.hasOwnProperty(i)&&e.hasOwnProperty(i))for(let a in e[i])e[i].hasOwnProperty(a)&&t.push(e[i][a].replace("not_decimal","nesprávny formát desatinného čísla"));return t},error_class(){return this.zeteo_wrap||0===this.has_error.length?"":"validation-error"},internal_error_space(){return!!this.field_data?.type_settings?.upload},bootstrap_classes(){return this.zeteo_wrap?"input-block--alt":"d-flex align-items-start align-items-sm-center flex-column"},zeteo_wrap(){return(0,_.A)().is_zeteo_skin()},columns(){if(this.zeteo_wrap&&1===(0,_.A)().current_step()&&void 0===this.field_data.elements&&"plaintext"!==this.field_data.type)return"col-sm-6 col-lg-3";let e="";if(void 0!==this.field_data.block_settings&&null!==this.field_data.block_settings)e=this.field_data.block_settings.size;else{if(void 0===this.field_data.type_settings||null===this.field_data.type_settings)return"col-12";e=this.field_data.type_settings.size}return"full"===e?"col-12":"half"===e?"col-lg-6":"third"===e?"col-lg-4":"col-12"},required(){return""},blank(){return"blank"===this.field_data.type_settings?.design?"input-block-blank":""},hide(){return void 0===this.field_data.elements?this.field_data["data-hide-condition"]:this.field_data["block_hide_condition"]},label_size(){return"fullwidth"===this.field_data.type_settings?.label_size?"input-label-full":"flex-sm-row"},label_style(){return"h1"===this.field_data.type_settings?.plaintext_style?"label-plaintext-h1":"h2"===this.field_data.type_settings?.plaintext_style?"label-plaintext-h2":""},label(){return"checkbox"!==this.field_data.type&&"acceptance"!==this.field_data.type&&("checkbox_collapse"!==this.field_data.block_settings?.block_layout&&"checkbox_text"!==this.field_data.block_settings?.block_layout&&(void 0===this.field_data.elements?this.field_data.label:this.field_data.block_label))},input_block_class(){return"spz"===this.field_data.type?"flex-md-nowrap":void 0===this.field_data.elements?"":"select_text"===this.field_data.block_settings?.block_layout?"input-mixed input-select-text":"checkbox_collapse"===this.field_data.block_settings?.block_layout&&"large"===this.field_data.block_settings?.icon_button_size?"input-mixed input-onoff large_icon-onoff":"checkbox_collapse"===this.field_data.block_settings?.block_layout?"input-mixed input-onoff":"checkbox_text"===this.field_data.block_settings?.block_layout?"input-mixed input-fifty-fifty":"input-mixed"},tooltip(){return this.field_data?.description?this.field_data.description.replace(/\r\n/g,"<br>").replace(/&quot;/g,'"'):!!this.field_data?.block_input_hint&&this.field_data.block_input_hint.replace(/\r\n/g,"<br>").replace(/&quot;/g,'"')}},watch:{}};const Mt=(0,w.A)(Kt,[["render",o]]);var Ft=Mt,Rt={props:{},components:{Wrap:Ft},data(){return{}},methods:{field_id(e){return k.A.first_key(e)},field_data(e){return k.A.first_value(e)}},computed:{compute_active_tab(){return k.A.active_tab()}}};const $t=(0,w.A)(Rt,[["render",l]]);var Dt=$t}}]);